{"version":3,"sources":["Service/UserService.jsx","components/ManageChangePassword/ChangePassword.jsx","assets/image/logo.png","components/ManageAlertProcessingBackdrop/AlertProcessingBackdrop.jsx","context/UserContext.jsx","Service/SignalService.jsx","components/Nav/Header.jsx","routes/PrivateRoutes.js","components/ErrorPage/Page404.js","components/Home/Home.jsx","components/ManageRegister/Register.jsx","Service/MedicalService.jsx","components/LoginAccount/Log-in.jsx","components/ManageAlertProcessing/AlertProcessing.jsx","Service/PlaceService.jsx","components/ManageInfoPantients/ManageInfoPantients.jsx","components/MedicalRegister/ListPatientsRegister.jsx","components/ManageExaminingSession/ExaminingSession.jsx","components/ManageOldDisease/OldDisease.jsx","components/ManageOldDisease/OldDiseaseForRegister.jsx","components/MedicalRegister/BookMedical.jsx","components/MedicalRegister/MainMedicalRegister.jsx","components/MedicalAppointment/MainAppointmentExamining.jsx","components/ManageCompleteExamining/CompleteExamining.jsx","components/DoctorExamining/PreviewLastExamining.jsx","components/DoctorExamining/MainDoctorExamining.jsx","Service/StatisticsService.jsx","components/Dashboard/MainDashboard.jsx","components/ManageAddUser/AddUser.jsx","components/Dashboard/MainListUser.jsx","routes/AppRoutes.js","App.js","reportWebVitals.js","index.js"],"names":["backendURL","ChangePassword","props","inputPasswordDefault","currentPassword","openCurrentPassword","newPassword","openNewPassword","inputPassword","setInputPassword","useState","loading","setLoading","handleCloseModalChangePassword","event","reason","setIsDialogChangePasswordOpen","setOpenModalChangePassword","setTimeout","handleChangePassword","async","Promise","resolve","handleValidate","isValid","toast","warning","toastId","inputPayloadPassword","password","passwordOld","responseUpdatePassword","token","localStorage","getItem","axios","put","concat","headers","Authorization","then","response","catch","error","updatePassword","status","data","success","_jsx","_Fragment","children","_jsxs","Dialog","maxWidth","fullWidth","open","openModalChangePassword","onClose","disableEscapeKeyDown","DialogTitle","sx","m","p","fontWeight","fontSize","IconButton","onClick","position","right","top","CloseIcon","DialogContent","dividers","display","flexDirection","alignItems","style","justifyContent","CircularProgress","TextField","autoFocus","label","variant","type","width","mb","onChange","e","value","_inputPassword","onChangeNewPassword","target","InputProps","endAdornment","InputAdornment","handleClickShowNewPassword","padding","VisibilityIcon","VisibilityOffIcon","onChangeCurrentPassword","handleClickShowCurrentPassword","Stack","spacing","direction","Button","height","color","margin","AlertProcessingBackdrop","Backdrop","zIndex","theme","drawer","backgroundColor","changeBackground","openAlertProcessingBackdrop","Box","Typography","mt","alertTitle","UserContext","React","createContext","UserProvider","_ref","userDefault","isAuthenticated","isLogin","user","setUser","alertVisible","setAlertVisible","isLogOutClick","setIsLogOutClick","onConfirm","setOnConfirm","setOpenAlertProcessingBackdrop","isDialogChangePasswordOpen","isOldDiseaseWithNullCodeWard","setIsOldDiseaseWithNullCodeWard","resetAlert","checkJWTExpire","result","getJWT","decodeJWT","JSON","parse","atob","split","parseJwt","currentDate","Date","exp","getTime","removeItem","sessionStorage","clear","useEffect","getUserLogin","Provider","loadingContext","loginContext","userContextLogin","logoutContext","triggerAlert","confirmCallback","confirmAlert","connection","startSignalRConnection","signalR","withUrl","accessTokenFactory","transport","WebSockets","ServerSentEvents","LongPolling","withAutomaticReconnect","configureLogging","Information","build","start","on","message","onReceiveMessage","callback","withRouter","useContext","location","useLocation","history","useHistory","anchorEl","setAnchorEl","Boolean","actionNursing","key","icon","LocalHospitalIcon","LinkComponent","NavLink","to","LocalPhoneIcon","actionDoctor","MedicationLiquidIcon","actionAdmin","BarChartIcon","SettingsSuggestIcon","userAction","setUserAction","pathname","findIndex","action","handleLogout","positionName","invoke","removeFromGroup","push","AppBar","Toolbar","Avatar","src","Logo","mr","BottomNavigation","showLabels","flexGrow","map","actionItem","BottomNavigationAction","handleClick","preventDefault","currentTarget","textTransform","userFullName","Menu","MenuItem","exact","PrivateRoutes","Route","path","component","Redirect","Page404","className","Home","Container","ml","CreateAccount","showPassword","setShowPassword","handleCloseModalRegister","setOpenModalRegister","openModalRegister","handleClickShowPassword","Autocomplete","options","id","option","renderInput","params","createConfig","createMedicalBackRegister","post","dataPatientsRegister","createAddPredecessor","dataPredecessor","createNotificationForMedicalRegister","getRegistersByDateNow","config","get","getListMedicalExaminationsGiveRegister","dayOfBirth","getListOldDisease","patientCode","phone","fullName","getVaccinationByPatientId","patientId","getMedicalDetailPatient","getMedicalBook","medicalRegisterId","getUpdatePredecessor","getAppointmentsNextWeek","updateMedicalState","state","updateStateAppointment","dataAppointment","stateAppointment","medicalBookId","appointmentDate","Login","userAccount","setUserAccount","userName","handleLogin","userLogin","tokenDTO","setItem","userId","stringify","handleKeyDown","document","addEventListener","removeEventListener","borderRadius","textAlign","autoComplete","onChangeUserName","prevUserAccount","onChangeUserPassword","onKeyDown","which","code","handlePressEnter","cursor","Register","AlertProcessing","openAlertProcessing","getListProvince","getListDistrict","provinceId","getListWard","districtId","getFullAddressByIdWard","codeWard","ManageInfoPantients","dataPatientInfoDefault","examinationId","weight","headCircumference","vaccination","patient","identifier","address","gender","fullNameMother","phoneMother","fullNameFather","phoneFather","dataPatientInfoErrorDefault","title","isError","openTooltip","focus","examiningSession","province","district","ward","listGender","genderOrder","genderName","genderValue","selectedAutoCompleteDefault","openOption","typingRef","useRef","dateFieldRef","dataPatientInfoNotEdit","setDataPatientInfoNotEdit","dataPatientInfo","setDataPatientInfo","dataPatientInfoError","setDataPatientInfoError","selectedAutoComplete","setSelectedAutoComplete","listExaminingSession","setListExaminingSession","listProvince","setListProvince","listDistrict","setListDistrict","list","listWard","setListWard","focusField","setFocusField","setOpenAlertProcessing","tooltipTheme","createTheme","components","MuiTooltip","defaultProps","placement","arrow","componentsProps","tooltip","bgcolor","slotProps","popper","modifiers","name","offset","handleFocus","fieldName","prevSelectedAutoComplete","handleBlur","test","filterOptions","inputValue","lowercasedInput","toLowerCase","filter","lowercasedFullName","initials","word","join","includes","onChangeDOBToGetExaminingSession","responseListMedicalExaminationsGiveRegister","formattedDate","exams","handleCloseModalInfoPantients","prevListDistrict","prevListWard","setSelectedPantientInfo","setOpenModalInfoPantients","handleUpdateMedicalRegister","checkValidate","_dataPatientInfoError","Object","values","every","item","current","_","isEqual","updateMedicalRegister","setCompleteMedicalRegister","setIsEditedInfo","length","responseListProvince","handleGetListProvince","selectedPantientInfo","setIsContinueUpdateMedicalRegister","editPropsDataPatientInfo","cloneDeep","responseListDistrict","provinceCode","responseListWard","districtCode","selectedGender","find","indexListExamining","indexListProvince","indexListDistrict","indexListWard","wardCode","handleApplyPantientDataToField","openModalInfoPantients","isContinueUpdateMedicalRegister","pt","pb","flexWrap","pl","pr","ThemeProvider","Tooltip","marginTop","inputProps","maxLength","inputRef","input","defaultValue","takenValue","clearInterval","prevDataPatientsRegister","onChangeIdentifier","prevDataPatientInfo","onChangeFullName","getOptionLabel","renderOption","onSelectGender","onFocus","onBlur","disableClearable","popupIcon","LocalizationProvider","dateAdapter","AdapterMoment","adapterLocale","DemoContainer","DatePicker","format","moment","disableFuture","disableOpenPicker","textField","_d","today","yearsDifference","getFullYear","monthsDifference","getMonth","daysDifference","getDate","age","totalMonths","totalDays","isNaN","onChangeDOB","noOptionsText","onSelectExaminingSession","size","onSelectProvine","onSelectDistrict","onSelectWard","onChangeAddress","onChangeFullNameMother","onChangePhoneMother","onChangeFullNameFather","onChangePhoneFather","onChangeHeight","onChangeWeight","onChangeHeadCircumference","FormControlLabel","control","Checkbox","checked","onChangeVaccination","bool","DialogActions","ListPatientsRegister","activeChip","setActiveChip","chipOrder","chipLabel","listPantientChipState","setListPantientChipState","chipContent","listDataPatientsRegister","setListDataPatientsRegister","listDataPatientsAppointmentsToday","setListDataPatientsAppointmentsToday","searchPatientsQuery","setSearchPatientsQuery","listDataPatientsRegisterState","setListDataPatientsRegisterState","listDataPatientsRegisterSort","setListDataPatientsRegisterSort","isEditedInfo","searchPatients","patients","searchTerm","lowerCaseSearchTerm","patientObj","handleGetRegistersByDateNow","responseGetAppointmentsToday","getAppointmentsToday","_listDataPatientsAppointmentsToday","updatedList","patientFullName","dateOfBirth","fullAddress","nextExamId","listPantientRegisterWaiting","patientsRegisterItem","listCountState","listPantientRegisterDone","setComponent1Loading","keyCode","completeMedicalRegister","border","boxShadow","pantientChipStateItem","pantientChipStateIndex","Badge","badgeContent","Chip","handleSelectedChip","chipIndex","CachedIcon","titleAccess","handleReloadGetRegistersByDateNow","placeholder","handleSearchPantient","startAdornment","SearchIcon","TableContainer","Paper","overflowX","borderBottomLeftRadius","borderBottomRightRadius","Table","stickyHeader","minWidth","TableHead","TableRow","TableCell","align","TableBody","patientsRegisterSortItem","patientsRegisterSortIndex","hover","role","onDoubleClick","responseVaccinationByPatientId","dataPantientOldOldDiseaseRegister","oldDisease","medicalTypeId","userIdDoctor","setDataPantientAppointmentsToday","handleSelectedPantientAppointmentsToday","handleSelectedPantientInfo","order","whiteSpace","overflow","textOverflow","ExaminingSession","isConfirmOpen","setIsConfirmOpen","handleListMedicalExaminationsGiveRegister","getListMedicalExaminationsGiveOldRegister","handleMedicalRegister","isAppointment","oldExams","setIsContinueSelectedExaminingSession","setOpenModalExaminingSession","handleResetField","createMedicalRegister","handleOpenConfirm","openModalExaminingSession","isContinueSelectedExaminingSession","monthsOfAge","Grid","container","rowSpacing","xs","oldExamItem","oldExamIndex","RadioGroup","onChangeRadioSelect","examItem","examIndex","Radio","OldDisease","dataPatientsForSearchOldDiseaseDefault","dataPatientsForSearchOldDiseaseErrorDefault","listFoundOldDisease","setListFoundOldDisease","dataPatientsForSearchOldDisease","setDataPatientsForSearchOldDisease","dataPatientsForSearchOldDiseaseError","setDataPatientsForSearchOldDiseaseError","selectedRowIndex","setSelectedRowIndex","formRef","tableRef","handleEnterPress","_dataPatientsForSearchOldDiseaseError","handleCloseModalOldDisease","setOpenModalOldDisease","handleFindOldDisease","reset","querySelectorAll","forEach","dispatchEvent","Event","bubbles","handleClickFindOldDisease","validate","handleApplyDataPatientOldDisease","foundOldDiseaseItem","oldDiseaseWithNullCodeWard","setDataPatientsRegister","openModalOldDisease","ref","prevDataPatientsForSearchOldDisease","onChangePatientId","date","onChangeDayOfBirth","onChangePhone","tabIndex","prevIndex","Math","min","max","handleTableKeyDown","foundOldDiseaseIndex","selected","OldDiseaseForRegister","handleCloseOldDiseaseRegister","setOpenOldDiseaseRegister","openOldDiseaseRegister","listOldDiseaseRegister","BookMedical","dataPatientsRegisterDefault","autocompleteValueDefault","medicalType","dataPatientsRegisterErrorDefault","listMedicalType","medicalTypeOrder","medicalTypeName","setListOldDiseaseRegister","dataPatientsRegisterError","setDataPatientsRegisterError","autocompleteValue","setAutocompleteValue","firstFocusRef","nextFieldId","nextField","getElementById","select","replaceSpecialCharacters","str","replace","normalizedInput","prevAutocompleteValue","_dataPatientsRegisterError","dataPantientAppointmentsToday","handleMedicalBackRegister","responseCreateMedicalBackRegister","handleOpenModalOldDisease","_autocompleteValue","indexListGender","indexListMedicalType","handleApplyPantientOldDiseaseData","handleApplyPantientAppointmentsTodayData","onF2Press","setOnF2Press","onF4Press","setOnF4Press","onF8Press","setOnF8Press","minHeight","PopperProps","disabled","WebkitTextFillColor","InputLabelProps","shrink","DateField","disablePortal","onSelectMedicalType","paddingLeft","paddingRight","multiline","rows","onChangeReason","MainMedicalRegister","component1Loading","setHandleResetField","handleOpenModalExaminingSession","setHandleOpenModalExaminingSession","setHandleOpenModalOldDisease","marginLeft","Skeleton","MainAppointmentExamining","listPantientAppointmentChipState","listAppointment","setListAppointment","listDataPatientsAppointmentPaginate","setListDataPatientsAppointmentPaginate","listDataPatientsAppointmentState","setListDataPatientsAppointmentState","listDataPatientsAppointmentSort","setListDataPatientsAppointmentSort","page","setPage","pageCount","setPageCount","setDataAppointment","handlePaginate","calculatedPageCount","ceil","startIndex","newCurrentItems","slice","handleAcceptReExamining","findDataAppointment","responseUpdateStateAppointment","responseGetAppointmentsNextWeek","_listAppointmentNotRemind","_listAppointmentAcceptReExamining","_listAppointmentRejectReExamining","updateListPantientAppointmentChipState","dataAppointmentNotRemind","dataAppointmentAcceptReExamining","dataAppointmentRejectReExamining","handleRejectReExamining","handleGetAppointmentsNextWeek","pantientAppointmentChipStateItem","pantientAppointmentChipStateIndex","dataPantientAppointmentItem","dataPantientAppointmentIndex","examNameOld","nextExamName","disablePast","minDate","onChangeAppointmentDate","convertAppointmentDateFindDataAppointment","CheckIcon","CancelIcon","Pagination","count","handlePageChange","CompleteExamining","mainDataExaminingForConclusion","setMainDataExaminingForConclusion","textareaRef","classes","makeStyles","root","useStyles","handleCloseModalCompleteExamining","setOpenModalCompleteExamining","handleSetDataCompleteExamining","editDataExaminingForConclusion","clone","dataExaminingForConclusion","categories","categoriesItem","categoryContents","categoryContentsItem","categoryContentQuestions","responseAppointmentDate","getAppointmentDate","isVaccination","nextVaccination","reminder","conclusion","setSelectionRange","handleAddMedicalBook","some","isPredecessor","categoryPres","categoriesHealthRecordExamining","isHealthRecord","responseAddMedicalBook","dataMedicalBook","createAddMedicalBook","handleCompleteExaminingForPantient","openModalCompleteExamining","List","categoriesIndex","categoryName","categoryContentsIndex","marginBottom","categoryContentTitle","questionItem","questionIndex","borderRight","categoryContentName","categoryContentQuestionType","CheckBoxIcon","lineHeight","categoryContentCheck","categoryContentText","borderTop","categoryContentQuestionName","categoryContentAnswer","TextareaAutosize","categoryContentNote","onChangeExaminingConclusion","prevMainDataExaminingForConclusion","locale","PreviewLastExamining","previewDataExamining","setPreviewDataExamining","healthRecords","examinationName","timeUpdateState","medicakBook","nutritionals","vaccinationBook","loadingMedicalBook","setLoadingMedicalBook","openCollapsePredecessorItem","setOpenCollapsePredecessorItem","openCollapseMedicakBookItem","setOpenCollapseMedicakBookItem","prevDataExamining","responseMedicalBook","healthRecordsItem","newPredecessor","healthRecordsUpdate","newMedicalBook","medicalBookIdRecently","sort","a","b","categoryOrder","handleEditPrevDataExamining","predecessorItem","predecessorIndex","ListItemButton","prevOpen","newOpen","handleOpenPredecessorItem","ListItemIcon","transform","SendIcon","ListItemText","primary","Collapse","in","timeout","unmountOnExit","predecessorItemCategoryContentsItem","predecessorItemCategoryContentsIndex","medicakBookItems","medicakBookIndex","handleOpenMedicakBookItem","medicakBookCategoryContentsItem","medicakBookCategoryContentsIndex","doctorFullName","MainDoctorExamining","dataPantientsReadyExaminingDefault","stt","patientsId","patientsName","patientsDOB","patientsMonthsOld","patientsGender","patientsHeight","patientsWeight","patientsHeadCircumference","patientsPhone","patientsAddress","isFormDirty","setIsFormDirty","dataPantientsReadyExamining","setDataPantientsReadyExamining","mainDataExamining","setMainDataExamining","setPrevDataExamining","openCollapseHealthRecords","setOpenCollapseHealthRecords","openCollapseHealthRecordsItem","setOpenCollapseHealthRecordsItem","categorySelectedExamining","setCategorySelectedExamining","contentCategorySelectedExamining","setContentCategorySelectedExamining","healthRecordsContents","setHealthRecordsContents","currentHealthRecordExamining","setCurrentHealthRecordExamining","previewPredecessor","setPreviewPredecessor","oldPreviewPredecessor","setOldPreviewPredecessor","setDataExaminingForConclusion","oldDataPredecessor","setOldDataPredecessor","newDataPredecessor","setNewDataPredecessor","prevDataPredecessor","setPrevDataPredecessor","loadingPrevDataExamining","setLoadingPrevDataExamining","loadingPatient","setLoadingPatient","loadingInfoPatient","setLoadingInfoPatient","loadingCategoryExamining","setLoadingCategoryExamining","loadingContentsExamining","setLoadingContentsExamining","handleCancelExamining","editExamining","backRegister","handleDeleteExamining","window","confirm","responseDeleteMedicalBook","delete","deleteMedicalBook","handleStartExaminingButtonClick","handleBeginExaminingForPantient","alert","handleBeginEditExaminingForPantient","handleCompleteExaminingButtonClick","responseListPantient","findPantientIsExam","indexPantient","findListPantientNotExam","handleAppyPantientData","handleGetMedicalDetailPatient","dataPantientItem","_dataPantientsReadyExamining","isContinueExam","_listDataPatientsRegister","findIndexPatient","handleSetMainDataExamining","handleGetCategoryReExamining","editPrevDataExaminingCategoryPres","responseGetUpdatePredecessorItem","matchingPrevDataExamining","prevDataExaminingCategoryPresItem","isLock","content2","content1","categoryContentOrder","matchingContent1","isNullCategoryPres","responseGetUpdateMedicalBook","updateHealthRecordsCategoriesForConclusion","category","content","demoDataExaminingForConclusion","healthRecordsName","categoryPatients","updateCategoriesForConclusion","editCategoryContents","itemCategoryContents","newCategoriesDemoDataExaminingForConclusion","editDataCategoryPresForConclusion","mainCategoryContentsExamining","editDataHealthRecordsForConclusion","categoryPresItem","categoryPresIndex","categoryPresOrder","getUpdateMedicalBook","handleSetMainDataReExamining","responseGetUpdateMedicalBookData","questions","allNull","q","responseGetUpdatePredecessor","handleNoteValueQuestionPredecessorForReExamOrBackExam","_categorySelectedExamining","createSelectedQuestionsValuePredecessorForReExamOrBackExam","categoryContentQuestion","findNewDataPredecessorCategoryOrder","newDataPredecessorCategoryPresItem","findNewDataPredecessorCategoryContents","newDataPredecessorCategoryContentsItem","newDataPredecessorcategoryContentQuestionsItem","categoryContentQuestionOrder","questionIndexRemove","splice","newDataPredecessorCategoryContents","newDataPredecessorCategoryPres","newCategoryPre","createPreviewDataPredecessor","createSelectedQuestionsPredecessorForReExamOrBackExam","isEditNote","questionIndexNoteDontExit","handleSaveNewDataPredecessor","saveNewDataPredecessor","findNewDataPredecessor","responseCreateAddPredecessor","_mainDataExamining","selectCategoryReExamining","handleSelectCategoryClick","responseDataExamining","previewDataPredecessor","flatMap","question","categoryContentDefauls","healthRecordsContentsType","categoryIncludeCotent","findHealthRecord","healthRecordsState","editDataHealthRecordsItemForConclusion","_dataExaminingForConclusion","dataHealthRecordsItemForConclusionItem","handleAnswerValueQuestion","createSelectedQuestionsExaminingForConclusion","handleNoteCheckQuestionHealthRecords","categoryPatientsIndex","categoryPatientsContentsIndex","_healthRecordsContents","questionOrder","existingQuestion","categoryContentQuestionsItem","_previewPredecessor","findQuestion","handleReceiveMessage","medicalRegisterMessage","handleBeforeUnload","confirmationMessage","returnValue","unblock","block","_dataPatientsRegisterSort","handleUnload","reDataPatientsRegisterSort","dataPatientsRegisterSort","reDataPantientsReadyExamining","reMainDataExamining","reDataExaminingForConclusion","reCurrentHealthRecordExamining","rePrevDataPredecessor","reOldDataPredecessor","handleReloadUIWhenExamining","dataPantientIndex","handleSelectPantientExamining","CheckCircleIcon","edge","findUpdatePredecessor","handleEditDataPredecessor","EditIcon","handleEditDataPredecessorForSaving","findOldDataPredecessorCategoryOrder","oldDataPredecessorItem","findNewDataPredecessorCategoryContentsItem","findOldDataPredecessorCategoryContentsItem","newQ","findNewDataPredecessorQuestionItem","contentCategoryContentsItem","removeOldDataPredecessorCategoryPres","BeenhereIcon","handleCancelEditDataPredecessor","findPrevDataPredecessorByCategoryName","prevDataPredecessorItem","removeCategoryPredecessor","findOldDataPredecessorByCategoryOrder","findPreviewPredecessorNotByCategoryOrder","newPreviewPredecessor","handleSelectHealthRecords","healthRecordsIndex","handleSelectHealthRecordsItem","FiberManualRecordIcon","columnSpacing","sm","md","PinIcon","PersonIcon","MaleIcon","FemaleIcon","CalendarMonthIcon","InfoIcon","PhoneIcon","GiBodyHeight","GiWeightScale","TbRulerMeasure","index","handleAnswerCheckQuestionPredecessorForReExamOrBackExam","answer","handleAnswerCheckQuestion","handleNoteCheckQuestionPredecessorForReExamOrBackExam","handleNoteCheckQuestion","DescriptionIcon","timeRegister","categoryPatientsItem","handleOpenHealthRecordsItem","categoryPatientsContentsItem","handleAnswerCheckQuestionHealthRecords","currentHealthRecordsContent","MainDashboard","dateSelectedReport","setDateSelectedReport","dateStart","dateEnd","mainDataDashboard","setMainDataDashboard","loadingDataDashboard","setLoadingDataDashboard","handleGetReportPatient","responseGetReportPatient","getReportPatient","editMainDataDashboard","dayExam","examName","_dateSelectedReport","onChangeDateStart","onChangeDateEnd","DataGrid","localeText","viVN","MuiDataGrid","row","columns","field","headerName","headerAlign","pageSizeOptions","handleExportExcel","GridToolbarContainer","GridToolbarColumnsButton","GridToolbarFilterButton","GridToolbarDensitySelector","startIcon","RiFileExcel2Fill","toolbar","formattedRows","ws","XLSX","json_to_sheet","wb","book_new","book_append_sheet","disableRowSelectionOnClick","AddUser","MainListUser","listUser","setListUser","openModalAddUser","setOpenModalAddlUser","handleGetListUser","responseGetListUser","getListUser","HiUserAdd","handleOpenModalAddUser","setOpenModalUser","AppRoutes","HashRouter","Switch","App","Header","ToastContainer","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2a592e73.chunk.js","sourcesContent":["import axios from \"axios\";\r\n//import SignalService from \"./SignalService.jsx\"\r\n\r\nconst backendURL = 'https://beknkpt2.dvtien.id.vn';\r\n\r\nconst createConfig = () => {\r\n  const token = localStorage.getItem(\"jwt\");\r\n  // Thit lp tiu  \"Authorization\" trong yu cu Axios\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n  return config;\r\n}\r\n\r\nconst userLogin = async (userName, password) => {\r\n  return await axios.post(`${backendURL}/api/UserAccount/Login`, { userName, password })\r\n  .then(function (response) {\r\n    //SignalService.startSignalRConnection(response.data.tokenDTO.token)\r\n      return response\r\n  })\r\n  .catch(function (error) {\r\n    return error.response\r\n  })\r\n};\r\n\r\nconst getUserLogin = async () => {\r\n  const config = createConfig();\r\n  return await axios.get(`${backendURL}/api/UserAccount/GetUserLogin`, config)\r\n  .then(function (response) {\r\n    return response.data\r\n  })\r\n  .catch(function (error) {\r\n    return error.response.status\r\n  })\r\n}\r\n\r\nconst getGetListDoctor = async () => {\r\n  const config = createConfig();\r\n  return await axios.get(`${backendURL}/api/UserAccount/GetDoctors`, config)\r\n  .then(function (response) {\r\n    return response.data\r\n  })\r\n  .catch(function (error) {\r\n    return error.response.status\r\n  })\r\n}\r\n\r\nconst updatePassword = async (inputPayloadPassword) => {\r\n  const token = localStorage.getItem(\"jwt\");\r\n    return await axios.put(`${backendURL}/api/UserAccount/ChangePassword`, inputPayloadPassword, {\r\n        headers: {\r\n            \"content-type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n        },\r\n    })\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nexport {\r\n    userLogin, \r\n    getUserLogin, getGetListDoctor,\r\n    updatePassword\r\n}\r\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//mui theme\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport TextField from '@mui/material/TextField';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { toast } from 'react-toastify';\r\n//api\r\nimport { updatePassword } from '../../Service/UserService';\r\n\r\nfunction ChangePassword(props) {\r\n    const inputPasswordDefault = {\r\n        currentPassword: '',\r\n        openCurrentPassword: false,\r\n        newPassword: '',\r\n        openNewPassword: false\r\n    }\r\n\r\n    const [inputPassword, setInputPassword] = useState(inputPasswordDefault);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleCloseModalChangePassword = (event, reason) => {\r\n        if(reason && reason === \"backdropClick\"){\r\n            return;\r\n        }\r\n        else{\r\n            props.setIsDialogChangePasswordOpen(false);\r\n            props.setOpenModalChangePassword(false);\r\n            setTimeout(() => {\r\n                setInputPassword(inputPasswordDefault);\r\n            }, 200)\r\n        }\r\n    }\r\n\r\n    const handleClickShowCurrentPassword = () => {\r\n        const _inputPassword = {...inputPassword};\r\n        _inputPassword.openCurrentPassword = !inputPassword.openCurrentPassword\r\n        setInputPassword(_inputPassword);\r\n    }\r\n\r\n    const handleClickShowNewPassword = () => {\r\n        const _inputPassword = {...inputPassword};\r\n        _inputPassword.openNewPassword = !inputPassword.openNewPassword\r\n        setInputPassword(_inputPassword);\r\n    }\r\n\r\n    const onChangeCurrentPassword = (value) => {\r\n        const _inputPassword = {...inputPassword};\r\n        _inputPassword.currentPassword = value\r\n        setInputPassword(_inputPassword);\r\n    }\r\n\r\n    const onChangeNewPassword = (value) => {\r\n        const _inputPassword = {...inputPassword};\r\n        _inputPassword.newPassword = value\r\n        setInputPassword(_inputPassword);\r\n    }\r\n\r\n    const handleValidate = () => {\r\n        let isValid = true;\r\n        if(inputPassword.currentPassword === ''){\r\n            toast.warning('Bn cha nhp mt khu hin ti!', {toastId: 'validateCurrentPassword'})\r\n            isValid = false;\r\n        }\r\n        \r\n        if(inputPassword.newPassword === ''){\r\n            toast.warning('Bn cha nhp mt khu mi!', {toastId: 'validateNewPassword'})\r\n            isValid = false\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    const handleChangePassword = async () => {\r\n        setLoading(true);\r\n        await new Promise(resolve => setTimeout(resolve, 2 * 100));\r\n        if(handleValidate()){\r\n            const inputPayloadPassword = { password: inputPassword.newPassword, passwordOld: inputPassword.currentPassword }\r\n            const responseUpdatePassword = await updatePassword(inputPayloadPassword);\r\n\r\n            if(responseUpdatePassword.status === 400 && responseUpdatePassword.data === 'Ti khon hoc mt khu khng chnh xc !'){\r\n                toast.error('Mt khu hin ti khng chnh xc.', {toastId: 'handleChangePasswordError1'})\r\n            }\r\n            else if(responseUpdatePassword.status === 400){\r\n                toast.error(responseUpdatePassword.data, {toastId: 'handleChangePasswordError2'})\r\n            }\r\n            else if(responseUpdatePassword.status === 200){\r\n                toast.success(responseUpdatePassword.data, {toastId: 'handleChangePasswordSuccess'})\r\n                handleCloseModalChangePassword();\r\n            }\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dialog maxWidth={'xs'} fullWidth={true} open={props.openModalChangePassword} onClose={(event, reason) => handleCloseModalChangePassword(event, reason)} disableEscapeKeyDown={true} >\r\n                <DialogTitle sx={{ m: 0, p: 1.4, fontWeight: 'bolder', fontSize: '22px' }}>i mt khu</DialogTitle>\r\n                <IconButton onClick={() => handleCloseModalChangePassword()}sx={{position: 'absolute', right: 5, top: 7}}>\r\n                    <CloseIcon fontSize='medium'/>\r\n                </IconButton>\r\n                \r\n                <DialogContent dividers sx={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\r\n                    {loading ? \r\n                        <div style={{display: 'flex', justifyContent: 'center'}}>\r\n                            <CircularProgress />\r\n                        </div>\r\n                    :\r\n                        <>\r\n                            <TextField autoFocus={true} label=\"Mt khu mi\" variant=\"outlined\" type={inputPassword.openNewPassword ? \"text\" : \"password\"} sx={{ width: '40ch', mb: 2.5 }} onChange={(e) => onChangeNewPassword(e.target.value)}\r\n                                InputProps={{ // <-- This is where the toggle button is added.\r\n                                    endAdornment: (\r\n                                        <InputAdornment position=\"end\">\r\n                                            <IconButton onClick={handleClickShowNewPassword} sx={{padding: '1px'}}> {inputPassword.openNewPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}</IconButton>\r\n                                        </InputAdornment>\r\n                                    )\r\n                                }}\r\n                            />\r\n\r\n                            <TextField label=\"Mt khu hin ti\" variant=\"outlined\" type={inputPassword.openCurrentPassword ? \"text\" : \"password\"} sx={{ width: '40ch', mb: 2.5 }} onChange={(e) => onChangeCurrentPassword(e.target.value)} \r\n                                InputProps={{ // <-- This is where the toggle button is added.\r\n                                    endAdornment: (\r\n                                        <InputAdornment position=\"end\">\r\n                                            <IconButton onClick={handleClickShowCurrentPassword} sx={{padding: '1px'}}> {inputPassword.openCurrentPassword  ? <VisibilityIcon /> : <VisibilityOffIcon />}</IconButton>\r\n                                        </InputAdornment>\r\n                                    )\r\n                                }}\r\n                            />\r\n\r\n                            <Stack spacing={2} direction=\"column\">\r\n                                <Button sx={{ height: '6vh', width: '20ch' }} variant=\"contained\" color=\"success\" style={{ margin: 'auto' }} onClick={() => handleChangePassword()}>i mt khu</Button>\r\n                            </Stack>\r\n                        </>\r\n                    }\r\n\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChangePassword","export default __webpack_public_path__ + \"static/media/logo.e5a4a234.png\";","import * as React from 'react';\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nfunction AlertProcessingBackdrop(props) {\r\n    return (\r\n        <Backdrop sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1, backgroundColor: props.changeBackground ? 'rgba(0, 0, 0, 0.3)' : 'rgba(0, 0, 0, 0.6)' }} open={props.openAlertProcessingBackdrop}>\r\n            <Box sx={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\r\n                <CircularProgress color='inherit' />\r\n                <Typography sx={{mt: 1.4,}} variant='subtitle1'>{props.alertTitle}</Typography>\r\n            </Box>\r\n        </Backdrop>\r\n    );\r\n}\r\n\r\nexport default AlertProcessingBackdrop\r\n","import React, { useState, useEffect } from 'react';\r\n//modal\r\nimport AlertProcessingBackdrop from '../components/ManageAlertProcessingBackdrop/AlertProcessingBackdrop';\r\n\r\nconst UserContext = React.createContext(null);\r\n\r\nconst UserProvider = ({ children }) => {\r\n\r\n    const userDefault = {\r\n        isAuthenticated: false,\r\n        isLogin: false,\r\n        token: \"\",\r\n    };\r\n\r\n    const [user, setUser] = useState(userDefault);\r\n\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const [alertVisible, setAlertVisible] = useState(false);\r\n    const [isLogOutClick, setIsLogOutClick] = useState(false);\r\n    const [onConfirm, setOnConfirm] = useState(null);\r\n\r\n    const [openAlertProcessingBackdrop, setOpenAlertProcessingBackdrop] = useState(false);\r\n\r\n    const [isDialogChangePasswordOpen, setIsDialogChangePasswordOpen] = useState(false);\r\n\r\n    const [isOldDiseaseWithNullCodeWard, setIsOldDiseaseWithNullCodeWard] = useState(false);\r\n\r\n    const loginContext = (userContextLogin) => {\r\n        setUser({ ...userContextLogin });\r\n        setLoading(false);\r\n    };\r\n\r\n    const triggerAlert = (confirmCallback) => {\r\n        setAlertVisible(true);\r\n        setIsLogOutClick(true);\r\n        setOnConfirm(() => confirmCallback);\r\n    };\r\n\r\n    const confirmAlert = () => {\r\n        if (onConfirm) onConfirm();\r\n        setIsLogOutClick(false);\r\n        resetAlert();\r\n    };\r\n\r\n    const resetAlert = () => {\r\n        setAlertVisible(false);\r\n        setIsLogOutClick(false);\r\n        setOnConfirm(null);\r\n    };\r\n\r\n    const logoutContext = () => {\r\n        setUser({ ...userDefault });\r\n    }\r\n\r\n    const loadingContext = (loading) => {\r\n        setLoading(...loading);\r\n    }\r\n\r\n    // const fetchUser = async () => {\r\n    //     setOpenAlertProcessingBackdrop(true);\r\n    //     const response = await getUserLogin();\r\n    //     setUser({\r\n    //             isAuthenticated: true, \r\n    //             isLogin: true,\r\n    //             userId: response.userId,\r\n    //             userFullName: response.userFullName,\r\n    //             positionName: response.positionName\r\n    //         }) \r\n    //     setLoading(false);\r\n    //     setOpenAlertProcessingBackdrop(false);\r\n    // }\r\n\r\n    const parseJwt = (token) => {\r\n        try {\r\n          return JSON.parse(atob(token.split(\".\")[1]));\r\n        } catch (e) {\r\n          return null;\r\n        }\r\n    };\r\n\r\n    const checkJWTExpire = () => {\r\n        let result = false;\r\n        let getJWT = localStorage.getItem('jwt');\r\n        if(getJWT){\r\n            let decodeJWT = parseJwt(getJWT);\r\n            let currentDate = new Date();\r\n            if(decodeJWT.exp * 1000 < currentDate.getTime()) {\r\n                //console.log('Token  ht hn hoc khng tn ti')\r\n                localStorage.removeItem('jwt'); //xa localStorage\r\n                localStorage.removeItem('userLogin');\r\n                sessionStorage.clear();\r\n                return result \r\n            }\r\n            else{\r\n                //console.log('token cn hn');\r\n                result = true;\r\n                return result\r\n            }\r\n        }\r\n        else{\r\n            localStorage.removeItem('userLogin');\r\n            return result\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const getUserLogin = JSON.parse(localStorage.getItem('userLogin'));\r\n        if(getUserLogin){\r\n            const result = checkJWTExpire();\r\n            if(result){\r\n                const getUserLogin = JSON.parse(localStorage.getItem('userLogin'));\r\n                setUser(getUserLogin);\r\n            }else{\r\n                //khng c token\r\n                setUser(userDefault);\r\n            }\r\n        }else{\r\n            localStorage.removeItem('jwt'); //xa localStorage\r\n            setUser(userDefault);\r\n        }\r\n        setLoading(false);\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <UserContext.Provider \r\n                value={{ user, loading, loadingContext, loginContext, \r\n                    logoutContext, alertVisible, triggerAlert, confirmAlert, resetAlert, isLogOutClick,\r\n                    isDialogChangePasswordOpen, setIsDialogChangePasswordOpen,\r\n                    isOldDiseaseWithNullCodeWard, setIsOldDiseaseWithNullCodeWard\r\n                }}>\r\n                {children}\r\n            </UserContext.Provider>\r\n\r\n            <AlertProcessingBackdrop \r\n                openAlertProcessingBackdrop={openAlertProcessingBackdrop}\r\n                alertTitle={'ang ti thng tin ngi dng'}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport { UserContext, UserProvider }\r\n","import * as signalR from '@microsoft/signalr';\r\n\r\nconst backendURL = 'https://beknkpt2.dvtien.id.vn';\r\n\r\nlet connection = null; // Bin ton cc lu tr kt ni SignalR\r\n\r\n// Hm khi to v kt ni SignalR\r\nconst startSignalRConnection = async (token) => {\r\n    if (connection) {\r\n        //console.log('SignalR connection already established.');\r\n        return connection;\r\n    }\r\n\r\n    connection = new signalR.HubConnectionBuilder()\r\n        .withUrl(`${backendURL}/notificationHub`, {\r\n            accessTokenFactory: () => token,\r\n            transport: signalR.HttpTransportType.WebSockets |\r\n                        signalR.HttpTransportType.ServerSentEvents |\r\n                        signalR.HttpTransportType.LongPolling\r\n        })\r\n        .withAutomaticReconnect([0, 2000, 10000, 30000])\r\n        .configureLogging(signalR.LogLevel.Information)\r\n        .build();\r\n\r\n    // Khi to kt ni, tr v promise  x l sau\r\n    try {\r\n        await connection.start(); // Bt u kt ni\r\n        //console.log(\"Connected to SignalR hub.\");\r\n\r\n        // ng k s kin nhn tin nhn, gi callback khi nhn c tin nhn\r\n        connection.on(\"ReceiveMessage\", (message) => {\r\n            //console.log(\"Received message:\", message);\r\n            if (onReceiveMessage) {\r\n                onReceiveMessage(message); // Gi callback c truyn vo\r\n            }\r\n        });\r\n\r\n    } catch (error) {\r\n        //console.error(\"Error connecting to SignalR hub:\", error);\r\n        setTimeout(() => startSignalRConnection(token, onReceiveMessage), 5000); // Th kt ni li sau 5 giy nu gp li\r\n    }\r\n};\r\n\r\n// Hm ng k s kin ReceiveMessage\r\nconst onReceiveMessage = (callback) => {\r\n    if (connection) {\r\n        connection.on(\"ReceiveMessage\", callback);\r\n    } else {\r\n        //console.error(\"Connection has not been established yet.\");\r\n    }\r\n};\r\n\r\n// Hm dng kt ni SignalR\r\nconst stopSignalRConnection = async () => {\r\n    if (connection) {\r\n        try {\r\n            await connection.stop();\r\n            //console.log(\"Disconnected from SignalR hub.\");\r\n            connection = null;\r\n        } catch (error) {\r\n            //console.error(\"Error disconnecting from SignalR hub:\", error);\r\n        }\r\n    }\r\n};\r\n\r\nconst removeFromGroup = async () => {\r\n    if (connection) {\r\n        try {\r\n            await connection.invoke('RemoveFromGroup');\r\n            //console.log(\"User  logout SignalR.\");\r\n        } catch (error) {\r\n            //console.error(`Failed to remove user from group: ${error}`);\r\n        }\r\n    } else {\r\n        //console.error(\"Connection has not been established yet.\");\r\n    }\r\n};\r\n\r\n// Hm kim tra nu  kt ni\r\nconst isConnected = () => {\r\n    return connection !== null;\r\n};\r\n\r\nexport {\r\n    startSignalRConnection , stopSignalRConnection, onReceiveMessage, removeFromGroup, isConnected\r\n}","import React, { useState, useContext, useEffect } from 'react';\r\nimport { useLocation } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { Link, NavLink, useHistory } from \"react-router-dom\";\r\nimport { withRouter } from 'react-router';\r\n//modal\r\n//import UserManual from '../ManageUserManual/UserManual';\r\nimport ChangePassword from '../ManageChangePassword/ChangePassword';\r\n//mui theme\r\nimport Box from '@mui/material/Box';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport BottomNavigation from '@mui/material/BottomNavigation';\r\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Logo from '../../assets/image/logo.png';\r\nimport Button from '@mui/material/Button';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Skeleton from '@mui/material/Skeleton';\r\n//icon\r\nimport LocalHospitalIcon from '@mui/icons-material/LocalHospital';\r\nimport MedicationLiquidIcon from '@mui/icons-material/MedicationLiquid';\r\nimport LocalPhoneIcon from '@mui/icons-material/LocalPhone';\r\nimport BarChartIcon from '@mui/icons-material/BarChart';\r\nimport HelpIcon from '@mui/icons-material/Help';\r\nimport SettingsSuggestIcon from '@mui/icons-material/SettingsSuggest';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//real-time\r\nimport {removeFromGroup} from '../../Service/SignalService';\r\n\r\nfunction Header(props) {\r\n\r\n  const { user, logoutContext, triggerAlert, isDialogChangePasswordOpen, setIsDialogChangePasswordOpen, isOldDiseaseWithNullCodeWard } = useContext(UserContext);\r\n\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  // const [openModalUserManual, setOpenModalUserManual] = useState(false);\r\n  const [openModalChangePassword, setOpenModalChangePassword] = useState(false);\r\n\r\n  //mui state menu\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const token = localStorage.getItem(\"jwt\");\r\n  \r\n  const open = Boolean(anchorEl);\r\n  \r\n  const handleClick = (event) => {\r\n    if(isOldDiseaseWithNullCodeWard === true){\r\n      event.preventDefault();\r\n    }else{\r\n      setAnchorEl(event.currentTarget)\r\n    }\r\n  };\r\n  \r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const actionNursing = [\r\n    { key: 'medicalRegister', maxWidth: '114px', label: 'ng k khm', icon: <LocalHospitalIcon sx={{fontSize: 30}}/>, LinkComponent: NavLink, to: \"/medicalregister\" },\r\n    { key: 'remind-examining', maxWidth: '95px', label: 'Nhc khm', icon: <LocalPhoneIcon sx={{fontSize: 30}}/>, LinkComponent: NavLink, to: \"/remind-examining\" },\r\n  ]\r\n\r\n  const actionDoctor = [\r\n    { key: 'examining', maxWidth: '100px', label: 'Khm bnh', icon: <MedicationLiquidIcon sx={{fontSize: 30}}/>, LinkComponent: NavLink, to: \"/doctor-examining\" },\r\n  ]\r\n\r\n  const actionAdmin = [\r\n    { key: 'statistical', maxWidth: '83px', label: 'Thng k', icon: <BarChartIcon sx={{fontSize: 30}}/>, LinkComponent: NavLink, to: \"/dashboard\" },\r\n    { key: 'manage', maxWidth: '83px', label: 'Qun l', icon: <SettingsSuggestIcon sx={{fontSize: 30}}/>, LinkComponent: NavLink, to: \"/dashboard\" },\r\n  ]\r\n\r\n  const [userAction, setUserAction] = useState([]);\r\n\r\n  const handleChangeURL = (pathname) => {\r\n    const actionIndex = userAction.findIndex(action => action.to === pathname);\r\n    return actionIndex;\r\n  }\r\n\r\n  const value = handleChangeURL(props.location.pathname);\r\n\r\n  const handleLogout = () => {\r\n    const pathname = props.location.pathname;\r\n    if(user.positionName === 'Doctor' && pathname === 'doctor-examining'){\r\n      triggerAlert(async () => {\r\n        await removeFromGroup();\r\n        localStorage.removeItem('jwt');\r\n        localStorage.removeItem('userLogin');\r\n        logoutContext();\r\n        setAnchorEl(null);\r\n        history.push('/login');\r\n      });\r\n    }\r\n    \r\n    else{\r\n      localStorage.removeItem('jwt'); //xa localStorage\r\n      localStorage.removeItem('userLogin');\r\n      logoutContext();\r\n      setAnchorEl(null);\r\n      history.push('/login');\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n  }, [isOldDiseaseWithNullCodeWard])\r\n  \r\n  useEffect(() => {\r\n    if(user.positionName === 'Nursing'){        \r\n      setUserAction(actionNursing);\r\n    }\r\n    else if(user.positionName === 'Doctor'){\r\n      setUserAction(actionDoctor);\r\n    }\r\n    else if(user.positionName === 'Admin'){\r\n      setUserAction(actionAdmin);\r\n    }\r\n  }, [user])\r\n  \r\n  if(location.pathname !== '/login'){\r\n    return (\r\n      <>\r\n        <Box sx={{ width: '100%'}} >\r\n          <AppBar sx={{position: 'unset'}}>\r\n            <Toolbar sx={{backgroundColor: '#cfe8fc', height: '78px'}}>\r\n              {/* <Link to=\"/\"> */}\r\n                <Avatar src={Logo} sx={{ width: 62, height: 62, mt: 'auto', mb: 'auto', mr: 4 }} />\r\n              {/* </Link> */}\r\n              {user.isAuthenticated === true || token ? \r\n                <>\r\n                  <BottomNavigation showLabels value={value}\r\n                    sx={{display: 'flex', justifyContent: 'flex-start', backgroundColor: '#cfe8fc', flexGrow: 1}}>\r\n                    {userAction.map(actionItem => (\r\n                      <BottomNavigationAction\r\n                        key={actionItem.key}\r\n                        label={actionItem.label}\r\n                        icon={actionItem.icon}\r\n                        LinkComponent={actionItem.LinkComponent}\r\n                        to={actionItem.to}\r\n                        sx={{color: '#000', maxWidth: actionItem.maxWidth}}\r\n                      />\r\n                    ))}  \r\n                  </BottomNavigation>\r\n\r\n                  <Button onClick={(e) => handleClick(e)} sx={{color: '#000', textTransform: 'none'}}>{user.userFullName}</Button>\r\n                  <Menu anchorEl={anchorEl} open={open} onClose={() => handleClose()}>\r\n                    <MenuItem onClick={() => [setOpenModalChangePassword(true), setIsDialogChangePasswordOpen(true), setAnchorEl(null)]}>i mt khu</MenuItem>\r\n                    <MenuItem onClick={handleLogout}>ng xut</MenuItem>\r\n                  </Menu>\r\n                  {/* <HelpIcon titleAccess='Hng dn' sx={{color: 'black', fontSize: '30px', cursor: 'pointer'}} onClick={() => setOpenModalUserManual(true)} /> */}\r\n                </>\r\n                :\r\n                  <>\r\n                    <Box sx={{position: 'absolute', right: 22}}>\r\n                      <NavLink exact to=\"/login\"><Button sx={{textTransform: 'none', color: '#000'}}>ng nhp</Button></NavLink>\r\n                      {/* <HelpIcon titleAccess='Hng dn' sx={{color: 'black', fontSize: '30px', cursor: 'pointer'}} onClick={() => setOpenModalUserManual(true)} /> */}\r\n                    </Box>\r\n                  </>\r\n                }            \r\n            </Toolbar>\r\n          </AppBar>\r\n        </Box>\r\n  \r\n        {/* <UserManual openModalUserManual={openModalUserManual} setOpenModalUserManual={setOpenModalUserManual}/> */}\r\n        <ChangePassword openModalChangePassword={openModalChangePassword} setOpenModalChangePassword={setOpenModalChangePassword} setIsDialogChangePasswordOpen={setIsDialogChangePasswordOpen}/>\r\n      </>\r\n    )\r\n  }\r\n  else{\r\n    return <></>\r\n  }\r\n}\r\n\r\nexport default withRouter(Header)","import React, { useEffect, useState, useContext } from \"react\";\nimport { BrowserRouter as Router, Route, useHistory, Redirect } from \"react-router-dom\";\nimport { UserContext } from \"../context/UserContext\";\n\nconst PrivateRoutes = (props) => {\n  const token = localStorage.getItem('jwt');\n  const getUserLogin = JSON.parse(localStorage.getItem('userLogin'));\n\n  if (token && getUserLogin) {\n    return (\n      <>\n        <Route path={props.path} component={props.component}></Route>\n      </>\n    );\n  }\n  else {\n    return (\n      <>\n        <Redirect to='/login'></Redirect>\n      </>\n    )\n  }\n};\nexport default PrivateRoutes;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"../ErrorPage/Page500.scss\";\n\nconst Page404 = () => {\n\n  let history = useHistory();\n\n  return (\n    <div>\n      <div className=\"section\">\n        <h1 className=\"error\">404</h1>\n        <div className=\"page\">Trang m bn ang truy cp khng tn ti.</div>\n      </div>\n    </div>\n  );\n};\nexport default Page404;\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n\r\nfunction Home() {\r\n\r\n    const { user, loading } = useContext(UserContext);\r\n\r\n    return (\r\n        <Container> \r\n            <Box sx={{mt: 1}}>\r\n                {loading === false && user.isLogin ?\r\n                    user.positionName === 'Nursing' ? \r\n                        <>\r\n                            <Typography variant='subtitle1' sx={{ml: 2, fontSize: '1.35rem'}}>Nu bn thy dng ch ny hy nhn vo <span style={{fontWeight: 'bolder', color: 'blue'}}>\"ng k khm\"</span>  thanh menu c logo ca bnh vin  chuyn v trang ng k khm</Typography>\r\n                        </>\r\n                    :\r\n                        user.positionName === 'Doctor' ? \r\n                            <>\r\n                                <Typography variant='subtitle1' sx={{ml: 2, fontSize: '1.35rem'}}>{`Kim tra thanh menu (c logo ca bnh vin) bn gc phi c hin tn ngi dng`}</Typography> \r\n                                <Typography variant='subtitle1' sx={{ml: 2, fontSize: '1.35rem'}}>Nu ng tn bc s ang khm hy nhn vo <span style={{fontWeight: 'bolder', color: 'blue'}}>\"Khm bnh\"</span>  chuyn v trang khm bnh</Typography>\r\n                                <Typography variant='subtitle1' sx={{ml: 2, fontSize: '1.35rem'}}>Nu sai tn bc s ang khm hy nhn vo tn ngi dng  s hin ra menu nh, nhn ng xut</Typography>       \r\n                            </>\r\n                        :\r\n                            null\r\n                :\r\n                    <Typography variant='subtitle1' sx={{ml: 2, fontSize: '1.35rem'}}>Nhn vo <span style={{fontWeight: 'bolder', color: 'blue'}}>\"ng nhp\"</span> trn thanh menu (c logo ca bnh vin) bn gc phi</Typography> \r\n                }\r\n            </Box>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Home","import React, { useState, useContext, useEffect } from 'react';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport Autocomplete from '@mui/material/Autocomplete';\r\nimport TextField from '@mui/material/TextField';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\n\r\nconst CreateAccount = (props) => {\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const handleClickShowPassword = () => setShowPassword(!showPassword);\r\n\r\n    const handleCloseModalRegister = (event, reason) => {\r\n      if(reason && reason === \"backdropClick\"){\r\n        return;\r\n      }\r\n      else{\r\n        props.setOpenModalRegister(false);\r\n      }\r\n    }\r\n\r\n    const position = [\r\n      {id: '1', positionName: 'iu dng'},\r\n      {id: '2', positionName: 'Bc s'},\r\n    ]\r\n    \r\n    return (\r\n        <>\r\n          <Dialog maxWidth={'xs'} fullWidth={true} open={props.openModalRegister} onClose={(event, reason) => handleCloseModalRegister(event, reason)} disableEscapeKeyDown={true}  >\r\n            <DialogTitle sx={{ m: 0, p: 1.4, fontWeight: 'bolder', fontSize: '22px' }}>To ti khon</DialogTitle>\r\n            <IconButton onClick={() => handleCloseModalRegister()}sx={{position: 'absolute', right: 5, top: 7}}>\r\n              <CloseIcon fontSize='medium'/>\r\n            </IconButton>\r\n            <DialogContent dividers>\r\n              <TextField label=\"H tn\" variant=\"outlined\" sx={{ width: '46ch', mb: 2.5 }} />\r\n              <TextField label=\"Ti khon\" variant=\"outlined\" sx={{ width: '46ch', mb: 2.5 }}/>\r\n              <TextField label=\"Mt khu\" variant=\"outlined\" type={showPassword ? \"text\" : \"password\"} sx={{ width: '46ch', mb: 2.5 }} \r\n                InputProps={{ // <-- This is where the toggle button is added.\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton onClick={handleClickShowPassword} sx={{padding: '1px'}}> {showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}</IconButton>\r\n                    </InputAdornment>\r\n                  )\r\n                }}\r\n              />\r\n              <Autocomplete options={position.map((option) => option.positionName)} renderInput={(params) => <TextField {...params} label=\"V tr\" />} sx={{ width: '45.95ch', mb: 2.5 }}/>\r\n              <Stack spacing={2} direction=\"column\">\r\n                <Button sx={{ height: '6vh', width: '20ch' }} variant=\"contained\" color=\"success\" style={{ margin: 'auto' }} onClick={() => handleCloseModalRegister()}>To ti khon</Button>\r\n              </Stack>\r\n            \r\n            </DialogContent>\r\n          </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CreateAccount","import axios from \"axios\";\r\n\r\nconst backendURL = 'https://beknkpt2.dvtien.id.vn';\r\n\r\nconst createConfig = () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    // Thit lp tiu  \"Authorization\" trong yu cu Axios\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n    return config;\r\n}\r\n\r\nconst createMedicalRegister = async (dataPatientsRegister) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.post(`${backendURL}/api/Medical/Register`, dataPatientsRegister, {\r\n        headers: {\r\n            \"content-type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n        },\r\n    })\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst createMedicalBackRegister = async (dataPatientsRegister) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.post(`${backendURL}/api/Medical/BackRegister`, dataPatientsRegister, {\r\n        headers: {\r\n            \"content-type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n        },\r\n    })\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst createCurrentDoctorExamining = async (userIdDoctor) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.post(`${backendURL}/api/Medical/SetDoctorExaming/${userIdDoctor}`, \r\n        {}, // Body ca request, c th l {} hoc object\r\n        {\r\n            headers: {\r\n                \"content-type\": \"text/plain; charset=utf-8\",\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        }\r\n    )\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst createAddPredecessor = async (dataPredecessor) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.post(`${backendURL}/api/Medical/AddPredecessor`, dataPredecessor,\r\n        {\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        }\r\n    )\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst createAddMedicalBook = async (dataMedicalBook) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.post(`${backendURL}/api/Medical/AddMedicalBook`, dataMedicalBook,\r\n        {\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        }\r\n    )\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst createNotificationForMedicalRegister = async () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    const medicalRegisterMessage = true\r\n    return await axios.post(`${backendURL}/api/Notification/SendSignalRGroup?groupId=doctor`, medicalRegisterMessage,\r\n        {\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        }\r\n    )\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst getRegistersByDateNow = async () => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetRegistersByDateNow`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getListMedicalExaminationsGiveRegister = async (dayOfBirth) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetExaminationsGiveRegister?dayOfBirth=${dayOfBirth}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getListMedicalExaminationsGiveOldRegister = async (dayOfBirth, patientId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetExaminationsGiveRegister?dayOfBirth=${dayOfBirth}&patientId=${patientId}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getListOldDisease = async (patientCode, phone, fullName, dayOfBirth) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/SearchPatients?patientCode=${patientCode}&phone=${phone}&fullName=${fullName}&dayOfBirth=${dayOfBirth}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getVaccinationByPatientId = async (patientId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetVaccinationByPatientId/${patientId}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getCurrentDoctorExamining = async () => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetDoctorExamining`, config)\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getMedicalDetailPatient = async (id) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/DetailPatient/${id}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getMedicalBook = async (medicalRegisterId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetMediacalBook?medicalRegisterId=${medicalRegisterId}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst getUpdatePredecessor = async (patientId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetUpdatePredecessor/${patientId}`, config)\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst getUpdateMedicalBook = async (medicalBookId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetUpdateMedicalBook/${medicalBookId}`, config)\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst getAppointmentDate = async (medicalRegisterId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetAppointmentDate/${medicalRegisterId}`, config)\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst getAppointmentsNextWeek = async () => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetAppointmentsNextWeek`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getAppointmentsToday = async () => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Medical/GetAppointmentsToday`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst updateMedicalRegister = async (dataPatientsRegister) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.put(`${backendURL}/api/Medical/EditRegister`, dataPatientsRegister, {\r\n        headers: {\r\n            \"content-type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n        },\r\n    })\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst updateMedicalState = async (id, state) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.put(`${backendURL}/api/Medical/UpdateState?id=${id}&state=${state}`, {}, {\r\n        headers: {\r\n            \"content-type\": \"text/plain; charset=utf-8\",\r\n            Authorization: `Bearer ${token}`,\r\n        },\r\n    })\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst updateStateAppointment = async (dataAppointment, stateAppointment) => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    return await axios.put(`${backendURL}/api/Medical/UpdateStateAppointment/${dataAppointment.medicalBookId}?appointmentDate=${dataAppointment.appointmentDate}&stateAppointment=${stateAppointment}`, {}, {\r\n        headers: {\r\n            \"content-type\": \"text/plain; charset=utf-8\",\r\n            Authorization: `Bearer ${token}`,\r\n        },\r\n    })\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nconst deleteMedicalBook = async (medicalBookId) => {\r\n    const config = createConfig();\r\n    return await axios.delete(`${backendURL}/api/Medical/DeleteMedicalBook/${medicalBookId}`, config)\r\n    .then(function (response) {\r\n        return response\r\n    })\r\n    .catch(function (error) {\r\n        return error.response\r\n    })\r\n}\r\n\r\nexport {\r\n    createMedicalRegister, createMedicalBackRegister, createCurrentDoctorExamining, createAddPredecessor, createAddMedicalBook, createNotificationForMedicalRegister,\r\n    getRegistersByDateNow, getListMedicalExaminationsGiveRegister, getListMedicalExaminationsGiveOldRegister, getListOldDisease, getVaccinationByPatientId, getCurrentDoctorExamining, getMedicalDetailPatient, getMedicalBook, getUpdatePredecessor, getUpdateMedicalBook, getAppointmentDate, getAppointmentsNextWeek, getAppointmentsToday,\r\n    updateMedicalRegister, updateMedicalState, updateStateAppointment,\r\n    deleteMedicalBook\r\n}","import React, { useState, useContext, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\n//modal\r\nimport AlertProcessingBackdrop from '../ManageAlertProcessingBackdrop/AlertProcessingBackdrop';\r\n//theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport TextField from '@mui/material/TextField';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport Logo from '../../assets/image/logo.png';\r\nimport Register from '../ManageRegister/Register';\r\nimport { toast } from 'react-toastify';\r\n//mui icon\r\nimport IconButton from '@mui/material/IconButton';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//api\r\nimport { userLogin } from '../../Service/UserService';\r\nimport { getCurrentDoctorExamining } from '../../Service/MedicalService';\r\n//signal\r\nimport { startSignalRConnection } from '../../Service/SignalService';\r\n\r\nconst Login = () => {\r\n    const { user, loadingContext, loginContext } = useContext(UserContext);\r\n    const history = useHistory();\r\n\r\n    const [openAlertProcessingBackdrop, setOpenAlertProcessingBackdrop] = useState(false);\r\n\r\n    const [userAccount, setUserAccount] = useState({userName: '', password: ''})\r\n    const [openModalRegister, setOpenModalRegister] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const handleClickShowPassword = () => setShowPassword(!showPassword);\r\n\r\n    const onChangeUserName = (value) => {\r\n        setUserAccount(prevUserAccount => {\r\n            return {\r\n                ...prevUserAccount,\r\n                userName: value\r\n            }\r\n        }) \r\n    }\r\n\r\n    const onChangeUserPassword = (value) => {\r\n        setUserAccount(prevUserAccount => {\r\n            return {\r\n                ...prevUserAccount,\r\n                password: value\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleLogin = async () => {\r\n        if(userAccount.userName === ''){\r\n            toast.error('Bn cha nhp ti khon!')\r\n        }\r\n        else if(userAccount.password === ''){\r\n            toast.error('Bn cha nhp mt khu!');\r\n        }\r\n        else{\r\n            setOpenAlertProcessingBackdrop(true);\r\n            const response = await userLogin(userAccount.userName, userAccount.password);\r\n            if(response.status !== 200){\r\n                toast.error(response.data);\r\n                setOpenAlertProcessingBackdrop(false);\r\n            }\r\n            else{\r\n                if(response.data.positionName === 'Doctor'){\r\n                    await startSignalRConnection(response.data.tokenDTO.token);\r\n                }\r\n\r\n                localStorage.setItem('jwt', response.data.tokenDTO.token)\r\n                const userLogin = {\r\n                    isAuthenticated: true, \r\n                    isLogin: true, \r\n                    userId: response.data.userId,\r\n                    userName: response.data.userName, \r\n                    userFullName: response.data.userFullName, \r\n                    positionName: response.data.positionName\r\n                }\r\n\r\n                localStorage.setItem('userLogin', JSON.stringify(userLogin))\r\n                loginContext(userLogin);\r\n                   \r\n                if(response.data.positionName === 'Nursing'){\r\n                    history.push('/medicalregister');\r\n                }\r\n                else if(response.data.positionName === 'Doctor'){\r\n                    history.push('/doctor-examining');\r\n                }\r\n                else if(response.data.positionName === 'Admin'){\r\n                    history.push('/dashboard');\r\n                }\r\n                setOpenAlertProcessingBackdrop(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handlePressEnter = (e) => {\r\n        if (e.which === 13 && e.code === \"Enter\") {\r\n            handleLogin();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (user && user.isAuthenticated === true) {\r\n            history.push('/');\r\n        }\r\n\r\n        const token = localStorage.getItem('jwt');\r\n        const userLogin = localStorage.getItem('userLogin');\r\n        if (token && userLogin) {\r\n            history.push('/');\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const handleKeyDown = (event) => {\r\n            if(openAlertProcessingBackdrop){\r\n                event.preventDefault();\r\n            }\r\n        }\r\n\r\n        document.addEventListener('keydown', handleKeyDown);\r\n\r\n        return () => {\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, [openAlertProcessingBackdrop])\r\n\r\n    return (\r\n        <>\r\n            <Container maxWidth=\"sm\">\r\n                <Box sx={{ mt: 3, borderRadius: '25px' }} >\r\n                    <Box sx={{ p: 7.6 }}>\r\n                        <Avatar src={Logo} sx={{ width: 120, height: 120, ml: 'auto', mr: 'auto', mb: 2 }} />\r\n                        <Typography sx={{ textAlign: 'center', textTransform: 'uppercase', fontWeight: 'bolder', fontSize: '1.15rem', mb: 2, color: '#4caf50' }} variant=\"h5\">Chng trnh khm nhi khoa pht trin</Typography>\r\n                        <Box component=\"form\" autoComplete=\"off\" style={{ textAlign: 'center' }}>\r\n                            <TextField label=\"Ti khon\" variant=\"outlined\" sx={{ width: '40ch', mb: 2.5 }} onChange={(e) => onChangeUserName(e.target.value)}/>\r\n                            <TextField label=\"Mt khu\" variant=\"outlined\" type={showPassword ? \"text\" : \"password\"} sx={{ width: '40ch', mb: 3 }} \r\n                            onChange={(e) => onChangeUserPassword(e.target.value)} onKeyDown={(e) => handlePressEnter(e)}\r\n                                InputProps={{ // <-- This is where the toggle button is added.\r\n                                    endAdornment: (\r\n                                        <InputAdornment position=\"end\">\r\n                                        <IconButton onClick={handleClickShowPassword} sx={{padding: '1px'}}> {showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}</IconButton>\r\n                                        </InputAdornment>\r\n                                    )\r\n                                }}\r\n                            />\r\n                            <Stack spacing={2} direction=\"column\">\r\n                                <Button sx={{ height: '6.5vh', width: '28ch' }} variant=\"contained\" style={{ margin: 'auto' }} onClick={(e) => handleLogin()}>ng nhp</Button>\r\n                                <Typography sx={{textAlign: 'center', color: 'red', fontSize: '18px'}} variant=\"subtitle1\"><strong style={{cursor: 'pointer'}} onClick={() => setOpenModalRegister(true)}>Qun mt khu</strong></Typography>\r\n                                {/* <Typography sx={{textAlign: 'center', mt: '10px !important'}} variant=\"subtitle1\">Cha c ti khon? <strong style={{cursor: 'pointer'}} onClick={() => setOpenModalRegister(true)}>ng k</strong></Typography> */}\r\n                            </Stack>\r\n                        </Box>\r\n                    </Box>\r\n                </Box>\r\n            </Container>\r\n\r\n            <Register\r\n                openModalRegister={openModalRegister} setOpenModalRegister={setOpenModalRegister}\r\n            />\r\n\r\n            <AlertProcessingBackdrop \r\n                openAlertProcessingBackdrop={openAlertProcessingBackdrop} setOpenAlertProcessingBackdrop={setOpenAlertProcessingBackdrop}\r\n                alertTitle={'ang ng nhp'}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login","import React from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nfunction AlertProcessing(props) {\r\n    return (\r\n        <>\r\n            <Dialog fullWidth={true} maxWidth={'sm'} open={props.openAlertProcessing} disableEscapeKeyDown={true}>\r\n                <DialogContent>\r\n                    <Box sx={{display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center'}}>\r\n                        <CircularProgress/>\r\n                        <Typography variant='subtitle1' sx={{mt: 1}}>ang x l...</Typography>\r\n                    </Box>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AlertProcessing","import axios from \"axios\";\r\n\r\nconst backendURL = 'https://beknkpt2.dvtien.id.vn';\r\n\r\nconst createConfig = () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    // Thit lp tiu  \"Authorization\" trong yu cu Axios\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n    return config;\r\n}\r\n\r\nconst getListProvince = async () => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Administrative/ListProvince`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getListDistrict = async (provinceId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Administrative/GetListDistrictByIdProvince/${provinceId}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getListWard = async (districtId) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Administrative/GetListWardByIdDistrict/${districtId}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getFullAddressByIdWard = async (codeWard) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Administrative/GetFullAddressByIdWard/${codeWard}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nexport {\r\n    getListProvince, getListDistrict, getListWard, getFullAddressByIdWard\r\n}","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//modal\r\nimport AlertProcessing from '../ManageAlertProcessing/AlertProcessing';\r\n//mui theme\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Button from '@mui/material/Button';\r\nimport { Autocomplete } from '@mui/material';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n//mui x date picker\r\nimport { DemoContainer } from '@mui/x-date-pickers/internals/demo';\r\nimport { AdapterMoment } from '@mui/x-date-pickers/AdapterMoment';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\n//toast\r\nimport {toast} from 'react-toastify';\r\n//lodash\r\nimport _ from 'lodash';\r\n//moment\r\nimport moment from 'moment';\r\n//api\r\nimport { getListProvince, getListDistrict, getListWard, getFullAddressByIdWard } from '../../Service/PlaceService';\r\nimport { updateMedicalRegister, getListMedicalExaminationsGiveRegister } from '../../Service/MedicalService';\r\n\r\nfunction ManageInfoPantients(props) {\r\n  const dataPatientInfoDefault = {\r\n    examinationId: \"\",\r\n    height: \"\",\r\n    weight: \"\",\r\n    headCircumference: \"\",\r\n    reason: \"\",\r\n    vaccination: false,\r\n    id: \"\",\r\n    patient: {\r\n      identifier: \"\",\r\n      address: \"\",\r\n      fullName: \"\",\r\n      dayOfBirth: null,\r\n      codeWard: \"\",\r\n      gender: true,\r\n      fullNameMother: \"\",\r\n      phoneMother: \"\",\r\n      fullNameFather: \"\",\r\n      phoneFather: \"\",\r\n      patientId: \"\"\r\n    }\r\n  }\r\n\r\n  const dataPatientInfoErrorDefault = {\r\n    identifier: { title: '', isError: false, openTooltip: false, focus: false },\r\n    fullName: { title: '', isError: false, openTooltip: false, focus: false },\r\n    gender: { title: '', isError: false, openTooltip: false, focus: false },\r\n    dayOfBirth: { title: '', isError: false, openTooltip: false, focus: false },\r\n    examiningSession: { title: '', isError: false, openTooltip: false, focus: false },\r\n    province: { title: '', isError: false, openTooltip: false, focus: false },\r\n    district: { title: '', isError: false, openTooltip: false, focus: false },\r\n    ward: { title: '', isError: false, openTooltip: false, focus: false },\r\n    address: { title: '', isError: false, openTooltip: false, focus: false },\r\n    fullNameMother: { title: '', isError: false, openTooltip: false, focus: false },\r\n    phoneMother: { title: '', isError: false, openTooltip: false, focus: false },\r\n    phoneFather: { title: '', isError: false, openTooltip: false, focus: false },\r\n    height: { title: '', isError: false, openTooltip: false, focus: false },\r\n    weight: { title: '', isError: false, openTooltip: false, focus: false },\r\n    headCircumference: { title: '', isError: false, openTooltip: false, focus: false },\r\n  } \r\n\r\n  const listGender = [\r\n    {genderOrder: 1, genderName: 'Nam', genderValue: true},\r\n    {genderOrder: 2, genderName: 'N', genderValue: false},\r\n  ]\r\n\r\n  const selectedAutoCompleteDefault = { \r\n    gender: { value: null, openOption: false }, \r\n    examiningSession: {value: null, openOption: false, loading: false},\r\n    province: { value: null, openOption: false }, \r\n    district: { value: null, openOption: false }, \r\n    ward: { value: null, openOption: false },\r\n  }\r\n\r\n  const typingRef = useRef(null);\r\n  const dateFieldRef = useRef(null);\r\n\r\n  const [loading, setLoading] = useState();\r\n\r\n  const [dataPatientInfoNotEdit, setDataPatientInfoNotEdit] = useState();\r\n  const [dataPatientInfo, setDataPatientInfo] = useState(dataPatientInfoDefault);\r\n  const [dataPatientInfoError, setDataPatientInfoError] = useState(dataPatientInfoErrorDefault);\r\n    \r\n  const [selectedAutoComplete, setSelectedAutoComplete] = useState(selectedAutoCompleteDefault);\r\n\r\n  const [listExaminingSession, setListExaminingSession] = useState([]);\r\n  const [listProvince, setListProvince] = useState([]);\r\n  const [listDistrict, setListDistrict] = useState({list: [], loading: false});\r\n  const [listWard, setListWard] = useState({list: [], loading: false});\r\n\r\n  const [focusField, setFocusField] = useState(null);\r\n\r\n  const [openAlertProcessing, setOpenAlertProcessing] = useState(false);\r\n\r\n  const tooltipTheme = createTheme({\r\n    components: {\r\n      MuiTooltip: {\r\n        defaultProps: {\r\n          placement: 'bottom',\r\n          arrow: true,\r\n          componentsProps: {\r\n            tooltip: {\r\n              sx: {\r\n                bgcolor: '#d32f2f',\r\n              },\r\n            },\r\n            arrow: {\r\n              sx: {\r\n                color: '#d32f2f',\r\n              },\r\n            },\r\n          },\r\n          slotProps: {\r\n            popper: {\r\n              modifiers: [\r\n                {\r\n                  name: 'offset',\r\n                  options: {\r\n                    offset: [0, -8],\r\n                  },\r\n                },\r\n              ],\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  const handleFocus = (fieldName) => {\r\n    if(fieldName === 'Gender'){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete  => {\r\n        prevSelectedAutoComplete.gender.openOption = true\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n    else if(fieldName === 'ExaminingSession'){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete  => {\r\n        prevSelectedAutoComplete.examiningSession.openOption = true\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n    else if(fieldName === 'Province'){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.province.openOption = true\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n    else if (fieldName === 'District'){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.district.openOption = true\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n    else{\r\n      setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.ward.openOption = true\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleBlur = (value, fieldName) => {\r\n    if(value === '' || value === 'DD/MM/YYYY'){\r\n      //const _dataPatientInfoError = {...dataPatientInfoError};\r\n      // if(fieldName === 'patientId'){\r\n      //   _dataPatientInfoError.patientId.title = '';\r\n      //   _dataPatientInfoError.patientId.openTooltip = false;\r\n      //   setDataPatientInfoError(_dataPatientInfoError);\r\n      // }\r\n      // if(fieldName === 'dayOfBirth'){\r\n      //   if(typingRef.current){\r\n      //     clearInterval(typingRef.current);\r\n      //   }\r\n      //   typingRef.current = setTimeout(() => {  \r\n      //     _dataPatientInfoError.dayOfBirth.title = '';\r\n      //     _dataPatientInfoError.dayOfBirth.openTooltip = false;\r\n      //     _dataPatientInfoError.dayOfBirth.isError = false;\r\n      //     setDataPatientInfoError(_dataPatientInfoError);\r\n      //   }, 10)\r\n      // }\r\n      // if(fieldName === 'PhoneMother'){     \r\n      //   if(typingRef.current){\r\n      //     clearInterval(typingRef.current);\r\n      //   }\r\n      //   typingRef.current = setTimeout(() => {  \r\n      //     _dataPatientInfoError.phoneMother.title = '';\r\n      //     _dataPatientInfoError.phoneMother.openTooltip = false;\r\n      //     _dataPatientInfoError.phoneMother.isError = false;\r\n      //     setDataPatientInfoError(_dataPatientInfoError);\r\n      //   }, 10)\r\n      // }\r\n      // if(fieldName === 'PhoneFather'){\r\n      //   if(typingRef.current){\r\n      //     clearInterval(typingRef.current);\r\n      //   }\r\n      //   typingRef.current = setTimeout(() => {  \r\n      //     _dataPatientInfoError.phoneFather.title = '';\r\n      //     _dataPatientInfoError.phoneFather.openTooltip = false;\r\n      //     _dataPatientInfoError.phoneFather.isError = false;\r\n      //     setDataPatientInfoError(_dataPatientInfoError);\r\n      //   }, 10)\r\n      // }\r\n      // if(fieldName === 'Gender'){\r\n      //   setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      //     prevSelectedAutoComplete.gender.openOption = false;\r\n      //     return {...prevSelectedAutoComplete}\r\n      //   })\r\n      // }\r\n      // if(fieldName === 'ExaminingSession'){\r\n      //   setSelectedAutoComplete(prevSelectedAutoComplete  => {\r\n      //     prevSelectedAutoComplete.examiningSession.openOption = false\r\n      //     return {...prevSelectedAutoComplete}\r\n      //   })\r\n      // }\r\n      // if(fieldName === 'Province'){\r\n      //   setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      //     prevSelectedAutoComplete.province.openOption = false;\r\n      //     return {...prevSelectedAutoComplete}\r\n      //   })\r\n      // }\r\n      // if(fieldName === 'District'){\r\n      //   setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      //     prevSelectedAutoComplete.district.openOption = false;\r\n      //     return {...prevSelectedAutoComplete}\r\n      //   })\r\n      // }\r\n      // if(fieldName === 'Ward'){\r\n      //   setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      //     prevSelectedAutoComplete.ward.openOption = false;\r\n      //     return {...prevSelectedAutoComplete}\r\n      //   })\r\n      // }\r\n    }\r\n    else if(value !== ''){\r\n      if(fieldName === 'Gender'){\r\n        setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n          prevSelectedAutoComplete.gender.openOption = false;\r\n          return {...prevSelectedAutoComplete}\r\n        })\r\n      }\r\n      else if(fieldName === 'ExaminingSession'){\r\n        setSelectedAutoComplete(prevSelectedAutoComplete  => {\r\n          prevSelectedAutoComplete.examiningSession.openOption = false\r\n          return {...prevSelectedAutoComplete}\r\n        })\r\n      }\r\n      else if(fieldName === 'Province'){\r\n        setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.province.openOption = false;\r\n          return {...prevSelectedAutoComplete}\r\n        })\r\n      }\r\n      else if(fieldName === 'District'){\r\n        setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n          prevSelectedAutoComplete.district.openOption = false;\r\n          return {...prevSelectedAutoComplete}\r\n        })\r\n      }\r\n      else if(fieldName === 'Ward'){\r\n        setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n          prevSelectedAutoComplete.ward.openOption = false;\r\n          return {...prevSelectedAutoComplete}\r\n        })\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (!/[0-9]/.test(event.key) && event.key !== 'Backspace' && event.key !== 'Delete' && event.key !== 'ArrowLeft' && event.key !== 'ArrowRight' && event.key !== 'Tab') \r\n    {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  const filterOptions = (options, { inputValue }) => {\r\n    const lowercasedInput = inputValue.toLowerCase();\r\n  \r\n    return options.filter(option => {\r\n      const lowercasedFullName = option.fullName.toLowerCase();\r\n      const initials = option.fullName.split(' ').map(word => word[0]).join('').toLowerCase();\r\n  \r\n      return (lowercasedFullName.includes(lowercasedInput) || initials.includes(lowercasedInput));\r\n    });\r\n  };\r\n\r\n  const onChangeIdentifier = (value) => {\r\n    if(value !== ''){\r\n      if(focusField === 'identifier'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      const takenValue = value;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n\r\n      typingRef.current = setTimeout(() => {\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        if(takenValue.length < 12){\r\n          _dataPatientInfoError.identifier.title = 'M nh danh cha  12 s';\r\n          _dataPatientInfoError.identifier.openTooltip = true;\r\n          _dataPatientInfoError.identifier.isError = true;\r\n          _dataPatientInfoError.identifier.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n        else{\r\n          setDataPatientInfo(prevDataPatientsRegister => {\r\n            prevDataPatientsRegister.patient.identifier = takenValue\r\n            return { ...prevDataPatientsRegister }\r\n          })\r\n\r\n          _dataPatientInfoError.identifier.title = '';\r\n          _dataPatientInfoError.identifier.openTooltip = false;\r\n          _dataPatientInfoError.identifier.isError = false;\r\n          _dataPatientInfoError.identifier.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n      }, 100)\r\n    }\r\n    else{\r\n      if(focusField === 'identifier'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.identifier.title = '';\r\n      _dataPatientInfoError.identifier.openTooltip = false;\r\n      _dataPatientInfoError.identifier.isError = false;\r\n      _dataPatientInfoError.identifier.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }  \r\n  }\r\n\r\n  const onChangeFullName = (value) => {\r\n    const takenValue = value\r\n    \r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n      prevDataPatientInfo.patient.fullName = takenValue\r\n        return {...prevDataPatientInfo}\r\n      })\r\n\r\n      if(focusField === 'fullName'){\r\n        setFocusField(null);\r\n      }\r\n    \r\n      if(dataPatientInfoError.fullName.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.fullName.title = '';\r\n        _dataPatientInfoError.fullName.openTooltip = false;\r\n        _dataPatientInfoError.fullName.isError = false;\r\n        _dataPatientInfoError.fullName.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeDOB = async (value) => {\r\n    if(value){\r\n      const takenValue = value._d;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n    \r\n      typingRef.current = setTimeout(() => {\r\n        const today = new Date();\r\n        const yearsDifference = today.getFullYear() - takenValue.getFullYear();\r\n        const monthsDifference = today.getMonth() - takenValue.getMonth();\r\n        const daysDifference = today.getDate() - takenValue.getDate();\r\n        const age = today.getFullYear() - takenValue.getFullYear();\r\n\r\n        let totalMonths = yearsDifference * 12 + monthsDifference;\r\n        let totalDays = daysDifference;\r\n\r\n        if (daysDifference < 0) {\r\n          totalMonths -= 1;\r\n          totalDays += 30; // Gi s mi thng c 30 ngy\r\n        }\r\n            \r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n    \r\n        if(today < takenValue || isNaN(age) || totalMonths > 24 || (totalMonths === 24 && totalDays > 29)){\r\n          _dataPatientInfoError.dayOfBirth.title = 'Bnh nhn ln hn 24 thng tui khng th khm';\r\n          _dataPatientInfoError.dayOfBirth.openTooltip = true;\r\n          _dataPatientInfoError.dayOfBirth.isError = true;\r\n          _dataPatientInfoError.dayOfBirth.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n    \r\n        else{\r\n          const formattedDate = moment(takenValue).format('YYYY-MM-DD');\r\n          setDataPatientInfo(prevDataPatientInfo => {\r\n            prevDataPatientInfo.patient.dayOfBirth = formattedDate\r\n            return {...prevDataPatientInfo}\r\n          })\r\n    \r\n          _dataPatientInfoError.dayOfBirth.title = '';\r\n          _dataPatientInfoError.dayOfBirth.openTooltip = false;\r\n          _dataPatientInfoError.dayOfBirth.isError = false;\r\n          _dataPatientInfoError.dayOfBirth.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n\r\n          onChangeDOBToGetExaminingSession(formattedDate);\r\n        }\r\n      }, 100)\r\n    }  \r\n  }\r\n\r\n  const onChangeDOBToGetExaminingSession = async (formattedDate) => {\r\n    setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      prevSelectedAutoComplete.examiningSession.value = null\r\n      return {...prevSelectedAutoComplete}\r\n    })\r\n\r\n    setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      prevSelectedAutoComplete.examiningSession.loading = true\r\n      return {...prevSelectedAutoComplete}\r\n    });\r\n\r\n    const responseListMedicalExaminationsGiveRegister = await getListMedicalExaminationsGiveRegister(formattedDate);\r\n    setListExaminingSession(responseListMedicalExaminationsGiveRegister.exams);\r\n\r\n    setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n      prevSelectedAutoComplete.examiningSession.loading = false\r\n      return {...prevSelectedAutoComplete}\r\n    });\r\n  }\r\n\r\n  const onSelectGender = (e, value) => {\r\n    if(focusField === 'gender'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setDataPatientInfo(prevDataPatientInfo=> {\r\n      prevDataPatientInfo.patient.gender = value.genderValue\r\n      return {...prevDataPatientInfo}\r\n    })\r\n\r\n    setSelectedAutoComplete((prevSelectedAutoComplete) => {\r\n      prevSelectedAutoComplete.gender.value = value\r\n      return{...prevSelectedAutoComplete}\r\n    })\r\n    \r\n    if(dataPatientInfoError.gender.isError){\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.gender.isError = false;\r\n      _dataPatientInfoError.gender.title = '';\r\n      _dataPatientInfoError.gender.openTooltip = false;\r\n      _dataPatientInfoError.gender.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }\r\n  }\r\n\r\n  const onSelectExaminingSession = (e, value) => {\r\n    if(focusField === 'examiningSession'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setDataPatientInfo(prevDataPatientInfo=> {\r\n      prevDataPatientInfo.examinationId = value.id\r\n      return {...prevDataPatientInfo}\r\n    })\r\n\r\n    setSelectedAutoComplete((prevSelectedAutoComplete) => {\r\n      prevSelectedAutoComplete.examiningSession.value = value\r\n      return{...prevSelectedAutoComplete}\r\n    })\r\n\r\n    if(dataPatientInfoError.examiningSession.isError){\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.examiningSession.isError = false;\r\n      _dataPatientInfoError.examiningSession.title = '';\r\n      _dataPatientInfoError.examiningSession.openTooltip = false;\r\n      _dataPatientInfoError.examiningSession.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }\r\n  }\r\n\r\n  const onSelectProvine = async (e, value) => {\r\n    if(focusField === 'province'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setSelectedAutoComplete((prevSelectedAutoComplete) => {\r\n      prevSelectedAutoComplete.province.value = value\r\n      return{...prevSelectedAutoComplete}\r\n    })\r\n\r\n    if(selectedAutoComplete.district.value !== null){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.district.value = null\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n\r\n    if(selectedAutoComplete.ward.value !== null){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.ward.value = null\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n\r\n    if(dataPatientInfoError.province.isError){\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.province.isError = false;\r\n      _dataPatientInfoError.province.title = '';\r\n      _dataPatientInfoError.province.openTooltip = false;\r\n      _dataPatientInfoError.province.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }\r\n\r\n    setListWard(prevListWard => {\r\n      prevListWard.list = []\r\n      return {...prevListWard}\r\n    });\r\n\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.loading = true\r\n      return {...prevListDistrict}\r\n    });\r\n\r\n    const responseListDistrict = await getListDistrict(value.code);\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.loading = false\r\n      prevListDistrict.list = responseListDistrict\r\n      return {...prevListDistrict}\r\n    });\r\n  }\r\n\r\n  const onSelectDistrict = async (e, value) => {\r\n    if(focusField === 'district'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setSelectedAutoComplete((prevSelectedAutoComplete) => {\r\n      prevSelectedAutoComplete.district.value = value;\r\n      return{ ...prevSelectedAutoComplete }\r\n    })\r\n\r\n    if(selectedAutoComplete.ward.value !== null){\r\n      setSelectedAutoComplete(prevSelectedAutoComplete => {\r\n        prevSelectedAutoComplete.ward.value = null\r\n        return {...prevSelectedAutoComplete}\r\n      })\r\n    }\r\n\r\n    if(dataPatientInfoError.district.isError){\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.district.isError = false;\r\n      _dataPatientInfoError.district.title = '';\r\n      _dataPatientInfoError.district.openTooltip = false;\r\n      _dataPatientInfoError.district.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }\r\n\r\n    setListWard(prevListWard => {\r\n      prevListWard.loading = true\r\n      return {...prevListWard}\r\n    });\r\n\r\n    const responseListWard = await getListWard(value.code);\r\n    setListWard(prevListWard => {\r\n      prevListWard.loading = false\r\n      prevListWard.list = responseListWard\r\n      return {...prevListWard}\r\n    })\r\n  }\r\n\r\n  const onSelectWard = (e, value) => {\r\n    if(focusField === 'ward'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setDataPatientInfo(prevDataPatientInfo => {\r\n      prevDataPatientInfo.patient.codeWard = value.code\r\n      return { ...prevDataPatientInfo }\r\n    })\r\n\r\n    setSelectedAutoComplete((prevSelectedAutoComplete) => {\r\n      prevSelectedAutoComplete.ward.value = value;\r\n        return{ ...prevSelectedAutoComplete }\r\n    })\r\n\r\n    if(dataPatientInfoError.ward.isError){\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.ward.isError = false;\r\n      _dataPatientInfoError.ward.title = '';\r\n      _dataPatientInfoError.ward.openTooltip = false;\r\n      _dataPatientInfoError.ward.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }\r\n  }\r\n\r\n  const onChangeAddress = (value) => {\r\n    if(focusField === 'address'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n        prevDataPatientInfo.patient.address = takenValue\r\n        return { ...prevDataPatientInfo }\r\n      })\r\n    \r\n      if(dataPatientInfoError.address.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.address.isError = false;\r\n        _dataPatientInfoError.address.title = '';\r\n        _dataPatientInfoError.address.openTooltip = false;\r\n        _dataPatientInfoError.address.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeFullNameMother = (value) => {\r\n    if(focusField === 'fullNameMother'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n        prevDataPatientInfo.patient.fullNameMother = takenValue\r\n        return { ...prevDataPatientInfo }\r\n      })\r\n    \r\n      if(dataPatientInfoError.fullNameMother.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.fullNameMother.isError = false;\r\n        _dataPatientInfoError.fullNameMother.title = '';\r\n        _dataPatientInfoError.fullNameMother.openTooltip = false;\r\n        _dataPatientInfoError.fullNameMother.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangePhoneMother = (value) => {\r\n    if(focusField === 'phoneMother'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    if(value !== ''){\r\n      const takenValue = value;\r\n\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n      \r\n      typingRef.current = setTimeout(() => {\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        if(takenValue.length < 10){\r\n          _dataPatientInfoError.phoneMother.title = 'S in thoi cha  10 s';\r\n          _dataPatientInfoError.phoneMother.openTooltip = true;\r\n          _dataPatientInfoError.phoneMother.isError = true;\r\n          _dataPatientInfoError.phoneMother.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n          \r\n        else{\r\n          setDataPatientInfo(prevDataPatientInfo => {\r\n            prevDataPatientInfo.patient.phoneMother = takenValue\r\n            return {...prevDataPatientInfo} \r\n          })\r\n      \r\n          _dataPatientInfoError.phoneMother.title = '';\r\n          _dataPatientInfoError.phoneMother.openTooltip = false;\r\n          _dataPatientInfoError.phoneMother.isError = false;\r\n          _dataPatientInfoError.phoneMother.focus = false;\r\n      \r\n          _dataPatientInfoError.phoneFather.title = '';\r\n          _dataPatientInfoError.phoneFather.openTooltip = false;\r\n          _dataPatientInfoError.phoneFather.isError = false;\r\n          _dataPatientInfoError.phoneFather.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n      }, 10)\r\n    }\r\n\r\n    else{\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.phoneMother.title = '';\r\n      _dataPatientInfoError.phoneMother.openTooltip = false;\r\n      _dataPatientInfoError.phoneMother.isError = false;\r\n      _dataPatientInfoError.phoneMother.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }  \r\n  }\r\n\r\n  const onChangeFullNameFather = (value) => {\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n        prevDataPatientInfo.patient.fullNameFather = takenValue\r\n        return {...prevDataPatientInfo}\r\n      })\r\n    \r\n      if(dataPatientInfoError.fullNameMother.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.fullNameMother.isError = false;\r\n        _dataPatientInfoError.fullNameMother.title = '';\r\n        _dataPatientInfoError.fullNameMother.openTooltip = false;\r\n        _dataPatientInfoError.fullNameMother.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangePhoneFather = (value) => {\r\n    if(focusField === 'phoneFather'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    if(value !== ''){\r\n      const takenValue = value;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n      \r\n      typingRef.current = setTimeout(() => {\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        if(takenValue.length < 10){\r\n          _dataPatientInfoError.phoneFather.title = 'S in thoi cha  10 s';\r\n          _dataPatientInfoError.phoneFather.openTooltip = true;\r\n          _dataPatientInfoError.phoneFather.isError = true;\r\n          _dataPatientInfoError.phoneFather.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n\r\n        else{\r\n          setDataPatientInfo(prevDataPatientInfo => {\r\n            prevDataPatientInfo.patient.phoneFather = takenValue\r\n            return {...prevDataPatientInfo} \r\n          })\r\n                \r\n          _dataPatientInfoError.phoneFather.title = '';\r\n          _dataPatientInfoError.phoneFather.openTooltip = false;\r\n          _dataPatientInfoError.phoneFather.isError = false;\r\n          _dataPatientInfoError.phoneFather.focus = false;\r\n                \r\n          _dataPatientInfoError.phoneMother.title = '';\r\n          _dataPatientInfoError.phoneMother.openTooltip = false;\r\n          _dataPatientInfoError.phoneMother.isError = false;\r\n          _dataPatientInfoError.phoneMother.focus = false;\r\n          setDataPatientInfoError(_dataPatientInfoError);\r\n        }\r\n      }, 100)\r\n    }\r\n\r\n    else{\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      _dataPatientInfoError.phoneFather.title = '';\r\n      _dataPatientInfoError.phoneFather.openTooltip = false;\r\n      _dataPatientInfoError.phoneFather.isError = false;\r\n      _dataPatientInfoError.phoneFather.focus = false;\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n    }  \r\n  }\r\n\r\n  const onChangeHeight = (value) => {\r\n    if(focusField === 'height'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n        prevDataPatientInfo.height = takenValue\r\n        return {...prevDataPatientInfo}\r\n      })\r\n    \r\n      if(dataPatientInfoError.height.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.height.title = '';\r\n        _dataPatientInfoError.height.openTooltip = false;\r\n        _dataPatientInfoError.height.isError = false;\r\n        _dataPatientInfoError.height.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeWeight = (value) => {\r\n    if(focusField === 'weight'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n        prevDataPatientInfo.weight = takenValue\r\n        return {...prevDataPatientInfo}\r\n      })\r\n    \r\n      if(dataPatientInfoError.weight.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.weight.title = '';\r\n        _dataPatientInfoError.weight.openTooltip = false;\r\n        _dataPatientInfoError.weight.isError = false;\r\n        _dataPatientInfoError.weight.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeHeadCircumference = (value) => {\r\n    if(focusField === 'headCircumference'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n    \r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientInfo(prevDataPatientInfo => {\r\n        prevDataPatientInfo.headCircumference = takenValue\r\n        return {...prevDataPatientInfo}\r\n      })\r\n    \r\n      if(dataPatientInfoError.headCircumference.isError){\r\n        const _dataPatientInfoError = {...dataPatientInfoError}\r\n        _dataPatientInfoError.headCircumference.title = '';\r\n        _dataPatientInfoError.headCircumference.openTooltip = false;\r\n        _dataPatientInfoError.headCircumference.isError = false;\r\n        _dataPatientInfoError.headCircumference.focus = false;\r\n        setDataPatientInfoError(_dataPatientInfoError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeVaccination = (bool) => {\r\n    setDataPatientInfo(prevDataPatientInfo => {\r\n      prevDataPatientInfo.vaccination = bool\r\n      return {...prevDataPatientInfo}\r\n    })\r\n  }\r\n\r\n  const handleCloseModalInfoPantients = (event, reason) => {\r\n    if(reason && reason === \"backdropClick\"){\r\n      return;\r\n    }\r\n    else{\r\n      setListDistrict(prevListDistrict => {\r\n        prevListDistrict.loading = false\r\n        prevListDistrict.list = []\r\n        return {...prevListDistrict}\r\n      })\r\n      setListWard(prevListWard => {\r\n        prevListWard.loading = false\r\n        prevListWard.list = []\r\n        return {...prevListWard}\r\n      })\r\n      setListExaminingSession([]);\r\n      setSelectedAutoComplete(selectedAutoCompleteDefault);\r\n      setDataPatientInfo(dataPatientInfoDefault);\r\n      setDataPatientInfoNotEdit('');\r\n      setDataPatientInfoError(dataPatientInfoErrorDefault);\r\n      setLoading(true);\r\n      props.setSelectedPantientInfo();\r\n      props.setOpenModalInfoPantients(false);\r\n    }\r\n  }\r\n\r\n  const handleGetListProvince = async () => {\r\n    const responseListProvince = await getListProvince();\r\n    setListProvince(responseListProvince);\r\n  }\r\n\r\n  const handleApplyPantientDataToField = async () => {\r\n    setOpenAlertProcessing(true);   \r\n      \r\n    const editPropsDataPatientInfo = {...dataPatientInfo};\r\n    editPropsDataPatientInfo.examinationId = props.selectedPantientInfo.examinationId\r\n    editPropsDataPatientInfo.height = props.selectedPantientInfo.height\r\n    editPropsDataPatientInfo.weight = props.selectedPantientInfo.weight\r\n    editPropsDataPatientInfo.headCircumference = props.selectedPantientInfo.headCircumference\r\n    editPropsDataPatientInfo.reason = props.selectedPantientInfo.reason\r\n    editPropsDataPatientInfo.vaccination = props.selectedPantientInfo.vaccination\r\n    editPropsDataPatientInfo.id = props.selectedPantientInfo.id\r\n    editPropsDataPatientInfo.patient.identifier = props.selectedPantientInfo.patient.identifier\r\n    editPropsDataPatientInfo.patient.address = props.selectedPantientInfo.patient.address\r\n    editPropsDataPatientInfo.patient.fullName = props.selectedPantientInfo.patient.fullName\r\n    editPropsDataPatientInfo.patient.dayOfBirth = props.selectedPantientInfo.patient.dayOfBirth\r\n    editPropsDataPatientInfo.patient.codeWard = props.selectedPantientInfo.patient.codeWard\r\n    editPropsDataPatientInfo.patient.gender = props.selectedPantientInfo.patient.gender\r\n    editPropsDataPatientInfo.patient.fullNameMother = props.selectedPantientInfo.patient.fullNameMother\r\n    editPropsDataPatientInfo.patient.phoneMother = props.selectedPantientInfo.patient.phoneMother\r\n    editPropsDataPatientInfo.patient.fullNameFather = props.selectedPantientInfo.patient.fullNameFather\r\n    editPropsDataPatientInfo.patient.phoneFather = props.selectedPantientInfo.patient.phoneFather\r\n    editPropsDataPatientInfo.patient.patientId = props.selectedPantientInfo.patient.patientId\r\n\r\n    setDataPatientInfo(_.cloneDeep(editPropsDataPatientInfo));\r\n    setDataPatientInfoNotEdit(_.cloneDeep(editPropsDataPatientInfo));\r\n        \r\n    const response = await getFullAddressByIdWard(props.selectedPantientInfo.patient.codeWard);\r\n    const responseListDistrict = await getListDistrict(response.provinceCode);\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.list = responseListDistrict;\r\n      return {...prevListDistrict}\r\n    });\r\n    const responseListWard = await getListWard(response.districtCode);\r\n    setListWard(prevListWard => {\r\n      prevListWard.list = responseListWard;\r\n      return {...prevListWard}\r\n    });\r\n    const responseListMedicalExaminationsGiveRegister = await getListMedicalExaminationsGiveRegister(props.selectedPantientInfo.patient.dayOfBirth);\r\n    setListExaminingSession(responseListMedicalExaminationsGiveRegister.exams);\r\n     \r\n    const selectedGender = listGender.find(gender => gender.genderValue === props.selectedPantientInfo.patient.gender);\r\n    const indexListExamining = responseListMedicalExaminationsGiveRegister.exams.findIndex(examiningSession => examiningSession.id === props.selectedPantientInfo.examinationId)\r\n    const indexListProvince = listProvince.findIndex(province => province.code === response.provinceCode);\r\n    const indexListDistrict = responseListDistrict.findIndex(district => district.code === response.districtCode);\r\n    const indexListWard = responseListWard.findIndex(ward => ward.code === response.wardCode);\r\n\r\n    setSelectedAutoComplete((prevSelectedAutoComplete) => {\r\n      prevSelectedAutoComplete.gender.value = selectedGender\r\n      prevSelectedAutoComplete.examiningSession.value = responseListMedicalExaminationsGiveRegister.exams[indexListExamining];\r\n      prevSelectedAutoComplete.province.value = listProvince[indexListProvince];\r\n      prevSelectedAutoComplete.district.value = responseListDistrict[indexListDistrict];\r\n      prevSelectedAutoComplete.ward.value = responseListWard[indexListWard];\r\n      return prevSelectedAutoComplete\r\n    })\r\n\r\n    setLoading(false);\r\n    setOpenAlertProcessing(false);   \r\n  }\r\n\r\n  const checkValidate = () => {\r\n      const _dataPatientInfoError = {...dataPatientInfoError}\r\n      let isValid = true;\r\n\r\n      if(dataPatientInfoError.identifier.title !== ''){\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.identifier.focus = true;\r\n          setFocusField('identifier');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.patient.fullName === ''){\r\n        _dataPatientInfoError.fullName.title = 'Bn cha nhp h tn';\r\n        _dataPatientInfoError.fullName.openTooltip = true;\r\n        _dataPatientInfoError.fullName.isError = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.fullName.focus = true;\r\n          setFocusField('fullName');\r\n        }\r\n        isValid = false;\r\n      }\r\n\r\n      if(dataPatientInfo.patient.gender === ''){\r\n        _dataPatientInfoError.gender.title = 'Bn cha chn gii tnh';\r\n        _dataPatientInfoError.gender.isError = true;\r\n        _dataPatientInfoError.gender.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.gender.focus = true;\r\n          setFocusField('gender');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.patient.dayOfBirth === ''){\r\n        _dataPatientInfoError.dayOfBirth.title = 'Bn cha nhp ngy sinh';\r\n        _dataPatientInfoError.dayOfBirth.isError = true;\r\n        _dataPatientInfoError.dayOfBirth.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.dayOfBirth.focus = true;\r\n          if (dateFieldRef.current) {\r\n            dateFieldRef.current.focus(); // t focus vo dateField khi c li\r\n          }\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfoError.dayOfBirth.title !== ''){\r\n        _dataPatientInfoError.dayOfBirth.isError = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.dayOfBirth.focus = true;\r\n          if (dateFieldRef.current) {\r\n            dateFieldRef.current.focus(); // t focus vo dateField khi c li\r\n          }\r\n        }\r\n        isValid = false;\r\n      }\r\n\r\n      if(selectedAutoComplete.examiningSession.value === null){\r\n        _dataPatientInfoError.examiningSession.title = 'Bn cha chn li k khm';\r\n        _dataPatientInfoError.examiningSession.isError = true;\r\n        _dataPatientInfoError.examiningSession.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.examiningSession.focus = true;\r\n          setFocusField('examiningSession');\r\n        }\r\n        isValid = false;\r\n      }\r\n\r\n      if(selectedAutoComplete.province.value === null){\r\n        _dataPatientInfoError.province.title = 'Bn cha chn tnh thnh';\r\n        _dataPatientInfoError.province.isError = true;\r\n        _dataPatientInfoError.province.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.province.focus = true;\r\n          setFocusField('province');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(selectedAutoComplete.district.value === null){\r\n        _dataPatientInfoError.district.title = 'Bn cha chn qun huyn';\r\n        _dataPatientInfoError.district.isError = true;\r\n        _dataPatientInfoError.district.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.district.focus = true;\r\n          setFocusField('district');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(selectedAutoComplete.ward.value === null){\r\n        _dataPatientInfoError.ward.title = 'Bn cha chn phng x';\r\n        _dataPatientInfoError.ward.isError = true;\r\n        _dataPatientInfoError.ward.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.ward.focus = true;\r\n          setFocusField('ward');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.patient.address === ''){\r\n        _dataPatientInfoError.address.title = 'Bn cha nhp a ch';\r\n        _dataPatientInfoError.address.isError = true;\r\n        _dataPatientInfoError.address.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.address.focus = true;\r\n          setFocusField('address');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.patient.fullNameMother === '' && dataPatientInfo.patient.fullNameFather === ''){\r\n        _dataPatientInfoError.fullNameMother.title = 'Bn cha nhp tn ph huynh';\r\n        _dataPatientInfoError.fullNameMother.isError = true;\r\n        _dataPatientInfoError.fullNameMother.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.fullNameMother.focus = true;\r\n          setFocusField('fullNameMother');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.patient.phoneMother === '' && dataPatientInfo.patient.phoneFather === ''){\r\n        _dataPatientInfoError.phoneMother.title = 'Bn cha nhp s in thoi';\r\n        _dataPatientInfoError.phoneMother.isError = true;\r\n        _dataPatientInfoError.phoneMother.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.phoneMother.focus = true;\r\n          setFocusField('phoneMother');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(_dataPatientInfoError.phoneMother.title !== ''){\r\n        _dataPatientInfoError.phoneMother.isError = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.phoneMother.focus = true;\r\n          setFocusField('phoneMother');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(_dataPatientInfoError.phoneFather.title !== ''){\r\n        _dataPatientInfoError.phoneFather.isError = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.phoneFather.focus = true;\r\n          setFocusField('phoneFather');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.height === ''){\r\n        _dataPatientInfoError.height.title = 'Bn cha nhp chiu cao';\r\n        _dataPatientInfoError.height.isError = true;\r\n        _dataPatientInfoError.height.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.height.focus = true;\r\n          setFocusField('height');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.weight === ''){\r\n        _dataPatientInfoError.weight.title = 'Bn cha nhp cn nng';\r\n        _dataPatientInfoError.weight.isError = true;\r\n        _dataPatientInfoError.weight.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.weight.focus = true;\r\n          setFocusField('weight');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      if(dataPatientInfo.headCircumference === ''){\r\n        _dataPatientInfoError.headCircumference.title = 'Bn cha nhp s vng u';\r\n        _dataPatientInfoError.headCircumference.isError = true;\r\n        _dataPatientInfoError.headCircumference.openTooltip = true;\r\n        if(Object.values(_dataPatientInfoError).every(item => item.focus === false)){\r\n          _dataPatientInfoError.headCircumference.focus = true;\r\n          setFocusField('headCircumference');\r\n        }\r\n        isValid = false;\r\n      }\r\n  \r\n      // if(dataPatientInfo.reason === ''){\r\n      //   _dataPatientInfoError.reason.isError = true;\r\n      //   isValid = false;\r\n      // }\r\n\r\n      if(_.isEqual(dataPatientInfo, dataPatientInfoNotEdit) === true){\r\n        toast.warning('Hin khng c g  cp nht', {toastId: 'warning1'});\r\n        isValid = false;\r\n      }\r\n\r\n      setDataPatientInfoError(_dataPatientInfoError);\r\n      return isValid;\r\n  }\r\n\r\n  const handleUpdateMedicalRegister = async () => {\r\n    if(checkValidate()){\r\n      setOpenAlertProcessing(true);\r\n      const response = await updateMedicalRegister(dataPatientInfo);\r\n      if(response.status === 200){\r\n        toast.success(response.data, {toastId: 'success1'});\r\n        props.setCompleteMedicalRegister(true);\r\n        props.setIsEditedInfo(true);\r\n        handleCloseModalInfoPantients();\r\n      }\r\n      else{\r\n        toast.error(response.data, {toastId: 'error1'});\r\n        props.setCompleteMedicalRegister(true);\r\n        handleCloseModalInfoPantients();\r\n      }\r\n      setOpenAlertProcessing(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(listProvince.length === 0){\r\n      handleGetListProvince();\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(props.selectedPantientInfo){\r\n      props.setIsContinueUpdateMedicalRegister(false);\r\n      handleApplyPantientDataToField();\r\n    }\r\n  }, [props.selectedPantientInfo])\r\n\r\n  useEffect(() => {\r\n    if(props.openModalInfoPantients && props.isContinueUpdateMedicalRegister && loading === false){\r\n      handleUpdateMedicalRegister();\r\n      props.setIsContinueUpdateMedicalRegister(false);\r\n    }\r\n  }, [props.isContinueUpdateMedicalRegister, loading])\r\n\r\n  return (\r\n    <>\r\n      <Dialog fullWidth={true} maxWidth='md' open={props.openModalInfoPantients} onClose={(event, reason) => handleCloseModalInfoPantients(event, reason)} >\r\n        <DialogTitle sx={{ p: 1, fontWeight: 'bolder', fontSize: '22px', textAlign: 'center', color: 'blue' }}>Thng tin bnh nhn</DialogTitle>\r\n        <IconButton onClick={() => handleCloseModalInfoPantients()} sx={{position: 'absolute', right: 5, top: 7}}>\r\n          <CloseIcon fontSize='medium'/>\r\n        </IconButton>\r\n        <DialogContent dividers sx={{pt: 1.5, pb: 1.5}}>\r\n          <Box sx={{display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap', pl: 4.2, pr: 4.2, mb: 0.8}}>\r\n\r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.identifier.title}</h6>} open={dataPatientInfoError.identifier.openTooltip} placement='left'> \r\n              <TextField error={true ? dataPatientInfoError.identifier.isError === true : false}\r\n                label=\"M nh danh\" variant=\"outlined\" \r\n                sx={{width: '18%', '&.MuiTextField-root' : {marginTop: '7.5px'}}}\r\n                inputProps={{ maxLength: 12 }}\r\n                inputRef={(input) => input && focusField === 'identifier' && input.focus()}\r\n                defaultValue={dataPatientInfo.patient.identifier}\r\n                onChange={(e) => onChangeIdentifier(e.target.value)}\r\n              />\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n                      \r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.fullName.title}</h6>} open={dataPatientInfoError.fullName.openTooltip} placement='top'\r\n              slotProps={{\r\n                popper: {\r\n                  modifiers: [\r\n                    {\r\n                      name: 'offset',\r\n                      options: { offset: [-10, -6], },\r\n                    },\r\n                  ],\r\n                },\r\n              }} \r\n            > \r\n              <TextField error={true ? dataPatientInfoError.fullName.isError === true : false}\r\n                label=\"H tn\" variant=\"outlined\" \r\n                sx={{width: '32%', '&.MuiTextField-root' : {marginTop: '7.5px'}}} \r\n                inputRef={(input) => input && focusField === 'fullName' && input.focus()}\r\n                defaultValue={dataPatientInfo.patient.fullName}\r\n                onChange={(e) => onChangeFullName(e.target.value)}\r\n              />\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n\r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.gender.title}</h6>} open={dataPatientInfoError.gender.openTooltip} placement='top'>\r\n              <Autocomplete \r\n                sx={{width: '12%', marginTop: '7.5px'}}\r\n                options={listGender} \r\n                getOptionLabel={(option) => option.genderName}\r\n                value={selectedAutoComplete.gender.value}\r\n                renderOption={(props, option) => (\r\n                  <li {...props}>\r\n                    {option.genderName}\r\n                  </li>\r\n                )}\r\n                onChange={(e, value) => onSelectGender(e, value)}\r\n                open={selectedAutoComplete.gender.openOption}\r\n                onFocus={() => handleFocus('Gender')}\r\n                onBlur={(e) => handleBlur(e.target.value, 'Gender')}\r\n                renderInput={(params) => ( \r\n                  <TextField {...params} \r\n                    label=\"Gii tnh\" \r\n                    inputRef={(input) => input && focusField === 'gender' && input.focus()}\r\n                    error={true ? dataPatientInfoError.gender.isError === true : false}                     \r\n                  /> \r\n                )}\r\n                disableClearable // B icon xa\r\n                popupIcon={null} // B icon dropdown\r\n              />\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n\r\n          <LocalizationProvider dateAdapter={AdapterMoment} adapterLocale=\"vi\">\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <DemoContainer components={['DatePicker']}>  \r\n                <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.dayOfBirth.title}</h6>} open={dataPatientInfoError.dayOfBirth.openTooltip}>    \r\n                  <Box sx={{width: 110}}>\r\n                    <DatePicker label=\"Ngy sinh\" \r\n                      format='DD/MM/YYYY' defaultValue={moment(dataPatientInfo.patient.dayOfBirth)}\r\n                      disableFuture={true} disableOpenPicker \r\n                      slotProps={{ \r\n                        textField: \r\n                          { \r\n                            inputRef: dateFieldRef,\r\n                            error: true ? dataPatientInfoError.dayOfBirth.isError === true : false,\r\n                            onBlur: (e) => handleBlur(e.target.value, 'dayOfBirth'),\r\n                          }\r\n                        }}\r\n                      onChange={(value) => onChangeDOB(value)}\r\n                    />\r\n                  </Box>\r\n                </Tooltip>\r\n              </DemoContainer>\r\n            </ThemeProvider>\r\n          </LocalizationProvider>\r\n\r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.examiningSession.title}</h6>} open={dataPatientInfoError.examiningSession.openTooltip} placement='right'>\r\n              <Autocomplete \r\n                sx={{width: '18%', mt: '7.5px'}}\r\n                options={listExaminingSession} \r\n                noOptionsText={selectedAutoComplete.examiningSession.loading ? 'ang ti...' : ''}\r\n                getOptionLabel={(option) => option.name}\r\n                value={selectedAutoComplete.examiningSession.value}\r\n                renderOption={(props, option) => (\r\n                  <li {...props}>\r\n                    {option.name}\r\n                  </li>\r\n                )}\r\n                onChange={(e, value) => onSelectExaminingSession(e, value)}\r\n                open={selectedAutoComplete.examiningSession.openOption}\r\n                onFocus={() => handleFocus('ExaminingSession')}\r\n                onBlur={(e) => handleBlur(e.target.value, 'ExaminingSession')}\r\n                renderInput={(params) => ( \r\n                  <TextField {...params} \r\n                    label=\"K khm\" \r\n                    inputRef={(input) => input && focusField === 'examiningSession' && input.focus()}\r\n                    error={true ? dataPatientInfoError.examiningSession.isError === true : false} \r\n                    sx={{'& .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-colorPrimary.MuiInputBase-fullWidth.MuiInputBase-formControl.MuiInputBase-adornedEnd.MuiAutocomplete-inputRoot': {pl: '6px', pr: '6px'}}}\r\n                    InputProps={{\r\n                      ...params.InputProps,\r\n                      endAdornment: (\r\n                        <>\r\n                          {selectedAutoComplete.examiningSession.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                          {params.InputProps.endAdornment}\r\n                        </>\r\n                      ),\r\n                    }} \r\n                  /> \r\n                )}\r\n                disableClearable // B icon xa\r\n                popupIcon={null} // B icon dropdown\r\n              />\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n\r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.province.title}</h6>} open={dataPatientInfoError.province.openTooltip} placement='left'>\r\n              <Autocomplete \r\n                sx={{width: '20%', mt: 2}}\r\n                options={listProvince} \r\n                filterOptions={filterOptions}\r\n                getOptionLabel={(option) => option.name}\r\n                value={selectedAutoComplete.province.value}\r\n                renderOption={(props, option) => (\r\n                  <li {...props}>\r\n                    {option.name}\r\n                  </li>\r\n                )}\r\n                onChange={(e, value) => onSelectProvine(e, value)}\r\n                open={selectedAutoComplete.province.openOption}\r\n                onFocus={() => handleFocus('Province')}\r\n                onBlur={(e) => handleBlur(e.target.value, 'Province')}\r\n                renderInput={(params) => ( \r\n                  <TextField {...params} \r\n                    label=\"Thnh ph\"\r\n                    inputRef={(input) => input && focusField === 'province' && input.focus()}\r\n                    error={true ? dataPatientInfoError.province.isError === true : false}  \r\n                  /> \r\n                )}\r\n                disableClearable // B icon xa\r\n                popupIcon={null} // B icon dropdown\r\n              />\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.district.title}</h6>} open={dataPatientInfoError.district.openTooltip} placement='top'>\r\n                <Autocomplete \r\n                  sx={{width: '20%', mt: 2}}\r\n                  options={listDistrict.list} \r\n                  noOptionsText={listDistrict.loading ? 'ang ti...' : ''}\r\n                  filterOptions={filterOptions}\r\n                  getOptionLabel={(option) => option.name}\r\n                  value={selectedAutoComplete.district.value}\r\n                  renderOption={(props, option) => (\r\n                    <li {...props}>\r\n                      {option.fullName}\r\n                    </li>\r\n                  )}\r\n                  onChange={(e, value) => onSelectDistrict(e, value)}\r\n                  open={selectedAutoComplete.district.openOption}\r\n                  onFocus={() => handleFocus('District')}\r\n                  onBlur={(e) => handleBlur(e.target.value, 'District')}\r\n                  renderInput={(params) => ( \r\n                    <TextField {...params} \r\n                      label=\"Qun/huyn\" \r\n                      inputRef={(input) => input && focusField === 'district' && input.focus()}\r\n                      error={true ? dataPatientInfoError.district.isError === true : false} \r\n                      InputProps={{\r\n                        ...params.InputProps,\r\n                        endAdornment: (\r\n                          <>\r\n                            {listDistrict.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                            {params.InputProps.endAdornment}\r\n                          </>\r\n                        ),\r\n                      }} \r\n                    /> \r\n                  )}\r\n                  disableClearable // B icon xa\r\n                  popupIcon={null} // B icon dropdown\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.ward.title}</h6>} open={dataPatientInfoError.ward.openTooltip}>\r\n                <Autocomplete \r\n                  sx={{width: '20%', mt: 2}}\r\n                  options={listWard.list}\r\n                  noOptionsText={listWard.loading ? 'ang ti...' : ''}\r\n                  filterOptions={filterOptions}\r\n                  getOptionLabel={(option) => option.name}\r\n                  value={selectedAutoComplete.ward.value}\r\n                  renderOption={(props, option) => (\r\n                    <li {...props}>\r\n                      {option.fullName}\r\n                    </li>\r\n                  )}\r\n                  onChange={(e, value) => onSelectWard(e, value)}\r\n                  open={selectedAutoComplete.ward.openOption}\r\n                  onFocus={() => handleFocus('Ward')}\r\n                  onBlur={(e) => handleBlur(e.target.value, 'Ward')}\r\n                  renderInput={(params) => ( \r\n                    <TextField {...params} \r\n                      label=\"Phng/X\" \r\n                      inputRef={(input) => input && focusField === 'ward' && input.focus()}\r\n                      error={true ? dataPatientInfoError.ward.isError === true : false}  \r\n                      InputProps={{\r\n                        ...params.InputProps,\r\n                        endAdornment: (\r\n                          <>\r\n                            {listWard.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                            {params.InputProps.endAdornment}\r\n                          </>\r\n                        ),\r\n                      }} \r\n                    /> \r\n                  )}\r\n                  disableClearable // B icon xa\r\n                  popupIcon={null} // B icon dropdown\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.address.title}</h6>} open={dataPatientInfoError.address.openTooltip} placement='right'>\r\n                <TextField error={true ? dataPatientInfoError.address.isError === true : false}\r\n                  label=\"a ch\" variant=\"outlined\" \r\n                  sx={{width: '36%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputRef={(input) => input && focusField === 'address' && input.focus()}\r\n                  defaultValue={dataPatientInfo.patient.address}\r\n                  onChange={(e) => onChangeAddress(e.target.value)}\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.fullNameMother.title}</h6>} open={dataPatientInfoError.fullNameMother.openTooltip} placement='left'>\r\n                <TextField error={true ? dataPatientInfoError.fullNameMother.isError === true : false}\r\n                  label=\"H tn m\" variant=\"outlined\" \r\n                  sx={{width: '32%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputRef={(input) => input && focusField === 'fullNameMother' && input.focus()}\r\n                  defaultValue={dataPatientInfo.patient.fullNameMother}\r\n                  onChange={(e) => onChangeFullNameMother(e.target.value)}\r\n                />    \r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.phoneMother.title}</h6>} open={dataPatientInfoError.phoneMother.openTooltip}>\r\n                <TextField error={true ? dataPatientInfoError.phoneMother.isError === true : false}\r\n                  label=\"S in thoi\" variant=\"outlined\" \r\n                  sx={{width: '16%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputProps={{ maxLength: 10 }}\r\n                  inputRef={(input) => input && focusField === 'phoneMother' && input.focus()}\r\n                  defaultValue={dataPatientInfo.patient.phoneMother}\r\n                  onChange={(e) => onChangePhoneMother(e.target.value)}\r\n                  onKeyDown={handleKeyDown}\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <TextField \r\n              label=\"H tn cha\" variant=\"outlined\" sx={{width: '32%', '&.MuiTextField-root' : {mt: 2}}} \r\n              defaultValue={dataPatientInfo.patient.fullNameFather}\r\n              onChange={(e) => onChangeFullNameFather(e.target.value)}\r\n            />\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.phoneFather.title}</h6>} open={dataPatientInfoError.phoneFather.openTooltip} placement='right'>\r\n                <TextField error={true ? dataPatientInfoError.phoneFather.isError === true : false}\r\n                  label=\"S in thoi\" variant=\"outlined\" \r\n                  sx={{width: '16%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputProps={{ maxLength: 10 }}\r\n                  inputRef={(input) => input && focusField === 'phoneFather' && input.focus()}\r\n                  defaultValue={dataPatientInfo.patient.phoneFather}\r\n                  onChange={(e) => onChangePhoneFather(e.target.value)}\r\n                  onKeyDown={handleKeyDown}\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.height.title}</h6>} open={dataPatientInfoError.height.openTooltip} placement='left'>\r\n                <TextField error={true ? dataPatientInfoError.height.isError === true : false}\r\n                  label='Chiu cao' \r\n                  sx={{width: '20%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputRef={(input) => input && focusField === 'height' && input.focus()}\r\n                  InputProps={{endAdornment: <InputAdornment position=\"end\">{'(cm)'}</InputAdornment>}} \r\n                  defaultValue={dataPatientInfo.height}\r\n                  onChange={(e) => onChangeHeight(e.target.value)}\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.weight.title}</h6>} open={dataPatientInfoError.weight.openTooltip}>\r\n                <TextField error={true ? dataPatientInfoError.weight.isError === true : false}\r\n                  label='Cn nng' \r\n                  sx={{width: '20%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputRef={(input) => input && focusField === 'weight' && input.focus()}\r\n                  InputProps={{endAdornment: <InputAdornment position=\"end\">{'(kg)'}</InputAdornment>}} \r\n                  defaultValue={dataPatientInfo.weight}\r\n                  onChange={(e) => onChangeWeight(e.target.value)}\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientInfoError.headCircumference.title}</h6>} open={dataPatientInfoError.headCircumference.openTooltip} placement='right'>\r\n                <TextField error={true ? dataPatientInfoError.headCircumference.isError === true : false}\r\n                  label='Vng u' \r\n                  sx={{width: '20%', '&.MuiTextField-root' : {mt: 2}}} \r\n                  inputRef={(input) => input && focusField === 'headCircumference' && input.focus()}\r\n                  InputProps={{endAdornment: <InputAdornment position=\"end\">{'(cm)'}</InputAdornment>}} \r\n                  defaultValue={dataPatientInfo.headCircumference}\r\n                  onChange={(e) => onChangeHeadCircumference(e.target.value)}\r\n                />\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <FormControlLabel sx={{width: '30%', mt: 2}} control={<Checkbox checked={dataPatientInfo.vaccination}/>} \r\n              label=\"C tham gia tim nga\"\r\n              onChange={(e) => onChangeVaccination(e.target.checked)}\r\n            />  \r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions sx={{justifyContent: 'center'}}>\r\n          <Button variant=\"contained\" onClick={() => handleUpdateMedicalRegister()}>Sa (F1)</Button>\r\n          <Button variant=\"contained\" color='secondary' onClick={(event, reason) => handleCloseModalInfoPantients(event, reason)}>ng (ESC)</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <AlertProcessing openAlertProcessing={openAlertProcessing} setOpenAlertProcessing={setOpenAlertProcessing} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ManageInfoPantients","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//lodash\r\nimport _ from \"lodash\";\r\n//info pantients modal\r\nimport ManageInfoPantients from '../ManageInfoPantients/ManageInfoPantients';\r\nimport AlertProcessingBackdrop from '../ManageAlertProcessingBackdrop/AlertProcessingBackdrop';\r\n//mui theme\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport Stack from '@mui/material/Stack';\r\nimport Chip from '@mui/material/Chip';\r\nimport Box from '@mui/material/Box';\r\nimport Badge from '@mui/material/Badge';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport TextField from '@mui/material/TextField';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Skeleton from '@mui/material/Skeleton';\r\nimport Tooltip from '@mui/material/Tooltip';\r\n//mui icon\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CachedIcon from '@mui/icons-material/Cached';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport IconButton from '@mui/material/IconButton';\r\n//scss\r\nimport './SCSS/Shared.scss';\r\n//moment\r\nimport moment from 'moment';\r\n//api\r\nimport { getRegistersByDateNow, getAppointmentsToday, getVaccinationByPatientId } from '../../Service/MedicalService';\r\n\r\nfunction ListPatientsRegister(props) {\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [activeChip, setActiveChip] = useState({chipOrder: 0, chipLabel: 'BN ch khm'});\r\n  const [listPantientChipState, setListPantientChipState] = useState(\r\n    [\r\n      { chipLabel: 'BN ch khm', chipContent: 0 },\r\n      { chipLabel: 'BN  khm', chipContent: 0 },\r\n      { chipLabel: 'BN hn khm', chipContent: 0 },\r\n    ]\r\n  )\r\n\r\n  const [openAlertProcessingBackdrop, setOpenAlertProcessingBackdrop] = useState(false);\r\n  \r\n  const [listDataPatientsRegister, setListDataPatientsRegister] = useState([]); \r\n  const [listDataPatientsAppointmentsToday, setListDataPatientsAppointmentsToday] = useState([]); \r\n  \r\n  const [searchPatientsQuery, setSearchPatientsQuery] = useState(\"\");\r\n\r\n  const [listDataPatientsRegisterState, setListDataPatientsRegisterState] = useState([]);\r\n  const [listDataPatientsRegisterSort, setListDataPatientsRegisterSort] = useState([]);\r\n\r\n  const [selectedPantientInfo, setSelectedPantientInfo] = useState();\r\n  const [openModalInfoPantients, setOpenModalInfoPantients] = useState(false);\r\n  const [isContinueUpdateMedicalRegister, setIsContinueUpdateMedicalRegister] = useState();\r\n\r\n  const [isEditedInfo, setIsEditedInfo] = useState(false);\r\n\r\n  const renderPatientsStatus = (state) => {\r\n    if(state === 0 || state === 3){\r\n      return(\r\n        <>\r\n          <span className='dotPantientRegisterWaiting' />\r\n        </>\r\n      )\r\n    }\r\n    else if(state === 1){\r\n      return(\r\n        <>\r\n          <span className='dotPantientRegisterExamining' />\r\n        </>\r\n      )\r\n    }\r\n    else{\r\n      return(\r\n        <>\r\n          <span className='dotPantientRegisterDone' />\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleSelectedChip = (chipIndex, chipLabel) => {\r\n    setActiveChip({chipOrder: chipIndex, chipLabel: chipLabel});\r\n    if(chipIndex === 0){\r\n      const listPantientRegisterWaiting = listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 0 || patientsRegisterItem.state === 1 || patientsRegisterItem.state === 3) //ch khm v ang khm\r\n      setListDataPatientsRegisterSort(listPantientRegisterWaiting);\r\n      setListDataPatientsRegisterState(listPantientRegisterWaiting);\r\n    }\r\n    else if(chipIndex === 1){\r\n      const listPantientRegisterDone = listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 2) // khm\r\n      setListDataPatientsRegisterSort(listPantientRegisterDone);\r\n      setListDataPatientsRegisterState(listPantientRegisterDone);\r\n    }\r\n    else if(chipIndex === 2){\r\n      setListDataPatientsRegisterSort(listDataPatientsAppointmentsToday);\r\n      setListDataPatientsRegisterState(listDataPatientsAppointmentsToday);\r\n    }\r\n  };\r\n\r\n  const handleSearchPantient = (value) => {\r\n    const takenValue = value;\r\n    setSearchPatientsQuery(takenValue);\r\n\r\n    if(value === ''){\r\n      setListDataPatientsRegisterSort(listDataPatientsRegisterState);\r\n    }else{\r\n      setListDataPatientsRegisterSort(searchPatients(listDataPatientsRegisterState, takenValue));\r\n    }\r\n  }\r\n\r\n  const searchPatients = (patients, searchTerm) => {\r\n    const lowerCaseSearchTerm = searchTerm.toLowerCase();\r\n    return patients.filter(patientObj => {\r\n      const { patientCode, fullName, phoneMother, phoneFather } = patientObj.patient;\r\n      return patientCode.toLowerCase().includes(lowerCaseSearchTerm) || fullName.toLowerCase().includes(lowerCaseSearchTerm) || phoneMother.toLowerCase().includes(lowerCaseSearchTerm) || phoneFather.toLowerCase().includes(lowerCaseSearchTerm);\r\n    });\r\n  }\r\n\r\n  const handleSelectedPantientInfo = (patientsRegisterSortItem) => {\r\n    setSelectedPantientInfo(patientsRegisterSortItem);\r\n    setIsContinueUpdateMedicalRegister(true);\r\n    setOpenModalInfoPantients(true);\r\n  }\r\n\r\n  const handleSelectedPantientAppointmentsToday = async (patientsRegisterSortItem) => {\r\n    setOpenAlertProcessingBackdrop(true);\r\n    const responseVaccinationByPatientId = await getVaccinationByPatientId(patientsRegisterSortItem.patient.patientId);\r\n    const dataPantientOldOldDiseaseRegister = {\r\n      examinationId: patientsRegisterSortItem.patient.nextExamId,\r\n      oldDisease: true,\r\n      height: '', \r\n      weight: '',\r\n      headCircumference: '',\r\n      reason: '',\r\n      vaccination: responseVaccinationByPatientId.vaccination,\r\n      medicalTypeId: responseVaccinationByPatientId.medicalTypeId,\r\n      userIdDoctor: '',\r\n      patient: patientsRegisterSortItem.patient\r\n    }\r\n    props.setDataPantientAppointmentsToday(dataPantientOldOldDiseaseRegister)\r\n    setOpenAlertProcessingBackdrop(false);\r\n  }\r\n\r\n  const handleGetRegistersByDateNow = async () => {\r\n    setLoading(true);\r\n\r\n    const response = await getRegistersByDateNow();\r\n    const responseGetAppointmentsToday = await getAppointmentsToday();\r\n\r\n    let updatedList = [\r\n      { chipLabel: 'BN ch khm', chipContent: 0 },\r\n      { chipLabel: 'BN  khm', chipContent: 0 },\r\n      { chipLabel: 'BN hn khm', chipContent: responseGetAppointmentsToday.length }\r\n    ]\r\n\r\n    let _listDataPatientsAppointmentsToday\r\n    if(responseGetAppointmentsToday.length > 0){\r\n      _listDataPatientsAppointmentsToday = responseGetAppointmentsToday.map((item) => {\r\n        const result = {\r\n          patient : {\r\n            identifier: item.identifier,\r\n            patientId: item.patientId,\r\n            patientCode: item.patientCode,\r\n            fullName: item.patientFullName,\r\n            gender: item.gender,\r\n            dayOfBirth: item.dateOfBirth,\r\n            fullNameMother: item.fullNameMother,\r\n            phoneMother: item.phoneMother,\r\n            fullNameFather: item.fullNameFather,\r\n            phoneFather: item.phoneFather,\r\n            address: item.address,\r\n            fullAddress: item.fullAddress,\r\n            codeWard: item.codeWard,\r\n            nextExamId: item.nextExamId\r\n          }\r\n        }\r\n        return result;\r\n      })\r\n      setListDataPatientsAppointmentsToday(_listDataPatientsAppointmentsToday);\r\n    }\r\n    else{\r\n      setListDataPatientsAppointmentsToday(responseGetAppointmentsToday)\r\n    }\r\n\r\n    if(response !== 400){\r\n      if(response.list.length !== 0){\r\n        setListDataPatientsRegister(response.list);\r\n        if(activeChip.chipOrder === 0){\r\n          const listPantientRegisterWaiting = response.list.filter(patientsRegisterItem => patientsRegisterItem.state === 0 || patientsRegisterItem.state === 1 || patientsRegisterItem.state === 3) //ch khm v ang khm v ti khm\r\n          setListDataPatientsRegisterSort(_.cloneDeep(listPantientRegisterWaiting));\r\n          setListDataPatientsRegisterState(_.cloneDeep(listPantientRegisterWaiting));\r\n          updatedList[0].chipContent = response.listCountState[0];\r\n          updatedList[1].chipContent = response.listCountState[1];\r\n        }\r\n        else if(activeChip.chipOrder === 1){\r\n          const listPantientRegisterDone = listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 2) // khm\r\n          setListDataPatientsRegisterSort(_.cloneDeep(listPantientRegisterDone));\r\n          setListDataPatientsRegisterState(_.cloneDeep(listPantientRegisterDone));\r\n          updatedList[0].chipContent = response.listCountState[0];\r\n          updatedList[1].chipContent = response.listCountState[1];\r\n        }\r\n        else if(activeChip.chipOrder === 2){\r\n          setListDataPatientsRegisterSort(_.cloneDeep(_listDataPatientsAppointmentsToday));\r\n          setListDataPatientsRegisterState(_.cloneDeep(_listDataPatientsAppointmentsToday));\r\n          updatedList[0].chipContent = response.listCountState[0];\r\n          updatedList[1].chipContent = response.listCountState[1];\r\n        }\r\n      }\r\n    }\r\n    setListPantientChipState(updatedList);\r\n\r\n    if(isEditedInfo){\r\n      setIsEditedInfo(false);\r\n    }\r\n\r\n    props.setComponent1Loading(false);\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  const handleReloadGetRegistersByDateNow = async () => {\r\n    props.setComponent1Loading(true);\r\n    await handleGetRegistersByDateNow();\r\n    props.setComponent1Loading(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    handleGetRegistersByDateNow();\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(openModalInfoPantients){\r\n      const handleKeyDown = (event) => {\r\n        if(event.keyCode === 112){\r\n          event.preventDefault()\r\n          setIsContinueUpdateMedicalRegister(true);\r\n          //nhn F1  sa thng tin ng k khm\r\n        }\r\n      };\r\n\r\n      document.addEventListener('keydown', handleKeyDown);\r\n\r\n      return () => {\r\n        document.removeEventListener('keydown', handleKeyDown);\r\n      };\r\n    }\r\n  }, [openModalInfoPantients, isContinueUpdateMedicalRegister]);\r\n\r\n  useEffect(() => {\r\n    if(isEditedInfo){\r\n      handleGetRegistersByDateNow();\r\n    }\r\n  }, [isEditedInfo, listDataPatientsRegister, listDataPatientsRegisterSort])\r\n\r\n  useEffect(() => {\r\n    if(props.completeMedicalRegister === true && isEditedInfo === false){\r\n      setListDataPatientsRegister([]);\r\n      setListDataPatientsRegisterSort([]);\r\n      setListDataPatientsRegisterState([]);\r\n      handleGetRegistersByDateNow();\r\n      props.setCompleteMedicalRegister(false);\r\n    }\r\n  }, [props.completeMedicalRegister, listDataPatientsRegister, listDataPatientsRegisterSort])\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{p: 0}}>\r\n        {/* <Typography variant='h6' sx={{color: 'red', mb: 0, fontWeight: 'bolder', fontSize: '1.16rem', marginBottom: '5px'}}>\r\n          {loading ? \r\n            <Skeleton /> \r\n          : \r\n            <div style={{display: 'flex', height: '30px'}}>\r\n              {props.currentDoctorExamining.userIdDoctor !== '' ?\r\n              <>\r\n                <Typography variant='subbtitle1'>{`Bc s khm hm nay: ${props.currentDoctorExamining.userFullName}`}</Typography> <EditIcon sx={{color: '#2e7d32', fontSize: '26px', ml: 1, cursor: 'pointer'}} onClick={() => props.setOpenSelectedDoctorExaminingModal(true)} titleAccess='Sa'/>\r\n              </>\r\n              :\r\n              <>\r\n                <Typography variant='subbtitle1'>Cha chn bc s khm hm nay</Typography> <EditIcon sx={{color: '#2e7d32', fontSize: '26px', ml: 1, cursor: 'pointer'}} onClick={() => props.setOpenSelectedDoctorExaminingModal(true)} titleAccess='Thm'/>\r\n              </>}\r\n            </div>\r\n          }\r\n        </Typography> */}\r\n\r\n        <div className='container' style={{border: '1px solid #fff', borderRadius: '10px', height: '590px', padding: 0, boxShadow: '0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12)'}}>\r\n          {loading ? \r\n             <>\r\n              <Box sx={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', height: '100%'}}>\r\n                <CircularProgress/>\r\n                <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu, hy ch mt cht...</Typography>\r\n              </Box>        \r\n            </>\r\n          :\r\n            <>\r\n              <Stack direction='row' spacing={1} sx={{justifyContent: 'center', mt: 1.4}}>\r\n                {listPantientChipState.map((pantientChipStateItem, pantientChipStateIndex) => (\r\n                  <Badge badgeContent={pantientChipStateItem.chipContent} color=\"error\" key={`chipPantientState ${pantientChipStateIndex}`}> \r\n                    <Chip label={pantientChipStateItem.chipLabel} color={pantientChipStateIndex === activeChip.chipOrder ? 'primary' : 'default'}\r\n                      onClick={() => handleSelectedChip(pantientChipStateIndex, pantientChipStateItem.chipLabel)} />  \r\n                  </Badge>\r\n                ))}\r\n              </Stack>\r\n\r\n              <Box sx={{mt: 0.2, position: 'relative', display: 'flex', justifyContent: 'center', flexDirection: 'column'}}> \r\n                <Typography variant=\"subtitle2\" sx={{textAlign: 'center', mt: 0.2, fontSize: '1rem'}}>Nu khng tm thy bnh nhn, hy nhn nt ti li pha di</Typography>\r\n                <Typography variant=\"h6\" sx={{textAlign: 'center', fontSize: '1.12rem'}}>Danh sch {activeChip.chipLabel} ngy {moment().format(\"DD/MM/YYYY\")}</Typography>\r\n                <CachedIcon sx={{color: 'brown', fontWeight: 'bolder', position: 'absolute', right: 75, top: 30, fontSize: '2.5rem', cursor: 'pointer'}} titleAccess='Ti li' onClick={() => handleReloadGetRegistersByDateNow()}/>\r\n              </Box>\r\n            \r\n              <Box sx={{display: 'flex', justifyContent: 'center', position: 'relative'}}>\r\n                <TextField sx={{mt: 0.2, mb: 1, width: 360, '& .MuiInputBase-inputSizeSmall': {textAlign: 'center'}}} size=\"small\" \r\n                  variant=\"outlined\" placeholder='Tm vi M BN hoc Tn BN hoc ST' value={searchPatientsQuery} onChange={(e) => handleSearchPantient(e.target.value)}\r\n                  InputProps={{ // <-- This is where the toggle button is added.\r\n                    startAdornment: (\r\n                      <InputAdornment position='start'><SearchIcon/></InputAdornment>  \r\n                    ),\r\n                    endAdornment: (\r\n                      <InputAdornment position='end'>\r\n                        {searchPatientsQuery !== '' ? \r\n                          <CloseIcon sx={{cursor: 'pointer'}} \r\n                            titleAccess='Xa'\r\n                            onClick={() => [setSearchPatientsQuery(''), setListDataPatientsRegisterSort(listDataPatientsRegisterState)]}\r\n                          /> \r\n                        : \r\n                          null\r\n                        }\r\n                      </InputAdornment>  \r\n                    )\r\n                  }}>\r\n                </TextField>\r\n              </Box>\r\n\r\n              <TableContainer component={Paper} sx={{ height: '440px', overflowX: 'scroll', borderBottomLeftRadius: '10px', borderBottomRightRadius: '10px' }}>\r\n                <Table stickyHeader sx={{ minWidth: 1200 }}>\r\n                  <TableHead>\r\n                    <TableRow sx={{\"& th\": {color: \"rgba(96, 96, 96)\", backgroundColor: \"pink\"}}}>\r\n                      {activeChip.chipOrder === 2 ? \r\n                        null\r\n                      :\r\n                        <>\r\n                          <TableCell align=\"left\" sx={{fontSize: '0.95rem', p: '10px'}}>Trng thi</TableCell>\r\n                          <TableCell align='left' sx={{fontSize: '0.95rem'}}>STT</TableCell>\r\n                        </>\r\n                      }\r\n                      <TableCell align='left' sx={{fontSize: '0.95rem'}}>M bnh nhn</TableCell>\r\n                      <TableCell align=\"left\" sx={{fontSize: '0.95rem'}}>H tn</TableCell>\r\n                      <TableCell align=\"left\" sx={{fontSize: '0.95rem'}}>Gii tnh</TableCell>\r\n                      <TableCell align=\"left\" sx={{fontSize: '0.95rem'}}>Ngy sinh</TableCell>\r\n                      <TableCell align=\"left\" sx={{fontSize: '0.95rem'}}>S in thoi</TableCell>\r\n                      <TableCell align=\"left\" sx={{fontSize: '0.95rem'}}>a ch</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n\r\n                  <TableBody>\r\n                    {listDataPatientsRegisterSort.length !== 0 ?\r\n                      <>\r\n                        {listDataPatientsRegisterSort.map((patientsRegisterSortItem, patientsRegisterSortIndex) => (\r\n                          <TableRow hover role=\"checkbox\" key={patientsRegisterSortIndex} sx={{cursor: 'pointer'}} onDoubleClick={() => activeChip.chipOrder === 2 ? handleSelectedPantientAppointmentsToday(patientsRegisterSortItem) : handleSelectedPantientInfo(patientsRegisterSortItem)}>\r\n                            {activeChip.chipOrder === 2 ? \r\n                              null\r\n                            :\r\n                              <>\r\n                                <TableCell align='center' sx={{width: '90px'}}>\r\n                                  <Tooltip title={<Typography variant='subtitle2'>{patientsRegisterSortItem.state === 0 || patientsRegisterSortItem.state === 3 ? 'Ch khm' : patientsRegisterSortItem.state === 2 ? ' khm' : 'ang khm'}</Typography>} >\r\n                                    <span>{renderPatientsStatus(patientsRegisterSortItem.state)}</span>\r\n                                  </Tooltip>\r\n                                </TableCell>\r\n                                <TableCell align='left' sx={{width: '20px'}}>{patientsRegisterSortItem.order}</TableCell>\r\n                              </>\r\n                            }\r\n                            <TableCell align='left' sx={{width: '150px'}}>{patientsRegisterSortItem.patient.patientCode}</TableCell>\r\n                            <TableCell align='left' sx={{width: '200px'}}>{patientsRegisterSortItem.patient.fullName}</TableCell>\r\n                            <TableCell align='left' sx={{width: '110px'}}>{patientsRegisterSortItem.patient.gender === true ? 'Nam' : 'N'}</TableCell>\r\n                            <TableCell align='left' sx={{width: '110px'}}>{moment(patientsRegisterSortItem.patient.dayOfBirth).format(\"DD/MM/YYYY\")}</TableCell>\r\n                            <TableCell align='left' sx={{width: '140px'}}>{patientsRegisterSortItem.patient.phoneMother !== '' ? patientsRegisterSortItem.patient.phoneMother : patientsRegisterSortItem.patient.phoneFather}</TableCell>\r\n                            <TableCell align='left' sx={{whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: 120}}>\r\n                              <Tooltip title={<Typography variant='subtitle2'>{patientsRegisterSortItem.patient.fullAddress}</Typography>} >\r\n                                <span>{patientsRegisterSortItem.patient.fullAddress}</span>\r\n                              </Tooltip>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))} \r\n                      </>\r\n                    :\r\n                      null\r\n                    }\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </>\r\n          }\r\n        </div>\r\n      </Box>\r\n      \r\n      <AlertProcessingBackdrop openAlertProcessingBackdrop={openAlertProcessingBackdrop} changeBackground={true}\r\n      />\r\n\r\n      <ManageInfoPantients \r\n        openModalInfoPantients={openModalInfoPantients} setOpenModalInfoPantients={setOpenModalInfoPantients}\r\n        selectedPantientInfo={selectedPantientInfo} setSelectedPantientInfo={setSelectedPantientInfo}\r\n        isContinueUpdateMedicalRegister={isContinueUpdateMedicalRegister} setIsContinueUpdateMedicalRegister={setIsContinueUpdateMedicalRegister}\r\n        setCompleteMedicalRegister={props.setCompleteMedicalRegister}\r\n        setIsEditedInfo={setIsEditedInfo}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ListPatientsRegister","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//mui theme\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport Typography from '@mui/material/Typography';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport Radio from '@mui/material/Radio';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Button from '@mui/material/Button';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n//mui icon\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n//modal\r\n// import AlertConfirmModal from '../ManageAlertConfirm/AlertConfirm';\r\nimport AlertProcessing from '../ManageAlertProcessing/AlertProcessing';\r\n//toast\r\nimport {toast} from 'react-toastify';\r\n//api\r\nimport { createMedicalRegister, createMedicalBackRegister, createNotificationForMedicalRegister, getListMedicalExaminationsGiveRegister, getListMedicalExaminationsGiveOldRegister } from '../../Service/MedicalService';\r\n\r\nfunction ExaminingSession(props) {\r\n    const [isConfirmOpen, setIsConfirmOpen] = useState(false);\r\n    const [openAlertProcessing, setOpenAlertProcessing] = useState(false);\r\n\r\n    const [listExaminingSession, setListExaminingSession] = useState(null);\r\n\r\n    const { isOldDiseaseWithNullCodeWard, setIsOldDiseaseWithNullCodeWard } = useContext(UserContext);\r\n\r\n    const onChangeRadioSelect = (value) => {\r\n        props.dataPatientsRegister.examinationId = value;\r\n    }\r\n\r\n    const handleListMedicalExaminationsGiveRegister = async () =>  {\r\n        if(props.dataPatientsRegister.oldDisease){\r\n            setOpenAlertProcessing(true);\r\n            const response = await getListMedicalExaminationsGiveOldRegister(props.dataPatientsRegister.patient.dayOfBirth, props.dataPatientsRegister.patient.patientCode);\r\n            setListExaminingSession(response);\r\n            props.dataPatientsRegister.examinationId = response.exams[0].id;\r\n            setOpenAlertProcessing(false);\r\n        }\r\n        else{\r\n            setOpenAlertProcessing(true);\r\n            const response = await getListMedicalExaminationsGiveRegister(props.dataPatientsRegister.patient.dayOfBirth);\r\n            setListExaminingSession(response);\r\n            props.dataPatientsRegister.examinationId = response.exams[0].id;\r\n            setOpenAlertProcessing(false);\r\n        }\r\n    }\r\n\r\n    const handleMedicalRegister = async () => {\r\n        // //bnh c\r\n        if(props.dataPatientsRegister.oldDisease === true && props.dataPatientsRegister.examinationId !== ''){\r\n            //l bnh mi  ng k nhng cha tng khm bao gi\r\n            if(listExaminingSession.isAppointment === false && listExaminingSession.oldExams.length === 0){\r\n                //setIsConfirmOpen(false);\r\n                setOpenAlertProcessing(true);\r\n                const response = await createMedicalBackRegister(props.dataPatientsRegister);\r\n                if(response.status === 200){\r\n                    await createNotificationForMedicalRegister();\r\n                    if(isOldDiseaseWithNullCodeWard){\r\n                        setIsOldDiseaseWithNullCodeWard(false);\r\n                    }\r\n                    toast.success(response.data);\r\n                    setListExaminingSession(null);\r\n                    props.setIsContinueSelectedExaminingSession(false);\r\n                    props.setCompleteMedicalRegister(true);\r\n                    props.setOpenModalExaminingSession(false);\r\n                    props.handleResetField();\r\n                }\r\n                else{\r\n                    toast.error(response.data, {toastId: 'error1'});\r\n                }\r\n                setOpenAlertProcessing(false);\r\n            }\r\n            //c hn khm nhng khng nhc khm hoc n tr ngy hn khm\r\n            else{\r\n                //setIsConfirmOpen(false);\r\n                setOpenAlertProcessing(true);\r\n                const response = await createMedicalBackRegister(props.dataPatientsRegister);\r\n                if(response.status === 200){\r\n                    await createNotificationForMedicalRegister();\r\n                    toast.success(response.data);\r\n                    setListExaminingSession(null);\r\n                    props.setIsContinueSelectedExaminingSession(false);\r\n                    props.setCompleteMedicalRegister(true);\r\n                    props.setOpenModalExaminingSession(false);\r\n                    props.handleResetField();\r\n                }\r\n                else{\r\n                    toast.error(response.data, {toastId: 'error1'});\r\n                }\r\n                setOpenAlertProcessing(false);\r\n            }\r\n        }\r\n        //bnh mi\r\n        else{\r\n            //setIsConfirmOpen(false);\r\n            setOpenAlertProcessing(true);\r\n            const response = await createMedicalRegister(props.dataPatientsRegister);\r\n\r\n            if(response.status === 200){\r\n                await createNotificationForMedicalRegister();\r\n                toast.success(response.data);\r\n                setListExaminingSession(null);\r\n                props.handleResetField();\r\n                props.setIsContinueSelectedExaminingSession(false);\r\n                props.setCompleteMedicalRegister(true);\r\n                props.setOpenModalExaminingSession(false);\r\n            }\r\n            else{\r\n                toast.error(response.data, {toastId: 'error1'});\r\n            }\r\n            setOpenAlertProcessing(false);\r\n        }\r\n    }\r\n\r\n    const handleCloseConfirm = () => {\r\n        setIsConfirmOpen(false);\r\n      };\r\n\r\n    const handleOpenConfirm = () => {\r\n        if(props.dataPatientsRegister.examinationId === ''){\r\n            // setIsConfirmOpen(false);\r\n            toast.error('Bn cha chn k khm', {toastId: 'error1'});\r\n        }\r\n        else{\r\n            //setIsConfirmOpen(true);\r\n            handleMedicalRegister();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(props.dataPatientsRegister.patient.dayOfBirth !== '' && props.openModalExaminingSession === true){\r\n            handleListMedicalExaminationsGiveRegister();\r\n        }\r\n    }, [props.openModalExaminingSession])\r\n\r\n    useEffect(() => {\r\n        if(props.isContinueSelectedExaminingSession === true){\r\n            //nhn F2  hon tt ng k khm\r\n            handleOpenConfirm();\r\n            props.setIsContinueSelectedExaminingSession(false);\r\n        }\r\n    }, [props.isContinueSelectedExaminingSession])\r\n\r\n    return (\r\n        <>\r\n            {listExaminingSession ? \r\n                <>\r\n                    <Dialog fullWidth={true} maxWidth={'sm'} open={props.openModalExaminingSession} disableEscapeKeyDown={true}>\r\n                        <DialogTitle \r\n                            sx={{ fontWeight: 'bolder', fontSize: '20px', textAlign: 'center', color: 'green', textTransform: 'uppercase' }}>\r\n                            {`${props.dataPatientsRegister.patient.fullName}, \r\n                            ${props.dataPatientsRegister.patient.gender === true ? 'Nam' : 'N'}, \r\n                            ${listExaminingSession.monthsOfAge}`}\r\n                        </DialogTitle>\r\n\r\n                        <IconButton onClick={() => [props.setOpenModalExaminingSession(false), props.dataPatientsRegister.examinationId = '', setListExaminingSession(null)]} \r\n                            sx={{position: 'absolute', right: 5, top: 7}}>\r\n                                <CloseIcon fontSize='medium'/>\r\n                        </IconButton>\r\n\r\n                        <DialogContent dividers sx={{pl: '0px', pr: '0px'}}>\r\n                            <Grid container rowSpacing={0}>\r\n                                <Grid item xs={0.5}/>\r\n\r\n                                <Grid item xs={5.5}>\r\n                                    <Box sx={{border: '2px solid black', p: 1, height: '50vh', overflow: 'auto'}}>\r\n                                        <Typography variant='h6' sx={{fontWeight: 'bolder'}}>Lch s khm</Typography>\r\n                                        {listExaminingSession.oldExams ?\r\n                                            listExaminingSession.oldExams.map((oldExamItem, oldExamIndex) => (\r\n                                                <Typography key={oldExamIndex} variant='subtitle1'>{oldExamItem.name}</Typography>\r\n                                            ))\r\n                                        :\r\n                                            null\r\n                                        }\r\n                                    </Box>  \r\n                                </Grid>\r\n\r\n                                <Grid item xs={5.5}>\r\n                                    <Box sx={{border: '2px solid red', p: 1, height: '50vh'}}>\r\n                                        <div style={{display: 'flex', flexWrap: 'wrap', justifyContent: 'center'}}>\r\n                                            <Typography variant='h6' sx={{fontWeight: 'bolder', color: 'red'}}>Chn k khm</Typography>\r\n                                            <RadioGroup key={`${props.dataPatientsRegister.patient.patientCode}`} defaultValue={listExaminingSession.exams[0].id} onChange={(e) => onChangeRadioSelect(e.target.value)}>\r\n                                                {listExaminingSession.exams.map((examItem, examIndex) => (\r\n                                                    <FormControlLabel key={`${examIndex}`} value={examItem.id} control={<Radio />} label={examItem.name} />\r\n                                                ))}\r\n                                            </RadioGroup>\r\n                                            <Button variant='contained' sx={{mt: 0.5}} onClick={() => handleOpenConfirm()}>Tip tc (F2)</Button> \r\n                                        </div>\r\n                                    </Box>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </>\r\n            :\r\n                null\r\n            }\r\n\r\n            {/* <AlertConfirmModal \r\n                openAlertConfirmModal={isConfirmOpen} onCloseAlertConfirmModal={handleCloseConfirm} \r\n                onConfirmAlertConfirmModal={handleMedicalRegister} \r\n                titleConfirm=\"ng k khm cho bnh nhn?\"\r\n            /> */}\r\n\r\n            <AlertProcessing\r\n                openAlertProcessing={openAlertProcessing} setOpenAlertProcessing={setOpenAlertProcessing}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ExaminingSession","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//modal\r\nimport AlertProcessing from '../ManageAlertProcessing/AlertProcessing';\r\n//mui theme\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport TextField from '@mui/material/TextField';\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\n//mui x date picker\r\nimport { DemoContainer } from '@mui/x-date-pickers/internals/demo';\r\nimport { AdapterMoment } from '@mui/x-date-pickers/AdapterMoment';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\n//moment\r\nimport moment from 'moment';\r\n//api\r\nimport { getListOldDisease, getVaccinationByPatientId } from '../../Service/MedicalService';\r\n\r\nfunction OldDisease(props) {\r\n\r\n    const dataPatientsForSearchOldDiseaseDefault = {patientCode: '', phone: '', fullName: '', dayOfBirth: ''}\r\n    const dataPatientsForSearchOldDiseaseErrorDefault = {\r\n        patientCode: { title: '', isError: false, openTooltip: false, focus: false},\r\n        phone: { title: '', isError: false, openTooltip: false, focus: false },\r\n        fullName: { title: '', isError: false, openTooltip: false, focus: false },\r\n        dayOfBirth: { title: '', isError: false, openTooltip: false, focus: false },\r\n    }\r\n\r\n    const typingRef = useRef(null);\r\n    \r\n    const [listFoundOldDisease, setListFoundOldDisease] = useState(null);\r\n    const [dataPatientsForSearchOldDisease, setDataPatientsForSearchOldDisease] = useState(dataPatientsForSearchOldDiseaseDefault);\r\n    const [dataPatientsForSearchOldDiseaseError, setDataPatientsForSearchOldDiseaseError] = useState(dataPatientsForSearchOldDiseaseErrorDefault);\r\n    const [focusField, setFocusField] = useState(null);\r\n    const [openAlertProcessing, setOpenAlertProcessing] = useState(false);\r\n    const [selectedRowIndex, setSelectedRowIndex] = useState(0);\r\n\r\n    const dateFieldRef = useRef(null);\r\n    const formRef = useRef(null);\r\n    const tableRef = useRef(null);\r\n\r\n    const tooltipTheme = createTheme({\r\n        components: {\r\n          MuiTooltip: {\r\n            defaultProps: {\r\n              placement: 'bottom',\r\n              arrow: true,\r\n              componentsProps: {\r\n                tooltip: {\r\n                  sx: {\r\n                    bgcolor: '#d32f2f',\r\n                  },\r\n                },\r\n                arrow: {\r\n                  sx: {\r\n                    color: '#d32f2f',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n    });\r\n\r\n    const handleKeyDown = (event) => {\r\n        if (!/[0-9]/.test(event.key) && event.key !== 'Backspace' && event.key !== 'Delete' && event.key !== 'ArrowLeft' && event.key !== 'ArrowRight' && event.key !== 'Tab' && event.key !== 'Enter') \r\n        {\r\n            event.preventDefault();\r\n        }\r\n        else if(event.key === 'Enter'){\r\n            handleEnterPress(event);\r\n        }\r\n    }\r\n\r\n    const handleBlur = (value, fieldName) => {\r\n        if(value === '' || value === 'DD/MM/YYYY'){\r\n            const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n            if(fieldName === 'patientCode'){\r\n                if(typingRef.current){\r\n                    clearInterval(typingRef.current);\r\n                }\r\n                \r\n                typingRef.current = setTimeout(() => {  \r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.title = '';\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.openTooltip = false;\r\n                    setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                }, 10)\r\n                \r\n                if(focusField === 'patientCode'){\r\n                    setFocusField(null);\r\n                }\r\n            }\r\n            else if(fieldName === 'dayOfBirth'){\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.title = '';\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.openTooltip = false;\r\n                setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                if(focusField === 'dayOfBirth'){\r\n                    setFocusField(null);\r\n                }\r\n            }\r\n            else if(fieldName === 'phone'){\r\n                _dataPatientsForSearchOldDiseaseError.phone.title = '';\r\n                _dataPatientsForSearchOldDiseaseError.phone.openTooltip = false;\r\n                setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                if(focusField === 'phone'){\r\n                    setFocusField(null);\r\n                }\r\n            }\r\n        }   \r\n    };\r\n\r\n    const onChangePatientId = (value) => {\r\n        if(value !== ''){\r\n            const takenValue = value\r\n            if(typingRef.current){\r\n                clearInterval(typingRef.current);\r\n            }\r\n\r\n            typingRef.current = setTimeout(() => {\r\n                const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n                if(value.length < 8){\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.title = 'M bnh nhn phi t 8 n 14 s';\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.isError = true;\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.openTooltip = true;\r\n                    setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                }\r\n\r\n                else{\r\n                    if(focusField === 'patientCode'){\r\n                        setFocusField(null);\r\n                    }\r\n\r\n                    setDataPatientsForSearchOldDisease((prevDataPatientsForSearchOldDisease) => {\r\n                        prevDataPatientsForSearchOldDisease.patientCode = takenValue;\r\n                        return {...prevDataPatientsForSearchOldDisease}\r\n                    })\r\n\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.title = '';\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.openTooltip = false;\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.fullName.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.phone.isError = false;\r\n                    setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                }\r\n            }, 100)\r\n        }\r\n        else{\r\n            const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.title = '';\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.openTooltip = false;\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n            setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n        } \r\n    }\r\n\r\n    const onChangeFullName = (value) => {\r\n        if(focusField === 'fullName'){\r\n            setFocusField(null);\r\n        }\r\n\r\n        setDataPatientsForSearchOldDisease((prevDataPatientsForSearchOldDisease) => {\r\n            prevDataPatientsForSearchOldDisease.fullName = value;\r\n            return {...prevDataPatientsForSearchOldDisease}\r\n        })\r\n\r\n        const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n        _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n        _dataPatientsForSearchOldDiseaseError.fullName.isError = false;\r\n        _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = false;\r\n        _dataPatientsForSearchOldDiseaseError.phone.isError = false;\r\n        setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);      \r\n    }\r\n\r\n    const onChangeDayOfBirth = (value) => {\r\n        if(value){            \r\n            const date = value._d;\r\n            const today = new Date();\r\n            const yearsDifference = today.getFullYear() - date.getFullYear();\r\n            const monthsDifference = today.getMonth() - date.getMonth();\r\n            const daysDifference = today.getDate() - date.getDate();\r\n            const age = today.getFullYear() - date.getFullYear();\r\n\r\n            let totalMonths = yearsDifference * 12 + monthsDifference;\r\n            let totalDays = daysDifference;\r\n\r\n            if (daysDifference < 0) {\r\n                totalMonths -= 1;\r\n                totalDays += 30; // Gi s mi thng c 30 ngy\r\n            }\r\n\r\n            const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n\r\n            if(today < date || isNaN(age) || totalMonths > 24 || (totalMonths === 24 && totalDays > 29)){\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.title = 'Bnh nhn ln hn 24 thng tui khng th khm';\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.openTooltip = true;\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = true;\r\n                setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n              }\r\n              else{\r\n                const formattedDate = moment(date).format('YYYY-MM-DD');\r\n                setDataPatientsForSearchOldDisease((prevDataPatientsForSearchOldDisease) => {\r\n                    prevDataPatientsForSearchOldDisease.dayOfBirth = formattedDate;\r\n                    return {...prevDataPatientsForSearchOldDisease}\r\n                })\r\n\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.title = '';\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.openTooltip = false;\r\n                _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n                _dataPatientsForSearchOldDiseaseError.fullName.isError = false;\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = false;\r\n                _dataPatientsForSearchOldDiseaseError.phone.isError = false;\r\n                setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onChangePhone = (value) => {\r\n        if(value !== ''){\r\n            const takenValue = value\r\n            if(typingRef.current){\r\n                clearInterval(typingRef.current);\r\n            }\r\n\r\n            typingRef.current = setTimeout(() => {\r\n                const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n                if(value.length < 10){\r\n                    _dataPatientsForSearchOldDiseaseError.phone.title = 'S in thoi cha  10 s';\r\n                    _dataPatientsForSearchOldDiseaseError.phone.isError = true;\r\n                    _dataPatientsForSearchOldDiseaseError.phone.openTooltip = true;\r\n                    setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                }\r\n\r\n                else{\r\n                    if(focusField === 'phone'){\r\n                        setFocusField(null);\r\n                    }\r\n\r\n                    setDataPatientsForSearchOldDisease((prevDataPatientsForSearchOldDisease) => {\r\n                        prevDataPatientsForSearchOldDisease.phone = takenValue;\r\n                        return {...prevDataPatientsForSearchOldDisease}\r\n                    })\r\n\r\n                    _dataPatientsForSearchOldDiseaseError.phone.title = '';\r\n                    _dataPatientsForSearchOldDiseaseError.phone.openTooltip = false;\r\n                    _dataPatientsForSearchOldDiseaseError.phone.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.fullName.isError = false;\r\n                    _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = false;                \r\n                    setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n                }\r\n            }, 100)\r\n        }\r\n        else{\r\n            const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.title = '';\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.openTooltip = false;\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n            setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n        } \r\n\r\n\r\n        if(value !== ''){\r\n            const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n            if(value.length < 10){\r\n                _dataPatientsForSearchOldDiseaseError.phone.title = 'S in thoi cha  10 s';\r\n                _dataPatientsForSearchOldDiseaseError.phone.openTooltip = true;\r\n                setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n\r\n                setDataPatientsForSearchOldDisease((prevDataPatientsForSearchOldDisease) => {\r\n                    prevDataPatientsForSearchOldDisease.phone = value;\r\n                    return {...prevDataPatientsForSearchOldDisease}\r\n                })\r\n            }\r\n            else{\r\n                if(focusField === 'phone'){\r\n                    setFocusField(null);\r\n                }\r\n                _dataPatientsForSearchOldDiseaseError.phone.title = '';\r\n                _dataPatientsForSearchOldDiseaseError.phone.openTooltip = false;\r\n                _dataPatientsForSearchOldDiseaseError.phone.isError = false;\r\n                _dataPatientsForSearchOldDiseaseError.patientCode.isError = false;\r\n                _dataPatientsForSearchOldDiseaseError.fullName.isError = false;\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = false;                \r\n                setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n            }\r\n        }\r\n        else{\r\n            const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n            _dataPatientsForSearchOldDiseaseError.phone.title = '';\r\n            _dataPatientsForSearchOldDiseaseError.phone.openTooltip = false;\r\n            _dataPatientsForSearchOldDiseaseError.phone.isError = false;\r\n            setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n        }\r\n    }\r\n\r\n    const handleCloseModalOldDisease = (event, reason) => {\r\n        if(reason && reason === \"backdropClick\"){\r\n            return;\r\n        }\r\n          else{\r\n            setDataPatientsForSearchOldDisease(dataPatientsForSearchOldDiseaseDefault);\r\n            setDataPatientsForSearchOldDiseaseError(dataPatientsForSearchOldDiseaseErrorDefault);\r\n            setListFoundOldDisease(null);\r\n            setSelectedRowIndex(0);\r\n            props.setOpenModalOldDisease(false);\r\n        }\r\n    }\r\n\r\n    const handleResetField = () => {\r\n        formRef.current.reset();\r\n        const inputs = formRef.current.querySelectorAll('input, textarea');\r\n        inputs.forEach(input => input.dispatchEvent(new Event('input', { bubbles: true })));\r\n        setFocusField(null);\r\n    }\r\n\r\n    const validate = () => {\r\n        const _dataPatientsForSearchOldDiseaseError = {...dataPatientsForSearchOldDiseaseError};\r\n        let isValid = true;\r\n\r\n        if(dataPatientsForSearchOldDisease.patientCode === '' && dataPatientsForSearchOldDisease.fullName === '' && \r\n            dataPatientsForSearchOldDisease.dayOfBirth === '' && dataPatientsForSearchOldDisease.phone === '')\r\n        {\r\n            _dataPatientsForSearchOldDiseaseError.patientCode.isError = true;\r\n            _dataPatientsForSearchOldDiseaseError.fullName.isError = true;\r\n            _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = true;\r\n            _dataPatientsForSearchOldDiseaseError.phone.isError = true;\r\n            isValid = false;\r\n        }\r\n\r\n        if(dataPatientsForSearchOldDiseaseError.patientCode.title !== ''){\r\n            if(Object.values(dataPatientsForSearchOldDiseaseError).every(item => item.focus === false)){\r\n                _dataPatientsForSearchOldDiseaseError.patientCode.isError = true;\r\n                _dataPatientsForSearchOldDiseaseError.patientCode.focus = true;\r\n                setFocusField('patientCode');\r\n            }\r\n            isValid = false;\r\n        }\r\n\r\n        if(dataPatientsForSearchOldDiseaseError.dayOfBirth.title !== ''){\r\n            if(Object.values(dataPatientsForSearchOldDiseaseError).every(item => item.focus === false)){\r\n                _dataPatientsForSearchOldDiseaseError.dayOfBirth.isError = true;\r\n                if (dateFieldRef.current) {\r\n                    dateFieldRef.current.focus(); // t focus vo dateField khi c li\r\n                }\r\n            }\r\n            isValid = false;\r\n        }\r\n\r\n        if(dataPatientsForSearchOldDiseaseError.phone.title !== ''){\r\n            if(Object.values(dataPatientsForSearchOldDiseaseError).every(item => item.focus === false)){\r\n                _dataPatientsForSearchOldDiseaseError.phone.isError = true;\r\n                _dataPatientsForSearchOldDiseaseError.phone.focus = true;\r\n                setFocusField('phone');\r\n            }\r\n            isValid = false;\r\n        }\r\n        setDataPatientsForSearchOldDiseaseError(_dataPatientsForSearchOldDiseaseError);\r\n        return isValid;\r\n    }\r\n\r\n    const handleFindOldDisease = async () => {\r\n        await new Promise(resolve => setTimeout(resolve, 5 * 100));\r\n        setOpenAlertProcessing(true);\r\n        const response = await getListOldDisease(dataPatientsForSearchOldDisease.patientCode, dataPatientsForSearchOldDisease.phone, dataPatientsForSearchOldDisease.fullName, dataPatientsForSearchOldDisease.dayOfBirth, '');\r\n        setOpenAlertProcessing(false);\r\n        setListFoundOldDisease(response);\r\n        setDataPatientsForSearchOldDisease(dataPatientsForSearchOldDiseaseDefault);\r\n        setDataPatientsForSearchOldDiseaseError(dataPatientsForSearchOldDiseaseErrorDefault);\r\n        handleResetField();\r\n        if(response.length > 0){\r\n            tableRef.current.focus();\r\n        }\r\n    }\r\n\r\n    const handleClickFindOldDisease = () => {\r\n        if(validate()){\r\n            handleFindOldDisease()\r\n        }\r\n    }\r\n\r\n    const handleEnterPress = (e) => {\r\n        if (e.which === 13 && e.code === \"Enter\") {\r\n            handleClickFindOldDisease();\r\n        }\r\n    }\r\n\r\n    const handleTableKeyDown = (event) => {\r\n        if (event.key === 'ArrowDown') {\r\n            setSelectedRowIndex((prevIndex) => (Math.min(prevIndex + 1, listFoundOldDisease.length - 1)));\r\n        } else if (event.key === 'ArrowUp') {\r\n            setSelectedRowIndex((prevIndex) => (Math.max(prevIndex - 1, 0)));\r\n        } else if (event.key === 'Enter' && selectedRowIndex !== null){\r\n            handleApplyDataPatientOldDisease(listFoundOldDisease[selectedRowIndex])\r\n        }\r\n    };\r\n\r\n    const handleApplyDataPatientOldDisease = async (foundOldDiseaseItem) => {\r\n        setOpenAlertProcessing(true);\r\n        const responseVaccinationByPatientId = await getVaccinationByPatientId(foundOldDiseaseItem.patientId);\r\n        const dataPantientOldOldDiseaseRegister = {\r\n            examinationId: '',\r\n            oldDisease: true,\r\n            oldDiseaseWithNullCodeWard: foundOldDiseaseItem.codeWard ? false : true,\r\n            height: '',\r\n            weight: '',\r\n            headCircumference: '',\r\n            reason: '',\r\n            vaccination: responseVaccinationByPatientId.vaccination,\r\n            medicalTypeId: responseVaccinationByPatientId.medicalTypeId,\r\n            userIdDoctor: '',\r\n            patient: {\r\n                patientCode: foundOldDiseaseItem.patientCode,\r\n                identifier: foundOldDiseaseItem.identifier,\r\n                address: foundOldDiseaseItem.address,\r\n                fullName: foundOldDiseaseItem.fullName,\r\n                dayOfBirth: foundOldDiseaseItem.dayOfBirth,\r\n                codeWard: foundOldDiseaseItem.codeWard,\r\n                gender: foundOldDiseaseItem.gender,\r\n                fullNameMother: foundOldDiseaseItem.fullNameMother,\r\n                phoneMother: foundOldDiseaseItem.phoneMother,\r\n                fullNameFather: foundOldDiseaseItem.fullNameFather,\r\n                phoneFather: foundOldDiseaseItem.phoneFather\r\n            }\r\n        }\r\n        props.setDataPatientsRegister(dataPantientOldOldDiseaseRegister);\r\n        setOpenAlertProcessing(false);\r\n        handleCloseModalOldDisease();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dialog fullWidth={true} maxWidth={'md'} open={props.openModalOldDisease} onClose={(event, reason) => handleCloseModalOldDisease(event, reason)} disableEscapeKeyDown={true} sx={{'.MuiDialog-paperWidthMd': {maxWidth: '970px'}}}>\r\n                <DialogTitle sx={{ m: 0, p: 1.4, fontWeight: 'bolder', fontSize: '22px', textAlign: 'center' }}>Tm bnh c</DialogTitle>\r\n                <IconButton onClick={() => handleCloseModalOldDisease()}sx={{position: 'absolute', right: 5, top: 7}}>\r\n                    <CloseIcon fontSize='medium'/>\r\n                </IconButton>\r\n                <DialogContent dividers sx={{p: '10px 24px'}}>\r\n                    <Box sx={{display: 'flex', justifyContent: 'space-around'}} component=\"form\" ref={formRef}>\r\n                        <ThemeProvider theme={tooltipTheme}>\r\n                            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsForSearchOldDiseaseError.patientCode.title}</h6>} open={dataPatientsForSearchOldDiseaseError.patientCode.openTooltip}>\r\n                                <TextField \r\n                                    sx={{'&.MuiTextField-root' : {marginTop: '7.5px'}}} \r\n                                    error={true ? dataPatientsForSearchOldDiseaseError.patientCode.isError === true : false}\r\n                                    label=\"M BN\" variant=\"outlined\" size='small'\r\n                                    autoFocus\r\n                                    inputRef={(input) => input && focusField === 'patientCode' && input.focus()}\r\n                                    inputProps={{ maxLength: 14 }}\r\n                                    onChange={(e) => onChangePatientId(e.target.value)}\r\n                                    onBlur={(e) => handleBlur(e.target.value, 'patientCode')}\r\n                                    onKeyDown={handleKeyDown} \r\n                                />\r\n                            </Tooltip>\r\n                        </ThemeProvider>\r\n\r\n                        <ThemeProvider theme={tooltipTheme}>\r\n                            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsForSearchOldDiseaseError.fullName.title}</h6>} open={dataPatientsForSearchOldDiseaseError.fullName.openTooltip}>\r\n                                <TextField \r\n                                    sx={{'&.MuiTextField-root' : {marginTop: '7.5px'}}} \r\n                                    inputRef={(input) => input && focusField === 'fullName' && input.focus()}\r\n                                    error={true ? dataPatientsForSearchOldDiseaseError.fullName.isError === true : false}\r\n                                    label=\"H tn\" variant=\"outlined\" size='small'\r\n                                    onChange={(e) => onChangeFullName(e.target.value)}\r\n                                    onKeyDown={(e) => handleEnterPress(e)} \r\n                                />\r\n                            </Tooltip>\r\n                        </ThemeProvider>\r\n\r\n                        <LocalizationProvider dateAdapter={AdapterMoment} adapterLocale=\"vi\">\r\n                            <ThemeProvider theme={tooltipTheme}>\r\n                                <DemoContainer components={['DatePicker']}>\r\n                                    <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsForSearchOldDiseaseError.dayOfBirth.title}</h6>} open={dataPatientsForSearchOldDiseaseError.dayOfBirth.openTooltip}>    \r\n                                        <Box sx={{width: 222}}>\r\n                                            <DatePicker label=\"Ngy sinh\" format='DD/MM/YYYY' \r\n                                                disableFuture={true} disableOpenPicker \r\n                                                renderInput={(params) => <TextField {...params} size='small' />}\r\n                                                slotProps={{  \r\n                                                    textField: \r\n                                                    { \r\n                                                        inputRef: dateFieldRef,\r\n                                                        error: true ? dataPatientsForSearchOldDiseaseError.dayOfBirth.isError === true : false, \r\n                                                        size: 'small', \r\n                                                        onBlur: (e) => handleBlur(e.target.value, 'dayOfBirth'),\r\n                                                        onKeyDown: (e) => handleEnterPress(e)\r\n                                                    }, \r\n                                                }}\r\n                                                onChange={(value) => onChangeDayOfBirth(value)}\r\n                                            />\r\n                                        </Box>\r\n                                    </Tooltip>\r\n                                </DemoContainer>\r\n                            </ThemeProvider>      \r\n                        </LocalizationProvider>\r\n\r\n                        <ThemeProvider theme={tooltipTheme}>\r\n                            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsForSearchOldDiseaseError.phone.title}</h6>} open={dataPatientsForSearchOldDiseaseError.phone.openTooltip}>\r\n                                <TextField \r\n                                    sx={{'&.MuiTextField-root' : {marginTop: '7.5px'}}}\r\n                                    inputRef={(input) => input && focusField === 'phone' && input.focus()}\r\n                                    error={true ? dataPatientsForSearchOldDiseaseError.phone.isError === true : false}\r\n                                    label=\"in thoi cha/m\" variant=\"outlined\" size='small'\r\n                                    inputProps={{ maxLength: 10 }}\r\n                                    onChange={(e) => onChangePhone(e.target.value)}\r\n                                    onKeyDown={handleKeyDown}\r\n                                    onBlur={(e) => handleBlur(e.target.value, 'phone')}\r\n                                />\r\n                            </Tooltip>\r\n                        </ThemeProvider>\r\n\r\n                    </Box>\r\n\r\n                    <Box sx={{display: 'flex', justifyContent: 'center', mt: 1.6}}>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => handleClickFindOldDisease()}>Tm (Enter)</Button>\r\n                    </Box>\r\n\r\n                    <Box>\r\n                        {\r\n                            listFoundOldDisease ? \r\n                                listFoundOldDisease.length !== 0 ? \r\n                                <>\r\n                                    <TableContainer component={Paper} sx={{boxShadow: 4, mt: 1.4}} tabIndex={0} onKeyDown={(event) => handleTableKeyDown(event)} ref={tableRef}>\r\n                                        <Table stickyHeader>\r\n                                            <TableHead>\r\n                                                <TableRow sx={{\"& th\": {color: \"rgba(96, 96, 96)\", backgroundColor: \"pink\"}}}>\r\n                                                    <TableCell align='left' sx={{fontSize: '1rem'}}>M BN</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '1rem'}}>H tn</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '1rem'}}>Ngy sinh</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '1rem'}}>Gii tnh</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '1rem'}}>a ch</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '1rem'}}>Cha/M</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '1rem'}}>in thoi</TableCell>\r\n                                                </TableRow>\r\n                                            </TableHead>\r\n                                            <TableBody>\r\n                                                {listFoundOldDisease ? \r\n                                                    listFoundOldDisease.map((foundOldDiseaseItem, foundOldDiseaseIndex) => (\r\n                                                        <TableRow hover role=\"checkbox\" key={foundOldDiseaseIndex} sx={{cursor: 'pointer'}} \r\n                                                            selected={selectedRowIndex === foundOldDiseaseIndex} \r\n                                                            onDoubleClick={() => handleApplyDataPatientOldDisease(foundOldDiseaseItem)}\r\n                                                        >\r\n                                                            <TableCell align='left' >{foundOldDiseaseItem.patientCode}</TableCell>\r\n                                                            <TableCell align='left' >{foundOldDiseaseItem.fullName}</TableCell>\r\n                                                            <TableCell align='left' >{moment(foundOldDiseaseItem.dayOfBirth).format('DD/MM/YYYY')}</TableCell>\r\n                                                            <TableCell align='left' >{foundOldDiseaseItem.gender === true ? 'Nam' : 'N'}</TableCell>\r\n                                                            <TableCell align='left' >{foundOldDiseaseItem.fullAddress}</TableCell>\r\n                                                            <TableCell align='left' >{foundOldDiseaseItem.fullNameMother || foundOldDiseaseItem.fullNameFather}</TableCell>\r\n                                                            <TableCell align='left' >{foundOldDiseaseItem.phoneMother || foundOldDiseaseItem.phoneFather}</TableCell>\r\n                                                        </TableRow>\r\n                                                    ))\r\n                                                :\r\n                                                    null\r\n                                                }\r\n                                            </TableBody>\r\n                                        </Table>\r\n                                    </TableContainer>\r\n                                    <Typography variant='subtitle1' sx={{textAlign: 'center', mt: 1.5, fontWeight: 'bolder', color: 'green'}}>Tm thy {listFoundOldDisease.length} bnh nhn</Typography>\r\n                                </>\r\n                                : \r\n                                    <Typography variant='subtitle1' sx={{textAlign: 'center', mt: 1.5, fontWeight: 'bolder', color: 'red'}}>Khng tm thy bnh nhn</Typography>\r\n                            :\r\n                            null\r\n                        }\r\n                    </Box>  \r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <AlertProcessing\r\n                openAlertProcessing={openAlertProcessing} setOpenAlertProcessing={setOpenAlertProcessing}            \r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default OldDisease","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//modal\r\nimport AlertProcessing from '../ManageAlertProcessing/AlertProcessing';\r\n//mui theme\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport TextField from '@mui/material/TextField';\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\n//moment\r\nimport moment from 'moment';\r\n//api\r\nimport { getVaccinationByPatientId } from '../../Service/MedicalService';\r\n\r\nfunction OldDiseaseForRegister(props) {\r\n\r\n    const [openAlertProcessing, setOpenAlertProcessing] = useState(false);\r\n\r\n    const handleCloseOldDiseaseRegister = (event, reason) => {\r\n        if(reason && reason === \"backdropClick\"){\r\n            return;\r\n        }\r\n        else{\r\n            props.setOpenOldDiseaseRegister(false);\r\n        }\r\n    }\r\n\r\n    const handleApplyDataPatientOldDisease = async (foundOldDiseaseItem) => {\r\n        setOpenAlertProcessing(true);\r\n        setOpenAlertProcessing(true);\r\n        const responseVaccinationByPatientId = await getVaccinationByPatientId(foundOldDiseaseItem.patientId);\r\n        const dataPantientOldOldDiseaseRegister = {\r\n            examinationId: '',\r\n            oldDisease: true,\r\n            oldDiseaseWithNullCodeWard: foundOldDiseaseItem.codeWard ? false : true,\r\n            height: '',\r\n            weight: '',\r\n            headCircumference: '',\r\n            reason: '',\r\n            vaccination: responseVaccinationByPatientId.vaccination,\r\n            medicalTypeId: responseVaccinationByPatientId.medicalTypeId,\r\n            userIdDoctor: '',\r\n            patient: {\r\n                patientCode: foundOldDiseaseItem.patientCode,\r\n                identifier: foundOldDiseaseItem.identifier,\r\n                address: foundOldDiseaseItem.address,\r\n                fullName: foundOldDiseaseItem.fullName,\r\n                dayOfBirth: foundOldDiseaseItem.dayOfBirth,\r\n                codeWard: foundOldDiseaseItem.codeWard,\r\n                gender: foundOldDiseaseItem.gender,\r\n                fullNameMother: foundOldDiseaseItem.fullNameMother,\r\n                phoneMother: foundOldDiseaseItem.phoneMother,\r\n                fullNameFather: foundOldDiseaseItem.fullNameFather,\r\n                phoneFather: foundOldDiseaseItem.phoneFather\r\n            }\r\n        }\r\n        props.setDataPatientsRegister(dataPantientOldOldDiseaseRegister);\r\n        setOpenAlertProcessing(false);\r\n        handleCloseOldDiseaseRegister();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dialog fullWidth={true} maxWidth={'md'} open={props.openOldDiseaseRegister} onClose={(event, reason) => handleCloseOldDiseaseRegister(event, reason)} disableEscapeKeyDown={true} sx={{'.MuiDialog-paperWidthMd': {maxWidth: '970px'}}}>\r\n                <DialogTitle sx={{padding: '10px 0px 10px 0px', fontWeight: 'bolder', fontSize: '22px', textAlign: 'center' }}>Bnh nhn  tham gia khm nh k thuc danh sch di y?</DialogTitle>\r\n                <IconButton onClick={() => handleCloseOldDiseaseRegister()}sx={{position: 'absolute', right: 5, top: 7}}>\r\n                    <CloseIcon fontSize='medium'/>\r\n                </IconButton>\r\n                <DialogContent sx={{padding: '0px 18px 0px 18px', mt: 0, mb: 3}}>\r\n                    {props.listOldDiseaseRegister.length !== 0 ?\r\n                        <>\r\n                            <TableContainer component={Paper} sx={{boxShadow: 4}}>\r\n                                <Table stickyHeader>\r\n                                    <TableHead>\r\n                                        <TableRow sx={{\"& th\": {color: \"rgba(96, 96, 96)\", backgroundColor: \"pink\"}}}>\r\n                                            <TableCell align='left' sx={{fontSize: '1rem'}}>M BN</TableCell>\r\n                                            <TableCell align=\"left\" sx={{fontSize: '1rem'}}>H tn</TableCell>\r\n                                            <TableCell align=\"left\" sx={{fontSize: '1rem'}}>Ngy sinh</TableCell>\r\n                                            <TableCell align=\"left\" sx={{fontSize: '1rem'}}>Gii tnh</TableCell>\r\n                                            <TableCell align=\"left\" sx={{fontSize: '1rem'}}>a ch</TableCell>\r\n                                            <TableCell align=\"left\" sx={{fontSize: '1rem'}}>Cha/M</TableCell>\r\n                                            <TableCell align=\"left\" sx={{fontSize: '1rem'}}>in thoi</TableCell>\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {\r\n                                            props.listOldDiseaseRegister.map((foundOldDiseaseItem, foundOldDiseaseIndex) => (\r\n                                                <TableRow hover role=\"checkbox\" key={foundOldDiseaseIndex} sx={{cursor: 'pointer'}} onDoubleClick={() => handleApplyDataPatientOldDisease(foundOldDiseaseItem)}>\r\n                                                    <TableCell align='left' >{foundOldDiseaseItem.patientCode}</TableCell>\r\n                                                    <TableCell align='left' >{foundOldDiseaseItem.fullName}</TableCell>\r\n                                                    <TableCell align='left' >{moment(foundOldDiseaseItem.dayOfBirth).format('DD/MM/YYYY')}</TableCell>\r\n                                                    <TableCell align='left' >{foundOldDiseaseItem.gender === true ? 'Nam' : 'N'}</TableCell>\r\n                                                    <TableCell align='left' >{foundOldDiseaseItem.fullAddress}</TableCell>\r\n                                                    <TableCell align='left' >{foundOldDiseaseItem.fullNameMother || foundOldDiseaseItem.fullNameFather}</TableCell>\r\n                                                    <TableCell align='left' >{foundOldDiseaseItem.phoneMother || foundOldDiseaseItem.phoneFather}</TableCell>\r\n                                                </TableRow>\r\n                                            ))\r\n                                        }\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                        </>\r\n                    :\r\n                        null\r\n                    }\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <AlertProcessing\r\n                openAlertProcessing={openAlertProcessing} setOpenAlertProcessing={setOpenAlertProcessing}            \r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default OldDiseaseForRegister","import React, { useContext, useState, useEffect, useRef } from 'react';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//ExaminingSessios modal\r\nimport ExaminingSession from '../ManageExaminingSession/ExaminingSession';\r\n//old disease modal\r\nimport OldDisease from '../ManageOldDisease/OldDisease';\r\nimport OldDiseaseForRegister from '../ManageOldDisease/OldDiseaseForRegister';\r\nimport AlertProcessing from '../ManageAlertProcessing/AlertProcessing';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport Autocomplete from '@mui/material/Autocomplete';\r\nimport TextField from '@mui/material/TextField';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport Button from '@mui/material/Button';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n//mui x date picker\r\nimport { DemoContainer } from '@mui/x-date-pickers/internals/demo';\r\nimport { AdapterMoment } from '@mui/x-date-pickers/AdapterMoment';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DateField } from '@mui/x-date-pickers/DateField';\r\n//lodash\r\nimport _ from 'lodash';\r\n//scss\r\nimport './SCSS/Shared.scss';\r\n//moment\r\nimport moment from 'moment';\r\n//api\r\nimport { getListProvince, getListDistrict, getListWard, getFullAddressByIdWard } from '../../Service/PlaceService';\r\nimport { createMedicalBackRegister, getListOldDisease } from '../../Service/MedicalService';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction BookMedical(props) {\r\n\r\n  const dataPatientsRegisterDefault = {\r\n    examinationId: '',\r\n    oldDisease: false,\r\n    height: '',\r\n    weight: '',\r\n    headCircumference: '',\r\n    reason: '',\r\n    vaccination: false,\r\n    medicalTypeId: '',\r\n    userIdDoctor: '',\r\n    patient: {\r\n      patientCode: '',\r\n      identifier: '',\r\n      address: '',\r\n      fullName: '',\r\n      dayOfBirth: '',\r\n      codeWard: '',\r\n      gender: '',\r\n      fullNameMother: '',\r\n      phoneMother: '',\r\n      fullNameFather: '',\r\n      phoneFather: ''\r\n    }\r\n  }\r\n\r\n  const autocompleteValueDefault = { \r\n    dayOfBirth: null, \r\n    gender: {\r\n      value: null,\r\n      openOption: false\r\n    }, \r\n    province: {\r\n      value: null,\r\n      openOption: false\r\n    }, \r\n    district: {\r\n      value: null,\r\n      openOption: false\r\n    }, \r\n    ward: {\r\n      value: null,\r\n      openOption: false\r\n    }, \r\n    medicalType: {\r\n      value: null,\r\n      openOption: false\r\n    },\r\n    vaccination: false \r\n  }\r\n\r\n  const dataPatientsRegisterErrorDefault = { \r\n    identifier: { title: '', isError: false, openTooltip: false, focus: false },\r\n    patientCode: { title: '', isError: false, openTooltip: false, focus: false },\r\n    fullName: { title: '', isError: false, openTooltip: false, focus: false },\r\n    dayOfBirth: { title: '', isError: false, openTooltip: false, focus: false },\r\n    gender: { title: '', isError: false, openTooltip: false, focus: false },\r\n    province: { title: '', isError: false, openTooltip: false, focus: false },\r\n    district: { title: '', isError: false, openTooltip: false, focus: false },\r\n    ward: { title: '', isError: false, openTooltip: false, focus: false },\r\n    address: { title: '', isError: false, openTooltip: false, focus: false },\r\n    fullNameMother: { title: '', isError: false, openTooltip: false, focus: false },\r\n    phoneMother: { title: '', isError: false, openTooltip: false, focus: false },\r\n    phoneFather: { title: '', isError: false, openTooltip: false, focus: false },\r\n    height: { title: '', isError: false, openTooltip: false, focus: false },\r\n    weight: { title: '', isError: false, openTooltip: false, focus: false },\r\n    headCircumference: { title: '', isError: false, openTooltip: false, focus: false },\r\n    medicalType: { title: '', isError: false, openTooltip: false, focus: false },\r\n    reason: { title: '', isError: false, openTooltip: false, focus: false }\r\n  }\r\n\r\n  const listGender = [\r\n    {genderOrder: 1, genderName: 'Nam', genderValue: true},\r\n    {genderOrder: 2, genderName: 'N', genderValue: false},\r\n  ]\r\n\r\n  const listMedicalType = [\r\n    {medicalTypeOrder: 1, medicalTypeName: 'Khm Nhi khoa pht trin', medicalTypeId: 1},\r\n    {medicalTypeOrder: 2, medicalTypeName: 'Khm tr nguy c cao', medicalTypeId: 2},\r\n  ]\r\n\r\n  const { isDialogChangePasswordOpen, isOldDiseaseWithNullCodeWard, setIsOldDiseaseWithNullCodeWard } = useContext(UserContext);\r\n\r\n  const [openModalExaminingSession, setOpenModalExaminingSession] = useState(false);\r\n  const [isContinueSelectedExaminingSession, setIsContinueSelectedExaminingSession] = useState(false);\r\n\r\n  const [openModalOldDisease, setOpenModalOldDisease] = useState(false);\r\n\r\n  const [openOldDiseaseRegister, setOpenOldDiseaseRegister] = useState(false);\r\n  const [listOldDiseaseRegister, setListOldDiseaseRegister] = useState([]);\r\n\r\n  const [openAlertProcessing, setOpenAlertProcessing] = useState(false);\r\n\r\n  const [dataPatientsRegister, setDataPatientsRegister] = useState(dataPatientsRegisterDefault);\r\n  const [dataPatientsRegisterError, setDataPatientsRegisterError] = useState(dataPatientsRegisterErrorDefault);\r\n  const [focusField, setFocusField] = useState(null);\r\n\r\n  const [autocompleteValue, setAutocompleteValue] = useState(autocompleteValueDefault);\r\n\r\n  const [listProvince, setListProvince] = useState([]);\r\n  const [listDistrict, setListDistrict] = useState({list: [], loading: false});\r\n  const [listWard, setListWard] = useState({list: [], loading: false});\r\n\r\n  const formRef = useRef(null);\r\n  const firstFocusRef = useRef(null);\r\n  const dateFieldRef = useRef(null);\r\n  const typingRef = useRef(null);\r\n\r\n  const tooltipTheme = createTheme({\r\n    components: {\r\n      MuiTooltip: {\r\n        defaultProps: {\r\n          placement: 'bottom',\r\n          arrow: true,\r\n          componentsProps: {\r\n            tooltip: {\r\n              sx: {\r\n                bgcolor: '#d32f2f', \r\n              },\r\n            },\r\n            arrow: {\r\n              sx: {\r\n                color: '#d32f2f',\r\n              },\r\n            },\r\n          },\r\n          slotProps: {\r\n            popper: {\r\n              modifiers: [\r\n                {\r\n                  name: 'offset',\r\n                  options: {\r\n                    offset: [0, -7],\r\n                  },\r\n                },\r\n              ],\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  const handleKeyDown = (event, nextFieldId) => {\r\n    if (!/[0-9]/.test(event.key) && event.key !== 'Backspace' && event.key !== 'Delete' && event.key !== 'ArrowLeft' && event.key !== 'ArrowRight' && event.key !== 'Tab' && event.key === 'Enter') \r\n    {\r\n      if(event.key === 'Enter'){\r\n        event.preventDefault();\r\n        const nextField = document.getElementById(dataPatientsRegister.oldDiseaseWithNullCodeWard && nextFieldId === 'patientAddress' ? 'patientWeight' : nextFieldId); // Tm trng tip theo da trn ID\r\n        if (nextField) {\r\n          nextField.focus();\r\n          nextField.select(); // m bo con tr chut xut hin\r\n        }\r\n      }\r\n      else{\r\n        event.preventDefault();\r\n      }\r\n    }\r\n  }\r\n  \r\n  const filterOptions = (options, { inputValue }) => {\r\n    const lowercasedInput = inputValue.toLowerCase();\r\n\r\n    // X l c bit cho \"d\" v \"\"\r\n    const replaceSpecialCharacters = str => str.replace(//g, 'd');\r\n\r\n    return options.filter(option => {\r\n        const lowercasedFullName = replaceSpecialCharacters(option.fullName.toLowerCase());\r\n        const initials = replaceSpecialCharacters(option.fullName.split(' ').map(word => word[0]).join('').toLowerCase());\r\n\r\n        const normalizedInput = replaceSpecialCharacters(lowercasedInput);\r\n\r\n        return (\r\n            lowercasedFullName.includes(normalizedInput) ||\r\n            initials.includes(normalizedInput)\r\n        );\r\n    });\r\n  };\r\n\r\n  const handleFocus = (fieldName) => {\r\n    if(fieldName === 'Gender'){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.gender.openOption = true\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n    else if(fieldName === 'Province'){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.province.openOption = true\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n    else if (fieldName === 'District'){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.district.openOption = true\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n    else if(fieldName === 'Ward'){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.ward.openOption = true\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n    else if(fieldName === 'MedicalType'){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.medicalType.openOption = true\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleBlur = (value, fieldName) => {\r\n    if(value === '' || value === 'DD/MM/YYYY'){\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError};\r\n      if(fieldName === 'Identifier'){\r\n        if(typingRef.current){\r\n          clearInterval(typingRef.current);\r\n        }\r\n        typingRef.current = setTimeout(() => {  \r\n          _dataPatientsRegisterError.identifier.title = '';\r\n          _dataPatientsRegisterError.identifier.openTooltip = false;\r\n          _dataPatientsRegisterError.identifier.isError = false;\r\n        _dataPatientsRegisterError.identifier.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }, 10)\r\n      }\r\n      // if(fieldName === 'dayOfBirth'){\r\n      //   if(typingRef.current){\r\n      //     clearInterval(typingRef.current);\r\n      //   }\r\n      //   typingRef.current = setTimeout(() => {  \r\n      //     _dataPatientsRegisterError.dayOfBirth.title = '';\r\n      //     _dataPatientsRegisterError.dayOfBirth.openTooltip = false;\r\n      //     _dataPatientsRegisterError.dayOfBirth.isError = false;\r\n      //   _dataPatientsRegisterError.dayOfBirth.focus = false;\r\n      //     setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      //   }, 10)\r\n      // }\r\n      // else if(fieldName === 'PatientId'){     \r\n      //   if(typingRef.current){\r\n      //     clearInterval(typingRef.current);\r\n      //   }\r\n      //   typingRef.current = setTimeout(() => {  \r\n      //     _dataPatientsRegisterError.patientCode.title = '';\r\n      //     _dataPatientsRegisterError.patientCode.openTooltip = false;\r\n      //     _dataPatientsRegisterError.patientCode.isError = false;\r\n      //     _dataPatientsRegisterError.patientCode.focus = false;\r\n      //     setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      //   }, 10)\r\n      // }\r\n      // else if(fieldName === 'PhoneMother'){     \r\n      //   if(typingRef.current){\r\n      //     clearInterval(typingRef.current);\r\n      //   }\r\n      //   typingRef.current = setTimeout(() => {  \r\n      //     _dataPatientsRegisterError.phoneMother.title = '';\r\n      //     _dataPatientsRegisterError.phoneMother.openTooltip = false;\r\n      //     _dataPatientsRegisterError.phoneMother.isError = false;\r\n      //     _dataPatientsRegisterError.phoneFather.focus = false;\r\n      //     setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      //   }, 10)\r\n      // }\r\n      if(fieldName === 'PhoneFather'){\r\n        if(typingRef.current){\r\n          clearInterval(typingRef.current);\r\n        }\r\n        typingRef.current = setTimeout(() => {  \r\n          _dataPatientsRegisterError.phoneFather.title = '';\r\n          _dataPatientsRegisterError.phoneFather.openTooltip = false;\r\n          _dataPatientsRegisterError.phoneFather.isError = false;\r\n          _dataPatientsRegisterError.patientCode.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }, 10)\r\n      }\r\n      else if(fieldName === 'Gender'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.gender.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'Province'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.province.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'District'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.district.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'Ward'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.ward.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'MedicalType'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.medicalType.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n    }\r\n    else if(value !== ''){\r\n      if(fieldName === 'Gender'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.gender.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'Province'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.province.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'District'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.district.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'Ward'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.ward.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n      else if(fieldName === 'MedicalType'){\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.medicalType.openOption = false;\r\n          return { ...prevAutocompleteValue }\r\n        })\r\n      }\r\n    }\r\n  };\r\n\r\n  const onChangeIdentifier = (value) => {\r\n    if(value !== ''){\r\n      if(focusField === 'identifier'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      const takenValue = value;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n\r\n      typingRef.current = setTimeout(() => {\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        if(takenValue.length < 12){\r\n          _dataPatientsRegisterError.identifier.title = 'M nh danh cha  12 s';\r\n          _dataPatientsRegisterError.identifier.openTooltip = true;\r\n          _dataPatientsRegisterError.identifier.isError = true;\r\n          _dataPatientsRegisterError.identifier.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n        else{\r\n          setDataPatientsRegister(prevDataPatientsRegister => {\r\n            prevDataPatientsRegister.patient.identifier = takenValue\r\n            return { ...prevDataPatientsRegister }\r\n          })\r\n\r\n          _dataPatientsRegisterError.identifier.title = '';\r\n          _dataPatientsRegisterError.identifier.openTooltip = false;\r\n          _dataPatientsRegisterError.identifier.isError = false;\r\n          _dataPatientsRegisterError.identifier.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n      }, 100)\r\n    }\r\n    else{\r\n      if(focusField === 'identifier'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.identifier.title = '';\r\n      _dataPatientsRegisterError.identifier.openTooltip = false;\r\n      _dataPatientsRegisterError.identifier.isError = false;\r\n      _dataPatientsRegisterError.identifier.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }  \r\n  }\r\n\r\n  const onChangePatientId = (value) => {\r\n    if(value !== ''){\r\n      const takenValue = value;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n\r\n      typingRef.current = setTimeout(() => {\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        if(takenValue.length < 8){\r\n          _dataPatientsRegisterError.patientCode.title = 'M BN phi t 8 n 14 s';\r\n          _dataPatientsRegisterError.patientCode.openTooltip = true;\r\n          _dataPatientsRegisterError.patientCode.isError = true;\r\n          _dataPatientsRegisterError.patientCode.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n        else{\r\n          if(focusField === 'patientCode'){\r\n            setFocusField(null);\r\n          }\r\n          \r\n          setDataPatientsRegister(prevDataPatientsRegister => {\r\n            prevDataPatientsRegister.patient.patientCode = takenValue\r\n            return { ...prevDataPatientsRegister }\r\n          })\r\n\r\n          _dataPatientsRegisterError.patientCode.title = '';\r\n          _dataPatientsRegisterError.patientCode.openTooltip = false;\r\n          _dataPatientsRegisterError.patientCode.isError = false;\r\n          _dataPatientsRegisterError.patientCode.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n        \r\n        if(dataPatientsRegister.patient.patientCode.length === 14){\r\n          handleFindOldDisease()\r\n        }\r\n      }, 100)\r\n    }\r\n    // else{\r\n    //   const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n    //   _dataPatientsRegisterError.patientCode.title = '';\r\n    //   _dataPatientsRegisterError.patientCode.openTooltip = false;\r\n    //   _dataPatientsRegisterError.patientCode.isError = false;\r\n    //   _dataPatientsRegisterError.patientCode.focus = false;\r\n    //   setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    // }  \r\n  }\r\n\r\n  const onChangeFullName = (value) => {\r\n    const takenValue = value\r\n\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.patient.fullName = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(focusField === 'fullName'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      if(dataPatientsRegisterError.fullName.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.fullName.title = '';\r\n        _dataPatientsRegisterError.fullName.openTooltip = false;\r\n        _dataPatientsRegisterError.fullName.isError = false;\r\n        _dataPatientsRegisterError.fullName.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n\r\n    // setTimeout(() => {\r\n    //   if(dataPatientsRegister.patient.fullName !== ''){\r\n    //     handleFindOldDisease()\r\n    //   }\r\n    // }, 500)\r\n  }\r\n\r\n  const onChangeDOB = (value) => {\r\n    if(value){\r\n      const takenValue = value._d;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n\r\n      typingRef.current = setTimeout(() => {\r\n        const today = new Date();\r\n        const yearsDifference = today.getFullYear() - takenValue.getFullYear();\r\n        const monthsDifference = today.getMonth() - takenValue.getMonth();\r\n        const daysDifference = today.getDate() - takenValue.getDate();\r\n        const age = today.getFullYear() - takenValue.getFullYear();\r\n\r\n        let totalMonths = yearsDifference * 12 + monthsDifference;\r\n        let totalDays = daysDifference;\r\n\r\n        if (daysDifference < 0) {\r\n          totalMonths -= 1;\r\n          totalDays += 30; // Gi s mi thng c 30 ngy\r\n        }\r\n\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError};\r\n\r\n        if(today < takenValue || age > 2 || isNaN(age) || totalMonths > 24 || (totalMonths === 24 && totalDays > 29)){\r\n          _dataPatientsRegisterError.dayOfBirth.title = 'Bnh nhn ln hn 24 thng tui khng th khm';\r\n          _dataPatientsRegisterError.dayOfBirth.openTooltip = true;\r\n          _dataPatientsRegisterError.dayOfBirth.isError = true;\r\n          _dataPatientsRegisterError.dayOfBirth.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n\r\n          setAutocompleteValue(prevAutocompleteValue => {\r\n            prevAutocompleteValue.dayOfBirth = value\r\n            return {\r\n              ...prevAutocompleteValue\r\n            }\r\n          })\r\n        }\r\n\r\n        else{\r\n          if(focusField === 'dayOfBirth'){\r\n            setFocusField(null);\r\n          }\r\n\r\n          const formattedDate = moment(takenValue).format('YYYY-MM-DD');\r\n          setDataPatientsRegister(prevDataPatientsRegister => {\r\n          prevDataPatientsRegister.patient.dayOfBirth = formattedDate\r\n            return {\r\n              ...prevDataPatientsRegister\r\n            }\r\n          })\r\n\r\n          setAutocompleteValue(prevAutocompleteValue => {\r\n            prevAutocompleteValue.dayOfBirth = value\r\n            return {\r\n              ...prevAutocompleteValue\r\n            }\r\n          })\r\n\r\n          _dataPatientsRegisterError.dayOfBirth.title = '';\r\n          _dataPatientsRegisterError.dayOfBirth.openTooltip = false;\r\n          _dataPatientsRegisterError.dayOfBirth.isError = false;\r\n          _dataPatientsRegisterError.dayOfBirth.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n      }, 100)\r\n\r\n      // if(dataPatientsRegister.patient.dayOfBirth !== ''){\r\n      //   handleFindOldDisease()\r\n      // }\r\n    }  \r\n  }\r\n\r\n  const onSelectGender = (e, value) => {\r\n    if(focusField === 'gender'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setDataPatientsRegister(prevDataPatientsRegister => {\r\n      prevDataPatientsRegister.patient.gender = value.genderValue\r\n      return {\r\n        ...prevDataPatientsRegister\r\n      }\r\n    })\r\n\r\n    setAutocompleteValue(prevAutocompleteValue => {\r\n      prevAutocompleteValue.gender.value = value\r\n      return {\r\n        ...prevAutocompleteValue\r\n      }\r\n    })\r\n\r\n    if(dataPatientsRegisterError.gender.isError){\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.gender.title = '';\r\n      _dataPatientsRegisterError.gender.openTooltip = false;\r\n      _dataPatientsRegisterError.gender.isError = false;\r\n      _dataPatientsRegisterError.gender.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }\r\n\r\n    // if(dataPatientsRegister.patient.fullName !== '' && dataPatientsRegister.patient.dayOfBirth !== '' && dataPatientsRegister.patient.gender !== ''){\r\n    //   handleFindOldDisease();\r\n    // }\r\n  }\r\n\r\n  const onSelectProvine = async (e, value) => {\r\n    if(focusField === 'province'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setAutocompleteValue(prevAutocompleteValue => {\r\n      prevAutocompleteValue.province.value = value\r\n      return {\r\n        ...prevAutocompleteValue\r\n      }\r\n    })\r\n\r\n    if(autocompleteValue.district.value !== null){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.district.value = null\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n\r\n    if(autocompleteValue.ward.value !== null){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.ward.value = null\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n\r\n    if(dataPatientsRegisterError.province.isError){\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.province.title = '';\r\n      _dataPatientsRegisterError.province.openTooltip = false;\r\n      _dataPatientsRegisterError.province.isError = false;\r\n      _dataPatientsRegisterError.province.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }\r\n\r\n    setListWard(prevListWard => {\r\n      prevListWard.list = []\r\n      return {...prevListWard}\r\n    });\r\n\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.loading = true\r\n      return {...prevListDistrict}\r\n    });\r\n\r\n    const responseListDistrict = await getListDistrict(value.code);\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.loading = false\r\n      prevListDistrict.list = responseListDistrict\r\n      return {...prevListDistrict}\r\n    });\r\n  }\r\n\r\n  const onSelectDistrict = async (e, value) => {\r\n    if(focusField === 'district'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setAutocompleteValue(prevAutocompleteValue => {\r\n      prevAutocompleteValue.district.value = value\r\n      return {\r\n        ...prevAutocompleteValue\r\n      }\r\n    })\r\n\r\n    if(autocompleteValue.ward.value !== null){\r\n      setAutocompleteValue(prevAutocompleteValue => {\r\n        prevAutocompleteValue.ward.value = null\r\n        return {\r\n          ...prevAutocompleteValue\r\n        }\r\n      })\r\n    }\r\n\r\n    if(dataPatientsRegisterError.district.isError){\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.district.title = '';\r\n      _dataPatientsRegisterError.district.openTooltip = false;\r\n      _dataPatientsRegisterError.district.isError = false;\r\n      _dataPatientsRegisterError.district.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }\r\n\r\n    setListWard(prevListWard => {\r\n      prevListWard.loading = true\r\n      return {...prevListWard}\r\n    });\r\n    \r\n    const responseListWard = await getListWard(value.code);\r\n    setListWard(prevListWard => {\r\n      prevListWard.loading = false\r\n      prevListWard.list = responseListWard\r\n      return {...prevListWard}\r\n    })\r\n  }\r\n\r\n  const onSelectWard = (e, value) => {\r\n    if(focusField === 'ward'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setDataPatientsRegister(prevDataPatientsRegister => {\r\n      prevDataPatientsRegister.patient.codeWard = value.code\r\n      return {\r\n        ...prevDataPatientsRegister\r\n      }\r\n    })\r\n\r\n    setAutocompleteValue(prevAutocompleteValue => {\r\n      prevAutocompleteValue.ward.value = value\r\n      return {\r\n        ...prevAutocompleteValue\r\n      }\r\n    })\r\n\r\n    if(dataPatientsRegisterError.ward.isError){\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.ward.title = '';\r\n      _dataPatientsRegisterError.ward.openTooltip = false;\r\n      _dataPatientsRegisterError.ward.isError = false;\r\n      _dataPatientsRegisterError.ward.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }\r\n  }\r\n\r\n  const onChangeFolk = (value) => {\r\n  }\r\n\r\n  const onChangeAddress = (value) => {\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if(focusField === 'address'){\r\n        setFocusField(null);\r\n      }\r\n      \r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.patient.address = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(dataPatientsRegisterError.address.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.address.title = '';\r\n        _dataPatientsRegisterError.address.openTooltip = false;\r\n        _dataPatientsRegisterError.address.isError = false;\r\n        _dataPatientsRegisterError.address.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeFullNameMother = (value) => {\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if(focusField === 'fullNameMother'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.patient.fullNameMother = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(dataPatientsRegisterError.fullNameMother.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.fullNameMother.title = '';\r\n        _dataPatientsRegisterError.fullNameMother.openTooltip = false;\r\n        _dataPatientsRegisterError.fullNameMother.isError = false;\r\n        _dataPatientsRegisterError.fullNameMother.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangePhoneMother = (value) => {\r\n    if(value !== ''){\r\n      const takenValue = value;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n\r\n      typingRef.current = setTimeout(() => {\r\n        if(focusField === 'phoneMother'){\r\n          setFocusField(null);\r\n        }\r\n\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        if(takenValue.length < 10){\r\n          _dataPatientsRegisterError.phoneMother.title = 'S in thoi cha  10 s';\r\n          _dataPatientsRegisterError.phoneMother.openTooltip = true;\r\n          _dataPatientsRegisterError.phoneMother.isError = true;\r\n          _dataPatientsRegisterError.phoneMother.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n        else{\r\n          setDataPatientsRegister(prevDataPatientsRegister => {\r\n            prevDataPatientsRegister.patient.phoneMother = takenValue\r\n            return {\r\n              ...prevDataPatientsRegister\r\n            }\r\n          })\r\n\r\n          _dataPatientsRegisterError.phoneMother.title = '';\r\n          _dataPatientsRegisterError.phoneMother.openTooltip = false;\r\n          _dataPatientsRegisterError.phoneMother.isError = false;\r\n          _dataPatientsRegisterError.phoneMother.focus = false;\r\n\r\n          _dataPatientsRegisterError.phoneFather.title = '';\r\n          _dataPatientsRegisterError.phoneFather.openTooltip = false;\r\n          _dataPatientsRegisterError.phoneFather.isError = false;\r\n          _dataPatientsRegisterError.phoneFather.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n      }, 100)\r\n    }\r\n    else{\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.phoneMother.title = '';\r\n      _dataPatientsRegisterError.phoneMother.openTooltip = false;\r\n      _dataPatientsRegisterError.phoneMother.isError = false;\r\n      _dataPatientsRegisterError.phoneMother.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    } \r\n    // if(dataPatientsRegister.patient.phoneMother.length === 10){\r\n    //   handleFindOldDisease()\r\n    // }\r\n  }\r\n\r\n  const onChangeFullNameFather = (value) => {\r\n    if(focusField === 'fullNameFather'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.patient.fullNameFather = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(dataPatientsRegisterError.fullNameMother.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.fullNameMother.title = '';\r\n        _dataPatientsRegisterError.fullNameMother.openTooltip = false;\r\n        _dataPatientsRegisterError.fullNameMother.isError = false;\r\n        _dataPatientsRegisterError.fullNameMother.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangePhoneFather = (e, value) => {\r\n    if(focusField === 'phoneFather'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    if(value !== ''){\r\n      const takenValue = value;\r\n      if(typingRef.current){\r\n        clearInterval(typingRef.current);\r\n      }\r\n\r\n      typingRef.current = setTimeout(() => {\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        if(takenValue.length < 10){\r\n          _dataPatientsRegisterError.phoneFather.title = 'S in thoi cha  10 s';\r\n          _dataPatientsRegisterError.phoneFather.openTooltip = true;\r\n          _dataPatientsRegisterError.phoneFather.isError = true;\r\n          _dataPatientsRegisterError.phoneFather.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n        else{\r\n          setDataPatientsRegister(prevDataPatientsRegister => {\r\n            prevDataPatientsRegister.patient.phoneFather = takenValue\r\n            return {\r\n              ...prevDataPatientsRegister\r\n            }\r\n          })\r\n\r\n          _dataPatientsRegisterError.phoneFather.title = '';\r\n          _dataPatientsRegisterError.phoneFather.openTooltip = false;\r\n          _dataPatientsRegisterError.phoneFather.isError = false;\r\n          _dataPatientsRegisterError.phoneFather.focus = false;\r\n\r\n          _dataPatientsRegisterError.phoneMother.title = '';\r\n          _dataPatientsRegisterError.phoneMother.openTooltip = false;\r\n          _dataPatientsRegisterError.phoneMother.isError = false;\r\n          _dataPatientsRegisterError.phoneMother.focus = false;\r\n          setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n        }\r\n      }, 100)\r\n    }\r\n    else{\r\n      if(focusField === 'phoneFather'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.phoneFather.title = '';\r\n      _dataPatientsRegisterError.phoneFather.openTooltip = false;\r\n      _dataPatientsRegisterError.phoneFather.isError = false;\r\n      _dataPatientsRegisterError.phoneFather.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }\r\n\r\n    // if(dataPatientsRegister.patient.phoneFather.length === 10){\r\n    //   handleFindOldDisease()\r\n    // }\r\n  }\r\n\r\n  const onChangeHeight = (value) => {\r\n    const takenValue = value;\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if(focusField === 'height'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.height = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(dataPatientsRegisterError.height.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.height.title = '';\r\n        _dataPatientsRegisterError.height.openTooltip = false;\r\n        _dataPatientsRegisterError.height.isError = false;\r\n        _dataPatientsRegisterError.height.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeWeight = (value) => {\r\n    const takenValue = value;\r\n\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if(focusField === 'weight'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.weight = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(dataPatientsRegisterError.weight.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.weight.title = '';\r\n        _dataPatientsRegisterError.weight.openTooltip = false;\r\n        _dataPatientsRegisterError.weight.isError = false;\r\n        _dataPatientsRegisterError.weight.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeHeadCircumference = (value) => {\r\n    const takenValue = value;\r\n\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if(focusField === 'headCircumference'){\r\n        setFocusField(null);\r\n      }\r\n\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.headCircumference = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      if(dataPatientsRegisterError.headCircumference.isError){\r\n        const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n        _dataPatientsRegisterError.headCircumference.title = '';\r\n        _dataPatientsRegisterError.headCircumference.openTooltip = false;\r\n        _dataPatientsRegisterError.headCircumference.isError = false;\r\n        _dataPatientsRegisterError.headCircumference.focus = false;\r\n        setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const onSelectMedicalType = (e, value) => {\r\n    if(focusField === 'medicalType'){\r\n      setFocusField(null);\r\n    }\r\n\r\n    setDataPatientsRegister(prevDataPatientsRegister => {\r\n      prevDataPatientsRegister.medicalTypeId = value.medicalTypeId\r\n      return {\r\n        ...prevDataPatientsRegister\r\n      }\r\n    })\r\n\r\n    setAutocompleteValue(prevAutocompleteValue => {\r\n      prevAutocompleteValue.medicalType.value = value\r\n      return {\r\n        ...prevAutocompleteValue\r\n      }\r\n    })\r\n\r\n    if(dataPatientsRegisterError.medicalType.isError){\r\n      const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      _dataPatientsRegisterError.medicalType.title = '';\r\n      _dataPatientsRegisterError.medicalType.openTooltip = false;\r\n      _dataPatientsRegisterError.medicalType.isError = false;\r\n      _dataPatientsRegisterError.medicalType.focus = false;\r\n      setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    }\r\n  }\r\n\r\n  const onChangeReason = (value) => {\r\n    const takenValue = value;\r\n\r\n    if(typingRef.current){\r\n      clearInterval(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      setDataPatientsRegister(prevDataPatientsRegister => {\r\n        prevDataPatientsRegister.reason = takenValue\r\n        return {\r\n          ...prevDataPatientsRegister\r\n        }\r\n      })\r\n\r\n      // if(dataPatientsRegisterError.reason.isError){\r\n      //   const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n      //   _dataPatientsRegisterError.reason.isError = false;\r\n      //   setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n      // }\r\n    }, 100)\r\n  }\r\n\r\n  const onChangeVaccination = (bool) => {\r\n    setDataPatientsRegister(prevDataPatientsRegister => {\r\n      prevDataPatientsRegister.vaccination = bool\r\n      return {\r\n        ...prevDataPatientsRegister\r\n      }\r\n    })\r\n\r\n    setAutocompleteValue(prevAutocompleteValue => {\r\n      prevAutocompleteValue.vaccination = bool\r\n      return {\r\n        ...prevAutocompleteValue\r\n      }\r\n    })\r\n  }\r\n\r\n  const checkValidate = () => {\r\n    let isValid = true;\r\n    const _dataPatientsRegisterError = {...dataPatientsRegisterError}\r\n\r\n    if(dataPatientsRegisterError.identifier.title !== ''){\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.identifier.focus = true;\r\n        setFocusField('identifier');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.patientCode === ''){\r\n      _dataPatientsRegisterError.patientCode.title = 'Bn cha nhp m bnh nhn';\r\n      _dataPatientsRegisterError.patientCode.openTooltip = true;\r\n      _dataPatientsRegisterError.patientCode.isError = true;\r\n      if(Object.values(dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.patientCode.focus = true;\r\n        setFocusField('patientCode');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegisterError.patientCode.title !== ''){\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.patientCode.focus = true;\r\n        setFocusField('patientCode');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.fullName === ''){\r\n      _dataPatientsRegisterError.fullName.title = 'Bn cha nhp h tn';\r\n      _dataPatientsRegisterError.fullName.openTooltip = true;\r\n      _dataPatientsRegisterError.fullName.isError = true;\r\n      if(Object.values(dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.fullName.focus = true;\r\n        setFocusField('fullName');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.dayOfBirth === ''){\r\n      _dataPatientsRegisterError.dayOfBirth.title = 'Bn cha nhp ngy sinh';\r\n      _dataPatientsRegisterError.dayOfBirth.openTooltip = true;\r\n      _dataPatientsRegisterError.dayOfBirth.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.dayOfBirth.focus = true;\r\n        if (dateFieldRef.current) {\r\n          dateFieldRef.current.focus(); // t focus vo dateField khi c li\r\n        }\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegisterError.dayOfBirth.title !== ''){\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.dayOfBirth.focus = true;\r\n        if (dateFieldRef.current) {\r\n          dateFieldRef.current.focus(); // t focus vo dateField khi c li\r\n        }\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.gender === ''){\r\n      _dataPatientsRegisterError.gender.title = 'Bn cha chn gii tnh';\r\n      _dataPatientsRegisterError.gender.openTooltip = true;\r\n      _dataPatientsRegisterError.gender.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.gender.focus = true;\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.gender.openOption = true\r\n          return {...prevAutocompleteValue}\r\n        })\r\n      setFocusField('gender');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(autocompleteValue.province.value === null){\r\n      _dataPatientsRegisterError.province.title = 'Bn cha chn tnh thnh';\r\n      _dataPatientsRegisterError.province.openTooltip = true;\r\n      _dataPatientsRegisterError.province.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.province.focus = true;\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.province.openOption = true\r\n          return {...prevAutocompleteValue}\r\n        })\r\n        setFocusField('province');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(autocompleteValue.district.value === null){\r\n      _dataPatientsRegisterError.district.title = 'Bn cha chn qun huyn';\r\n      _dataPatientsRegisterError.district.openTooltip = true;\r\n      _dataPatientsRegisterError.district.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.district.focus = true;\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.district.openOption = true\r\n          return {...prevAutocompleteValue}\r\n        })\r\n        setFocusField('district');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(autocompleteValue.ward.value === null){\r\n      _dataPatientsRegisterError.ward.title = 'Bn cha chn phng x';\r\n      _dataPatientsRegisterError.ward.openTooltip = true;\r\n      _dataPatientsRegisterError.ward.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.ward.focus = true;\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.ward.openOption = true\r\n          return {...prevAutocompleteValue}\r\n        })\r\n        setFocusField('ward');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.address === ''){\r\n      _dataPatientsRegisterError.address.title = 'Bn cha nhp a ch';\r\n      _dataPatientsRegisterError.address.openTooltip = true;\r\n      _dataPatientsRegisterError.address.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.address.focus = true;\r\n        setFocusField('address');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.fullNameMother === '' && dataPatientsRegister.patient.fullNameFather === ''){\r\n      _dataPatientsRegisterError.fullNameMother.title = 'Bn cha nhp tn ph huynh';\r\n      _dataPatientsRegisterError.fullNameMother.openTooltip = true;\r\n      _dataPatientsRegisterError.fullNameMother.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.fullNameMother.focus = true;\r\n        setFocusField('fullNameMother');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.patient.phoneMother === '' && dataPatientsRegister.patient.phoneFather === ''){\r\n      _dataPatientsRegisterError.phoneMother.title = 'Bn cha nhp s in thoi';\r\n      _dataPatientsRegisterError.phoneMother.openTooltip = true;\r\n      _dataPatientsRegisterError.phoneMother.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.phoneMother.focus = true;\r\n        setFocusField('phoneMother');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegisterError.phoneMother.title !== ''){\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.phoneMother.focus = true;\r\n        setFocusField('phoneMother');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegisterError.phoneFather.title !== ''){\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.phoneFather.focus = true;\r\n        setFocusField('phoneFather');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.weight === ''){\r\n      _dataPatientsRegisterError.weight.title = 'Bn cha nhp cn nng';\r\n      _dataPatientsRegisterError.weight.openTooltip = true;\r\n      _dataPatientsRegisterError.weight.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.weight.focus = true;\r\n        setFocusField('weight');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.height === ''){\r\n      _dataPatientsRegisterError.height.title = 'Bn cha nhp chiu cao';\r\n      _dataPatientsRegisterError.height.openTooltip = true;\r\n      _dataPatientsRegisterError.height.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.height.focus = true;\r\n        setFocusField('height');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.headCircumference === ''){\r\n      _dataPatientsRegisterError.headCircumference.title = 'Bn cha nhp s vng u';\r\n      _dataPatientsRegisterError.headCircumference.openTooltip = true;\r\n      _dataPatientsRegisterError.headCircumference.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.headCircumference.focus = true;\r\n        setFocusField('headCircumference');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    if(dataPatientsRegister.medicalTypeId === ''){\r\n      _dataPatientsRegisterError.medicalType.title = 'Bn cha chn loi hnh khm';\r\n      _dataPatientsRegisterError.medicalType.openTooltip = true;\r\n      _dataPatientsRegisterError.medicalType.isError = true;\r\n      if(Object.values(_dataPatientsRegisterError).every(item => item.focus === false)){\r\n        _dataPatientsRegisterError.medicalType.focus = true;\r\n        setAutocompleteValue(prevAutocompleteValue => {\r\n          prevAutocompleteValue.medicalType.openOption = true\r\n          return {...prevAutocompleteValue}\r\n        })\r\n        setFocusField('medicalType');\r\n      }\r\n      isValid = false;\r\n    }\r\n\r\n    // if(dataPatientsRegister.reason === ''){\r\n    //   _dataPatientsRegisterError.reason.isError = true;\r\n    //   isValid = false;\r\n    // }\r\n\r\n    setDataPatientsRegisterError(_dataPatientsRegisterError);\r\n    return isValid;\r\n  }\r\n\r\n  const handleMedicalRegister = () => {\r\n    setTimeout(() => {\r\n      if(checkValidate()){\r\n        firstFocusRef.current.focus();\r\n        if(props.dataPantientAppointmentsToday){\r\n          handleMedicalBackRegister();\r\n        }\r\n        else{\r\n          setOpenModalExaminingSession(true);\r\n        }\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  const handleMedicalBackRegister = async () => {\r\n    setOpenAlertProcessing(true);\r\n    const responseCreateMedicalBackRegister = await createMedicalBackRegister(dataPatientsRegister);\r\n    if(responseCreateMedicalBackRegister.status === 200){\r\n      toast.success(responseCreateMedicalBackRegister.data, {toastId: 'success5'})\r\n      props.setCompleteMedicalRegister(true);\r\n      handleResetField();\r\n    }\r\n    else{\r\n      toast.error(responseCreateMedicalBackRegister.data, {toastId: 'error5'})\r\n    }\r\n    setOpenAlertProcessing(false);\r\n  }\r\n\r\n  const handleApplyPantientOldDiseaseData = async () => {\r\n    setOpenAlertProcessing(true);\r\n    document.getElementById('patientIdentifier').value = dataPatientsRegister.patient.identifier;\r\n    document.getElementById('patientCode').value = dataPatientsRegister.patient.patientCode;\r\n    document.getElementById('patientFullName').value = dataPatientsRegister.patient.fullName;\r\n\r\n    let _autocompleteValue = {...autocompleteValue};\r\n    _autocompleteValue.dayOfBirth = moment(dataPatientsRegister.patient.dayOfBirth);\r\n\r\n    if(dataPatientsRegister.patient.codeWard){\r\n      const response = await getFullAddressByIdWard(dataPatientsRegister.patient.codeWard);\r\n      const responseListDistrict = await getListDistrict(response.provinceCode);\r\n      const responseListWard = await getListWard(response.districtCode);\r\n  \r\n      const indexListProvince = listProvince.findIndex(province => province.code === response.provinceCode);\r\n      const indexListDistrict = responseListDistrict.findIndex(district => district.code === response.districtCode);\r\n      const indexListWard = responseListWard.findIndex(ward => ward.code === response.wardCode);\r\n      \r\n      _autocompleteValue.province.value = listProvince[indexListProvince];\r\n      _autocompleteValue.district.value = responseListDistrict[indexListDistrict];\r\n      _autocompleteValue.ward.value = responseListWard[indexListWard];\r\n      _autocompleteValue.vaccination = dataPatientsRegister.vaccination;\r\n    }\r\n\r\n    const indexListGender = listGender.findIndex(gender => gender.genderValue === dataPatientsRegister.patient.gender);\r\n    _autocompleteValue.gender.value = listGender[indexListGender];\r\n\r\n    const indexListMedicalType = listMedicalType.findIndex(medicalType => medicalType.medicalTypeId === dataPatientsRegister.medicalTypeId);\r\n    _autocompleteValue.medicalType.value = listMedicalType[indexListMedicalType];\r\n\r\n    setAutocompleteValue(_autocompleteValue);\r\n\r\n    setIsOldDiseaseWithNullCodeWard(true);\r\n    \r\n    document.getElementById('patientAddress').value = dataPatientsRegister.patient.address;\r\n    document.getElementById('patientFullNameMother').value = dataPatientsRegister.patient.fullNameMother;\r\n    document.getElementById('patientPhoneMother').value = dataPatientsRegister.patient.phoneMother\r\n    document.getElementById('patientFullNameFather').value = dataPatientsRegister.patient.fullNameFather;\r\n    document.getElementById('patientPhoneFather').value = dataPatientsRegister.patient.phoneFather;\r\n\r\n    if(dataPatientsRegister.oldDiseaseWithNullCodeWard){\r\n      setTimeout(() => {\r\n        setDataPatientsRegisterError(dataPatientsRegisterErrorDefault);\r\n        setOpenAlertProcessing(false);\r\n\r\n        setFocusField('province');\r\n      }, 300)\r\n    }\r\n    else{\r\n      setDataPatientsRegisterError(dataPatientsRegisterErrorDefault);\r\n      setOpenAlertProcessing(false);\r\n      \r\n      setFocusField('weight');\r\n    }\r\n  }\r\n\r\n  const handleApplyPantientAppointmentsTodayData = async () => {\r\n    setOpenAlertProcessing(true);\r\n    document.getElementById('patientIdentifier').value = props.dataPantientAppointmentsToday.patient.identifier;\r\n    document.getElementById('patientCode').value = props.dataPantientAppointmentsToday.patient.patientCode;\r\n    document.getElementById('patientFullName').value = props.dataPantientAppointmentsToday.patient.fullName;\r\n\r\n    const _autocompleteValue = {...autocompleteValue};\r\n    _autocompleteValue.dayOfBirth = moment(props.dataPantientAppointmentsToday.patient.dayOfBirth);\r\n\r\n    const response = await getFullAddressByIdWard(props.dataPantientAppointmentsToday.patient.codeWard);\r\n    const responseListDistrict = await getListDistrict(response.provinceCode);\r\n    const responseListWard = await getListWard(response.districtCode);\r\n\r\n    const indexListGender = listGender.findIndex(gender => gender.genderValue === props.dataPantientAppointmentsToday.patient.gender);\r\n    const indexListProvince = listProvince.findIndex(province => province.code === response.provinceCode);\r\n    const indexListDistrict = responseListDistrict.findIndex(district => district.code === response.districtCode);\r\n    const indexListWard = responseListWard.findIndex(ward => ward.code === response.wardCode);\r\n    const indexListMedicalType = listMedicalType.findIndex(medicalType => medicalType.medicalTypeId === props.dataPantientAppointmentsToday.medicalTypeId);\r\n    \r\n    _autocompleteValue.gender.value = listGender[indexListGender];\r\n    _autocompleteValue.province.value = listProvince[indexListProvince];\r\n    _autocompleteValue.district.value = responseListDistrict[indexListDistrict];\r\n    _autocompleteValue.ward.value = responseListWard[indexListWard];\r\n    _autocompleteValue.medicalType.value = listMedicalType[indexListMedicalType];\r\n    _autocompleteValue.vaccination = props.dataPantientAppointmentsToday.vaccination;\r\n    setAutocompleteValue(_autocompleteValue);\r\n\r\n    document.getElementById('patientAddress').value = props.dataPantientAppointmentsToday.patient.address;\r\n    document.getElementById('patientFullNameMother').value = props.dataPantientAppointmentsToday.patient.fullNameMother;\r\n    document.getElementById('patientPhoneMother').value = props.dataPantientAppointmentsToday.patient.phoneMother\r\n    document.getElementById('patientFullNameFather').value = props.dataPantientAppointmentsToday.patient.fullNameFather;\r\n    document.getElementById('patientPhoneFather').value = props.dataPantientAppointmentsToday.patient.phoneFather;\r\n\r\n    setDataPatientsRegisterError(dataPatientsRegisterErrorDefault);\r\n    setOpenAlertProcessing(false);\r\n    setFocusField('weight');\r\n  }\r\n\r\n  const handleResetField = () => {\r\n    formRef.current.reset();\r\n    const inputs = formRef.current.querySelectorAll('input, textarea');\r\n    inputs.forEach(input => input.dispatchEvent(new Event('input', { bubbles: true })));\r\n\r\n    setAutocompleteValue(autocompleteValueDefault);\r\n\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.loading = false\r\n      prevListDistrict.list = []\r\n      return {...prevListDistrict}\r\n    })\r\n    setListWard(prevListWard => {\r\n      prevListWard.loading = false\r\n      prevListWard.list = []\r\n      return {...prevListWard}\r\n    })\r\n\r\n    if(props.dataPantientAppointmentsToday){\r\n      props.setDataPantientAppointmentsToday();\r\n    }\r\n\r\n    setFocusField(null);\r\n\r\n\r\n    const oldDisease = dataPatientsRegister.oldDisease ? true : false\r\n\r\n    setDataPatientsRegister(dataPatientsRegisterDefault);\r\n    setDataPatientsRegisterError(dataPatientsRegisterErrorDefault);\r\n\r\n    if(isOldDiseaseWithNullCodeWard){\r\n      setIsOldDiseaseWithNullCodeWard(false);\r\n    }\r\n\r\n    if(oldDisease){\r\n      setTimeout(() => {\r\n        firstFocusRef.current.focus();\r\n      }, 100)\r\n    }\r\n    else{\r\n      firstFocusRef.current.focus();\r\n    }\r\n  }\r\n\r\n  const handleOpenModalOldDisease = () => {\r\n    formRef.current.reset();\r\n    const inputs = formRef.current.querySelectorAll('input, textarea');\r\n    inputs.forEach(input => input.dispatchEvent(new Event('input', { bubbles: true })));\r\n\r\n    setAutocompleteValue(autocompleteValueDefault);\r\n\r\n    setListDistrict(prevListDistrict => {\r\n      prevListDistrict.loading = false\r\n      prevListDistrict.list = []\r\n      return {...prevListDistrict}\r\n    })\r\n    setListWard(prevListWard => {\r\n      prevListWard.loading = false\r\n      prevListWard.list = []\r\n      return {...prevListWard}\r\n    })\r\n\r\n    if(props.dataPantientAppointmentsToday){\r\n      props.setDataPantientAppointmentsToday();\r\n    }\r\n\r\n    setFocusField(null);\r\n\r\n    firstFocusRef.current.focus();\r\n\r\n    if(isOldDiseaseWithNullCodeWard){\r\n      setIsOldDiseaseWithNullCodeWard(false);\r\n    }\r\n\r\n    setDataPatientsRegister(dataPatientsRegisterDefault);\r\n    setAutocompleteValue(autocompleteValueDefault);\r\n    setDataPatientsRegisterError(dataPatientsRegisterErrorDefault);\r\n    setOpenModalOldDisease(true);\r\n  }\r\n\r\n  const handleGetListProvince = async () => {\r\n    const response = await getListProvince();\r\n    if(response !== 400){\r\n      setListProvince(response);\r\n    }\r\n  }\r\n\r\n  const handleFindOldDisease = async () => {\r\n    const response = await getListOldDisease(dataPatientsRegister.patient.patientCode, dataPatientsRegister.patient.phoneMother ? dataPatientsRegister.patient.phoneMother : dataPatientsRegister.patient.phoneFather, dataPatientsRegister.patient.fullName, dataPatientsRegister.patient.dayOfBirth);\r\n    if(response.length !== 0){\r\n      setListOldDiseaseRegister(response);\r\n      setOpenOldDiseaseRegister(true);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    handleGetListProvince();\r\n    firstFocusRef.current.focus();\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(dataPatientsRegister.oldDisease === true){\r\n      handleApplyPantientOldDiseaseData();\r\n    }\r\n  }, [dataPatientsRegister.oldDisease])\r\n\r\n  useEffect(() => {\r\n    if(props.dataPantientAppointmentsToday){\r\n      setDataPatientsRegister(props.dataPantientAppointmentsToday);\r\n      handleApplyPantientAppointmentsTodayData();\r\n    }\r\n  }, [props.dataPantientAppointmentsToday]) \r\n\r\n  useEffect(() => {\r\n    if(isDialogChangePasswordOpen === false){\r\n      if(props.onF2Press){\r\n        if(openModalExaminingSession === true && openModalOldDisease === false){\r\n          setIsContinueSelectedExaminingSession(true);\r\n          props.setOnF2Press(false);\r\n        }\r\n        else{\r\n          handleMedicalRegister();\r\n          props.setOnF2Press(false);\r\n        }\r\n      }\r\n      \r\n      if(props.onF4Press){\r\n        if(openModalExaminingSession === true || openModalOldDisease === true){\r\n          props.setOnF4Press(false);\r\n        }\r\n        else{\r\n          handleResetField();\r\n          props.setOnF4Press(false);\r\n        }\r\n      }\r\n\r\n      if(props.onF8Press){\r\n        if(openModalExaminingSession === true || openModalOldDisease === true){\r\n          props.setOnF8Press(false);\r\n        }\r\n        else{\r\n          handleOpenModalOldDisease();\r\n          props.setOnF8Press(false);\r\n        }\r\n      }\r\n    }\r\n  }, [props.onF2Press, props.onF4Press, props.onF8Press, isDialogChangePasswordOpen])\r\n\r\n  return (\r\n    <>\r\n      <Container sx={{'&.MuiContainer-maxWidthLg': {pr: 0}, height: '100%',}}>\r\n        <Box sx={{ minHeight: '36.8rem', borderRadius: '20px', boxShadow: 5, pt: 1.2, pb: 1.2, pl: 1.8, pr: 1.8, }}>\r\n          <Typography variant='h6' sx={{textAlign: 'center', fontWeight: 'bolder', color: 'blue'}}>Thng tin ng k khm</Typography> \r\n          <Box sx={{display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap'}} component=\"form\" ref={formRef}>\r\n\r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.identifier.title}</h6>} open={dataPatientsRegisterError.identifier.openTooltip} placement=\"left\" PopperProps={{sx: { zIndex: 2 } }}> \r\n              <div style={{width: '18%', marginTop: '20px'}}>\r\n                <TextField error={true ? dataPatientsRegisterError.identifier.isError === true : false} disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                  label=\"M nh danh\" variant=\"outlined\" id='patientIdentifier' autoComplete='off'\r\n                  inputRef={focusField === 'identifier' ? (input) => input && focusField === 'identifier' && input.focus() : firstFocusRef}\r\n                  onChange={(e) => onChangeIdentifier(e.target.value)}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'patientCode')}\r\n                  onBlur={(e) => handleBlur(e.target.value, 'Identifier')}\r\n                  inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"}, maxLength: 12 }}\r\n                  InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                /> \r\n              </div>\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n\r\n          <ThemeProvider theme={tooltipTheme}>\r\n            <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.patientCode.title}</h6>} open={dataPatientsRegisterError.patientCode.openTooltip} placement=\"top\" PopperProps={{sx: { zIndex: 2 } }}> \r\n              <div style={{width: '19%', marginTop: '20px'}}>\r\n                <TextField error={true ? dataPatientsRegisterError.patientCode.isError === true : false} disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                  label=\"M BN\" variant=\"outlined\" id='patientCode' autoComplete='off'\r\n                  inputRef={(input) => input && focusField === 'patientCode' && input.focus()}\r\n                  onChange={(e) => onChangePatientId(e.target.value)}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'patientFullName')}\r\n                  onBlur={(e) => handleBlur(e.target.value, 'PatientId')}\r\n                  inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"}, maxLength: 14 }}\r\n                  InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                /> \r\n              </div>\r\n            </Tooltip>\r\n          </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.fullName.title}</h6>} open={dataPatientsRegisterError.fullName.openTooltip} placement=\"top\" PopperProps={{sx: { zIndex: 2 } }} \r\n                slotProps={{\r\n                  popper: {\r\n                    modifiers: [\r\n                      {\r\n                        name: 'offset',\r\n                        options: { offset: [37, -7], },\r\n                      },\r\n                    ],\r\n                  },\r\n                }} \r\n              > \r\n                <div style={{width: '30%', display: 'inline-grid', marginTop: '20px'}}>\r\n                  <TextField error={true ? dataPatientsRegisterError.fullName.isError === true : false} disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    label=\"H tn\" variant=\"outlined\" id=\"patientFullName\" autoComplete='off'                \r\n                    inputRef={(input) => input && focusField === 'fullName' && input.focus()}\r\n                    onChange={(e) => onChangeFullName(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientDayOfBirth')}\r\n                    inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"} }}\r\n                    InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                  /> \r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n      \r\n            <LocalizationProvider dateAdapter={AdapterMoment} adapterLocale=\"vi\">\r\n              <ThemeProvider theme={tooltipTheme}>\r\n                <DemoContainer components={['DatePicker']} >\r\n                  <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.dayOfBirth.title}</h6>} open={dataPatientsRegisterError.dayOfBirth.openTooltip} placement=\"bottom\" PopperProps={{sx: { zIndex: 2 } }}>    \r\n                    <Box sx={{width: 142, mt: '12px !important'}}>\r\n                      <div style={{width: '100%', }}>\r\n                        <DateField label=\"Ngy sinh\" \r\n                          format='DD/MM/YYYY' value={autocompleteValue.dayOfBirth}\r\n                          disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                          slotProps={{ \r\n                            textField: \r\n                              { \r\n                                inputRef: dateFieldRef,\r\n                                id: 'patientDayOfBirth',\r\n                                error: true ? dataPatientsRegisterError.dayOfBirth.isError === true : false,\r\n                                onBlur: (e) => handleBlur(e.target.value, 'dayOfBirth'),\r\n                                sx: {'& .MuiInputBase-input': { WebkitTextFillColor: dataPatientsRegister.oldDisease === true ? '#ff1744' : '' } },\r\n                              }\r\n                          }}\r\n                          onChange={(value) => onChangeDOB(value)}\r\n                          onKeyDown={(e) => handleKeyDown(e, 'patientGender')}\r\n                        />\r\n                      </div>\r\n                    </Box>\r\n                  </Tooltip>\r\n                </DemoContainer>\r\n              </ThemeProvider>      \r\n            </LocalizationProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.gender.title}</h6>} open={dataPatientsRegisterError.gender.openTooltip} placement=\"top\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '12%', marginTop: '20px'}}>\r\n                  <Autocomplete disablePortal id='patientGender' disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    value={autocompleteValue.gender.value}\r\n                    options={listGender} \r\n                    getOptionLabel={(option) => option.genderName}\r\n                    renderOption={(props, option) => (\r\n                      <li {...props}>\r\n                        {option.genderName}\r\n                      </li>\r\n                    )}\r\n                    onChange={(e, value) => onSelectGender(e, value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientProvince')}\r\n                    open={autocompleteValue.gender.openOption}\r\n                    onFocus={() => handleFocus('Gender')}\r\n                    onBlur={(e) => handleBlur(e.target.value, 'Gender')}\r\n                    autoComplete={false}\r\n                    renderInput={(params) => ( \r\n                      <TextField {...params} \r\n                        label=\"Gii tnh\" \r\n                        inputRef={(input) => input && focusField === 'gender' && input.focus()}\r\n                        error={true ? dataPatientsRegisterError.gender.isError === true : false} \r\n                        sx={{'& .MuiInputBase-input': { WebkitTextFillColor: dataPatientsRegister.oldDisease === true ? '#ff1744' : '' } }}\r\n                      /> \r\n                    )}\r\n                    disableClearable // B icon xa\r\n                    popupIcon={null} // B icon dropdown\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n             \r\n            {/* <TextField label=\"Dn tc\" variant=\"outlined\" sx={{width: '12%', '&.MuiTextField-root' : {marginTop: '15px'}}}/> */}\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.province.title}</h6>} open={dataPatientsRegisterError.province.openTooltip} placement=\"left\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '19.2%', marginTop: '20px'}}>\r\n                  <Autocomplete disablePortal id='patientProvince' disabled={dataPatientsRegister.oldDisease === true && dataPatientsRegister.oldDiseaseWithNullCodeWard === false ? true : false}\r\n                    value={autocompleteValue.province.value}\r\n                    options={listProvince} \r\n                    noOptionsText={'ang ti...'}\r\n                    filterOptions={filterOptions}\r\n                    getOptionLabel={(option) => option.name}\r\n                    renderOption={(props, option) => (\r\n                      <li {...props}>\r\n                        {option.name}\r\n                      </li>\r\n                    )}\r\n                    onChange={(e, value) => onSelectProvine(e, value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientDistrict')}\r\n                    open={autocompleteValue.province.openOption}\r\n                    onFocus={() => handleFocus('Province')}\r\n                    onBlur={(e) => handleBlur(e.target.value, 'Province')}\r\n                    autoComplete={false}\r\n                    renderInput={(params) => (\r\n                      <TextField {...params} \r\n                        label=\"Thnh ph\" \r\n                        inputRef={(input) => input && focusField === 'province' && input.focus()}\r\n                        error={true ? dataPatientsRegisterError.province.isError === true : false} \r\n                        sx={{'& .MuiInputBase-input': { WebkitTextFillColor: dataPatientsRegister.oldDisease === true ? '#ff1744' : '' } }}\r\n                      />\r\n                    )}\r\n                    disableClearable // B icon xa\r\n                    popupIcon={null} // B icon dropdown\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.district.title}</h6>} open={dataPatientsRegisterError.district.openTooltip} placement=\"top\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '24%', marginTop: '20px'}}>\r\n                  <Autocomplete disablePortal id='patientDistrict' disabled={dataPatientsRegister.oldDisease === true && dataPatientsRegister.oldDiseaseWithNullCodeWard === false ? true : false}\r\n                    value={autocompleteValue.district.value}\r\n                    options={listDistrict.list} \r\n                    noOptionsText={listDistrict.loading ? 'ang ti...' : ''}\r\n                    open={autocompleteValue.district.openOption}\r\n                    onFocus={() => handleFocus('District')}\r\n                    onBlur={(e) => handleBlur(e.target.value, 'District')}\r\n                    filterOptions={filterOptions}\r\n                    getOptionLabel={(option) => option.name}\r\n                    renderOption={(props, option) => (\r\n                      <li {...props}>\r\n                        {option.fullName}\r\n                      </li>\r\n                    )}\r\n                    onChange={(e, value) => onSelectDistrict(e, value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientWard')}\r\n                    autoComplete={false}\r\n                    renderInput={(params) => (\r\n                      <TextField {...params} \r\n                        label=\"Qun/Huyn\" \r\n                        inputRef={(input) => input && focusField === 'district' && input.focus()}\r\n                        error={true ? dataPatientsRegisterError.district.isError === true : false} \r\n                        sx={{'& .MuiInputBase-input': { WebkitTextFillColor: dataPatientsRegister.oldDisease === true ? '#ff1744' : '' } }}\r\n                        InputProps={{\r\n                          ...params.InputProps,\r\n                          endAdornment: (\r\n                            <>\r\n                              {listDistrict.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                              {params.InputProps.endAdornment}\r\n                            </>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    )}\r\n                    disableClearable // B icon xa\r\n                    popupIcon={null} // B icon dropdown\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n            \r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <>\r\n                <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.ward.title}</h6>} open={dataPatientsRegisterError.ward.openTooltip} placement=\"bottom\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                  <div style={{width: '23.5%', marginTop: '20px'}}>\r\n                    <Autocomplete disablePortal id='patientWard' disabled={dataPatientsRegister.oldDisease === true && dataPatientsRegister.oldDiseaseWithNullCodeWard === false ? true : false}\r\n                      value={autocompleteValue.ward.value}\r\n                      options={listWard.list} \r\n                      noOptionsText={listWard.loading ? 'ang ti...' : ''}\r\n                      filterOptions={filterOptions}\r\n                      getOptionLabel={(option) => option.name}\r\n                      autoComplete={false}\r\n                      renderOption={(props, option) => (\r\n                        <li {...props}>\r\n                          {option.fullName}\r\n                        </li>\r\n                      )}\r\n                      onChange={(e, value) => onSelectWard(e, value)}\r\n                      onKeyDown={(e) => handleKeyDown(e, 'patientAddress')}\r\n                      open={autocompleteValue.ward.openOption}\r\n                      onFocus={() => handleFocus('Ward')}\r\n                      onBlur={(e) => handleBlur(e.target.value, 'Ward')}\r\n                      renderInput={(params) => (\r\n                        <TextField {...params} \r\n                          label=\"Phng/X\" \r\n                          inputRef={(input) => input && focusField === 'ward' && input.focus()}\r\n                          error={true ? dataPatientsRegisterError.ward.isError === true : false} \r\n                          sx={{'& .MuiInputBase-input': { WebkitTextFillColor: dataPatientsRegister.oldDisease === true ? '#ff1744' : '' } }}\r\n                          InputProps={{\r\n                            ...params.InputProps,\r\n                            endAdornment: (\r\n                              <>\r\n                                {listWard.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                                {params.InputProps.endAdornment}\r\n                              </>\r\n                            ),\r\n                          }}\r\n                        />\r\n                      )}\r\n                      disableClearable // B icon xa\r\n                      popupIcon={null} // B icon dropdown\r\n                    />\r\n                  </div>\r\n                </Tooltip>\r\n              </>\r\n            </ThemeProvider>\r\n            \r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.address.title}</h6>} open={dataPatientsRegisterError.address.openTooltip} placement=\"bottom\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '30%', display: 'inline-grid', marginTop: '20px'}}>\r\n                  <TextField error={true ? dataPatientsRegisterError.address.isError === true : false} disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    label=\"a ch\" variant=\"outlined\" id='patientAddress' autoComplete='off'\r\n                    inputRef={(input) => input && focusField === 'address' && input.focus()}\r\n                    onChange={(e) => onChangeAddress(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientFullNameMother')}\r\n                    inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"} }}\r\n                    InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n            \r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.fullNameMother.title}</h6>} open={dataPatientsRegisterError.fullNameMother.openTooltip} placement=\"left\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '30%', display: 'inline-grid', marginTop: '20px'}}>\r\n                  <TextField error={true ? dataPatientsRegisterError.fullNameMother.isError === true : false} disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    label=\"H tn m\" variant=\"outlined\" id='patientFullNameMother' autoComplete='off'\r\n                    inputRef={(input) => input && focusField === 'fullNameMother' && input.focus()}\r\n                    autoFocus={dataPatientsRegisterError.fullNameMother.focus}\r\n                    onChange={(e) => onChangeFullNameMother(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientPhoneMother')}\r\n                    inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"} }}\r\n                    InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n            \r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.phoneMother.title}</h6>} open={dataPatientsRegisterError.phoneMother.openTooltip} placement=\"bottom\" PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '18%', marginTop: '20px'}}>\r\n                  <TextField error={true ? dataPatientsRegisterError.phoneMother.isError === true : false} disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    label=\"in thoi\" variant=\"outlined\" id='patientPhoneMother' autoComplete='off'\r\n                    inputRef={(input) => input && focusField === 'phoneMother' && input.focus()}\r\n                    onChange={(e) => onChangePhoneMother(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientFullNameFather')}\r\n                    onBlur={(e) => handleBlur(e.target.value, 'PhoneMother')}\r\n                    inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"}, maxLength: 10 }}\r\n                    InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n            \r\n\r\n            <TextField label=\"H tn cha\" disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n              variant=\"outlined\" id='patientFullNameFather' autoComplete='off'\r\n              sx={{width: '30.4%', '&.MuiTextField-root' : {marginTop: '20px'}}} \r\n              onChange={(e) => onChangeFullNameFather(e.target.value)}\r\n              onKeyDown={(e) => handleKeyDown(e, 'patientPhoneFather')}\r\n              inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"} }}\r\n              InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n            />\r\n            \r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.phoneFather.title}</h6>} open={dataPatientsRegisterError.phoneFather.openTooltip}>\r\n                <div style={{width: '18%', marginTop: '20px'}}>\r\n                  <TextField label=\"in thoi\" disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    inputRef={(input) => input && focusField === 'phoneFather' && input.focus()}\r\n                    variant=\"outlined\" id='patientPhoneFather' autoComplete='off'\r\n                    onChange={(e) => onChangePhoneFather(e, e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientWeight')}\r\n                    onBlur={(e) => handleBlur(e.target.value, 'PhoneFather')}\r\n                    inputProps={{ style: { WebkitTextFillColor: dataPatientsRegister.oldDisease ? \"#ff1744\" :  \"black\"}, maxLength: 10 }}\r\n                    InputLabelProps={dataPatientsRegister.oldDisease === true ? {shrink: Boolean(true) } : null}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.weight.title}</h6>} open={dataPatientsRegisterError.weight.openTooltip} PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '22%', marginTop: '20px'}}>\r\n                  <TextField label=\"Cn nng b\" variant=\"outlined\" id='patientWeight' autoComplete='off' error={true ? dataPatientsRegisterError.weight.isError === true : false}\r\n                    inputRef={(input) => input && focusField === 'weight' && input.focus()}\r\n                    InputProps={{endAdornment: <InputAdornment position=\"end\">(kg)</InputAdornment>}}\r\n                    onChange={(e) => onChangeWeight(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientHeight')}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider> \r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.height.title}</h6>} open={dataPatientsRegisterError.height.openTooltip} placement='left' PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '22%', marginTop: '20px'}}>\r\n                  <TextField label=\"Chiu cao b\" variant=\"outlined\" id='patientHeight' autoComplete='off' error={true ? dataPatientsRegisterError.height.isError === true : false}\r\n                    inputRef={(input) => input && focusField === 'height' && input.focus()}\r\n                    InputProps={{endAdornment: <InputAdornment position=\"end\">(cm)</InputAdornment>}}\r\n                    onChange={(e) => onChangeHeight(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientHeadCircumference')}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider> \r\n            \r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.headCircumference.title}</h6>} open={dataPatientsRegisterError.headCircumference.openTooltip} placement='top-start' PopperProps={{sx: { zIndex: 2 } }}\r\n                slotProps={{\r\n                  popper: {\r\n                    modifiers: [\r\n                      {\r\n                        name: 'offset',\r\n                        options: { offset: [70, -7], },\r\n                      },\r\n                    ],\r\n                  },\r\n                }} \r\n              >\r\n                <div style={{width: '22%', marginTop: '20px'}}>\r\n                  <TextField label=\"Vng u b\" variant=\"outlined\" id='patientHeadCircumference' autoComplete='off' error={true ? dataPatientsRegisterError.headCircumference.isError === true : false}\r\n                    inputRef={(input) => input && focusField === 'headCircumference' && input.focus()}\r\n                    InputProps={{endAdornment: <InputAdornment position=\"end\">(cm)</InputAdornment>}}\r\n                    onChange={(e) => onChangeHeadCircumference(e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(e, 'patientMedicalType')}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.medicalType.title}</h6>} open={dataPatientsRegisterError.medicalType.openTooltip} placement='bottom' PopperProps={{sx: { zIndex: 2 } }}>\r\n                <div style={{width: '30.5%', marginTop: '20px'}}>\r\n                  <Autocomplete disablePortal id='patientMedicalType' disabled={dataPatientsRegister.oldDisease === true ? true : false}\r\n                    value={autocompleteValue.medicalType.value}\r\n                    options={listMedicalType} \r\n                    getOptionLabel={(option) => option.medicalTypeName}\r\n                    renderOption={(props, option) => (\r\n                      <li {...props}>\r\n                        {option.medicalTypeName}\r\n                      </li>\r\n                    )}\r\n                    onChange={(e, value) => onSelectMedicalType(e, value)}\r\n                    open={autocompleteValue.medicalType.openOption}\r\n                    onFocus={() => handleFocus('MedicalType')}\r\n                    onBlur={(e) => handleBlur(e.target.value, 'MedicalType')}\r\n                    autoComplete={false}\r\n                    renderInput={(params) => ( \r\n                      <TextField {...params} \r\n                        label=\"Loi hnh khm\" \r\n                        inputRef={(input) => input && focusField === 'medicalType' && input.focus()}\r\n                        error={true ? dataPatientsRegisterError.medicalType.isError === true : false} \r\n                        sx={{\r\n                          '& .MuiInputBase-input': { WebkitTextFillColor: dataPatientsRegister.oldDisease === true ? '#ff1744' : '' } ,\r\n                          '& .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-colorPrimary.Mui-disabled.MuiInputBase-fullWidth.MuiInputBase-formControl.MuiInputBase-adornedEnd.MuiAutocomplete-inputRoot.css-154xyx0-MuiInputBase-root-MuiOutlinedInput-root': {paddingLeft: '4px', paddingRight: '0px'},\r\n                          '& .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-colorPrimary.MuiInputBase-fullWidth.MuiInputBase-formControl.MuiInputBase-adornedEnd.MuiAutocomplete-inputRoot.css-154xyx0-MuiInputBase-root-MuiOutlinedInput-root': {paddingLeft: '4px', paddingRight: '0px'}\r\n                        }}\r\n                      /> \r\n                    )}\r\n                    disableClearable // B icon xa\r\n                    popupIcon={null} // B icon dropdown\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n\r\n            <ThemeProvider theme={tooltipTheme}>\r\n              <Tooltip title={<h6 style={{ margin: '0px' }}>{dataPatientsRegisterError.reason.title}</h6>} open={dataPatientsRegisterError.reason.openTooltip} >\r\n                <div style={{width: '100%' }}>\r\n                  <TextField fullWidth label=\"L do khm\" multiline rows={3} variant=\"outlined\" id='patientReason' autoComplete='off' error={true ? dataPatientsRegisterError.reason.isError === true : false}\r\n                    sx={{'&.MuiTextField-root' : {marginTop: '20px'}}} \r\n                    onChange={(e) => onChangeReason(e.target.value)}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n            </ThemeProvider>\r\n            \r\n            <FormControlLabel control={<Checkbox checked={autocompleteValue.vaccination}/>} sx={{width: '100%'}}\r\n              label=\"Bnh nhn c tham gia tim nga\" onChange={(e) => onChangeVaccination(e.target.checked)}/>  \r\n\r\n            <Box sx={{display: 'flex', justifyContent: 'center', mt: 1, width: '100%'}}>\r\n              <Button variant=\"contained\" color=\"primary\" sx={{mr: 1}} onClick={() => handleMedicalRegister()}>ng k (f2)</Button>\r\n              <Button variant=\"contained\" color=\"warning\" onClick={() => handleResetField()}>Lm mi (f4)</Button>\r\n              <Button variant=\"contained\" color=\"error\" sx={{ml: 1}} onClick={() => handleOpenModalOldDisease()}>Bnh c (f8)</Button>\r\n            </Box>\r\n          </Box>         \r\n        </Box>\r\n      </Container>\r\n\r\n      <ExaminingSession \r\n        openModalExaminingSession={openModalExaminingSession} setOpenModalExaminingSession={setOpenModalExaminingSession} \r\n        handleResetField={handleResetField} setCompleteMedicalRegister={props.setCompleteMedicalRegister}\r\n        isContinueSelectedExaminingSession={isContinueSelectedExaminingSession} setIsContinueSelectedExaminingSession={setIsContinueSelectedExaminingSession}\r\n        dataPatientsRegister={dataPatientsRegister} \r\n      />\r\n\r\n      <OldDisease \r\n        openModalOldDisease={openModalOldDisease} setOpenModalOldDisease={setOpenModalOldDisease}\r\n        dataPatientsRegister={dataPatientsRegister} setDataPatientsRegister={setDataPatientsRegister}\r\n      />\r\n\r\n      <OldDiseaseForRegister\r\n        openOldDiseaseRegister={openOldDiseaseRegister} setOpenOldDiseaseRegister={setOpenOldDiseaseRegister}\r\n        setDataPatientsRegister={setDataPatientsRegister}\r\n        listOldDiseaseRegister={listOldDiseaseRegister} setListOldDiseaseRegister={setListOldDiseaseRegister}\r\n      />\r\n\r\n      <AlertProcessing\r\n        openAlertProcessing={openAlertProcessing} setOpenAlertProcessing={setOpenAlertProcessing}            \r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BookMedical","import React, { useState, useContext, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport Skeleton from '@mui/material/Skeleton';\r\n//modal\r\nimport SelectedDoctorExamining from '../ManageSelectedDoctorExamining/SelectedDoctorExamining';\r\n//components\r\nimport ListPatientsRegister from './ListPatientsRegister';\r\nimport BookMedical from './BookMedical';\r\n//api\r\nimport { getCurrentDoctorExamining } from '../../Service/MedicalService';\r\n\r\nfunction MainMedicalRegister() {\r\n\r\n  const { user, loading } = useContext(UserContext);\r\n\r\n  const history = useHistory();\r\n\r\n  const [component1Loading, setComponent1Loading] = useState(true);\r\n\r\n  const [completeMedicalRegister, setCompleteMedicalRegister] = useState(false);\r\n  const [dataPantientAppointmentsToday, setDataPantientAppointmentsToday] = useState();\r\n\r\n  const [handleResetField, setHandleResetField] = useState(false); //F2\r\n  const [handleOpenModalExaminingSession, setHandleOpenModalExaminingSession] = useState(false); //F4\r\n  const [handleOpenModalOldDisease, setHandleOpenModalOldDisease] = useState(false); //F8\r\n\r\n  const handleF2Press = () => {\r\n    setHandleOpenModalExaminingSession(true);\r\n  }\r\n\r\n  const handleF4Press = () => {\r\n    setHandleResetField(true);\r\n  }\r\n\r\n  const handleF8Press = () => {\r\n    setHandleOpenModalOldDisease(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(loading === false && user.isLogin){\r\n      if(user.positionName !== 'Nursing'){\r\n        history.push('/404');\r\n      }\r\n    }\r\n  }, [loading, user])\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (event) => {\r\n      if(event.keyCode === 113){\r\n        event.preventDefault()\r\n        //nhn F2  ng k khm\r\n        handleF2Press();\r\n      }\r\n      else if(event.keyCode === 115){\r\n        event.preventDefault()\r\n        //nhn F4  reset cc input field \r\n        handleF4Press();\r\n      }\r\n      else if(event.keyCode === 119){\r\n        event.preventDefault()\r\n        //nhn F8  tm bnh c\r\n        handleF8Press();\r\n      }\r\n      else{\r\n\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n         <Container maxWidth=\"xl\" sx={{mt: 2.5}}>\r\n            <Box sx={{ bgcolor: '#fff', height: 'auto'}} >\r\n              <Grid container spacing={0} sx={{marginLeft: 0}}>\r\n                <Grid item xs={5}>  \r\n                  <ListPatientsRegister \r\n                    completeMedicalRegister={completeMedicalRegister} setCompleteMedicalRegister={setCompleteMedicalRegister}\r\n                    component1Loading={component1Loading} setComponent1Loading={setComponent1Loading}\r\n                    dataPantientAppointmentsToday={dataPantientAppointmentsToday} setDataPantientAppointmentsToday={setDataPantientAppointmentsToday}\r\n                  />\r\n                </Grid>\r\n            \r\n                <Grid item xs={7} >\r\n                  {component1Loading ?\r\n                    <div style={{marginLeft: '18px'}}>\r\n                      <Skeleton variant='rectangular' width=\"100%\" height={590} />\r\n                    </div>\r\n                  :\r\n                    <BookMedical \r\n                      onF2Press={handleOpenModalExaminingSession} setOnF2Press={setHandleOpenModalExaminingSession}\r\n                      onF4Press={handleResetField} setOnF4Press={setHandleResetField}\r\n                      onF8Press={handleOpenModalOldDisease} setOnF8Press={setHandleOpenModalOldDisease}\r\n                      completeMedicalRegister={completeMedicalRegister} setCompleteMedicalRegister={setCompleteMedicalRegister}\r\n                      dataPantientAppointmentsToday={dataPantientAppointmentsToday} setDataPantientAppointmentsToday={setDataPantientAppointmentsToday}\r\n                    />\r\n                  }\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n         </Container>\r\n\r\n         {/* <SelectedDoctorExamining \r\n          openSelectedDoctorExaminingModal={openSelectedDoctorExaminingModal} setOpenSelectedDoctorExaminingModal={setOpenSelectedDoctorExaminingModal}\r\n          currentDoctorExamining={currentDoctorExamining} setCurrentDoctorExamining={setCurrentDoctorExamining}\r\n         /> */}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default MainMedicalRegister","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport Stack from '@mui/material/Stack';\r\nimport Chip from '@mui/material/Chip';\r\nimport Badge from '@mui/material/Badge';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport { Button, IconButton, TextField } from '@mui/material';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Pagination from '@mui/material/Pagination';\r\nimport Tooltip from '@mui/material/Tooltip';\r\n//mui datepicker\r\nimport { DemoContainer } from '@mui/x-date-pickers/internals/demo';\r\nimport { AdapterMoment } from '@mui/x-date-pickers/AdapterMoment';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\n//mui icon\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport CheckIcon from '@mui/icons-material/Check';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\n//lodash\r\nimport _ from \"lodash\";\r\n//moment\r\nimport moment from 'moment';\r\n//api\r\nimport { getAppointmentsNextWeek, updateStateAppointment } from '../../Service/MedicalService';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction MainAppointmentExamining() {\r\n\r\n    const [activeChip, setActiveChip] = useState({chipOrder: 0, chipLabel: 'BN cha nhc hn khm'});\r\n    const [listPantientAppointmentChipState, setListPantientChipState] = useState(\r\n        [\r\n            { chipLabel: 'BN cha nhc hn khm', chipContent: 0 },\r\n            { chipLabel: 'BN xc nhn hn khm', chipContent: 0 },\r\n            { chipLabel: 'BN t chi hn khm', chipContent: 0 }\r\n        ]\r\n    )\r\n\r\n    const [listAppointment, setListAppointment] = useState();\r\n    \r\n    const [searchPatientsQuery, setSearchPatientsQuery] = useState(\"\");\r\n\r\n    const [listDataPatientsAppointmentPaginate, setListDataPatientsAppointmentPaginate] = useState([]);\r\n    const [listDataPatientsAppointmentState, setListDataPatientsAppointmentState] = useState();\r\n    const [listDataPatientsAppointmentSort, setListDataPatientsAppointmentSort] = useState([]);\r\n    \r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [page, setPage] = useState(1);\r\n    const [pageCount, setPageCount] = useState();\r\n\r\n    const [dataAppointment, setDataAppointment] = useState();\r\n\r\n    const handlePaginate = (data) => {\r\n        const itemsPerPage = 5;\r\n        if(data){\r\n            const calculatedPageCount = Math.ceil(data.length / itemsPerPage);\r\n            const startIndex = (page - 1) * itemsPerPage;\r\n            const newCurrentItems = data.slice(startIndex, startIndex + itemsPerPage);\r\n          \r\n            setListDataPatientsAppointmentState(newCurrentItems);\r\n            setListDataPatientsAppointmentSort(newCurrentItems);\r\n    \r\n            setPageCount(calculatedPageCount);\r\n        }\r\n        else{\r\n            const calculatedPageCount = Math.ceil(listDataPatientsAppointmentPaginate.length / itemsPerPage);\r\n            const startIndex = (page - 1) * itemsPerPage;\r\n            const newCurrentItems = listDataPatientsAppointmentPaginate.slice(startIndex, startIndex + itemsPerPage);\r\n          \r\n            setListDataPatientsAppointmentState(newCurrentItems);\r\n            setListDataPatientsAppointmentSort(newCurrentItems);\r\n    \r\n            setPageCount(calculatedPageCount);\r\n        }\r\n    };\r\n\r\n    const handlePageChange = (event, value) => {\r\n        setPage(value);\r\n    }\r\n\r\n    const handleGetAppointmentsNextWeek = async () => {\r\n        setLoading(true);\r\n        const responseGetAppointmentsNextWeek = await getAppointmentsNextWeek();\r\n\r\n        setListAppointment(responseGetAppointmentsNextWeek);\r\n\r\n        const _listAppointmentNotRemind = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 0);\r\n        const  _listAppointmentAcceptReExamining = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 1);\r\n        const _listAppointmentRejectReExamining = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 2);\r\n\r\n        const updateListPantientAppointmentChipState = [\r\n            { chipLabel: 'BN cha nhc hn khm', chipContent: _listAppointmentNotRemind.length },\r\n            { chipLabel: 'BN xc nhn hn khm', chipContent: _listAppointmentAcceptReExamining.length },\r\n            { chipLabel: 'BN t chi hn khm', chipContent: _listAppointmentRejectReExamining.length }\r\n        ]\r\n\r\n        setListPantientChipState(updateListPantientAppointmentChipState);\r\n\r\n        if(activeChip.chipOrder === 0){\r\n            const dataAppointmentNotRemind = _listAppointmentNotRemind.map((item) => {\r\n                const createNewDataAppointmentNotRemind = \r\n                    {\r\n                        medicalBookId: item.medicalBookId,\r\n                        appointmentDate: item.appointmentDate\r\n                    }\r\n                \r\n                return createNewDataAppointmentNotRemind\r\n            })\r\n\r\n            setDataAppointment(dataAppointmentNotRemind);\r\n            setListDataPatientsAppointmentPaginate(_listAppointmentNotRemind);\r\n            handlePaginate(_listAppointmentNotRemind)\r\n        }\r\n\r\n        else if(activeChip.chipOrder === 1){\r\n            const dataAppointmentAcceptReExamining = _listAppointmentAcceptReExamining.map((item) => {\r\n                const createNewDataAppointmentAcceptReExamining = \r\n                    {\r\n                        medicalBookId: item.medicalBookId,\r\n                        appointmentDate: item.appointmentDate\r\n                    }\r\n                \r\n                return createNewDataAppointmentAcceptReExamining\r\n            })\r\n\r\n            setDataAppointment(dataAppointmentAcceptReExamining);\r\n            setListDataPatientsAppointmentPaginate(_listAppointmentAcceptReExamining)\r\n            handlePaginate(_listAppointmentAcceptReExamining)\r\n        }\r\n\r\n        else{\r\n            const dataAppointmentRejectReExamining = _listAppointmentRejectReExamining.map((item) => {\r\n                const createNewDataAppointmentRejectReExamining = \r\n                    {\r\n                        medicalBookId: item.medicalBookId,\r\n                        appointmentDate: item.appointmentDate\r\n                    }\r\n                \r\n                return createNewDataAppointmentRejectReExamining\r\n            })\r\n\r\n            setDataAppointment(dataAppointmentRejectReExamining);\r\n            setListDataPatientsAppointmentPaginate(_listAppointmentRejectReExamining)\r\n            handlePaginate(_listAppointmentRejectReExamining)\r\n        }\r\n\r\n        setLoading(false);\r\n    }\r\n\r\n    const handleSelectedChip = (chipIndex, chipLabel) => {\r\n        setActiveChip({chipOrder: chipIndex, chipLabel: chipLabel});\r\n        if(chipIndex === 0){\r\n            const _listAppointmentNotRemind = listAppointment.filter(item => item.stateAppointment === 0);\r\n\r\n            const dataAppointmentNotRemind = _listAppointmentNotRemind.map((item) => {\r\n                const createNewDataAppointmentNotRemind = \r\n                    {\r\n                        medicalBookId: item.medicalBookId,\r\n                        appointmentDate: item.appointmentDate\r\n                    }\r\n                \r\n                return createNewDataAppointmentNotRemind\r\n            })\r\n\r\n            setDataAppointment(dataAppointmentNotRemind);\r\n            setListDataPatientsAppointmentPaginate(_listAppointmentNotRemind);\r\n            handlePaginate(_listAppointmentNotRemind);\r\n        }\r\n        else if(chipIndex === 1){\r\n            const _listAppointmentAcceptReExamining = listAppointment.filter(item => item.stateAppointment === 1);\r\n\r\n            const dataAppointmentAcceptReExamining = _listAppointmentAcceptReExamining.map((item) => {\r\n                const createNewDataAppointmentAcceptReExamining = \r\n                    {\r\n                        medicalBookId: item.medicalBookId,\r\n                        appointmentDate: item.appointmentDate\r\n                    }\r\n                \r\n                return createNewDataAppointmentAcceptReExamining\r\n            })\r\n\r\n            setDataAppointment(dataAppointmentAcceptReExamining);\r\n            setListDataPatientsAppointmentPaginate(_listAppointmentAcceptReExamining);\r\n            handlePaginate(_listAppointmentAcceptReExamining);\r\n        }\r\n        else{\r\n            const _listAppointmentRejectReExamining = listAppointment.filter(item => item.stateAppointment === 2);\r\n\r\n            const dataAppointmentRejectReExamining = _listAppointmentRejectReExamining.map((item) => {\r\n                const createNewDataAppointmentRejectReExamining = \r\n                    {\r\n                        medicalBookId: item.medicalBookId,\r\n                        appointmentDate: item.appointmentDate\r\n                    }\r\n                \r\n                return createNewDataAppointmentRejectReExamining\r\n            })\r\n\r\n            setDataAppointment(dataAppointmentRejectReExamining);\r\n            setListDataPatientsAppointmentPaginate(_listAppointmentRejectReExamining);\r\n            handlePaginate(_listAppointmentRejectReExamining);\r\n        }\r\n    }\r\n\r\n    const handleSearchPantient = (value) => {\r\n        const takenValue = value;\r\n        setSearchPatientsQuery(takenValue);\r\n    \r\n        if(value === ''){\r\n          setListDataPatientsAppointmentSort(listDataPatientsAppointmentState);\r\n        }else{\r\n          setListDataPatientsAppointmentSort(searchPatients(listDataPatientsAppointmentState, takenValue));\r\n        }\r\n    }\r\n\r\n    const searchPatients = (patients, searchTerm) => {\r\n        const lowerCaseSearchTerm = searchTerm.toLowerCase();\r\n        return patients.filter(patientObj => {\r\n          const { patientId, patientFullName, phoneMother, phoneFather } = patientObj;\r\n          return patientId.toLowerCase().includes(lowerCaseSearchTerm) || patientFullName.toLowerCase().includes(lowerCaseSearchTerm) || phoneMother.toLowerCase().includes(lowerCaseSearchTerm) || phoneFather.toLowerCase().includes(lowerCaseSearchTerm);\r\n        });\r\n    }\r\n\r\n    const typingRef = useRef(null);\r\n\r\n    const onChangeAppointmentDate = (medicalBookId, appointmentDate) => {\r\n        if(appointmentDate){\r\n            const takenValue = appointmentDate._d;\r\n\r\n            if(typingRef.current){\r\n                clearInterval(typingRef.current);\r\n            }\r\n\r\n            typingRef.current = setTimeout(() => {\r\n                const today = new Date();\r\n                const findDataAppointment = dataAppointment.find(item => item.medicalBookId === medicalBookId);\r\n                const convertAppointmentDateFindDataAppointment = new Date(findDataAppointment.appointmentDate)\r\n\r\n                if(today <= takenValue || takenValue >= convertAppointmentDateFindDataAppointment){\r\n                    findDataAppointment.appointmentDate = moment(takenValue).format('YYYY-MM-DD');\r\n                }\r\n            }, 100) \r\n        }\r\n        \r\n    }\r\n\r\n    const handleAcceptReExamining = async (medicalBookId) => {\r\n        setLoading(true);\r\n\r\n        const findDataAppointment = dataAppointment.find(item => item.medicalBookId === medicalBookId);\r\n        const responseUpdateStateAppointment = await updateStateAppointment(findDataAppointment, 1);\r\n        if(responseUpdateStateAppointment.status === 200){\r\n            \r\n            const responseGetAppointmentsNextWeek = await getAppointmentsNextWeek();\r\n\r\n            if(searchPatientsQuery !== \"\"){\r\n                setSearchPatientsQuery(\"\");\r\n            }\r\n\r\n            setListAppointment(responseGetAppointmentsNextWeek);\r\n\r\n            const _listAppointmentNotRemind = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 0);\r\n            const  _listAppointmentAcceptReExamining = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 1);\r\n            const _listAppointmentRejectReExamining = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 2);\r\n\r\n            const updateListPantientAppointmentChipState = [\r\n                { chipLabel: 'BN cha nhc hn khm', chipContent: _listAppointmentNotRemind.length },\r\n                { chipLabel: 'BN xc nhn hn khm', chipContent: _listAppointmentAcceptReExamining.length },\r\n                { chipLabel: 'BN t chi hn khm', chipContent: _listAppointmentRejectReExamining.length }\r\n            ]\r\n\r\n            setListPantientChipState(updateListPantientAppointmentChipState);\r\n\r\n            if(activeChip.chipOrder === 0){\r\n                const dataAppointmentNotRemind = _listAppointmentNotRemind.map((item) => {\r\n                    const createNewDataAppointmentNotRemind = \r\n                        {\r\n                            medicalBookId: item.medicalBookId,\r\n                            appointmentDate: item.appointmentDate\r\n                        }\r\n                    \r\n                    return createNewDataAppointmentNotRemind\r\n                })\r\n    \r\n                setDataAppointment(dataAppointmentNotRemind);\r\n                setListDataPatientsAppointmentPaginate(_listAppointmentNotRemind)\r\n                handlePaginate(_listAppointmentNotRemind)\r\n            }\r\n\r\n            else if(activeChip.chipOrder === 1){\r\n                const dataAppointmentAcceptReExamining = _listAppointmentAcceptReExamining.map((item) => {\r\n                    const createNewDataAppointmentAcceptReExamining = \r\n                        {\r\n                            medicalBookId: item.medicalBookId,\r\n                            appointmentDate: item.appointmentDate\r\n                        }\r\n                    \r\n                    return createNewDataAppointmentAcceptReExamining\r\n                })\r\n    \r\n                setDataAppointment(dataAppointmentAcceptReExamining);\r\n                setListDataPatientsAppointmentPaginate(_listAppointmentAcceptReExamining)\r\n                handlePaginate(_listAppointmentAcceptReExamining)\r\n            }\r\n            else{\r\n                const dataAppointmentRejectReExamining = _listAppointmentRejectReExamining.map((item) => {\r\n                    const createNewDataAppointmentRejectReExamining = \r\n                        {\r\n                            medicalBookId: item.medicalBookId,\r\n                            appointmentDate: item.appointmentDate\r\n                        }\r\n                    \r\n                    return createNewDataAppointmentRejectReExamining\r\n                })\r\n    \r\n                setDataAppointment(dataAppointmentRejectReExamining);\r\n                setListDataPatientsAppointmentPaginate(_listAppointmentRejectReExamining)\r\n                handlePaginate(_listAppointmentRejectReExamining)\r\n            }\r\n\r\n            toast.success(responseUpdateStateAppointment.data, {toastId: 'handleAcceptReExaminingSuccess'});\r\n        }\r\n        else{\r\n            toast.error(responseUpdateStateAppointment.data, {toastId: 'handleAcceptReExaminingError'});\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    const handleRejectReExamining = async (medicalBookId) => {\r\n        setLoading(true);\r\n        \r\n        const findDataAppointment = dataAppointment.find(item => item.medicalBookId === medicalBookId);\r\n        const responseUpdateStateAppointment = await updateStateAppointment(findDataAppointment, 2);\r\n        if(responseUpdateStateAppointment.status === 200){\r\n            const responseGetAppointmentsNextWeek = await getAppointmentsNextWeek();\r\n\r\n            if(searchPatientsQuery !== \"\"){\r\n                setSearchPatientsQuery(\"\");\r\n            }\r\n\r\n            setListAppointment(responseGetAppointmentsNextWeek);\r\n\r\n            const _listAppointmentNotRemind = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 0);\r\n            const  _listAppointmentAcceptReExamining = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 1);\r\n            const _listAppointmentRejectReExamining = responseGetAppointmentsNextWeek.filter(item => item.stateAppointment === 2);\r\n\r\n            const updateListPantientAppointmentChipState = [\r\n                { chipLabel: 'BN cha nhc hn khm', chipContent: _listAppointmentNotRemind.length },\r\n                { chipLabel: 'BN xc nhn hn khm', chipContent: _listAppointmentAcceptReExamining.length },\r\n                { chipLabel: 'BN t chi hn khm', chipContent: _listAppointmentRejectReExamining.length }\r\n            ]\r\n\r\n            setListPantientChipState(updateListPantientAppointmentChipState);\r\n\r\n            if(activeChip.chipOrder === 0){\r\n                const dataAppointmentNotRemind = _listAppointmentNotRemind.map((item) => {\r\n                    const createNewDataAppointmentNotRemind = \r\n                        {\r\n                            medicalBookId: item.medicalBookId,\r\n                            appointmentDate: item.appointmentDate\r\n                        }\r\n                    \r\n                    return createNewDataAppointmentNotRemind\r\n                })\r\n    \r\n                setDataAppointment(dataAppointmentNotRemind);\r\n                setListDataPatientsAppointmentPaginate(_listAppointmentNotRemind)\r\n                handlePaginate(_listAppointmentNotRemind)\r\n            }\r\n\r\n            else if(activeChip.chipOrder === 1){\r\n                const dataAppointmentAcceptReExamining = _listAppointmentAcceptReExamining.map((item) => {\r\n                    const createNewDataAppointmentAcceptReExamining = \r\n                        {\r\n                            medicalBookId: item.medicalBookId,\r\n                            appointmentDate: item.appointmentDate\r\n                        }\r\n                    \r\n                    return createNewDataAppointmentAcceptReExamining\r\n                })\r\n    \r\n                setDataAppointment(dataAppointmentAcceptReExamining);\r\n                setListDataPatientsAppointmentPaginate(_listAppointmentAcceptReExamining)\r\n                handlePaginate(_listAppointmentAcceptReExamining)\r\n            }\r\n            else{\r\n                const dataAppointmentRejectReExamining = _listAppointmentRejectReExamining.map((item) => {\r\n                    const createNewDataAppointmentRejectReExamining = \r\n                        {\r\n                            medicalBookId: item.medicalBookId,\r\n                            appointmentDate: item.appointmentDate\r\n                        }\r\n                    \r\n                    return createNewDataAppointmentRejectReExamining\r\n                })\r\n    \r\n                setDataAppointment(dataAppointmentRejectReExamining);\r\n                setListDataPatientsAppointmentPaginate(_listAppointmentRejectReExamining)\r\n                handlePaginate(_listAppointmentRejectReExamining)\r\n            }\r\n\r\n            toast.success(responseUpdateStateAppointment.data, {toastId: 'handleAcceptReExaminingSuccess'});\r\n        }\r\n        else{\r\n            toast.error(responseUpdateStateAppointment.data, {toastId: 'handleAcceptReExaminingError'});\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleGetAppointmentsNextWeek();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        handlePaginate();\r\n    }, [page]);\r\n\r\n    return (\r\n        <Container maxWidth=\"xl\" sx={{mt: 1, p: 0 }}>\r\n            <TableContainer component={Paper} sx={{height: loading ? '40rem' : 'auto', position: 'relative'}}>\r\n                {loading ? \r\n                    <>\r\n                        <Box sx={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', height: '100%'}}>\r\n                            <CircularProgress />\r\n                            <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu, hy ch mt cht...</Typography>\r\n                        </Box>        \r\n                    </>\r\n                    :\r\n                    <>\r\n                        <Box>\r\n                            <Stack direction='row' spacing={1} sx={{justifyContent: 'center', mt: 1.4}}>\r\n                                {listPantientAppointmentChipState.map((pantientAppointmentChipStateItem, pantientAppointmentChipStateIndex) => (\r\n                                    <Badge badgeContent={pantientAppointmentChipStateItem.chipContent} color=\"error\" key={`chipPantientState ${pantientAppointmentChipStateIndex}`}> \r\n                                        <Chip label={pantientAppointmentChipStateItem.chipLabel} color={pantientAppointmentChipStateIndex === activeChip.chipOrder ? 'primary' : 'default'}\r\n                                            onClick={() => handleSelectedChip(pantientAppointmentChipStateIndex, pantientAppointmentChipStateItem.chipLabel)} />  \r\n                                    </Badge>\r\n                                ))}\r\n                            </Stack>\r\n\r\n                            <Typography variant=\"h6\" sx={{textAlign: 'center', fontSize: '1.15rem', fontWeight: 'bolder'}}>Danh sch {activeChip.chipLabel} trong 6 ngy ti</Typography>\r\n\r\n                            <Box sx={{display: 'flex', justifyContent: 'center', mb: 1}}>\r\n                                <TextField sx={{width: 500, '& .MuiInputBase-inputSizeSmall': {textAlign: 'center'}}} size=\"small\" \r\n                                    variant=\"outlined\" placeholder='Tm vi M BN hoc Tn BN hoc S in thoi' value={searchPatientsQuery} onChange={(e) => handleSearchPantient(e.target.value)}\r\n                                    InputProps={{ // <-- This is where the toggle button is added.\r\n                                        startAdornment: (\r\n                                            <InputAdornment position='start'><SearchIcon/></InputAdornment>  \r\n                                        ),\r\n                                        endAdornment: (\r\n                                            <InputAdornment position='end'>\r\n                                                {searchPatientsQuery !== '' ? \r\n                                                    <CloseIcon sx={{cursor: 'pointer'}} titleAccess='Xa'\r\n                                                        onClick={() => [setSearchPatientsQuery(''), setListDataPatientsAppointmentSort(listDataPatientsAppointmentState)]}\r\n                                                    /> \r\n                                                : \r\n                                                    null\r\n                                                }\r\n                                            </InputAdornment>  \r\n                                        )\r\n                                    }}>\r\n                                </TextField>\r\n                            </Box>\r\n                        </Box>\r\n\r\n                        <Table stickyHeader >\r\n                            <TableHead>\r\n                                <TableRow sx={{\"& th\": {color: \"rgba(96, 96, 96)\", backgroundColor: \"pink\"}}}>\r\n                                    <TableCell align='left' >M bnh nhn</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>H tn</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Ngy sinh</TableCell>\r\n                                    {/* <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Gii tnh</TableCell> */}\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>a ch</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>H tn Cha/M</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>S in thoi</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>K khm c</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>K khm tip theo</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Ngy hn khm</TableCell>\r\n                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Nhn</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n\r\n                            <TableBody>\r\n                                {listDataPatientsAppointmentSort.map((dataPantientAppointmentItem, dataPantientAppointmentIndex) => (\r\n                                    <TableRow hover role=\"checkbox\" key={dataPantientAppointmentIndex} sx={{':hover': {backgroundColor: 'rgba(0, 0, 0, 0.1) !important'}}}>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{dataPantientAppointmentItem.patientId}</TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{dataPantientAppointmentItem.patientFullName}</TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{moment(dataPantientAppointmentItem.dateOfBirth).format(\"DD/MM/YYYY\")}</TableCell>\r\n                                        {/* <TableCell align='left' sx={{width: 'auto', fontSize: '0.95rem'}}>{dataPantientAppointmentItem.gender === true ? 'Nam' : 'N'}</TableCell> */}\r\n                                        <TableCell align='left' sx={{whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: 240, fontSize: '0.9rem'}}>\r\n                                            <Tooltip title={<Typography variant='subtitle2'>{dataPantientAppointmentItem.fullAddress}</Typography>} >\r\n                                                <span>{dataPantientAppointmentItem.fullAddress}</span>\r\n                                            </Tooltip>\r\n                                        </TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{dataPantientAppointmentItem.fullNameFather !== '' ? dataPantientAppointmentItem.fullNameFather : dataPantientAppointmentItem.fullNameMother}</TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{dataPantientAppointmentItem.phoneFather !== '' ? dataPantientAppointmentItem.phoneFather : dataPantientAppointmentItem.phoneMother}</TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{dataPantientAppointmentItem.examNameOld}</TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto', fontSize: '0.9rem'}}>{dataPantientAppointmentItem.nextExamName}</TableCell>\r\n                                        <TableCell align='left' sx={{width: 'auto'}}>\r\n                                            <LocalizationProvider dateAdapter={AdapterMoment} adapterLocale=\"vi\">\r\n                                                <DemoContainer components={['DatePicker']}> \r\n                                                    <Box sx={{width: 145}}>\r\n                                                        <div style={{width: '100%'}}>\r\n                                                            <DatePicker label=\"Ngy khm d kin\" disablePast minDate={moment()}\r\n                                                                format='DD/MM/YYYY' value={moment(dataPantientAppointmentItem.appointmentDate)}\r\n                                                                onChange={(value) => onChangeAppointmentDate(dataPantientAppointmentItem.medicalBookId, value)}\r\n                                                            />\r\n                                                        </div>\r\n                                                    </Box> \r\n                                                </DemoContainer>\r\n                                            </LocalizationProvider>\r\n                                        </TableCell>                                                                                                \r\n                                        <TableCell align={dataPantientAppointmentItem.stateAppointment === 0 ? 'left' : 'center'} sx={{width: 'auto', fontSize: '0.9rem'}}>\r\n                                            {dataPantientAppointmentItem.stateAppointment === 0 ?\r\n                                                <>   \r\n                                                    <CheckIcon titleAccess='ng  hn khm' sx={{color: 'green', cursor: 'pointer', mr: 0.5}} onClick={() => handleAcceptReExamining(dataPantientAppointmentItem.medicalBookId)}/>\r\n                                                    <CancelIcon titleAccess='T chi hn khm' sx={{color: 'red', cursor: 'pointer'}} onClick={() => handleRejectReExamining(dataPantientAppointmentItem.medicalBookId)}/>\r\n                                                </>\r\n                                                :\r\n                                                <>\r\n                                                    {dataPantientAppointmentItem.stateAppointment === 1 ?\r\n                                                        <CancelIcon titleAccess='T chi hn khm' sx={{color: 'red', cursor: 'pointer'}} onClick={() => handleRejectReExamining(dataPantientAppointmentItem.medicalBookId)}/>\r\n                                                    :\r\n                                                        <CheckIcon titleAccess='ng  hn khm' sx={{color: 'green', cursor: 'pointer', mr: 0.5}} onClick={() => handleAcceptReExamining(dataPantientAppointmentItem.medicalBookId)}/>\r\n                                                    }\r\n                                                </>\r\n                                            }\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </>\r\n                }\r\n            </TableContainer>\r\n\r\n            {listDataPatientsAppointmentSort.length !== 0 && loading === false ?\r\n                <Box sx={{display: 'flex', justifyContent: 'center', mt: 1, width: '100%'}}>\r\n                    <Pagination count={pageCount} page={page} onChange={handlePageChange} color=\"secondary\" />\r\n                </Box>\r\n            :\r\n                null\r\n            }\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default MainAppointmentExamining","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport _ from 'lodash'\r\n//modal\r\nimport AlertProcessing from '../ManageAlertProcessing/AlertProcessing';\r\n//mui theme\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport Box from '@mui/material/Box';\r\nimport List from '@mui/material/List';\r\nimport Grid from '@mui/material/Grid';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport Stack from '@mui/material/Stack';\r\nimport { DialogActions } from '@mui/material';\r\nimport { makeStyles } from '@mui/styles';\r\n//mui icon\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\r\n//mui datepicker\r\nimport { DemoContainer } from '@mui/x-date-pickers/internals/demo';\r\nimport { AdapterMoment } from '@mui/x-date-pickers/AdapterMoment';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\n//moment\r\nimport moment from 'moment';\r\n//other\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\n//css\r\nimport './SCSS/CompleteExamining.scss';\r\n//api\r\nimport { createAddPredecessor, createAddMedicalBook, getAppointmentDate } from '../../Service/MedicalService';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction CompleteExamining(props) {\r\n    const [mainDataExaminingForConclusion, setMainDataExaminingForConclusion] = useState();\r\n    const [openAlertProcessing, setOpenAlertProcessing] = useState(false);\r\n\r\n\r\n    const typingRef = useRef(null);\r\n    const textareaRef = useRef(null);\r\n    const dateFieldRef = useRef(null);\r\n\r\n\r\n    const useStyles = makeStyles({\r\n        root: {\r\n          '&.Mui-disabled': {\r\n            color: '#d32f2f', // Mu sc khi checkbox b v hiu ha\r\n          },\r\n          '&.Mui-checked.Mui-disabled': {\r\n            color: '#d32f2f', // Mu sc khi checkbox b v hiu ha v  c chn\r\n          },\r\n        },\r\n      });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleCloseModalCompleteExamining = (event, reason) => {\r\n        if(reason && reason === \"backdropClick\"){\r\n          return;\r\n        }\r\n        else{\r\n            setMainDataExaminingForConclusion();\r\n            props.setOpenModalCompleteExamining(false);\r\n        }\r\n      }\r\n\r\n    const onChangeExaminingConclusion = (value) => {\r\n        typingRef.current = setTimeout(() => {\r\n            setMainDataExaminingForConclusion(prevMainDataExaminingForConclusion => {\r\n                prevMainDataExaminingForConclusion.conclusion = value;\r\n                return {...prevMainDataExaminingForConclusion}\r\n            })\r\n        }, 300)\r\n    }\r\n\r\n    const onChangeAppointmentDate = (value) => {\r\n        if(value){\r\n            if(typingRef.current){\r\n                clearInterval(typingRef.current);\r\n            }\r\n            typingRef.current = setTimeout(() => {\r\n                const takenValue = value._d;\r\n                const formattedDate = moment(takenValue).format('YYYY-MM-DD');\r\n                if(formattedDate !== 'Invalid date'){\r\n                    setMainDataExaminingForConclusion(prevMainDataExaminingForConclusion => {\r\n                        prevMainDataExaminingForConclusion.appointmentDate = formattedDate;\r\n                        return {...prevMainDataExaminingForConclusion}\r\n                    })\r\n                }\r\n            }, 200)   \r\n        }\r\n    }\r\n\r\n    const handleSetDataCompleteExamining = async () => {\r\n        setOpenAlertProcessing(true);\r\n\r\n        const editDataExaminingForConclusion = _.clone(props.dataExaminingForConclusion);\r\n        editDataExaminingForConclusion.categories = editDataExaminingForConclusion.categories.map(categoriesItem => ({\r\n            ...categoriesItem,\r\n            // Lc cc categoryContents  gi li nhng phn t c categoryContentQuestions khng rng\r\n            categoryContents: categoriesItem.categoryContents.filter(categoryContentsItem => categoryContentsItem.categoryContentQuestions.length > 0)\r\n\r\n            // Loi b cc categories nu tt c categoryContents ca n u b loi b\r\n        })).filter(categoriesItem => categoriesItem.categoryContents.length > 0);\r\n\r\n        const responseAppointmentDate = await getAppointmentDate(props.dataExaminingForConclusion.medicalRegisterId);\r\n\r\n        if(responseAppointmentDate.status === 200){\r\n            editDataExaminingForConclusion.appointmentDate = responseAppointmentDate.data.appointmentDate\r\n            editDataExaminingForConclusion.nextExamId = responseAppointmentDate.data.nextExamId\r\n            editDataExaminingForConclusion.nextExamName = responseAppointmentDate.data.nextExamName\r\n\r\n            if(editDataExaminingForConclusion.isVaccination){\r\n                editDataExaminingForConclusion.nextVaccination = responseAppointmentDate.data.nextVaccination\r\n                editDataExaminingForConclusion.reminder = responseAppointmentDate.data.reminder\r\n                editDataExaminingForConclusion.vaccination = responseAppointmentDate.data.vaccination\r\n            }\r\n\r\n        }else{\r\n            toast.error(responseAppointmentDate.data, {toastId: 'error1'});\r\n        }\r\n \r\n        setMainDataExaminingForConclusion(editDataExaminingForConclusion);\r\n\r\n        setOpenAlertProcessing(false);\r\n        if(props.dataExaminingForConclusion.conclusion !== ''){\r\n            const length = textareaRef.current.value.length;\r\n            textareaRef.current.setSelectionRange(length, length);\r\n            textareaRef.current.focus();\r\n        }\r\n        else{\r\n            textareaRef.current.focus();\r\n        }\r\n\r\n        // if(editDataExaminingForConclusion.categories.length !== 0){\r\n            \r\n        //     const responseAppointmentDate = await getAppointmentDate(props.dataExaminingForConclusion.medicalRegisterId);\r\n\r\n        //     if(responseAppointmentDate.status === 200){\r\n        //         editDataExaminingForConclusion.appointmentDate = responseAppointmentDate.data.appointmentDate\r\n        //         editDataExaminingForConclusion.nextExamId = responseAppointmentDate.data.nextExamId\r\n        //         editDataExaminingForConclusion.nextExamName = responseAppointmentDate.data.nextExamName\r\n\r\n        //         if(editDataExaminingForConclusion.isVaccination){\r\n        //             editDataExaminingForConclusion.nextVaccination = responseAppointmentDate.data.nextVaccination\r\n        //             editDataExaminingForConclusion.reminder = responseAppointmentDate.data.reminder\r\n        //             editDataExaminingForConclusion.vaccination = responseAppointmentDate.data.vaccination\r\n        //         }\r\n\r\n        //     }else{\r\n        //         toast.error(responseAppointmentDate.data, {toastId: 'error1'});\r\n        //     }\r\n \r\n        //     setMainDataExaminingForConclusion(editDataExaminingForConclusion);\r\n\r\n        //     setOpenAlertProcessing(false);\r\n        //     if(props.dataExaminingForConclusion.conclusion !== ''){\r\n        //         const length = textareaRef.current.value.length;\r\n        //         textareaRef.current.setSelectionRange(length, length);\r\n        //         textareaRef.current.focus();\r\n        //     }\r\n        //     else{\r\n        //         textareaRef.current.focus();\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    const handleAddMedicalBook = async () => {\r\n        if(checkValidate()){\r\n            setOpenAlertProcessing(true);\r\n    \r\n                if(mainDataExaminingForConclusion.categories.some(categoriesItem => categoriesItem.isPredecessor === true)){\r\n                    const categoryPres = mainDataExaminingForConclusion.categories.filter(categoriesItem => categoriesItem.isPredecessor === true)\r\n                    const dataPredecessor = { patientId: mainDataExaminingForConclusion.patientId, categoryPres: categoryPres }\r\n                    await createAddPredecessor(dataPredecessor);\r\n                }\r\n\r\n                const categoriesHealthRecordExamining = mainDataExaminingForConclusion.categories.filter(categoriesItem => categoriesItem.isHealthRecord === true)\r\n                mainDataExaminingForConclusion.categories = categoriesHealthRecordExamining\r\n                const responseAddMedicalBook = await createAddMedicalBook(mainDataExaminingForConclusion);\r\n                if(responseAddMedicalBook.status === 200){\r\n                    toast.success(responseAddMedicalBook.data, {toastId: 'success3'});\r\n                    props.handleCompleteExaminingForPantient();\r\n                    setMainDataExaminingForConclusion();\r\n                    props.setOpenModalCompleteExamining(false);\r\n                }\r\n                else{\r\n                    toast.error(responseAddMedicalBook.data, {toastId: 'error1'});\r\n                }\r\n            }\r\n            setOpenAlertProcessing(false);\r\n    }\r\n\r\n    const checkValidate = () => {\r\n        let isValid = true;\r\n        if(mainDataExaminingForConclusion.conclusion === null){\r\n            textareaRef.current.focus();\r\n            toast.error('Bn cha nhp kt lun khm', {toastId: 'error1'})\r\n            isValid = false;\r\n        }\r\n\r\n        if(mainDataExaminingForConclusion.appointmentDate === 'Invalid date'){\r\n            dateFieldRef.current.focus();\r\n            toast.error('Ngy ti khm khng hp l', {toastId: 'error1'})\r\n            isValid = false;\r\n        }\r\n\r\n        if(mainDataExaminingForConclusion.appointmentDate === ''){\r\n            dateFieldRef.current.focus();\r\n            toast.error('Bn cha chn ngy ti khm', {toastId: 'error1'})\r\n            isValid = false;\r\n        }\r\n        return isValid\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(props.openModalCompleteExamining){\r\n            handleSetDataCompleteExamining();\r\n        }\r\n    }, [props.openModalCompleteExamining])\r\n\r\n    return (\r\n        <>\r\n            <Dialog fullWidth={true} maxWidth={'md'} open={props.openModalCompleteExamining} onClose={(event, reason) => handleCloseModalCompleteExamining(event, reason)} disableEscapeKeyDown={true}>\r\n                <DialogTitle sx={{ fontWeight: 'bolder', fontSize: '20px', textAlign: 'center', color: 'red', textTransform: 'uppercase' }}>Tm tt qu trnh khm</DialogTitle>\r\n                <IconButton onClick={() => handleCloseModalCompleteExamining()} sx={{position: 'absolute', right: 5, top: 7}}>\r\n                    <CloseIcon fontSize='large'/>\r\n                </IconButton>\r\n                <DialogContent dividers sx={{pl: '15px', pr: '15px'}}>\r\n                    <Box sx={{pl: 6, pr: 6}}>\r\n                        <List sx={{p: 0}}>\r\n                            <Box>\r\n                                {mainDataExaminingForConclusion ? \r\n                                    mainDataExaminingForConclusion.categories.length !== 0 ? \r\n                                        <div className='category-complete-examining'>\r\n                                            {mainDataExaminingForConclusion.categories.map((categoriesItem, categoriesIndex) => (\r\n                                                <div key={`categoriesItem ${categoriesIndex}`}>\r\n                                                    <Typography sx={{fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}>{categoriesItem.categoryName}</Typography>\r\n                                                        {categoriesItem.categoryContents.map((categoryContentsItem, categoryContentsIndex) => (\r\n                                                            <div className='table-category-complete-examining' style={{marginBottom: '10px'}} key={`categoryContents ${categoryContentsIndex}`}>\r\n                                                                <Typography variant='subtitle1' sx={{fontWeight: 'bolder', fontSize: '20px', textAlign: 'center'}}>{categoryContentsItem.categoryContentTitle}</Typography>\r\n                                                \r\n                                                                {categoryContentsItem.categoryContentQuestions.map((questionItem, questionIndex) => (\r\n                                                                    <div key={`questionItem ${questionIndex}`}>\r\n                                                                        <Grid container rowSpacing={0}>\r\n                                                                            {questionIndex === 0 ?\r\n                                                                                <>\r\n                                                                                    <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7}}>\r\n                                                                                        <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{categoryContentsItem.categoryContentName}</Typography>\r\n                                                                                    </Grid> \r\n\r\n                                                                                    {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                        <>\r\n                                                                                            <Grid item xs={2.5} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n                                                                                                <CheckBoxIcon sx={{fontSize: '1.2rem', color: 'gray', mr: 0.4}}/>\r\n                                                                                                <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', lineHeight: '1.6'}}>{categoryContentsItem.categoryContentCheck}</Typography>\r\n                                                                                            </Grid>\r\n                                                                        \r\n                                                                                            <Grid item xs={5.5} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                                <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', ml: 0.5}}>{categoryContentsItem.categoryContentText}</Typography>\r\n                                                                                            </Grid>\r\n                                                                                        </>\r\n                                                                                    : \r\n                                                                                        <Grid item xs={8} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                            <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{categoryContentsItem.categoryContentText}</Typography>\r\n                                                                                        </Grid>\r\n                                                                                    }   \r\n                                                                                </>\r\n                                                                            :\r\n                                                                                null\r\n                                                                            }\r\n\r\n                                                                            <Box key={`questionItem ${questionIndex}`} style={{display: 'flex', width: '100%'}}>\r\n                                                                                <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', alignItems: 'center'}}>\r\n                                                                                    <Typography variant='subtitle1' sx={{fontSize: '1rem'}}>{questionItem.categoryContentQuestionName}</Typography>\r\n                                                                                </Grid>\r\n                                                                \r\n                                                                                {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                    <>\r\n                                                                                        <Grid item xs={2.5} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center'}}>\r\n                                                                                            <Checkbox disabled checked={questionItem.categoryContentAnswer}\r\n                                                                                                classes={{ root: classes.root }}\r\n                                                                                                sx={{'& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem'}}} color='error'\r\n                                                                                            />\r\n                                                                                        </Grid>\r\n\r\n                                                                                        <Grid item xs={5.5} >\r\n                                                                                            <div className='note-for-answer'>\r\n                                                                                                <div className='suggest-note'>                                                                          \r\n                                                                                                    <TextareaAutosize className='textarea-autosize' rows={1} disabled defaultValue={questionItem.categoryContentNote}/>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                        </Grid>\r\n                                                                                    </>\r\n                                                                                :   \r\n                                                                                    <>\r\n                                                                                        <Grid item xs={8} >\r\n                                                                                            <div className='note-for-answer'>\r\n                                                                                                <div className='suggest-note'>                                                                          \r\n                                                                                                    <TextareaAutosize className='textarea-autosize' rows={1} disabled defaultValue={questionItem.categoryContentNote}/>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                        </Grid>\r\n                                                                                    </>\r\n                                                                                }                                                                                                                                                                          \r\n                                                                            </Box>\r\n                                                                        </Grid>\r\n                                                                    </div>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        ))}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    :\r\n                                        <Typography variant='h6' sx={{color: 'blue', fontWeight: 'bolder', textAlign: 'center'}}>Khng pht hin g bt thng khi khm.</Typography>\r\n                                :\r\n                                    <Typography variant='h6' sx={{color: 'blue', fontWeight: 'bolder', textAlign: 'center'}}>Khng pht hin g bt thng khi khm.</Typography>\r\n                                }\r\n                            </Box>\r\n                        </List>\r\n                    </Box>\r\n                </DialogContent>\r\n\r\n                <DialogActions sx={{borderTop: '1px solid black'}}>\r\n                    {mainDataExaminingForConclusion ? \r\n                        <div style={{width: '100%', padding: '8px 50px 8px 50px'}}>\r\n                            <TextareaAutosize key={`pantientId ${mainDataExaminingForConclusion.patientId}`} placeholder='Kt lun ca bc s' style={{width: '100%', padding: '15px', fontSize: '17px'}} onChange={(e) => onChangeExaminingConclusion(e.target.value)} ref={textareaRef} defaultValue={mainDataExaminingForConclusion.conclusion} /> \r\n                            \r\n                                {mainDataExaminingForConclusion.isVaccination ? \r\n                                    <>\r\n                                        <Box sx={{mb: 0.4}}>\r\n                                            {mainDataExaminingForConclusion.vaccination === '' || mainDataExaminingForConclusion.vaccination === null?\r\n                                                null\r\n                                                :\r\n                                                <>\r\n                                                    <Typography variant='h6' sx={{color: 'deeppink', fontWeight: 'bolder', fontSize: '1.2rem'}}>{` ${mainDataExaminingForConclusion.vaccination}`}</Typography>\r\n                                                </>\r\n                                            }\r\n\r\n                                            {mainDataExaminingForConclusion.nextVaccination === '' || mainDataExaminingForConclusion.nextVaccination === null?\r\n                                                null\r\n                                                :\r\n                                                <>\r\n                                                    <Typography variant='h6' sx={{color: 'deeppink', fontWeight: 'bolder', fontSize: '1.2rem'}}>{` ${mainDataExaminingForConclusion.nextVaccination}`}</Typography>\r\n                                                </>\r\n                                            }\r\n\r\n                                            {mainDataExaminingForConclusion.reminder === '' ||  mainDataExaminingForConclusion.reminder === null?\r\n                                                null\r\n                                                :\r\n                                                <>\r\n                                                    <Typography variant='h6' sx={{color: 'deeppink', fontWeight: 'bolder', fontSize: '1.2rem'}}>{` ${mainDataExaminingForConclusion.reminder}`}</Typography>\r\n                                                </>\r\n                                            }\r\n                                        </Box>\r\n                                            \r\n                                    </>\r\n                                :\r\n                                    null\r\n                                }\r\n\r\n                                {mainDataExaminingForConclusion.appointmentDate ? \r\n                                <>\r\n                                    <Box sx={{display: 'flex', justifyContent: 'center', mb: 2}}>\r\n                                        <Typography variant='h6' sx={{mt: 'auto', mb: 'auto', mr: 2}}>K khm tip theo: <span style={{fontWeight: 'bolder', color: '#ff1744'}}>{mainDataExaminingForConclusion.nextExamName}</span></Typography>\r\n                                        <LocalizationProvider dateAdapter={AdapterMoment} adapterLocale=\"vi\">\r\n                                            <DemoContainer components={['DatePicker']}>  \r\n                                                <DatePicker label=\"Ngy khm d kin\" disablePast\r\n                                                    format='DD/MM/YYYY' defaultValue={moment(mainDataExaminingForConclusion.appointmentDate)}\r\n                                                    onChange={(value) => onChangeAppointmentDate(value)}\r\n                                                    slotProps={{ \r\n                                                        textField: { inputRef: dateFieldRef, }\r\n                                                    }}\r\n                                                />\r\n                                            </DemoContainer>\r\n                                        </LocalizationProvider>\r\n                                    </Box>\r\n                                </>\r\n                                :\r\n                                    null\r\n                                }\r\n                        \r\n                            <div style={{display: 'flex', justifyContent: 'center'}}>\r\n                                <Stack spacing={1} direction=\"row\">\r\n                                    <Button sx={{fontSize: '15px', textTransform: 'none'}} variant='contained' onClick={() => handleAddMedicalBook()}>Lu</Button>\r\n                                    <Button sx={{fontSize: '15px', textTransform: 'none'}} variant='contained' color={'error'} onClick={() => handleCloseModalCompleteExamining()}>ng</Button>\r\n                                </Stack>\r\n                            </div>\r\n                        </div>   \r\n                    :\r\n                        null            \r\n                    }             \r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <AlertProcessing\r\n                openAlertProcessing={openAlertProcessing} setOpenAlertProcessing={setOpenAlertProcessing}            \r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CompleteExamining","import React, { useState, useContext, useEffect, useRef } from 'react';\r\n//mui theme\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport List from '@mui/material/List';\r\nimport ListItemButton from '@mui/material/ListItemButton';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport Grid from '@mui/material/Grid';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Pagination from '@mui/material/Pagination';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { makeStyles } from '@mui/styles';\r\n//mui icon\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\r\n//scss\r\nimport './SCSS/PreviewLastExamining.scss'; \r\n//api\r\nimport { getMedicalBook } from '../../Service/MedicalService';\r\n//moment\r\nimport moment from 'moment';\r\nimport 'moment/locale/vi'; \r\nmoment.locale('vi');\r\n\r\nfunction PreviewLastExamining(props) {\r\n    const previewDataExaminingDefault = {\r\n        categoryPres: [],\r\n        healthRecords: { examinationName: '', timeUpdateState: '', conclusion: '', medicakBook: [] },\r\n        nutritionals: [],\r\n        vaccinationBook: [] \r\n    }\r\n\r\n    const [previewDataExamining, setPreviewDataExamining] = useState(previewDataExaminingDefault);\r\n    // const [fullDataPredecessor, setFullDataPredecessor] = useState();\r\n    // const [fullDataHealthRecord, setFullDataHealthRecord] = useState();\r\n    \r\n    const [loadingMedicalBook, setLoadingMedicalBook] = useState(false);\r\n\r\n    const [openCollapsePredecessorItem, setOpenCollapsePredecessorItem] = useState([]);\r\n    const [openCollapseMedicakBookItem, setOpenCollapseMedicakBookItem] = useState([]);\r\n\r\n    const useStyles = makeStyles({\r\n        root: {\r\n          '&.Mui-disabled': {\r\n            color: '#d32f2f', // Mu sc khi checkbox b v hiu ha\r\n          },\r\n          '&.Mui-checked.Mui-disabled': {\r\n            color: '#d32f2f', // Mu sc khi checkbox b v hiu ha v  c chn\r\n          },\r\n        },\r\n      });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleOpenPredecessorItem = (predecessorIndex) => {\r\n        setOpenCollapsePredecessorItem((prevOpen) => {\r\n            const newOpen = [...prevOpen];\r\n            newOpen[predecessorIndex] = !newOpen[predecessorIndex];\r\n            return newOpen;\r\n        });\r\n    }\r\n\r\n    const handleOpenMedicakBookItem = (medicakBookIndex) => {\r\n        setOpenCollapseMedicakBookItem((prevOpen) => {\r\n            const newOpen = [...prevOpen];\r\n            newOpen[medicakBookIndex] = !newOpen[medicakBookIndex];\r\n            return newOpen;\r\n        });\r\n    }\r\n\r\n    // const handeOnChangePagePredecessor = (e, page, indexPredecessor) => {\r\n    //     const _previewDataExamining = {...previewDataExamining}\r\n    //     _previewDataExamining.categoryPres[indexPredecessor].categoryContents = fullDataPredecessor[indexPredecessor].categoryContents[page - 1];\r\n    //     _previewDataExamining.categoryPres[indexPredecessor].currentContent = page\r\n    //     setPreviewDataExamining(_previewDataExamining)\r\n    // }\r\n\r\n    // const handeOnChangePageHealthRecords = (e, page, indexMedicakbook) => {\r\n    //     const _previewDataExamining = {...previewDataExamining}\r\n    //     _previewDataExamining.healthRecords.medicakBook[indexMedicakbook].categoryContents = fullDataHealthRecord[indexMedicakbook].categoryContents[page - 1];\r\n    //     _previewDataExamining.healthRecords.medicakBook[indexMedicakbook].currentContent = page\r\n    //     setPreviewDataExamining(_previewDataExamining)\r\n    // }\r\n\r\n    const handleEditPrevDataExamining = async () => {\r\n        setLoadingMedicalBook(true);\r\n        const responseMedicalBook = await getMedicalBook(props.prevDataExamining.healthRecords[props.prevDataExamining.healthRecords.some(healthRecordsItem => healthRecordsItem.medicalBookId === null) ? 1 : 0].medicalRegisterId);\r\n        if(props.prevDataExamining.newPredecessor){\r\n            const healthRecordsUpdate = {\r\n                ...props.prevDataExamining.healthRecords[props.prevDataExamining.healthRecords.some(healthRecordsItem => healthRecordsItem.medicalBookId === null) ? 1 : 0],\r\n                newMedicalBook: responseMedicalBook.medicakBook.newMedicalBook,\r\n                appointmentDate: responseMedicalBook.medicakBook.appointmentDate,\r\n                nextExamName: responseMedicalBook.medicakBook.nextExamName,\r\n                medicakBook: responseMedicalBook.medicakBook.categories\r\n            }\r\n             \r\n            setPreviewDataExamining(\r\n                {\r\n                    categoryPres: [],\r\n                    healthRecords: healthRecordsUpdate,\r\n                    medicalBookIdRecently: props.prevDataExamining.medicalBookIdRecently,\r\n                    nutritionals: props.prevDataExamining.nutritionals,\r\n                    vaccinationBook: props.prevDataExamining.vaccinationBook,\r\n                }\r\n            )\r\n        }\r\n\r\n        else{\r\n            if(props.prevDataExamining.categoryPres.length > 1){\r\n                props.prevDataExamining.categoryPres = props.prevDataExamining.categoryPres.sort((a, b) => a.categoryOrder - b.categoryOrder);\r\n            }\r\n\r\n            const healthRecordsUpdate = {\r\n                ...props.prevDataExamining.healthRecords[props.prevDataExamining.healthRecords.some(healthRecordsItem => healthRecordsItem.medicalBookId === null) ? 1 : 0],\r\n                newMedicalBook: responseMedicalBook.medicakBook.newMedicalBook,\r\n                appointmentDate: responseMedicalBook.medicakBook.appointmentDate,\r\n                nextExamName: responseMedicalBook.medicakBook.nextExamName,\r\n                medicakBook: responseMedicalBook.medicakBook.categories\r\n            }\r\n            \r\n            setPreviewDataExamining(\r\n                {\r\n                    categoryPres: props.prevDataExamining.categoryPres,\r\n                    healthRecords: healthRecordsUpdate,\r\n                    medicalBookIdRecently: props.prevDataExamining.medicalBookIdRecently,\r\n                    nutritionals: props.prevDataExamining.nutritionals,\r\n                    vaccinationBook: props.prevDataExamining.vaccinationBook,\r\n                }\r\n            )\r\n        }\r\n        setLoadingMedicalBook(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(props.prevDataExamining){\r\n            handleEditPrevDataExamining();\r\n        }\r\n    }, [props.prevDataExamining])\r\n\r\n    return (\r\n        <>\r\n            <Box sx={{height: '100%', position: 'relative'}}>\r\n                {loadingMedicalBook ? \r\n                    <Box sx={{height: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\r\n                        <CircularProgress />\r\n                        <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu s khm bnh gn nht, hy ch mt cht...</Typography>\r\n                    </Box>\r\n                :\r\n                    <>\r\n                        <div className='preview-last-examining-contents' >\r\n\r\n                            <Typography variant='h6' sx={{fontWeight: 'bolder', textAlign: 'center', fontSize: '1.2rem'}}>\r\n                                Thng tin tm tt <span style={{color: 'red'}}>{previewDataExamining.healthRecords.examinationName}</span>\r\n                            </Typography>\r\n\r\n                            <List sx={{p: 0}}>\r\n                                {previewDataExamining.categoryPres.map((predecessorItem, predecessorIndex) => (\r\n                                    <div key={`predecessorItem ${predecessorIndex}`}>\r\n                                        <ListItemButton sx={{pt: '0px', pb: '0px', borderRadius: '8px', ':hover': {backgroundColor: 'rgba(0, 0, 0, 0.1)'}}}\r\n                                            onClick={() => handleOpenPredecessorItem(predecessorIndex)}\r\n                                        >\r\n                                            <Box sx={{display: 'flex', alignItems: 'center'}}>\r\n                                                <ListItemIcon sx={{minWidth: '30px', '& .MuiSvgIcon-fontSizeMedium': {fontSize: '1rem', color: '#2962ff', transform: openCollapsePredecessorItem[predecessorIndex] === true ? 'rotate(90deg)' : 'rotate(0deg)'}}}><SendIcon /></ListItemIcon>\r\n                                                <ListItemText primary={predecessorItem.categoryName} sx={{'& .MuiListItemText-primary': {fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}}/>\r\n                                            </Box>\r\n                                        </ListItemButton>\r\n\r\n                                        <Collapse in={openCollapsePredecessorItem[predecessorIndex]} timeout=\"auto\" unmountOnExit>\r\n                                            <div>\r\n                                                {predecessorItem.categoryContents.map((predecessorItemCategoryContentsItem, predecessorItemCategoryContentsIndex) => (\r\n                                                    <div className='container-item-table-preview-examining' style={{ paddingLeft: '18px', paddingRight: '18px', marginBottom: '6px' }} key={`predecessorItemCategoryContentsIndex ${predecessorItemCategoryContentsIndex}`}>\r\n                                                        <Typography variant='subtitle1' sx={{fontWeight: 'bolder', fontSize: '18px', textAlign: 'center', mb: predecessorItemCategoryContentsItem.categoryContentTitle ? 0 : 2 }}>{predecessorItemCategoryContentsItem.categoryContentTitle}</Typography>\r\n                                                    \r\n                                                        <Box sx={{mb: 2}}>\r\n                                                            {predecessorItemCategoryContentsItem.categoryContentQuestions.map((questionItem, questionIndex) => (\r\n                                                                <Box key={`questionItem ${questionIndex}`} >\r\n                                                                    <Grid container rowSpacing={0} >\r\n                                                                        {questionIndex === 0 ?\r\n                                                                            <>\r\n                                                                                <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7}}>\r\n                                                                                    <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{predecessorItemCategoryContentsItem.categoryContentName}</Typography>\r\n                                                                                </Grid> \r\n\r\n                                                                                {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                    <>\r\n                                                                                        <Grid item xs={1.5} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n                                                                                            <CheckBoxIcon sx={{fontSize: '1.2rem', color: 'gray', mr: 0.4}}/>\r\n                                                                                            <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', lineHeight: '1.6'}}>{predecessorItemCategoryContentsItem.categoryContentCheck}</Typography>\r\n                                                                                        </Grid>\r\n                                                                                                    \r\n                                                                                        <Grid item xs={6.5} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                            <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', ml: 0.5}}>{predecessorItemCategoryContentsItem.categoryContentText}</Typography>\r\n                                                                                        </Grid>\r\n                                                                                    </>\r\n                                                                                : \r\n                                                                                    <Grid item xs={8} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                        <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{predecessorItemCategoryContentsItem.categoryContentText}</Typography>\r\n                                                                                    </Grid>\r\n                                                                                }   \r\n                                                                            </>\r\n                                                                        :\r\n                                                                            null\r\n                                                                        }\r\n                                                                                    \r\n                                                                        <Box key={`questionItem ${questionIndex}`} style={{display: 'flex', width: '100%'}}>\r\n                                                                            <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', alignItems: 'center'}}>\r\n                                                                                <Typography variant='subtitle1' sx={{fontSize: '1rem'}}>{questionItem.categoryContentQuestionName}</Typography>\r\n                                                                            </Grid>\r\n                                                                                            \r\n                                                                            {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                <>\r\n                                                                                    <Grid item xs={1.5} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center'}}>\r\n                                                                                        <Checkbox disabled checked={questionItem.categoryContentAnswer} classes={{ root: classes.root }} sx={{'& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem'}}} />\r\n                                                                                    </Grid>\r\n\r\n                                                                                    <Grid item xs={6.5} >\r\n                                                                                        <div className='note-for-answer'>\r\n                                                                                            <div className='suggest-note'>                                                                          \r\n                                                                                                <TextareaAutosize className='textarea-autosize' rows={1} disabled value={questionItem.categoryContentNote}/>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </Grid>\r\n                                                                                </>\r\n                                                                            :   \r\n                                                                                <>\r\n                                                                                    <Grid item xs={8} >\r\n                                                                                        <div className='note-for-answer'>\r\n                                                                                            <div className='suggest-note'>                                                                          \r\n                                                                                                <TextareaAutosize className='textarea-autosize' rows={1} disabled value={questionItem.categoryContentNote}/>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </Grid>\r\n                                                                                </>\r\n                                                                            }  \r\n                                                                        </Box>\r\n                                                                    </Grid>\r\n                                                                </Box>\r\n                                                            ))} \r\n                                                        </Box>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </Collapse>\r\n                                    </div>\r\n                                ))}\r\n\r\n                                {previewDataExamining.healthRecords.medicakBook.map((medicakBookItems, medicakBookIndex) => (\r\n                                    <div key={`medicakBookItems ${medicakBookIndex}`}>\r\n                                        <ListItemButton sx={{pt: '0px', pb: '0px', borderRadius: '8px', ':hover': {backgroundColor: 'rgba(0, 0, 0, 0.1)'}}}\r\n                                            onClick={() => handleOpenMedicakBookItem(medicakBookIndex)}\r\n                                        >\r\n                                            <Box sx={{display: 'flex', alignItems: 'center'}}>\r\n                                                <ListItemIcon sx={{minWidth: '30px', '& .MuiSvgIcon-fontSizeMedium': {fontSize: '1rem', color: '#2962ff', transform: openCollapseMedicakBookItem[medicakBookIndex] === true ? 'rotate(90deg)' : 'rotate(0deg)'}}}><SendIcon /></ListItemIcon>\r\n                                                <ListItemText primary={medicakBookItems.categoryName} sx={{'& .MuiListItemText-primary': {fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}}/>\r\n                                            </Box>\r\n                                        </ListItemButton>\r\n\r\n                                        <Collapse in={openCollapseMedicakBookItem[medicakBookIndex]} timeout=\"auto\" unmountOnExit>\r\n                                            <div>\r\n                                                {medicakBookItems.categoryContents.map((medicakBookCategoryContentsItem, medicakBookCategoryContentsIndex) => (\r\n                                                    <div className='container-item-table-preview-examining' style={{ paddingLeft: '18px', paddingRight: '18px', marginBottom: '6px' }} key={`medicakBookCategoryContentsIndex ${medicakBookCategoryContentsIndex}`}>\r\n                                                        <Typography variant='subtitle1' sx={{fontWeight: 'bolder', fontSize: '18px', textAlign: 'center', mb: medicakBookCategoryContentsItem.categoryContentTitle ? 0 : 2 }}>{medicakBookCategoryContentsItem.categoryContentTitle}</Typography>\r\n\r\n                                                        <Box sx={{mb: 2}}>\r\n                                                            {medicakBookCategoryContentsItem.categoryContentQuestions.map((questionItem, questionIndex) => (\r\n                                                                <Box key={`questionItem ${questionIndex}`} >\r\n                                                                    <Grid container rowSpacing={0} >\r\n                                                                        {questionIndex === 0 ?\r\n                                                                            <>\r\n                                                                                <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7}}>\r\n                                                                                    <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{medicakBookCategoryContentsItem.categoryContentName}</Typography>\r\n                                                                                </Grid> \r\n\r\n                                                                                {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                    <>\r\n                                                                                        <Grid item xs={2.5} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n                                                                                            <CheckBoxIcon sx={{fontSize: '1.2rem', color: 'gray', mr: 0.4}}/>\r\n                                                                                            <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', lineHeight: '1.6'}}>{medicakBookCategoryContentsItem.categoryContentCheck}</Typography>\r\n                                                                                        </Grid>\r\n                                                                                                    \r\n                                                                                        <Grid item xs={5.5} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                            <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', ml: 0.5}}>{medicakBookCategoryContentsItem.categoryContentText}</Typography>\r\n                                                                                        </Grid>\r\n                                                                                    </>\r\n                                                                                : \r\n                                                                                    <Grid item xs={8} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                        <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{medicakBookCategoryContentsItem.categoryContentText}</Typography>\r\n                                                                                    </Grid>\r\n                                                                                }   \r\n                                                                            </>\r\n                                                                        :\r\n                                                                            null\r\n                                                                        }\r\n\r\n                                                                        <Box key={`questionItem ${questionIndex}`} style={{display: 'flex', width: '100%'}}>\r\n                                                                            <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', alignItems: 'center'}}>\r\n                                                                                <Typography variant='subtitle1' sx={{fontSize: '1rem'}}>{questionItem.categoryContentQuestionName}</Typography>\r\n                                                                            </Grid>\r\n                                                                                            \r\n                                                                            {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                <>\r\n                                                                                    <Grid item xs={2.5} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center'}}>\r\n                                                                                        <Checkbox disabled checked={questionItem.categoryContentAnswer} classes={{ root: classes.root }} sx={{'& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem'}}} />\r\n                                                                                    </Grid>\r\n\r\n                                                                                    <Grid item xs={5.5} >\r\n                                                                                        <div className='note-for-answer'>\r\n                                                                                            <div className='suggest-note'>                                                                          \r\n                                                                                                <TextareaAutosize className='textarea-autosize' rows={1} disabled value={questionItem.categoryContentNote}/>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </Grid>\r\n                                                                                </>\r\n                                                                            :   \r\n                                                                                <>\r\n                                                                                    <Grid item xs={8} >\r\n                                                                                        <div className='note-for-answer'>\r\n                                                                                            <div className='suggest-note'>                                                                          \r\n                                                                                                <TextareaAutosize className='textarea-autosize' rows={1} disabled value={questionItem.categoryContentNote}/>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </Grid>\r\n                                                                                </>\r\n                                                                            }  \r\n                                                                        </Box>\r\n                                                                    </Grid>\r\n                                                                </Box>\r\n                                                            ))}\r\n                                                        </Box>\r\n                                                    </div>\r\n                                                ))}             \r\n                                            </div>\r\n                                        </Collapse>\r\n                                    </div>\r\n                                ))}\r\n                            </List>\r\n\r\n                            <div className='conclusion' style={{marginLeft: '16px', marginTop: '4px'}}>\r\n                                <Typography variant='h6' sx={{color: 'blue', fontWeight: 'bolder'}}>{`Kt lun: ${previewDataExamining.healthRecords.conclusion}`}</Typography>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className='time-examining' style={{marginLeft: '16px', marginTop: '4px', width: '99%'}}>\r\n                            <Typography variant='subtitle1' sx={{color: '#009688', fontWeight: 'bolder', fontSize: '1.08rem'}}>{`${previewDataExamining.healthRecords.doctorFullName}, ${moment(previewDataExamining.healthRecords.timeUpdateState).format('LLLL')}`}</Typography>\r\n                        </div>\r\n                    </>\r\n                }\r\n            </Box>\r\n        </> \r\n    )\r\n}\r\n\r\nexport default PreviewLastExamining","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//lodash\r\nimport _, { constant } from \"lodash\";\r\n//modal\r\nimport CompleteExamining from '../ManageCompleteExamining/CompleteExamining';\r\nimport AlertProcessingBackdrop from '../ManageAlertProcessingBackdrop/AlertProcessingBackdrop';\r\n//components\r\nimport PreviewLastExamining from './PreviewLastExamining';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport Stack from '@mui/material/Stack';\r\nimport Chip from '@mui/material/Chip';\r\nimport Badge from '@mui/material/Badge';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport { Button, IconButton, TextField } from '@mui/material';\r\nimport List from '@mui/material/List';\r\nimport ListItemButton from '@mui/material/ListItemButton';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Pagination from '@mui/material/Pagination';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { makeStyles } from '@mui/styles';\r\n//mui icon\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport PinIcon from '@mui/icons-material/Pin';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\nimport CalendarMonthIcon from '@mui/icons-material/CalendarMonth';\r\nimport MaleIcon from '@mui/icons-material/Male';\r\nimport FemaleIcon from '@mui/icons-material/Female';\r\nimport PhoneIcon from '@mui/icons-material/Phone';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\r\nimport DescriptionIcon from '@mui/icons-material/Description';\r\nimport Home from '@mui/icons-material/Home';\r\nimport { GiBodyHeight } from \"react-icons/gi\";\r\nimport { GiWeightScale } from \"react-icons/gi\";\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\r\nimport FiberManualRecordIcon from '@mui/icons-material/FiberManualRecord';\r\nimport { TbRulerMeasure } from \"react-icons/tb\";\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport BeenhereIcon from '@mui/icons-material/Beenhere';\r\nimport VaccinesIcon from '@mui/icons-material/Vaccines';\r\nimport CachedIcon from '@mui/icons-material/Cached';\r\n//moment\r\nimport moment from 'moment';\r\n//scss\r\nimport './SCSS/DoctorExamining.scss';\r\n//real-time\r\nimport {startSignalRConnection, onReceiveMessage} from '../../Service/SignalService';\r\n//api\r\nimport { \r\n    createAddPredecessor,\r\n    getMedicalDetailPatient,\r\n    getRegistersByDateNow, getMedicalBook, getUpdatePredecessor, getUpdateMedicalBook,\r\n    updateMedicalState,\r\n    deleteMedicalBook\r\n} from '../../Service/MedicalService';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction MainDoctorExamining() {\r\n    const dataPantientsReadyExaminingDefault = {\r\n        stt: '',\r\n        id: '',\r\n        patientsId: '',\r\n        patientCode: '',\r\n        patientsName: '',\r\n        patientsDOB: '',\r\n        patientsMonthsOld: '',\r\n        patientsGender: '',\r\n        patientsHeight: '',\r\n        patientsWeight: '',\r\n        patientsHeadCircumference: '',\r\n        patientsPhone: '',\r\n        patientsAddress: ''\r\n    }\r\n\r\n    const { user, loading, alertVisible, confirmAlert, resetAlert, isLogOutClick, isDialogChangePasswordOpen } = useContext(UserContext);\r\n\r\n    const history = useHistory();\r\n\r\n    const [isFormDirty, setIsFormDirty] = useState(false);\r\n\r\n    //state thng tin bnh nhn ban u \r\n    const [dataPantientsReadyExamining, setDataPantientsReadyExamining] = useState(dataPantientsReadyExaminingDefault);\r\n\r\n    //state cc category gm tiu  ni dung khm v cu hi khm ban u\r\n    const [mainDataExamining, setMainDataExamining] = useState([]);\r\n\r\n    //state lu tm data cc k khm \r\n    const [prevDataExamining, setPrevDataExamining] = useState();\r\n\r\n    //state ng m cy th mc khm ca s khm bnh\r\n    const [openCollapseHealthRecords, setOpenCollapseHealthRecords] = useState(false);\r\n\r\n    //state ng m chi tit ni dung ca s khm bnh\r\n    const [openCollapseHealthRecordsItem, setOpenCollapseHealthRecordsItem] = useState([]);\r\n\r\n    //state chn danh mc khm ban u\r\n    const [categorySelectedExamining, setCategorySelectedExamining] = useState({});\r\n\r\n    //state chn danh mc bao gm ni dung bn trong ban u\r\n    const [contentCategorySelectedExamining, setContentCategorySelectedExamining] = useState([]);\r\n\r\n    //state lu tm ni dung chi tit ca s khm bnh\r\n    const [healthRecordsContents, setHealthRecordsContents] = useState([]);\r\n    const [currentHealthRecordExamining, setCurrentHealthRecordExamining] = useState();\r\n\r\n    //tin cn show  thng tin bnh nhn\r\n    const [previewPredecessor, setPreviewPredecessor] = useState();\r\n    const [oldPreviewPredecessor, setOldPreviewPredecessor] = useState();\r\n\r\n    //state cc cu hi c bc s khm tch hoc g vo\r\n    const [dataExaminingForConclusion , setDataExaminingForConclusion ] = useState({});\r\n\r\n    //state lu tm cc data tin cn ca getUpdatePredecessor (bao gm nhng data tin cn  chn v cha chn)\r\n    const [oldDataPredecessor, setOldDataPredecessor] = useState();\r\n\r\n    //dng khi ti khm hoc m khm li cho bnh nhn c tin cn  ng\r\n    const [newDataPredecessor, setNewDataPredecessor] = useState();\r\n\r\n    //state lu data tin cn c (nhng data tin cn  chn)  \r\n    const [prevDataPredecessor, setPrevDataPredecessor] = useState();\r\n\r\n    //state qun l modal kt thc khm\r\n    const [openModalCompleteExamining, setOpenModalCompleteExamining] = useState(false);\r\n\r\n    const [loadingPrevDataExamining, setLoadingPrevDataExamining] = useState(false);\r\n    const [loadingPatient, setLoadingPatient] = useState(true);\r\n    const [loadingInfoPatient, setLoadingInfoPatient] = useState(true);\r\n    const [loadingCategoryExamining, setLoadingCategoryExamining] = useState(false);\r\n    const [loadingContentsExamining, setLoadingContentsExamining] = useState(false);\r\n\r\n    const [listDataPatientsRegister, setListDataPatientsRegister] = useState([]); \r\n    const [searchPatientsQuery, setSearchPatientsQuery] = useState(\"\");\r\n  \r\n    const [listDataPatientsRegisterState, setListDataPatientsRegisterState] = useState([]);\r\n    const [listDataPatientsRegisterSort, setListDataPatientsRegisterSort] = useState([]);\r\n\r\n    const [activeChip, setActiveChip] = useState({chipOrder: 0, chipLabel: 'BN ch khm'});\r\n    const [listPantientChipState, setListPantientChipState] = useState(\r\n        [\r\n            { chipLabel: 'BN ch khm', chipContent: 0 },\r\n            { chipLabel: 'BN  khm', chipContent: 0 }\r\n        ]\r\n    )\r\n\r\n    const [openAlertProcessingBackdrop, setOpenAlertProcessingBackdrop] = useState(false);\r\n\r\n    const handleSelectedChip = (chipIndex, chipLabel) => {\r\n        setActiveChip({chipOrder: chipIndex, chipLabel: chipLabel});\r\n        if(chipIndex === 0){\r\n          const listPantientRegisterWaiting = listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 0 || patientsRegisterItem.state === 1 || patientsRegisterItem.state === 3) //ch khm v ang khm\r\n          setListDataPatientsRegisterSort(listPantientRegisterWaiting);\r\n          setListDataPatientsRegisterState(listPantientRegisterWaiting);\r\n        }\r\n        else if(chipIndex === 1){\r\n            const listPantientRegisterDone = listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 2 && patientsRegisterItem.userIdDoctor === user.userId) // khm\r\n            setListDataPatientsRegisterSort(listPantientRegisterDone);\r\n            setListDataPatientsRegisterState(listPantientRegisterDone);\r\n        }\r\n    };\r\n\r\n    const handleSearchPantient = (value) => {\r\n        const takenValue = value;\r\n        setSearchPatientsQuery(takenValue);\r\n    \r\n        if(value === ''){\r\n          setListDataPatientsRegisterSort(listDataPatientsRegisterState);\r\n        }else{\r\n          setListDataPatientsRegisterSort(searchPatients(listDataPatientsRegisterState, takenValue));\r\n        }\r\n      }\r\n    \r\n    const searchPatients = (patients, searchTerm) => {\r\n        const lowerCaseSearchTerm = searchTerm.toLowerCase();\r\n        return patients.filter(patientObj => {\r\n          const { patientId, fullName, phoneMother, phoneFather } = patientObj.patient;\r\n          return patientId.toLowerCase().includes(lowerCaseSearchTerm) || fullName.toLowerCase().includes(lowerCaseSearchTerm) || phoneMother.toLowerCase().includes(lowerCaseSearchTerm) || phoneFather.toLowerCase().includes(lowerCaseSearchTerm);\r\n        });\r\n    }\r\n\r\n    const handleCompleteExaminingForPantient = () => {\r\n        setLoadingPatient(true);\r\n        toast.success(` kt thc khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}`, {toastId: 'success1'});\r\n        setDataPantientsReadyExamining(dataPantientsReadyExaminingDefault);\r\n        setMainDataExamining([]);\r\n        setOpenCollapseHealthRecords(false);\r\n        setOpenCollapseHealthRecordsItem([]);\r\n        setCategorySelectedExamining({});\r\n        setContentCategorySelectedExamining([]);\r\n        setHealthRecordsContents([]);\r\n        setDataExaminingForConclusion({});\r\n        setPrevDataPredecessor();\r\n        setCurrentHealthRecordExamining();\r\n        setOldDataPredecessor();\r\n        setPreviewPredecessor();\r\n        handleGetRegistersByDateNow();\r\n    }\r\n\r\n    const handleCancelExamining = async () => {\r\n        setLoadingPatient(true);\r\n        setLoadingInfoPatient(true);\r\n        setLoadingCategoryExamining(true);\r\n        setLoadingContentsExamining(true);\r\n        const response = await updateMedicalState(dataPantientsReadyExamining.id, [dataPantientsReadyExamining.editExamining === true ? 2 : 0 || dataPantientsReadyExamining.backRegister === true ? 3 : 0]);\r\n        if(response.status === 200){\r\n            toast.success(` hy khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}`, {toastId: 'success2'});    \r\n            setDataPantientsReadyExamining(dataPantientsReadyExaminingDefault);\r\n            setMainDataExamining([]);\r\n            setOpenCollapseHealthRecords(false);\r\n            setOpenCollapseHealthRecordsItem([]);\r\n            setCategorySelectedExamining({});\r\n            setContentCategorySelectedExamining([]);\r\n            setHealthRecordsContents([]);\r\n            setCurrentHealthRecordExamining();\r\n            setDataExaminingForConclusion({});\r\n            setPrevDataPredecessor();\r\n            setCurrentHealthRecordExamining();\r\n            setOldDataPredecessor();\r\n            setPreviewPredecessor();\r\n            handleGetRegistersByDateNow();\r\n        }\r\n        else if(response.status === 400){\r\n            toast.error('Bn khng phi bc s khm hm nay, khng th dng chc nng ny', {toastId: 'error1'});\r\n        }\r\n        setLoadingCategoryExamining(false);\r\n        setLoadingContentsExamining(false);\r\n    }\r\n\r\n    const handleDeleteExamining = async () => {\r\n        const confirmLeave = window.confirm(\r\n            'Chc nng ny s xa tt c d liu ca k khm hin ti v t bnh nhn v trng thi cha khm. Bn c mun xa khng?'\r\n        );\r\n        if (confirmLeave) {\r\n            setLoadingPatient(true);\r\n            setOpenAlertProcessingBackdrop(true);\r\n            const responseDeleteMedicalBook = await deleteMedicalBook(prevDataExamining.healthRecords[0].medicalBookId);\r\n            if(responseDeleteMedicalBook.status === 200){\r\n                toast.success(responseDeleteMedicalBook.data, {toastId: 'handleDeleteExaminingSuccess'});\r\n                if(dataPantientsReadyExamining.backRegister){\r\n                    await updateMedicalState(dataPantientsReadyExamining.id, 3);\r\n                }\r\n                setPrevDataExamining();\r\n                if(previewPredecessor && previewPredecessor.length !== 0){\r\n                    setPreviewPredecessor();\r\n                }\r\n                setDataPantientsReadyExamining(dataPantientsReadyExaminingDefault);\r\n                setActiveChip({chipOrder: 0, chipLabel: 'BN ch khm'});\r\n                handleGetRegistersByDateNow();\r\n            }\r\n            else{\r\n                toast.error(responseDeleteMedicalBook.data, {toastId: 'handleDeleteExaminingError'});\r\n            }\r\n            setOpenAlertProcessingBackdrop(false);\r\n        } else {\r\n            return false; // Ngn iu hng\r\n        }\r\n    }\r\n\r\n    const handleStartExaminingButtonClick = () => {\r\n        if(dataPantientsReadyExamining.status === 0 && dataPantientsReadyExamining.editExamining === false){\r\n            handleBeginExaminingForPantient();\r\n        }\r\n        else if(dataPantientsReadyExamining.status === 1){\r\n            alert(`Bn ang trong qu trnh khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}, vui lng kt thc t khm hin ti  bt u t khm mi!`);\r\n        }\r\n        else if(dataPantientsReadyExamining.status === 0  && dataPantientsReadyExamining.editExamining === true){\r\n            handleBeginEditExaminingForPantient();\r\n        }\r\n    }\r\n\r\n    const handleCompleteExaminingButtonClick = () => {\r\n        setOpenAlertProcessingBackdrop(true)\r\n        if(dataPantientsReadyExamining.status === 1){\r\n            setTimeout(() => {\r\n                setOpenAlertProcessingBackdrop(false)\r\n                setOpenModalCompleteExamining(true);\r\n            }, 1000)\r\n        }\r\n    }\r\n\r\n    //hm ny dng khi user ang khm m b ngo l nhn f5\r\n    const handleReloadUIWhenExamining = async () => {\r\n        setOpenAlertProcessingBackdrop(true);\r\n\r\n        const reDataPatientsRegisterSort = JSON.parse(sessionStorage.dataPatientsRegisterSort)\r\n        const reDataPantientsReadyExamining = JSON.parse(sessionStorage.dataPantientsReadyExamining);\r\n        const reMainDataExamining = JSON.parse(sessionStorage.mainDataExamining);\r\n        const reDataExaminingForConclusion = JSON.parse(sessionStorage.dataExaminingForConclusion);\r\n\r\n        setListDataPatientsRegisterSort(reDataPatientsRegisterSort);\r\n        \r\n        reDataPantientsReadyExamining.isContinueExam = true;\r\n        \r\n        setDataPantientsReadyExamining(_.cloneDeep(reDataPantientsReadyExamining));\r\n        setMainDataExamining(_.cloneDeep(reMainDataExamining));\r\n        setDataExaminingForConclusion(_.cloneDeep(reDataExaminingForConclusion));\r\n\r\n        if(sessionStorage.currentHealthRecordExamining){\r\n            const reCurrentHealthRecordExamining = JSON.parse(sessionStorage.currentHealthRecordExamining);\r\n            setHealthRecordsContents(_.cloneDeep(reCurrentHealthRecordExamining));\r\n            setCurrentHealthRecordExamining(_.cloneDeep(reCurrentHealthRecordExamining));\r\n        }\r\n\r\n        if(sessionStorage.prevDataPredecessor){\r\n            const rePrevDataPredecessor = JSON.parse(sessionStorage.prevDataPredecessor);\r\n            setPrevDataPredecessor(_.cloneDeep(rePrevDataPredecessor));\r\n        }\r\n\r\n        if(sessionStorage.oldDataPredecessor){\r\n            const reOldDataPredecessor = JSON.parse(sessionStorage.oldDataPredecessor);\r\n            setOldDataPredecessor(_.cloneDeep(reOldDataPredecessor));\r\n        }\r\n        \r\n        setNewDataPredecessor({\r\n            patientId: dataPantientsReadyExamining.patientsId,\r\n            categoryPres: []\r\n        })\r\n        \r\n        sessionStorage.clear();\r\n\r\n        setLoadingPatient(false);\r\n        setLoadingInfoPatient(false);\r\n        setOpenAlertProcessingBackdrop(false);\r\n    }\r\n\r\n    //ly danh sch ng k khm trong ngy\r\n    const handleGetRegistersByDateNow = async () => {\r\n        await new Promise(resolve => setTimeout(resolve, 1 * 1000));\r\n        const response = await getRegistersByDateNow();\r\n        if(response !== 400){\r\n            let responseListPantient = response.list;\r\n            const findPantientIsExam = responseListPantient.find(item => item.state === 1 && item.userIdDoctor === user.userId);\r\n            if(findPantientIsExam){\r\n                const responseDataExamining = await getMedicalDetailPatient(findPantientIsExam.id);\r\n                if(responseDataExamining.healthRecords.some(healthRecordsItem => healthRecordsItem.medicalBookId === null)){\r\n                    await updateMedicalState(findPantientIsExam.id, 0);    \r\n                    const indexPantient = responseListPantient.findIndex(item => item.id === findPantientIsExam.id)\r\n                    responseListPantient[indexPantient].state = 0\r\n                }\r\n                else{\r\n                    await updateMedicalState(findPantientIsExam.id, 3);  \r\n                    const indexPantient = responseListPantient.findIndex(item => item.id === findPantientIsExam.id)\r\n                    responseListPantient[indexPantient].state = 3          \r\n                }\r\n            }\r\n\r\n            const findListPantientNotExam = responseListPantient.filter(item => item.state !== 1)\r\n\r\n            setListDataPatientsRegister(findListPantientNotExam);\r\n\r\n            const listPantientRegisterWaiting = findListPantientNotExam.filter(patientsRegisterItem => patientsRegisterItem.state !== 2) //ch khm v ang khm\r\n            const listPantientRegisterDone = findListPantientNotExam.filter(patientsRegisterItem => patientsRegisterItem.state === 2 && patientsRegisterItem.userIdDoctor === user.userId) // khm\r\n \r\n            setListDataPatientsRegisterSort(listPantientRegisterWaiting);\r\n            setListDataPatientsRegisterState(listPantientRegisterWaiting);\r\n\r\n            const updatedList = [\r\n                { chipLabel: 'BN ch khm', chipContent: listPantientRegisterWaiting.length },\r\n                { chipLabel: 'BN  khm', chipContent: listPantientRegisterDone.length }\r\n            ]\r\n            setListPantientChipState(updatedList);\r\n        }\r\n\r\n        setLoadingPatient(false);\r\n        setLoadingInfoPatient(false);\r\n    }\r\n\r\n    const handleReloadGetRegistersByDateNow = async () => {\r\n        setLoadingPatient(true);\r\n        setLoadingInfoPatient(true);\r\n        setDataPantientsReadyExamining(dataPantientsReadyExaminingDefault);\r\n        setMainDataExamining([]);\r\n        setOpenCollapseHealthRecords(false);\r\n        setOpenCollapseHealthRecordsItem([]);\r\n        setCategorySelectedExamining({});\r\n        setContentCategorySelectedExamining([]);\r\n        setHealthRecordsContents([]);\r\n        setCurrentHealthRecordExamining();\r\n        setDataExaminingForConclusion({});\r\n        setPrevDataPredecessor();\r\n        setCurrentHealthRecordExamining();\r\n        setOldDataPredecessor();\r\n        setPreviewPredecessor();\r\n        handleGetRegistersByDateNow();\r\n    }\r\n\r\n    const handleAppyPantientData = async (dataPantientItem) => {\r\n        setOpenAlertProcessingBackdrop(true);\r\n        setLoadingInfoPatient(true);\r\n        setLoadingPrevDataExamining(true);\r\n        if(previewPredecessor && previewPredecessor.length !== 0){\r\n            setPreviewPredecessor();\r\n        }\r\n        await handleGetMedicalDetailPatient(dataPantientItem.id);\r\n        const _dataPantientsReadyExamining = {...dataPantientsReadyExamining};\r\n        _dataPantientsReadyExamining.stt = dataPantientItem.order;\r\n        _dataPantientsReadyExamining.id = dataPantientItem.id;\r\n        _dataPantientsReadyExamining.status = 0;\r\n        _dataPantientsReadyExamining.patientsId = dataPantientItem.patient.patientId;\r\n        _dataPantientsReadyExamining.patientCode = dataPantientItem.patient.patientCode;\r\n        _dataPantientsReadyExamining.patientsName = dataPantientItem.patient.fullName;\r\n        _dataPantientsReadyExamining.patientsDOB = dataPantientItem.patient.dayOfBirth;\r\n        _dataPantientsReadyExamining.patientsMonthsOld = dataPantientItem.patient.monthsOfAge;\r\n        _dataPantientsReadyExamining.patientsGender = dataPantientItem.patient.gender;\r\n        _dataPantientsReadyExamining.patientsHeight = dataPantientItem.height;\r\n        _dataPantientsReadyExamining.patientsWeight = dataPantientItem.weight;\r\n        _dataPantientsReadyExamining.patientsHeadCircumference = dataPantientItem.headCircumference;\r\n        _dataPantientsReadyExamining.patientsHeadCircumference = dataPantientItem.headCircumference;\r\n        _dataPantientsReadyExamining.patientsPhone = dataPantientItem.patient.phoneMother ? dataPantientItem.patient.phoneMother : dataPantientItem.patient.phoneFather;\r\n        _dataPantientsReadyExamining.patientsAddress = dataPantientItem.patient.fullAddress;\r\n        _dataPantientsReadyExamining.vaccination = dataPantientItem.vaccination === true ? true : false;\r\n        _dataPantientsReadyExamining.editExamining = dataPantientItem.state === 2 ? true : false;\r\n        _dataPantientsReadyExamining.backRegister = dataPantientItem.state === 3 ? true : false;\r\n        _dataPantientsReadyExamining.isContinueExam = false;\r\n        setDataPantientsReadyExamining(_dataPantientsReadyExamining);\r\n        setLoadingInfoPatient(false);\r\n        setLoadingPrevDataExamining(false);\r\n        setOpenAlertProcessingBackdrop(false);\r\n    }\r\n\r\n    //nhn chn bnh nhn  load vo  thng tin bn\r\n    const handleSelectPantientExamining = async (dataPantientItem) => {\r\n        if(dataPantientItem.state === 0 && dataPantientsReadyExamining.patientsName !== dataPantientItem.patient.fullName || dataPantientItem.state === 3 && dataPantientsReadyExamining.patientsName !== dataPantientItem.patient.fullName){\r\n            if(dataPantientsReadyExamining.patientsId === '' || dataPantientsReadyExamining.patientsId !== '' && dataPantientsReadyExamining.status === 0){\r\n                await handleAppyPantientData(dataPantientItem);\r\n            }\r\n            else{\r\n                alert(`Bn ang trong qu trnh khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}, vui lng kt thc t khm  bt u t khm mi!`);\r\n            }\r\n        }\r\n        \r\n        else if(dataPantientItem.state === 2 && dataPantientsReadyExamining.patientsName !== dataPantientItem.patient.fullName){\r\n            if(dataPantientsReadyExamining.patientsId !== '' && dataPantientsReadyExamining.status === 1){\r\n                alert(`Bn ang trong qu trnh khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}, vui lng kt thc t khm  bt u t khm mi!`);\r\n            }\r\n            else{\r\n                await handleAppyPantientData(dataPantientItem);\r\n            }\r\n        }\r\n    }\r\n\r\n    //bt u khm bnh cho bnh nhn\r\n    const handleBeginExaminingForPantient = async () => {\r\n        setLoadingPatient(true);\r\n        const response = await updateMedicalState(dataPantientsReadyExamining.id, 1)\r\n        if(response.status === 200){\r\n            const _dataPantientsReadyExamining = {...dataPantientsReadyExamining};\r\n            _dataPantientsReadyExamining.status = 1;\r\n            setDataPantientsReadyExamining(_dataPantientsReadyExamining);\r\n            if(prevDataExamining.healthRecords.some(healthRecordsItem => healthRecordsItem.medicalBookId === null)){\r\n\r\n                if(dataPantientsReadyExamining.backRegister){\r\n                    setPrevDataPredecessor(_.cloneDeep(prevDataExamining.categoryPres));\r\n                    //backup prevDataPredecessor  khi cn dng\r\n                    setOldDataPredecessor(_.cloneDeep(prevDataExamining.categoryPres))\r\n                    setOldPreviewPredecessor(_.cloneDeep(previewPredecessor));\r\n                }\r\n\r\n                const _listDataPatientsRegister = [...listDataPatientsRegister];\r\n                const findIndexPatient = _listDataPatientsRegister.findIndex(item => item.id === dataPantientsReadyExamining.id);\r\n                _listDataPatientsRegister[findIndexPatient].state = 1;\r\n\r\n                setListDataPatientsRegister(_listDataPatientsRegister);\r\n\r\n                const listPantientRegisterWaiting = _listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 0 || patientsRegisterItem.state === 1 || patientsRegisterItem.state === 3) //ch khm v ang khm\r\n                setListDataPatientsRegisterSort(listPantientRegisterWaiting);\r\n                setListDataPatientsRegisterState(listPantientRegisterWaiting);\r\n\r\n                await handleSetMainDataExamining();\r\n                toast.success(`ang khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}`, {toastId: 'success1'});\r\n            }\r\n            else{\r\n                const _listDataPatientsRegister = [...listDataPatientsRegister];\r\n                const findIndexPatient = _listDataPatientsRegister.findIndex(item => item.id === dataPantientsReadyExamining.id);\r\n                _listDataPatientsRegister[findIndexPatient].state = 1;\r\n\r\n                setListDataPatientsRegister(_listDataPatientsRegister);\r\n\r\n                const listPantientRegisterWaiting = _listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 0 || patientsRegisterItem.state === 1 || patientsRegisterItem.state === 3) //ch khm v ang khm\r\n\r\n                setListDataPatientsRegisterSort(listPantientRegisterWaiting);\r\n                setListDataPatientsRegisterState(listPantientRegisterWaiting);\r\n\r\n                await handleGetCategoryReExamining();\r\n            }\r\n        }\r\n        else if(response.status === 400){\r\n            toast.error(response.data, {toastId: 'error1'});\r\n        }\r\n        setLoadingPatient(false);\r\n    }\r\n\r\n    //chnh d liu khm cho bnh nhn khm mi\r\n    const handleSetMainDataExamining = async () => {\r\n        setLoadingCategoryExamining(true);\r\n        prevDataExamining.healthRecords.forEach((healthRecordsItem) => {\r\n            if(healthRecordsItem.medicalBookId === null){\r\n                healthRecordsItem.state = 1\r\n            }\r\n        })\r\n        \r\n        //ti khm v c tin cn  ng\r\n        if(dataPantientsReadyExamining.backRegister === true && prevDataExamining.newPredecessor === false){\r\n            const responseGetUpdatePredecessor = await getUpdatePredecessor(dataPantientsReadyExamining.patientsId);\r\n\r\n            const editPrevDataExaminingCategoryPres = responseGetUpdatePredecessor.data.map(responseGetUpdatePredecessorItem => {\r\n                const matchingPrevDataExamining = prevDataExamining.categoryPres.find(prevDataExaminingCategoryPresItem => prevDataExaminingCategoryPresItem.categoryOrder === responseGetUpdatePredecessorItem.categoryOrder);\r\n\r\n                return {\r\n                    ...responseGetUpdatePredecessorItem,\r\n                    isLock: true,\r\n                    categoryContents: responseGetUpdatePredecessorItem.categoryContents.filter(content2 => {\r\n                        return matchingPrevDataExamining && matchingPrevDataExamining.categoryContents.some(content1 => content1.categoryContentOrder === content2.categoryContentOrder);\r\n                    }).map(content2 => {\r\n                        const matchingContent1 = matchingPrevDataExamining.categoryContents.find(content1 => content1.categoryContentOrder === content2.categoryContentOrder);\r\n                        return {\r\n                            ...content2,\r\n                            isNullCategoryPres: matchingContent1 ? false : true,\r\n                            isLock: true,\r\n                            categoryContentQuestions: matchingContent1 ? matchingContent1.categoryContentQuestions : []\r\n                        };\r\n                    }),\r\n                };\r\n            })\r\n\r\n            prevDataExamining.categoryPres = editPrevDataExaminingCategoryPres\r\n\r\n            setNewDataPredecessor({\r\n                patientId: dataPantientsReadyExamining.patientsId,\r\n                categoryPres: []\r\n            })\r\n\r\n            const responseGetUpdateMedicalBook = await getMedicalBook(prevDataExamining.healthRecords[0].medicalRegisterId);\r\n\r\n            prevDataExamining.healthRecords[0].categories = responseGetUpdateMedicalBook.medicakBook.categories\r\n\r\n            const updateHealthRecordsCategoriesForConclusion = prevDataExamining.healthRecords[0].categories.map(category => ({\r\n                categoryName: category.categoryName,\r\n                isHealthRecord: true,\r\n                categoryContents: category.categoryContents.map(content => ({\r\n                  ...content,\r\n                  categoryContentQuestions: []\r\n                })) \r\n            }))\r\n    \r\n            //demo truc data kt lun\r\n            const demoDataExaminingForConclusion = {\r\n                patientId: dataPantientsReadyExamining.patientsId,\r\n                isVaccination: prevDataExamining.vaccination,\r\n                medicalRegisterId: prevDataExamining.healthRecords[0].medicalRegisterId,\r\n                conclusion: prevDataExamining.healthRecords[0].conclusion,\r\n                categories: updateHealthRecordsCategoriesForConclusion\r\n            }\r\n    \r\n            setHealthRecordsContents({\r\n                healthRecordsName: prevDataExamining.healthRecords[0].examinationName,\r\n                categoryPatients: prevDataExamining.healthRecords[0].categories\r\n            })\r\n    \r\n            setCurrentHealthRecordExamining({\r\n                healthRecordsName: prevDataExamining.healthRecords[0].examinationName,\r\n                categoryPatients: prevDataExamining.healthRecords[0].categories\r\n            })\r\n\r\n            setMainDataExamining(prevDataExamining);\r\n            setDataExaminingForConclusion(_.cloneDeep(demoDataExaminingForConclusion));\r\n            setPrevDataExamining();\r\n        }\r\n\r\n        //ti khm v c tin cn cha ng\r\n        else if(dataPantientsReadyExamining.backRegister === true && prevDataExamining.newPredecessor === true){\r\n            const responseGetUpdateMedicalBook = await getMedicalBook(prevDataExamining.healthRecords[0].medicalRegisterId);\r\n\r\n            prevDataExamining.healthRecords[0].categories = responseGetUpdateMedicalBook.medicakBook.categories\r\n\r\n            const updateHealthRecordsCategoriesForConclusion = prevDataExamining.healthRecords[0].categories.map(category => ({\r\n                categoryName: category.categoryName,\r\n                isHealthRecord: true,\r\n                categoryContents: category.categoryContents.map(content => ({\r\n                  ...content,\r\n                  categoryContentQuestions: []\r\n                })) \r\n            }))\r\n    \r\n            //demo truc data kt lun\r\n            const demoDataExaminingForConclusion = {\r\n                patientId: dataPantientsReadyExamining.patientsId,\r\n                isVaccination: prevDataExamining.vaccination,\r\n                medicalRegisterId: prevDataExamining.healthRecords[0].medicalRegisterId,\r\n                conclusion: prevDataExamining.healthRecords[0].conclusion,\r\n                categories: updateHealthRecordsCategoriesForConclusion\r\n            }\r\n    \r\n            setHealthRecordsContents({\r\n                healthRecordsName: prevDataExamining.healthRecords[0].examinationName,\r\n                categoryPatients: prevDataExamining.healthRecords[0].categories\r\n            })\r\n    \r\n            setCurrentHealthRecordExamining({\r\n                healthRecordsName: prevDataExamining.healthRecords[0].examinationName,\r\n                categoryPatients: prevDataExamining.healthRecords[0].categories\r\n            })\r\n\r\n            //thm tin cn vo categories ca conclusion\r\n            let updateCategoriesForConclusion = _.cloneDeep(prevDataExamining.categoryPres);\r\n\r\n            updateCategoriesForConclusion = updateCategoriesForConclusion.map((item) => {\r\n                const editCategoryContents = item.categoryContents.map((itemCategoryContents) => {\r\n                    return {\r\n                        categoryContentCheck: itemCategoryContents.categoryContentCheck,\r\n                        categoryContentName: itemCategoryContents.categoryContentName,\r\n                        categoryContentOrder: itemCategoryContents.categoryContentOrder,\r\n                        categoryContentText: itemCategoryContents.categoryContentText,\r\n                        categoryContentTitle: itemCategoryContents.categoryContentTitle,\r\n                        categoryContentQuestions: []\r\n                    }\r\n                })\r\n\r\n                return {\r\n                    categoryName: item.categoryName,\r\n                    categoryOrder: item.categoryOrder,\r\n                    categoryContents: editCategoryContents,\r\n                    isPredecessor: true\r\n                }\r\n            })\r\n\r\n            const newCategoriesDemoDataExaminingForConclusion = updateCategoriesForConclusion.concat(demoDataExaminingForConclusion.categories);\r\n            demoDataExaminingForConclusion.categories = newCategoriesDemoDataExaminingForConclusion\r\n\r\n            setMainDataExamining(prevDataExamining);\r\n            setDataExaminingForConclusion(_.cloneDeep(demoDataExaminingForConclusion));\r\n            setPrevDataExamining();\r\n        }\r\n\r\n        //khm mi hon ton\r\n        else{\r\n            const editDataCategoryPresForConclusion = prevDataExamining.categoryPres.map((predecessorItem) => {\r\n                const mainCategoryContentsExamining = predecessorItem.categoryContents.map((categoryContentsItem) => {\r\n                    const categoryContents = {\r\n                        categoryContentTitle: categoryContentsItem.categoryContentTitle,\r\n                        categoryContentName: categoryContentsItem.categoryContentName,\r\n                        categoryContentCheck: categoryContentsItem.categoryContentCheck,\r\n                        categoryContentText: categoryContentsItem.categoryContentText,\r\n                        categoryContentOrder: categoryContentsItem.categoryContentOrder,\r\n                        categoryContentQuestions: []\r\n                    }\r\n                    return categoryContents\r\n                })\r\n    \r\n                const mainCategoryExamining = {\r\n                    categoryName: predecessorItem.categoryName,\r\n                    isPredecessor: true,\r\n                    categoryOrder: predecessorItem.categoryOrder,\r\n                    categoryContents: mainCategoryContentsExamining\r\n                }\r\n    \r\n                return mainCategoryExamining\r\n            })\r\n    \r\n            const editDataHealthRecordsForConclusion = prevDataExamining.healthRecords.find((healthRecordsItem) => healthRecordsItem.patientId === dataPantientsReadyExamining.patientsId)\r\n    \r\n            setDataExaminingForConclusion({\r\n                patientId: dataPantientsReadyExamining.patientsId,\r\n                isVaccination: prevDataExamining.vaccination,\r\n                medicalRegisterId: editDataHealthRecordsForConclusion.medicalRegisterId,\r\n                conclusion: editDataHealthRecordsForConclusion.conclusion,\r\n                categories: editDataCategoryPresForConclusion,\r\n            });\r\n    \r\n            prevDataExamining.categoryPres.forEach((categoryPresItem, categoryPresIndex) => {\r\n                categoryPresItem.categoryContents = categoryPresItem.categoryContents.map((categoryContentsItem) => {\r\n                    return {\r\n                        ...categoryContentsItem,\r\n                        categoryPresOrder: categoryPresIndex\r\n                    }\r\n                })\r\n                return {\r\n                    ...categoryPresItem,\r\n                }\r\n            })\r\n            \r\n            setMainDataExamining(prevDataExamining);\r\n            setPrevDataExamining();\r\n        }\r\n        setLoadingCategoryExamining(false);\r\n    }\r\n\r\n    //bt u sa d liu khm bnh\r\n    const handleBeginEditExaminingForPantient = async () => {\r\n        setLoadingPatient(true);\r\n        const response = await updateMedicalState(dataPantientsReadyExamining.id, 1)\r\n        if(response.status === 200){\r\n            const _listDataPatientsRegister = [...listDataPatientsRegister];\r\n            const findIndexPatient = _listDataPatientsRegister.findIndex(item => item.id === dataPantientsReadyExamining.id);\r\n            _listDataPatientsRegister[findIndexPatient].state = 1;\r\n\r\n            setListDataPatientsRegister(_listDataPatientsRegister);\r\n\r\n            const listPantientRegisterWaiting = _listDataPatientsRegister.filter(patientsRegisterItem => patientsRegisterItem.state === 0 || patientsRegisterItem.state === 1 || patientsRegisterItem.state === 3) //ch khm v ang khm\r\n\r\n            setListDataPatientsRegisterSort(listPantientRegisterWaiting);\r\n            setListDataPatientsRegisterState(listPantientRegisterWaiting);\r\n\r\n            const _dataPantientsReadyExamining = {...dataPantientsReadyExamining};\r\n            _dataPantientsReadyExamining.status = 1;\r\n            setDataPantientsReadyExamining(_dataPantientsReadyExamining);\r\n            await handleGetCategoryReExamining();\r\n            setActiveChip({chipOrder: 0, chipLabel: 'BN ch khm'});\r\n            setLoadingPatient(false);\r\n        }\r\n    }\r\n\r\n    //ly d liu cy th mc khm li\r\n    const handleGetCategoryReExamining = async () => {\r\n        setLoadingCategoryExamining(true);\r\n        const responseGetUpdateMedicalBook = await getUpdateMedicalBook(prevDataExamining.healthRecords[0].medicalBookId);\r\n\r\n        if(responseGetUpdateMedicalBook.status === 200){\r\n            const _dataPantientsReadyExamining = {...dataPantientsReadyExamining};\r\n            _dataPantientsReadyExamining.status = 1;\r\n            setDataPantientsReadyExamining(_dataPantientsReadyExamining);\r\n\r\n            if(prevDataExamining.newPredecessor === false){\r\n                setPrevDataPredecessor(_.cloneDeep(prevDataExamining.categoryPres));\r\n                //backup prevDataPredecessor  khi cn dng\r\n                setOldDataPredecessor(_.cloneDeep(prevDataExamining.categoryPres));\r\n                setOldPreviewPredecessor(_.cloneDeep(previewPredecessor));\r\n            }\r\n            \r\n            await handleSetMainDataReExamining(responseGetUpdateMedicalBook.data);\r\n            toast.success(`ang m khm li cho bnh nhn ${dataPantientsReadyExamining.patientsName}`, {toastId: 'success1'});\r\n        }\r\n        else if(responseGetUpdateMedicalBook.status === 400){\r\n            toast.error('Bn khng phi bc s khm hm nay, khng th dng chc nng ny', {toastId: 'error1'});\r\n        }\r\n        setLoadingCategoryExamining(false);\r\n    }\r\n\r\n    //chnh d liu cy th mc khm ca chc nng m khm li\r\n    const handleSetMainDataReExamining = async (responseGetUpdateMedicalBookData) => {\r\n        prevDataExamining.healthRecords[0].state = 1\r\n        prevDataExamining.healthRecords[0].categories = responseGetUpdateMedicalBookData.categories\r\n\r\n        const updateHealthRecordsCategoriesForConclusion = prevDataExamining.healthRecords[0].categories.map(category => ({\r\n            categoryName: category.categoryName,\r\n            isHealthRecord: true,\r\n            categoryContents: category.categoryContents.map(content => ({\r\n              ...content,\r\n              categoryContentQuestions: []\r\n            })) \r\n        }))\r\n\r\n        //demo truc data kt lun\r\n        const demoDataExaminingForConclusion = {\r\n            patientId: dataPantientsReadyExamining.patientsId,\r\n            isVaccination: prevDataExamining.vaccination,\r\n            medicalRegisterId: dataPantientsReadyExamining.id !== prevDataExamining.healthRecords[0].medicalRegisterId ? dataPantientsReadyExamining.id : prevDataExamining.healthRecords[0].medicalRegisterId,\r\n            conclusion: prevDataExamining.healthRecords[0].conclusion,\r\n            categories: updateHealthRecordsCategoriesForConclusion\r\n        }\r\n\r\n        setHealthRecordsContents({\r\n            healthRecordsName: prevDataExamining.healthRecords[0].examinationName,\r\n            categoryPatients: prevDataExamining.healthRecords[0].categories\r\n        })\r\n\r\n        setCurrentHealthRecordExamining({\r\n            healthRecordsName: prevDataExamining.healthRecords[0].examinationName,\r\n            categoryPatients: prevDataExamining.healthRecords[0].categories\r\n        })\r\n\r\n        //sa categories ca conclusion phn s khm bnh\r\n        let updateCategoriesForConclusion = _.cloneDeep(prevDataExamining.healthRecords[0].categories);\r\n\r\n        updateCategoriesForConclusion = updateCategoriesForConclusion.map(category => {\r\n            category.categoryContents = category.categoryContents.map(content => {\r\n                const questions = content.categoryContentQuestions;\r\n    \r\n                // Check if all questions have both categoryContentAnswer and categoryContentNote as null\r\n                const allNull = questions.every(q => q.categoryContentAnswer === null && q.categoryContentNote === null);\r\n                    \r\n                if (allNull) {\r\n                  // Set categoryContentQuestions to an empty array\r\n                  content.categoryContentQuestions = [];                    \r\n                } else {\r\n                  // Filter out questions with both categoryContentAnswer and categoryContentNote as null\r\n                  content.categoryContentQuestions = questions.filter(q => q.categoryContentAnswer !== null || q.categoryContentNote !== null);\r\n                }\r\n                    \r\n                return content;\r\n            });\r\n                  \r\n            category.isHealthRecord = true\r\n            return category;\r\n        })\r\n\r\n        demoDataExaminingForConclusion.categories = updateCategoriesForConclusion\r\n\r\n        const responseGetUpdatePredecessor = await getUpdatePredecessor(dataPantientsReadyExamining.patientsId);\r\n\r\n        //tin cn t trc  ng (newPredecessor = false)\r\n        if(responseGetUpdatePredecessor.status === 200)\r\n        {   \r\n            const editPrevDataExaminingCategoryPres = responseGetUpdatePredecessor.data.map(responseGetUpdatePredecessorItem => {\r\n                const matchingPrevDataExamining = prevDataExamining.categoryPres.find(prevDataExaminingCategoryPresItem => prevDataExaminingCategoryPresItem.categoryOrder === responseGetUpdatePredecessorItem.categoryOrder);\r\n\r\n                return {\r\n                    ...responseGetUpdatePredecessorItem,\r\n                    isLock: true,\r\n                    categoryContents: responseGetUpdatePredecessorItem.categoryContents.filter(content2 => {\r\n                        return matchingPrevDataExamining && matchingPrevDataExamining.categoryContents.some(content1 => content1.categoryContentOrder === content2.categoryContentOrder);\r\n                    }).map(content2 => {\r\n                        const matchingContent1 = matchingPrevDataExamining.categoryContents.find(content1 => content1.categoryContentOrder === content2.categoryContentOrder);\r\n                        return {\r\n                            ...content2,\r\n                            isNullCategoryPres: matchingContent1 ? false : true,\r\n                            isLock: true,\r\n                            categoryContentQuestions: matchingContent1 ? matchingContent1.categoryContentQuestions : []\r\n                        };\r\n                    }),\r\n                };\r\n            })\r\n\r\n            prevDataExamining.categoryPres = editPrevDataExaminingCategoryPres\r\n\r\n            setNewDataPredecessor({\r\n                patientId: dataPantientsReadyExamining.patientsId,\r\n                categoryPres: []\r\n            })\r\n\r\n            setMainDataExamining(prevDataExamining);\r\n            setPrevDataExamining();\r\n        }\r\n        \r\n        //tin cn t trc cha ng (newPredecessor = true) \r\n        else{\r\n            //thm tin cn vo categories ca conclusion\r\n            let updateCategoriesForConclusion = _.cloneDeep(prevDataExamining.categoryPres);\r\n\r\n            updateCategoriesForConclusion = updateCategoriesForConclusion.map((item) => {\r\n                const editCategoryContents = item.categoryContents.map((itemCategoryContents) => {\r\n                    return {\r\n                        categoryContentCheck: itemCategoryContents.categoryContentCheck,\r\n                        categoryContentName: itemCategoryContents.categoryContentName,\r\n                        categoryContentOrder: itemCategoryContents.categoryContentOrder,\r\n                        categoryContentText: itemCategoryContents.categoryContentText,\r\n                        categoryContentTitle: itemCategoryContents.categoryContentTitle,\r\n                        categoryContentQuestions: []\r\n                    }\r\n                })\r\n\r\n                return {\r\n                    categoryName: item.categoryName,\r\n                    categoryOrder: item.categoryOrder,\r\n                    categoryContents: editCategoryContents,\r\n                    isPredecessor: true\r\n                }\r\n            })\r\n        \r\n            const newCategoriesDemoDataExaminingForConclusion = updateCategoriesForConclusion.concat(demoDataExaminingForConclusion.categories);\r\n            demoDataExaminingForConclusion.categories = newCategoriesDemoDataExaminingForConclusion\r\n\r\n            setMainDataExamining(prevDataExamining);\r\n            setPrevDataExamining();\r\n        }\r\n\r\n        setDataExaminingForConclusion(_.cloneDeep(demoDataExaminingForConclusion));\r\n    }\r\n\r\n    //sa d liu tin cn cho m khm li hoc ti khm\r\n    const handleEditDataPredecessor = async (categoryName, categoryOrder) => {\r\n        setOpenAlertProcessingBackdrop(true);\r\n        \r\n        const responseGetUpdatePredecessor = await getUpdatePredecessor(dataPantientsReadyExamining.patientsId);\r\n\r\n        const findUpdatePredecessor = responseGetUpdatePredecessor.data.find(responseGetUpdatePredecessorItem => responseGetUpdatePredecessorItem.categoryOrder === categoryOrder);\r\n\r\n        mainDataExamining.categoryPres.forEach((categoryPresItem) => {\r\n            if(categoryPresItem.categoryOrder === findUpdatePredecessor.categoryOrder){\r\n                categoryPresItem.categoryContents = findUpdatePredecessor.categoryContents\r\n                categoryPresItem.categoryContents.forEach((categoryContentsItem) => {\r\n                    categoryContentsItem.isLock = false\r\n                })\r\n                categoryPresItem.isLock = false\r\n            }\r\n        })\r\n\r\n        const selectCategoryReExamining = mainDataExamining.categoryPres.find(categoryPresItem => categoryPresItem.categoryOrder === categoryOrder);\r\n        \r\n        if(!newDataPredecessor.categoryPres.some(categoryPresItem => categoryPresItem.categoryName === categoryName)){\r\n            newDataPredecessor.categoryPres = prevDataPredecessor\r\n        }\r\n\r\n        handleSelectCategoryClick(selectCategoryReExamining);\r\n\r\n        setOpenAlertProcessingBackdrop(false);\r\n    }\r\n\r\n    //hu khng sa d liu tin cn na\r\n    const handleCancelEditDataPredecessor = (categoryName, categoryOrder) => {\r\n        setOpenAlertProcessingBackdrop(true);\r\n\r\n        setTimeout(() => {\r\n            const findPrevDataPredecessorByCategoryName = oldDataPredecessor.find(prevDataPredecessorItem => prevDataPredecessorItem.categoryOrder === categoryOrder);\r\n\r\n            if(findPrevDataPredecessorByCategoryName){\r\n                mainDataExamining.categoryPres.forEach((categoryPresItem) => {\r\n                    if(categoryPresItem.categoryOrder === findPrevDataPredecessorByCategoryName.categoryOrder){\r\n                        categoryPresItem.categoryContents = findPrevDataPredecessorByCategoryName.categoryContents\r\n                        categoryPresItem.categoryContents.forEach((categoryContentsItem) => {\r\n                            categoryContentsItem.isLock = true\r\n                        })\r\n                        categoryPresItem.isLock = true\r\n                    }\r\n                })\r\n\r\n                newDataPredecessor.categoryPres.forEach((newDataPredecessorCategoryPresItem) => {\r\n                    if(newDataPredecessorCategoryPresItem.categoryOrder === findPrevDataPredecessorByCategoryName.categoryOrder){\r\n                        newDataPredecessorCategoryPresItem.categoryContents = findPrevDataPredecessorByCategoryName.categoryContents\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                mainDataExamining.categoryPres.forEach((categoryPresItem) => {\r\n                    if(categoryPresItem.categoryOrder === categoryOrder){\r\n                        categoryPresItem.categoryContents = [];\r\n                        categoryPresItem.isLock = true\r\n                    }\r\n                })\r\n\r\n                const _newDataPredecessor = {...newDataPredecessor};\r\n                const removeCategoryPredecessor = _newDataPredecessor.categoryPres.filter(categoryPresItem => categoryPresItem.categoryOrder !== categoryOrder);\r\n                newDataPredecessor.categoryPres = removeCategoryPredecessor\r\n            }\r\n\r\n            setPrevDataPredecessor(_.cloneDeep(oldDataPredecessor));\r\n\r\n            const selectCategoryReExamining = mainDataExamining.categoryPres.find(categoryPresItem => categoryPresItem.categoryOrder === categoryOrder);\r\n            handleSelectCategoryClick(selectCategoryReExamining)\r\n\r\n            const findOldDataPredecessorByCategoryOrder = oldPreviewPredecessor.filter(item => item.categoryOrder === categoryOrder);\r\n            const findPreviewPredecessorNotByCategoryOrder = previewPredecessor.filter(item => item.categoryOrder !== categoryOrder);\r\n\r\n            const newPreviewPredecessor = findOldDataPredecessorByCategoryOrder.concat(findPreviewPredecessorNotByCategoryOrder);\r\n            setPreviewPredecessor(newPreviewPredecessor);\r\n   \r\n            setOpenAlertProcessingBackdrop(false);\r\n        }, 300)       \r\n    }\r\n\r\n    //to data tin cn  lu li khi ti khm hoc m khm li\r\n    //cu tr li dng check chn true false\r\n    const handleAnswerCheckQuestionPredecessorForReExamOrBackExam = (categoryContentsIndex, questionIndex, answer) => {\r\n        if(answer === null){\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = true\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            createSelectedQuestionsPredecessorForReExamOrBackExam(categoryContentsIndex, _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder, _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex])\r\n        }\r\n        else if(answer === true){\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = null\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            createSelectedQuestionsPredecessorForReExamOrBackExam(categoryContentsIndex, _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder, _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex])\r\n        }\r\n    }\r\n\r\n    //cu tr li dng check chn sa li note\r\n    const handleNoteCheckQuestionPredecessorForReExamOrBackExam = (categoryContentsIndex, questionIndex, value) => {\r\n        const takenValue = value;\r\n        const isEditNote = true;\r\n\r\n        if(typingRef.current){\r\n            clearInterval(typingRef.current);\r\n        }\r\n\r\n        typingRef.current = setTimeout(() => {\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentNote = takenValue\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            createSelectedQuestionsPredecessorForReExamOrBackExam(categoryContentsIndex, _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder, _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex], takenValue, isEditNote)\r\n        }, 0)\r\n    }\r\n\r\n    //cu tr li dng gi tr, sa li note\r\n    const handleNoteValueQuestionPredecessorForReExamOrBackExam = (categoryContentsIndex, questionIndex, value) => {\r\n        const takenValue = value;\r\n\r\n        if(typingRef.current){\r\n            clearInterval(typingRef.current);\r\n        }\r\n\r\n        typingRef.current = setTimeout(() => {\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentNote = takenValue\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            createSelectedQuestionsValuePredecessorForReExamOrBackExam(\r\n                categoryContentsIndex,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder, \r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex], \r\n                takenValue\r\n            )\r\n        }, 0)\r\n    }\r\n\r\n    const createSelectedQuestionsValuePredecessorForReExamOrBackExam = (categoryContentsIndex, categoryContentOrder, categoryContentQuestion, takenValue) => {\r\n        const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n        if(findNewDataPredecessorCategoryOrder){\r\n            // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n            const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n            if(findNewDataPredecessorCategoryContents){\r\n                // Nu tm thy categoryContentOrder, kim tra xem c categoryContentQuestionOrder trng khng\r\n                const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder && takenValue !== '');\r\n                const questionIndexRemove = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder && takenValue === '');\r\n\r\n                if(questionIndex !== -1){\r\n                    // nu tm thy cu hi c, v taken value khc rng => gn note c bng note mi\r\n                    findNewDataPredecessorCategoryContents.categoryContentQuestions[questionIndex].categoryContentNote = takenValue;\r\n                }\r\n\r\n                else if(questionIndexRemove !== -1){\r\n                    // nu tm thy cu hi c, v taken value bng rng => b note \r\n                    findNewDataPredecessorCategoryContents.categoryContentQuestions.splice(questionIndexRemove, 1);\r\n                }\r\n\r\n                else{\r\n                    //nu khng tm thy, y note mi vo\r\n                    findNewDataPredecessorCategoryContents.categoryContentQuestions.push(categoryContentQuestion);\r\n                }\r\n            }\r\n\r\n            else{\r\n                // Nu khng tm thy categoryContentOrder, thm content mi\r\n                const newDataPredecessorCategoryContents = {\r\n                    categoryContentCheck: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentCheck,\r\n                    categoryContentName: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentName,\r\n                    categoryContentOrder: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder,\r\n                    categoryContentQuestions: [categoryContentQuestion],\r\n                    categoryContentText: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentText,\r\n                    categoryContentTitle: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle\r\n                }\r\n                findNewDataPredecessorCategoryOrder.categoryContents.push(newDataPredecessorCategoryContents);\r\n            }\r\n        }\r\n\r\n        else{\r\n            // Nu khng tm thy categoryOrder, thm mi categoryOrder\r\n            const newDataPredecessorCategoryContents = {\r\n                categoryContentCheck: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentCheck,\r\n                categoryContentName: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentName,\r\n                categoryContentOrder: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder,\r\n                categoryContentQuestions: [categoryContentQuestion],\r\n                categoryContentText: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentText,\r\n                categoryContentTitle: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle\r\n            }\r\n\r\n            const newDataPredecessorCategoryPres = {\r\n                categoryOrder: categorySelectedExamining.categoryOrder,\r\n                categoryName: categorySelectedExamining.categoryName,\r\n                newCategoryPre: categorySelectedExamining.newCategoryPre,\r\n                categoryContents: [newDataPredecessorCategoryContents]\r\n            }\r\n\r\n            newDataPredecessor.categoryPres.push(newDataPredecessorCategoryPres)\r\n        }   \r\n        \r\n        createPreviewDataPredecessor(categoryContentQuestion);\r\n    }\r\n\r\n    const createSelectedQuestionsPredecessorForReExamOrBackExam = (categoryContentsIndex, categoryContentOrder, categoryContentQuestion, takenValue, isEditNote) => {\r\n        if(isEditNote){\r\n            //cu hi l dng check answer ang l true, ch sa note khc rng\r\n            if(categoryContentQuestion.categoryContentAnswer === true && categoryContentQuestion.categoryContentQuestionType === 'check' && takenValue.length !== 0){\r\n                const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n                if(findNewDataPredecessorCategoryOrder){\r\n                    // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n                    const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n                    if(findNewDataPredecessorCategoryContents){\r\n                        // Nu tm thy categoryContentOrder, kim tra xem c categoryContentQuestionOrder trng khng\r\n                        const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder);\r\n                        if(questionIndex !== -1){\r\n                            // thay th ghi ch bng ghi ch mi\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions[questionIndex].categoryContentNote = takenValue\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            //cu hi l dng check answer ang l true, ch sa note bng rng\r\n            if(categoryContentQuestion.categoryContentAnswer === true && categoryContentQuestion.categoryContentQuestionType === 'check' && takenValue.length === 0){       \r\n                const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n                if(findNewDataPredecessorCategoryOrder){\r\n                    // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n                    const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n                    if(findNewDataPredecessorCategoryContents){\r\n                        // Nu tm thy categoryContentOrder, kim tra xem c categoryContentQuestionOrder trng khng\r\n                        const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder);\r\n                        if(questionIndex !== -1){\r\n                            // thay th ghi ch bng rng\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions[questionIndex].categoryContentNote = null\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n         \r\n            //cu hi l dng check answer ang l null, ch sa note khc rng\r\n            if(categoryContentQuestion.categoryContentAnswer === null && categoryContentQuestion.categoryContentQuestionType === 'check' && takenValue.length !== 0){\r\n                const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n                if(findNewDataPredecessorCategoryOrder){\r\n                    // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n                    const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n                    if(findNewDataPredecessorCategoryContents){\r\n                        // Nu tm thy categoryContentOrder, kim tra xem c categoryContentQuestionOrder trng khng\r\n                        const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder);\r\n                        if(questionIndex !== -1){\r\n                            // thay th ghi ch bng ghi ch mi\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions[questionIndex].categoryContentNote = takenValue\r\n                        }\r\n                        else{\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions.push(categoryContentQuestion);\r\n                        }\r\n                    }\r\n                    else{\r\n                        // Nu khng tm thy categoryContentOrder, thm content mi\r\n                        const newDataPredecessorCategoryContents = {\r\n                            categoryContentCheck: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentCheck,\r\n                            categoryContentName: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentName,\r\n                            categoryContentOrder: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder,\r\n                            categoryContentQuestions: [categoryContentQuestion],\r\n                            categoryContentText: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentText,\r\n                            categoryContentTitle: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle\r\n                        }\r\n                        findNewDataPredecessorCategoryOrder.categoryContents.push(newDataPredecessorCategoryContents);\r\n                    }\r\n                }\r\n                else{\r\n                    // Nu khng tm thy categoryOrder, thm mi categoryOrder\r\n                    const newDataPredecessorCategoryContents = {\r\n                        categoryContentCheck: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentCheck,\r\n                        categoryContentName: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentName,\r\n                        categoryContentOrder: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder,\r\n                        categoryContentQuestions: [categoryContentQuestion],\r\n                        categoryContentText: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentText,\r\n                        categoryContentTitle: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle\r\n                    }\r\n\r\n                    const newDataPredecessorCategoryPres = {\r\n                        categoryOrder: categorySelectedExamining.categoryOrder,\r\n                        categoryName: categorySelectedExamining.categoryName,\r\n                        newCategoryPre: categorySelectedExamining.newCategoryPre,\r\n                        categoryContents: [newDataPredecessorCategoryContents]\r\n                    }\r\n\r\n                    newDataPredecessor.categoryPres.push(newDataPredecessorCategoryPres)\r\n                }\r\n            }\r\n\r\n            //cu hi l dng check answer ang l null, ch sa note bng rng\r\n            if(categoryContentQuestion.categoryContentAnswer === null && categoryContentQuestion.categoryContentQuestionType === 'check' && takenValue.length === 0){\r\n                const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n                if(findNewDataPredecessorCategoryOrder){\r\n                    // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n                    const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n                    if(findNewDataPredecessorCategoryContents){\r\n                        // Nu tm thy categoryContentOrder, kim tra xem c categoryContentQuestionOrder trng khng\r\n                        const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder);\r\n                        if(questionIndex !== -1){\r\n                            // Loi b cu hi c nu tm thy\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions.splice(questionIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        else{\r\n            //cu hi l dng check cu tr li l true\r\n            if(categoryContentQuestion.categoryContentAnswer === true && categoryContentQuestion.categoryContentQuestionType === 'check'){\r\n                const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n                if(findNewDataPredecessorCategoryOrder){\r\n                    // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n                    const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n                    if(findNewDataPredecessorCategoryContents){\r\n                        const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder && newDataPredecessorcategoryContentQuestionsItem.categoryContentNote !== '');\r\n                        if(questionIndex !== -1){\r\n                            // thay th ghi ch bng ghi ch mi\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions[questionIndex].categoryContentAnswer = true\r\n                        }\r\n                        else{\r\n                            // Nu tm thy categoryContentOrder, thm cu hi mi\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions.push(categoryContentQuestion);\r\n                        }       \r\n                    }\r\n                    else{\r\n                        // Nu khng tm thy categoryContentOrder, thm content mi\r\n                        const newDataPredecessorCategoryContents = {\r\n                            categoryContentCheck: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentCheck,\r\n                            categoryContentName: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentName,\r\n                            categoryContentOrder: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder,\r\n                            categoryContentQuestions: [categoryContentQuestion],\r\n                            categoryContentText: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentText,\r\n                            categoryContentTitle: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle\r\n                        }\r\n                        findNewDataPredecessorCategoryOrder.categoryContents.push(newDataPredecessorCategoryContents)\r\n                    }\r\n                }\r\n                else{\r\n                    // Nu khng tm thy categoryOrder, thm mi categoryOrder\r\n                    const newDataPredecessorCategoryContents = {\r\n                        categoryContentCheck: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentCheck,\r\n                        categoryContentName: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentName,\r\n                        categoryContentOrder: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentOrder,\r\n                        categoryContentQuestions: [categoryContentQuestion],\r\n                        categoryContentText: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentText,\r\n                        categoryContentTitle: categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle\r\n                    }\r\n\r\n                    const newDataPredecessorCategoryPres = {\r\n                        categoryOrder: categorySelectedExamining.categoryOrder,\r\n                        categoryName: categorySelectedExamining.categoryName,\r\n                        newCategoryPre: categorySelectedExamining.newCategoryPre,\r\n                        categoryContents: [newDataPredecessorCategoryContents]\r\n                    }\r\n\r\n                    newDataPredecessor.categoryPres.push(newDataPredecessorCategoryPres)\r\n                }\r\n            }\r\n\r\n            //cu hi l dng check cu tr li l false\r\n            if(categoryContentQuestion.categoryContentAnswer === null && categoryContentQuestion.categoryContentQuestionType === 'check'){\r\n                const findNewDataPredecessorCategoryOrder = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPresItem => newDataPredecessorCategoryPresItem.categoryOrder === categorySelectedExamining.categoryOrder);\r\n\r\n                if(findNewDataPredecessorCategoryOrder){\r\n                    // Nu tm thy categoryOrder, tm kim tip categoryContentOrder\r\n                    const findNewDataPredecessorCategoryContents = findNewDataPredecessorCategoryOrder.categoryContents.find(newDataPredecessorCategoryContentsItem => newDataPredecessorCategoryContentsItem.categoryContentOrder === categoryContentOrder)\r\n\r\n                    if(findNewDataPredecessorCategoryContents){\r\n                        // Nu tm thy categoryContentOrder, kim tra xem c categoryContentQuestionOrder trng khng\r\n                        const questionIndexNoteDontExit = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder && newDataPredecessorcategoryContentQuestionsItem.categoryContentNote === null);\r\n                        if(questionIndexNoteDontExit !== -1){\r\n                            // Loi b cu hi c nu tm thy\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions.splice(questionIndexNoteDontExit, 1);\r\n                        }\r\n                        else{\r\n                            const questionIndex = findNewDataPredecessorCategoryContents.categoryContentQuestions.findIndex(newDataPredecessorcategoryContentQuestionsItem => newDataPredecessorcategoryContentQuestionsItem.categoryContentQuestionOrder === categoryContentQuestion.categoryContentQuestionOrder);\r\n                            findNewDataPredecessorCategoryContents.categoryContentQuestions[questionIndex].categoryContentAnswer = null\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        createPreviewDataPredecessor(categoryContentQuestion, isEditNote);\r\n    }\r\n\r\n    //lu d liu tin cn khi sa xong\r\n    const handleEditDataPredecessorForSaving = (categoryOrder) => {\r\n        setOpenAlertProcessingBackdrop(true);\r\n        setTimeout(() => {\r\n            const findNewDataPredecessor = newDataPredecessor.categoryPres.find(newDataPredecessorCategoryPres => newDataPredecessorCategoryPres.categoryOrder === categoryOrder)\r\n\r\n            const findOldDataPredecessorCategoryOrder = oldDataPredecessor.find(oldDataPredecessorItem => oldDataPredecessorItem.categoryOrder === findNewDataPredecessor.categoryOrder);\r\n\r\n            if(findOldDataPredecessorCategoryOrder){\r\n                // Nu tm thy categoryOrder, duyt qua categoryContents ca findNewDataPredecessor\r\n                findNewDataPredecessor.categoryContents.forEach(findNewDataPredecessorCategoryContentsItem => {\r\n\r\n                    let content = findOldDataPredecessorCategoryOrder.categoryContents.find(findOldDataPredecessorCategoryContentsItem => findOldDataPredecessorCategoryContentsItem.categoryContentOrder === findNewDataPredecessorCategoryContentsItem.categoryContentOrder);\r\n\r\n                    if(content){\r\n                        // Loi b cc categoryContentQuestions trong content nu khng tn ti trong findNewDataPredecessorCategoryContentsItem\r\n                        content.categoryContentQuestions = content.categoryContentQuestions.filter(q =>\r\n                            findNewDataPredecessorCategoryContentsItem.categoryContentQuestions.some(newQ => newQ.categoryContentQuestionOrder === q.categoryContentQuestionOrder)\r\n                        );\r\n\r\n                        // Nu tm thy categoryContentOrder, duyt qua categoryContentQuestions\r\n                        if(findNewDataPredecessorCategoryContentsItem.categoryContentQuestions.length !== 0){\r\n                            findNewDataPredecessorCategoryContentsItem.categoryContentQuestions.forEach(findNewDataPredecessorQuestionItem => {\r\n                                if(findNewDataPredecessorQuestionItem.categoryContentAnswer === null && findNewDataPredecessorQuestionItem.categoryContentNote === null && findNewDataPredecessorQuestionItem.categoryContentQuestionType === 'check'){\r\n                                    // Nu categoryContentAnswer l false v categoryContentNote l null, loi b question \r\n                                    content.categoryContentQuestions = content.categoryContentQuestions.filter(q => q.categoryContentQuestionOrder !== findNewDataPredecessorQuestionItem.categoryContentQuestionOrder);\r\n                                }\r\n\r\n                                else if(findNewDataPredecessorQuestionItem.categoryContentNote === null && findNewDataPredecessorQuestionItem.categoryContentQuestionType === 'string'){\r\n                                    content.categoryContentQuestions = content.categoryContentQuestions.filter(q => q.categoryContentQuestionOrder !== findNewDataPredecessorQuestionItem.categoryContentQuestionOrder);\r\n                                }\r\n\r\n                                else{\r\n                                    const questionIndex = content.categoryContentQuestions.findIndex(q => q.categoryContentQuestionOrder === findNewDataPredecessorQuestionItem.categoryContentQuestionOrder);\r\n\r\n                                    if (questionIndex !== -1) {\r\n                                        // Thay th question nu trng khp\r\n                                        content.categoryContentQuestions[questionIndex] = findNewDataPredecessorQuestionItem;\r\n                                    }\r\n\r\n                                    else {\r\n                                        // Thm question mi nu khng trng khp\r\n                                        content.categoryContentQuestions.push(findNewDataPredecessorQuestionItem);\r\n                                    }\r\n                                }\r\n                            });\r\n\r\n                        }else{\r\n                            findOldDataPredecessorCategoryOrder.categoryContents = findOldDataPredecessorCategoryOrder.categoryContents.filter(contentCategoryContentsItem => contentCategoryContentsItem.categoryContentOrder !== findNewDataPredecessorCategoryContentsItem.categoryContentOrder)\r\n                        }\r\n                        \r\n                    }else{\r\n                        findOldDataPredecessorCategoryOrder.categoryContents.push(findNewDataPredecessorCategoryContentsItem);\r\n                    }\r\n\r\n                })\r\n            }else{\r\n                // Thm ton b object2 nu khng tm thy findNewDataPredecessor\r\n                oldDataPredecessor.push(findNewDataPredecessor)\r\n            }\r\n\r\n            oldDataPredecessor.forEach((oldDataPredecessorItem) => {\r\n                oldDataPredecessorItem.categoryContents = oldDataPredecessorItem.categoryContents.filter(categoryContentsItem => categoryContentsItem.categoryContentQuestions.length !== 0)\r\n            }) \r\n\r\n            const removeOldDataPredecessorCategoryPres = oldDataPredecessor.findIndex(item => item.categoryContents.length === 0);\r\n            if(removeOldDataPredecessorCategoryPres !== -1){\r\n                oldDataPredecessor.splice(removeOldDataPredecessorCategoryPres, 1);\r\n            }\r\n\r\n            const saveNewDataPredecessor = {\r\n                patientId: newDataPredecessor.patientId,\r\n                categoryPres: oldDataPredecessor\r\n            }\r\n\r\n            handleSaveNewDataPredecessor(saveNewDataPredecessor, findNewDataPredecessor)            \r\n        }, 500)\r\n    }\r\n\r\n    const handleSaveNewDataPredecessor = async (saveNewDataPredecessor, findNewDataPredecessor) => {\r\n        const responseCreateAddPredecessor = await createAddPredecessor(saveNewDataPredecessor);\r\n        if(responseCreateAddPredecessor.status === 200){\r\n\r\n            const _mainDataExamining = {...mainDataExamining};\r\n\r\n            _mainDataExamining.categoryPres.forEach((categoryPresItem) => {\r\n                if(categoryPresItem.categoryOrder === findNewDataPredecessor.categoryOrder){\r\n                    categoryPresItem.categoryContents = findNewDataPredecessor.categoryContents\r\n                    categoryPresItem.categoryContents.forEach((categoryContentsItem) => {\r\n                        categoryContentsItem.isLock = true\r\n                    })\r\n                    if(findNewDataPredecessor.categoryContents.length === 0){\r\n                        categoryPresItem.newCategoryPre = true\r\n                    }else{\r\n                        categoryPresItem.newCategoryPre = false\r\n                    }\r\n                    categoryPresItem.isLock = true\r\n                }\r\n\r\n                categoryPresItem.categoryContents = categoryPresItem.categoryContents.filter(item => item.categoryContentQuestions.length !== 0);\r\n            })\r\n\r\n            setMainDataExamining(_mainDataExamining);\r\n\r\n            const selectCategoryReExamining = _mainDataExamining.categoryPres.find(categoryPresItem => categoryPresItem.categoryOrder === findNewDataPredecessor.categoryOrder);\r\n\r\n            setPreviewPredecessor(previewPredecessor);\r\n            setOldPreviewPredecessor(previewPredecessor);\r\n            \r\n            toast.success(' cp nht li tin cn', {toastId: 'handleSaveNewDataPredecessorSuccess'});\r\n            \r\n            handleSelectCategoryClick(selectCategoryReExamining);\r\n        }\r\n        else{\r\n            toast.error(responseCreateAddPredecessor.data, {toastId: 'handleSaveNewDataPredecessorError'});\r\n        }\r\n        setOpenAlertProcessingBackdrop(false);\r\n    }\r\n\r\n    //tm danh mc khm gm tin cn, s sc khe, dinh dng...\r\n    const handleGetMedicalDetailPatient = async (id) => {\r\n        const responseDataExamining = await getMedicalDetailPatient(id);\r\n        setPrevDataExamining(responseDataExamining);\r\n\r\n        const findNewCategoryPreIsFalse = responseDataExamining.categoryPres.filter(item => item.newCategoryPre === false);\r\n        const previewDataPredecessor = findNewCategoryPreIsFalse.flatMap(item => \r\n            item.categoryContents.flatMap(content => \r\n                content.categoryContentQuestions.map(question => ({\r\n                    categoryContentQuestionOrder: question.categoryContentQuestionOrder,\r\n                    categoryContentQuestionName: question.categoryContentQuestionName,\r\n                    categoryContentQuestionType: question.categoryContentQuestionType,\r\n                    categoryContentAnswer: question.categoryContentAnswer,\r\n                    categoryContentNote: question.categoryContentNote,\r\n                    categoryContentDefauls: question.categoryContentDefauls,\r\n                    categoryOrder: item.categoryOrder // Thm categoryOrder t cp trn\r\n                }))\r\n            )\r\n        )\r\n        setPreviewPredecessor(previewDataPredecessor);\r\n    }\r\n\r\n    //chn mc lc  khm\r\n    const handleSelectCategoryClick = async (categoryIncludeCotent) => {\r\n        if(openCollapseHealthRecords === true){\r\n            setOpenCollapseHealthRecords(!openCollapseHealthRecords);\r\n        }\r\n\r\n        if(contentCategorySelectedExamining.healthRecordsContentsType === 'tree' && healthRecordsContents.length !== 0){\r\n            setContentCategorySelectedExamining([]);\r\n        }\r\n\r\n        if(healthRecordsContents.length !== 0){\r\n            setHealthRecordsContents([]);\r\n        }\r\n\r\n        setCategorySelectedExamining(\r\n            {\r\n                ...categoryIncludeCotent,\r\n                //contentQuantity: categoryIncludeCotent.categoryContents.length\r\n            }\r\n        )\r\n\r\n        setContentCategorySelectedExamining([]);\r\n    }\r\n\r\n    //chn cy th mc khm s sc khe\r\n    const handleSelectHealthRecords = (healthRecords) => {\r\n        if(openCollapseHealthRecords === false){\r\n            setOpenCollapseHealthRecords(!openCollapseHealthRecords);\r\n        }        \r\n\r\n        if(healthRecordsContents.length !== 0){\r\n            setHealthRecordsContents([]);\r\n        }\r\n\r\n        setCategorySelectedExamining(\r\n            {\r\n                categoryName: 'S sc khe',\r\n                categoryContents: healthRecords\r\n            }\r\n        )\r\n\r\n        setContentCategorySelectedExamining(\r\n            {\r\n                healthRecordsContentsType: 'tree',\r\n                categoryContents: healthRecords\r\n            }\r\n        )\r\n    }\r\n\r\n    //chn ch nh mt s khm bnh (tm chi tit mt s khm bnh)\r\n    const handleSelectHealthRecordsItem = async (medicalRegisterId, examinationName, healthRecordsState) => {\r\n        setOpenAlertProcessingBackdrop(true);\r\n        setLoadingContentsExamining(true);\r\n\r\n        //dng cho ti khm (c tin cn  ng), m khm li\r\n        if(currentHealthRecordExamining){\r\n            if(healthRecordsContents.healthRecordsName !== examinationName){\r\n                if(healthRecordsState === 2){\r\n                    await findHealthRecord(medicalRegisterId, examinationName, healthRecordsState);\r\n                }\r\n                else if(healthRecordsState === 1 && dataPantientsReadyExamining.editExamining || healthRecordsState === 1 && dataPantientsReadyExamining.backRegister){\r\n                    setHealthRecordsContents({\r\n                        healthRecordsName: examinationName,\r\n                        newMedicalBook: true,\r\n                        conclusion: mainDataExamining.healthRecords[0].conclusion,\r\n                        categoryPatients: mainDataExamining.healthRecords[0].categories\r\n                    })\r\n\r\n                    setCurrentHealthRecordExamining({\r\n                        healthRecordsName: examinationName,\r\n                        newMedicalBook: true,\r\n                        conclusion: mainDataExamining.healthRecords[0].conclusion,\r\n                        categoryPatients: mainDataExamining.healthRecords[0].categories\r\n                    });\r\n                }\r\n                else if(healthRecordsState === 1 && mainDataExamining.healthRecords.length === 1){\r\n                    setHealthRecordsContents(currentHealthRecordExamining);\r\n                    setCurrentHealthRecordExamining(currentHealthRecordExamining);\r\n                }\r\n                else if(healthRecordsState === 1 && mainDataExamining.healthRecords.length === 1 && dataPantientsReadyExamining.isContinueExam){\r\n                    setHealthRecordsContents(currentHealthRecordExamining);\r\n                    setCurrentHealthRecordExamining(currentHealthRecordExamining);\r\n                }\r\n                else{\r\n                    await findHealthRecord(medicalRegisterId, examinationName, healthRecordsState);\r\n                }\r\n            }\r\n        }\r\n        //dng cho ti khm (tin cn cha ng), khm mi hon ton\r\n        else{\r\n            await findHealthRecord(medicalRegisterId, examinationName, healthRecordsState);\r\n        }\r\n\r\n        setLoadingContentsExamining(false);\r\n        setOpenAlertProcessingBackdrop(false);\r\n    }\r\n\r\n    const findHealthRecord = async (medicalRegisterId, examinationName, healthRecordsState) => {\r\n        const responseMedicalBook = await getMedicalBook(medicalRegisterId);\r\n\r\n        setHealthRecordsContents({\r\n            healthRecordsName: examinationName,\r\n            newMedicalBook: responseMedicalBook.medicakBook.newMedicalBook,\r\n            conclusion: responseMedicalBook.medicakBook.conclusion,\r\n            categoryPatients: responseMedicalBook.medicakBook.categories\r\n        })\r\n\r\n        setCurrentHealthRecordExamining({\r\n            healthRecordsName: examinationName,\r\n            newMedicalBook: responseMedicalBook.medicakBook.newMedicalBook,\r\n            conclusion: responseMedicalBook.medicakBook.conclusion,\r\n            categoryPatients: responseMedicalBook.medicakBook.categories\r\n        });\r\n\r\n        if(healthRecordsState === 1 && mainDataExamining.healthRecords.length === 1 && mainDataExamining.healthRecords[0].medicalBookId === null){\r\n            const editDataHealthRecordsItemForConclusion = responseMedicalBook.medicakBook.categories.map((categoriesItem, categoriesIndex) => {\r\n                const mainCategoryContentsExamining = categoriesItem.categoryContents.map((categoryContentsItem) => {\r\n                    const categoryContents = {\r\n                        categoryContentTitle: categoryContentsItem.categoryContentTitle,\r\n                        categoryContentName: categoryContentsItem.categoryContentName,\r\n                        categoryContentCheck: categoryContentsItem.categoryContentCheck,\r\n                        categoryContentText: categoryContentsItem.categoryContentText,\r\n                        categoryContentQuestions: []\r\n                    }\r\n                    return categoryContents\r\n                })\r\n                \r\n                const mainCategoryExamining = {\r\n                    categoryName: categoriesItem.categoryName,\r\n                    isHealthRecord: true,\r\n                    categoryContents: mainCategoryContentsExamining\r\n                }\r\n\r\n                return mainCategoryExamining\r\n            })\r\n\r\n            const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n            editDataHealthRecordsItemForConclusion.map((dataHealthRecordsItemForConclusionItem) => _dataExaminingForConclusion.categories.push(dataHealthRecordsItemForConclusionItem))\r\n            setDataExaminingForConclusion(_dataExaminingForConclusion);\r\n        }\r\n    }\r\n\r\n    //chn loi mc khm ca mt s khm bnh\r\n    const handleOpenHealthRecordsItem = (categoryPatientsIndex) => {\r\n        setOpenCollapseHealthRecordsItem((prevOpen) => {\r\n            const newOpen = [...prevOpen];\r\n            newOpen[categoryPatientsIndex] = !newOpen[categoryPatientsIndex];\r\n            return newOpen;\r\n        });\r\n    }\r\n\r\n    const handleRenderExamsStatus = (status) => {\r\n      if(status === 0){\r\n        return (\r\n          <div className='chipUnDoneExamms'><p className='chipLabel'>Cha thc hin</p></div>\r\n        )\r\n      }\r\n      else if(status === 1){\r\n        return (\r\n          <div className='chipDoingExamms'><p className='chipLabel'>ang thc hin</p></div>\r\n        )\r\n      }\r\n      else{\r\n        return (\r\n          <div className='chipDoneExamms'><p className='chipLabel'> thc hin</p></div>\r\n        )\r\n      }\r\n    }\r\n\r\n    const handleAnswerCheckQuestion = (categoryContentsIndex, questionIndex, answer) => {\r\n        //set li danh mc ang chn  khm khi tr li cu hi dng check\r\n        if(answer === null){\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = true\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            const isPredecessor = true;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _categorySelectedExamining.categoryName,\r\n                isPredecessor,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex],\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle,\r\n            )\r\n        }\r\n        else if(answer === true){\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = false\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            const isPredecessor = true;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _categorySelectedExamining.categoryName,\r\n                isPredecessor,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex],\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle,\r\n            )\r\n        }\r\n        else{\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = true\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            const isPredecessor = true;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _categorySelectedExamining.categoryName,\r\n                isPredecessor,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex],\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle,\r\n            )\r\n        }   \r\n    }\r\n\r\n    const typingRef = useRef(null);\r\n\r\n    const handleNoteCheckQuestion = (categoryContentsIndex, questionIndex, value) => {\r\n        const takenValue = value;\r\n\r\n        if(typingRef.current){\r\n            clearInterval(typingRef.current);\r\n        }\r\n\r\n        typingRef.current = setTimeout(() => {\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentNote = takenValue\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            const isEditNote = true;\r\n            const isPredecessor = true;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _categorySelectedExamining.categoryName,\r\n                isPredecessor,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex],\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle,\r\n                isEditNote\r\n            )\r\n        }, 0)\r\n    }\r\n\r\n    const handleAnswerValueQuestion = (categoryContentsIndex, questionIndex, value) => {\r\n        const takenValue = value;\r\n\r\n        if(typingRef.current){\r\n            clearInterval(typingRef.current);\r\n        }\r\n\r\n        typingRef.current = setTimeout(() => {\r\n            //set li danh mc ang chn  khm khi tr li cu hi dng gi tr\r\n            const _categorySelectedExamining = {...categorySelectedExamining};\r\n            _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentNote = takenValue;\r\n            setCategorySelectedExamining(_categorySelectedExamining);\r\n\r\n            const isPredecessor = true;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _categorySelectedExamining.categoryName,\r\n                isPredecessor,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex],\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _categorySelectedExamining.categoryContents[categoryContentsIndex].categoryContentTitle,\r\n            )\r\n        }, 0)\r\n    }\r\n\r\n    const handleAnswerCheckQuestionHealthRecords = (categoryPatientsIndex, categoryPatientsContentsIndex, questionIndex, answer) => {\r\n        if(answer === null){\r\n            const _healthRecordsContents = {...healthRecordsContents};\r\n            _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = true;\r\n            setHealthRecordsContents(_healthRecordsContents);\r\n\r\n            const isPredecessor = false;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryName, \r\n                isPredecessor,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex],\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentTitle\r\n            );\r\n        }\r\n\r\n        else if(answer === true){\r\n            const _healthRecordsContents = {...healthRecordsContents};\r\n            _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = false;\r\n            setHealthRecordsContents(_healthRecordsContents);\r\n\r\n            const isPredecessor = false;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryName, \r\n                isPredecessor,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex],\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentTitle\r\n            );\r\n        }\r\n\r\n        else{\r\n            const _healthRecordsContents = {...healthRecordsContents};\r\n            _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentAnswer = true;\r\n            setHealthRecordsContents(_healthRecordsContents);\r\n\r\n            const isPredecessor = false;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryName, \r\n                isPredecessor,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex],\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentTitle\r\n            );\r\n        }\r\n    }\r\n    \r\n    //tr li cu hi ca mc s khm bnh\r\n    const handleNoteCheckQuestionHealthRecords = (categoryPatientsIndex, categoryPatientsContentsIndex, questionIndex, value) => {\r\n        const takenValue = value;\r\n\r\n        if(typingRef.current){\r\n            clearInterval(typingRef.current);\r\n        }\r\n\r\n        typingRef.current = setTimeout(() => {\r\n            const _healthRecordsContents = {...healthRecordsContents};\r\n            _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentNote = takenValue;\r\n            setHealthRecordsContents(_healthRecordsContents);\r\n\r\n            const isEditNote = true;\r\n            const isPredecessor = false;\r\n            createSelectedQuestionsExaminingForConclusion(\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryName, \r\n                isPredecessor,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex],\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentQuestions[questionIndex].categoryContentQuestionOrder,\r\n                _healthRecordsContents.categoryPatients[categoryPatientsIndex].categoryContents[categoryPatientsContentsIndex].categoryContentTitle,\r\n                isEditNote\r\n            );\r\n        }, 0)\r\n    }\r\n\r\n    const createSelectedQuestionsExaminingForConclusion = (categoryName, isPredecessor, categoryContentQuestion, questionOrder, categoryContentTitle, isEditNote) => {\r\n        if(categoryContentQuestion.categoryContentQuestionType === 'check'){\r\n            if(isEditNote){\r\n                if(categoryContentQuestion.categoryContentNote !== ''){\r\n                    const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n                        // Duyt qua tng categoriesItem trong categories\r\n                        _dataExaminingForConclusion.categories.forEach(categoriesItem => {\r\n                            if(categoriesItem.categoryName === categoryName){\r\n                                // Duyt qua tng categoryContentsItem trong categoryContents\r\n                                categoriesItem.categoryContents.forEach(categoryContentsItem => {\r\n                                    if(categoryContentsItem.categoryContentTitle === categoryContentTitle){\r\n                                        // Kim tra nu categoryContentQuestions rng hoc khng rng\r\n                                        if (categoryContentsItem.categoryContentQuestions.length > 0) {\r\n                                            // Kim tra xem  c categoryContentQuestionName cha\r\n                                            const existingQuestion = categoryContentsItem.categoryContentQuestions.find(question => \r\n                                                question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName\r\n                                            );\r\n                            \r\n                                            if (existingQuestion) {\r\n                                                // Nu  tn ti, cp nht categoryContentAnswer\r\n                                                existingQuestion.categoryContentNote = categoryContentQuestion.categoryContentNote;\r\n                                            } else {\r\n                                                // Nu khng tn ti, thm mi i tng vo categoryContentQuestions\r\n                                                categoryContentsItem.categoryContentQuestions.push(categoryContentQuestion);\r\n                                            }\r\n\r\n                                        } else {\r\n                                        // Nu categoryContentQuestions rng, thm trc tip i tng mi v ngng vng lp  trnh thm nhiu ln\r\n                                            categoryContentsItem.categoryContentQuestions.push(categoryContentQuestion);\r\n                                        }\r\n                                    }\r\n                                });        \r\n                            }\r\n                        });\r\n\r\n                    setDataExaminingForConclusion(_dataExaminingForConclusion);\r\n                }\r\n\r\n                else if(categoryContentQuestion.categoryContentNote === ''){\r\n                    const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n                    _dataExaminingForConclusion.categories.forEach(categoriesItem => {\r\n                        if(categoriesItem.categoryName === categoryName){\r\n                            categoriesItem.categoryContents.forEach(categoryContentsItem => {\r\n                                if(categoryContentsItem.categoryContentTitle === categoryContentTitle){\r\n                                    categoryContentsItem.categoryContentQuestions.forEach(categoryContentQuestionsItem => {\r\n                                        if(categoryContentQuestionsItem.categoryContentAnswer === null || categoryContentQuestionsItem.categoryContentAnswer === false){\r\n                                            categoryContentsItem.categoryContentQuestions = categoryContentsItem.categoryContentQuestions.filter(categoryContentQuestionsItem => categoryContentQuestionsItem.categoryContentQuestionOrder !== categoryContentQuestion.categoryContentQuestionOrder                                )\r\n                                        }\r\n                                    })                 \r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n\r\n                    setDataExaminingForConclusion(_dataExaminingForConclusion);\r\n                }\r\n            }\r\n            else{\r\n                //question dng check nhng answer l true\r\n                if(categoryContentQuestion.categoryContentAnswer === true && categoryContentQuestion.categoryContentQuestionType === 'check'){\r\n                    const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n                        // Duyt qua tng categoriesItem trong categories\r\n                        _dataExaminingForConclusion.categories.forEach(categoriesItem => {\r\n                            if(categoriesItem.categoryName === categoryName){\r\n                                // Duyt qua tng categoryContentsItem trong categoryContents\r\n                                categoriesItem.categoryContents.forEach(categoryContentsItem => {\r\n                                    if(categoryContentsItem.categoryContentTitle === categoryContentTitle){\r\n                                        // Kim tra nu categoryContentQuestions rng hoc khng rng\r\n                                        if (categoryContentsItem.categoryContentQuestions.length > 0) {\r\n                                            // Kim tra xem  c categoryContentQuestionName cha\r\n                                            const existingQuestion = categoryContentsItem.categoryContentQuestions.find(question => \r\n                                                question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName\r\n                                            );\r\n                            \r\n                                            if (existingQuestion) {\r\n                                                // Nu  tn ti, cp nht categoryContentAnswer\r\n                                                existingQuestion.categoryContentAnswer = categoryContentQuestion.categoryContentAnswer;\r\n                                            } else {\r\n                                                // Nu khng tn ti, thm mi i tng vo categoryContentQuestions\r\n                                                categoryContentsItem.categoryContentQuestions.push(categoryContentQuestion);\r\n                                            }\r\n    \r\n                                        } else {\r\n                                        // Nu categoryContentQuestions rng, thm trc tip i tng mi v ngng vng lp  trnh thm nhiu ln\r\n                                            categoryContentsItem.categoryContentQuestions.push(categoryContentQuestion);\r\n                                        }\r\n                                    }\r\n                                });        \r\n                            }\r\n                        });\r\n    \r\n                    setDataExaminingForConclusion(_dataExaminingForConclusion);\r\n                }\r\n    \r\n                //question dng check nhng answer l false\r\n                else if(categoryContentQuestion.categoryContentAnswer === false && categoryContentQuestion.categoryContentQuestionType === 'check'){\r\n                    const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n                    _dataExaminingForConclusion.categories.forEach((categoriesItem, categoriesIndex) => {\r\n                        if(categoriesItem.categoryName === categoryName){\r\n                            categoriesItem.categoryContents.forEach(categoryContentsItem => {\r\n                                if(categoryContentsItem.categoryContentTitle === categoryContentTitle){\r\n                                    categoryContentsItem.categoryContentQuestions.forEach(categoryContentQuestionsItem => {\r\n                                        if(categoryContentQuestionsItem.categoryContentNote === null || categoryContentQuestionsItem.categoryContentNote === ''){\r\n                                            categoryContentsItem.categoryContentQuestions = categoryContentsItem.categoryContentQuestions.filter(categoryContentQuestionsItem => categoryContentQuestionsItem.categoryContentQuestionOrder !== categoryContentQuestion.categoryContentQuestionOrder                                )\r\n                                        }\r\n                                    })                 \r\n                                }\r\n                            });\r\n                        }\r\n                    })\r\n                    setDataExaminingForConclusion(_dataExaminingForConclusion)\r\n                }\r\n            }\r\n        }\r\n\r\n        else{\r\n            //question dng gi tr nhng khc rng\r\n            if(categoryContentQuestion.categoryContentNote !== '' && categoryContentQuestion.categoryContentQuestionType === 'string'){\r\n                const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n                // Duyt qua tng categoriesItem trong categories\r\n                _dataExaminingForConclusion.categories.forEach(categoriesItem => {\r\n                    if(categoriesItem.categoryName === categoryName){\r\n                        // Duyt qua tng categoryContentsItem trong categoryContents\r\n                        categoriesItem.categoryContents.forEach(categoryContentsItem => {\r\n                            if(categoryContentsItem.categoryContentTitle === categoryContentTitle){\r\n                                // Kim tra nu categoryContentQuestions rng hoc khng rng\r\n                                if (categoryContentsItem.categoryContentQuestions.length > 0) {\r\n                                    // Kim tra xem  c categoryContentQuestionName cha\r\n                                    const existingQuestion = categoryContentsItem.categoryContentQuestions.find(question => \r\n                                        question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName\r\n                                    );\r\n                    \r\n                                    if (existingQuestion) {\r\n                                        // Nu  tn ti, cp nht categoryContentAnswer\r\n                                        existingQuestion.categoryContentNote = categoryContentQuestion.categoryContentNote;\r\n                                    } else {\r\n                                        // Nu khng tn ti, thm mi i tng vo categoryContentQuestions\r\n                                        categoryContentsItem.categoryContentQuestions.push(categoryContentQuestion);\r\n                                    }\r\n\r\n                                } else {\r\n                                // Nu categoryContentQuestions rng, thm trc tip i tng mi v ngng vng lp  trnh thm nhiu ln\r\n                                    categoryContentsItem.categoryContentQuestions.push(categoryContentQuestion);\r\n                                }\r\n                            }\r\n                        });        \r\n                    }\r\n                });\r\n\r\n                setDataExaminingForConclusion(_dataExaminingForConclusion);\r\n            }\r\n            //question dng gi tr nhng l rng\r\n            else if(categoryContentQuestion.categoryContentNote === '' && categoryContentQuestion.categoryContentQuestionType === 'string'){\r\n                const _dataExaminingForConclusion = {...dataExaminingForConclusion};\r\n                _dataExaminingForConclusion.categories.forEach(categoriesItem => {\r\n                    if(categoriesItem.categoryName === categoryName){\r\n                        categoriesItem.categoryContents.forEach(categoryContentsItem => {\r\n                            if(categoryContentsItem.categoryContentTitle === categoryContentTitle){\r\n                                categoryContentsItem.categoryContentQuestions = categoryContentsItem.categoryContentQuestions.filter(categoryContentQuestionsItem => categoryContentQuestionsItem.categoryContentQuestionName !== categoryContentQuestion.categoryContentQuestionName)\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                setDataExaminingForConclusion(_dataExaminingForConclusion);\r\n            }\r\n        }\r\n\r\n        if(isPredecessor === true){\r\n            createPreviewDataPredecessor(categoryContentQuestion, isEditNote);\r\n        }\r\n            \r\n    }\r\n\r\n    const createPreviewDataPredecessor = (categoryContentQuestion, isEditNote) => {\r\n        if(previewPredecessor && previewPredecessor.length !== 0){\r\n            let _previewPredecessor = [...previewPredecessor];\r\n\r\n            const findQuestion = _previewPredecessor.find(item => item.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName);\r\n            if(findQuestion){\r\n                if(findQuestion.categoryContentQuestionType === 'string'){\r\n                    if(categoryContentQuestion.categoryContentNote === ''){\r\n                        _previewPredecessor = previewPredecessor.filter(item => item.categoryContentQuestionName !== categoryContentQuestion.categoryContentQuestionName);\r\n                    }\r\n                    else if(categoryContentQuestion.categoryContentNote !== ''){\r\n                        const existingQuestion = previewPredecessor.find(question => question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName);\r\n                        if(existingQuestion){\r\n                            existingQuestion.categoryContentNote = categoryContentQuestion.categoryContentNote;\r\n                        }\r\n                        else{\r\n                            categoryContentQuestion.categoryOrder = categorySelectedExamining.categoryOrder\r\n                            _previewPredecessor.push(categoryContentQuestion);\r\n                        }\r\n                    }\r\n                }\r\n                else if(findQuestion.categoryContentQuestionType === 'check'){\r\n                    if(isEditNote){\r\n                        if(categoryContentQuestion.categoryContentNote === ''){\r\n                            const existingQuestion = previewPredecessor.find(question => question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName && question.categoryContentAnswer === true);\r\n                            if(existingQuestion){\r\n                                existingQuestion.categoryContentNote = categoryContentQuestion.categoryContentNote;\r\n                            }\r\n                            else{\r\n                                if(categoryContentQuestion.categoryContentAnswer === null || categoryContentQuestion.categoryContentAnswer === false){\r\n                                    _previewPredecessor = _previewPredecessor.filter(question => question.categoryContentQuestionName !== categoryContentQuestion.categoryContentQuestionName)\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        else if(categoryContentQuestion.categoryContentNote !== ''){\r\n                            const existingQuestion = previewPredecessor.find(question => question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName);\r\n                            if(existingQuestion){\r\n                                existingQuestion.categoryContentNote = categoryContentQuestion.categoryContentNote;\r\n                            }\r\n                            else{\r\n                                categoryContentQuestion.categoryOrder = categorySelectedExamining.categoryOrder\r\n                                _previewPredecessor.push(categoryContentQuestion);\r\n                            }\r\n                        }                       \r\n                    }\r\n\r\n                    else{\r\n                        if(categoryContentQuestion.categoryContentAnswer === false || categoryContentQuestion.categoryContentAnswer === null){\r\n                            const existingQuestion = previewPredecessor.find(question => question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName);\r\n                            if(existingQuestion){\r\n                                if(existingQuestion.categoryContentNote === '' || existingQuestion.categoryContentNote === null){\r\n                                    _previewPredecessor = _previewPredecessor.filter(question => question.categoryContentQuestionName !== categoryContentQuestion.categoryContentQuestionName)\r\n                                }\r\n                                else if(existingQuestion.categoryContentNote !== '' || existingQuestion.categoryContentNote !== null){\r\n                                    existingQuestion.categoryContentAnswer = categoryContentQuestion.categoryContentAnswer;\r\n                                }               \r\n                            }\r\n                        }\r\n\r\n                        else if(categoryContentQuestion.categoryContentAnswer === true){\r\n                            const existingQuestion = previewPredecessor.find(question => question.categoryContentQuestionName === categoryContentQuestion.categoryContentQuestionName);\r\n                            if(existingQuestion || existingQuestion.categoryContentNote !== '' || existingQuestion.categoryContentNote !== null){\r\n                                existingQuestion.categoryContentAnswer = categoryContentQuestion.categoryContentAnswer;\r\n                            }\r\n                            else{\r\n                                categoryContentQuestion.categoryOrder = categorySelectedExamining.categoryOrder\r\n                                _previewPredecessor.push(categoryContentQuestion);\r\n                            }\r\n                        }        \r\n                    }\r\n                }\r\n            }\r\n\r\n            else{\r\n                categoryContentQuestion.categoryOrder = categorySelectedExamining.categoryOrder\r\n                _previewPredecessor.push(categoryContentQuestion);\r\n            }\r\n            setPreviewPredecessor(_previewPredecessor)\r\n        }\r\n\r\n        else{\r\n            setPreviewPredecessor([categoryContentQuestion])\r\n        }\r\n    }\r\n\r\n    const useStyles = makeStyles({\r\n        root: {\r\n          '&.Mui-disabled': {\r\n            color: '#d32f2f', // Mu sc khi checkbox b v hiu ha\r\n          },\r\n          '&.Mui-checked.Mui-disabled': {\r\n            color: '#d32f2f', // Mu sc khi checkbox b v hiu ha v  c chn\r\n          },\r\n        },\r\n      });\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        // ng k s kin nhn thng bo bn ng k khm khi component c mount\r\n        const handleReceiveMessage = (medicalRegisterMessage) => {\r\n            if(medicalRegisterMessage === true && dataPantientsReadyExamining.id === ''){\r\n                setLoadingPatient(true);\r\n                handleGetRegistersByDateNow();\r\n            }\r\n        };\r\n\r\n        startSignalRConnection(localStorage.getItem('jwt', handleReceiveMessage))\r\n\r\n        onReceiveMessage(handleReceiveMessage);\r\n\r\n        return () => {\r\n            // Dng lng nghe s kin nu cn khi component Chat unmount\r\n        };\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if(dataPantientsReadyExamining.status === 1 && alertVisible){\r\n                const userConfirmed = window.confirm(`Bn ang khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}, c chc l mun ng xut khng?`);\r\n                if(userConfirmed){\r\n                    sessionStorage.setItem('dataPantientsReadyExamining', JSON.stringify(dataPantientsReadyExamining));\r\n                    sessionStorage.setItem('dataExaminingForConclusion', JSON.stringify(dataExaminingForConclusion));\r\n                    sessionStorage.setItem('mainDataExamining', JSON.stringify(mainDataExamining))\r\n\r\n                    if(currentHealthRecordExamining){\r\n                        sessionStorage.setItem('currentHealthRecordExamining', JSON.stringify(currentHealthRecordExamining))\r\n                    }\r\n\r\n                    if(prevDataPredecessor){\r\n                        sessionStorage.setItem('prevDataPredecessor', JSON.stringify(prevDataPredecessor))\r\n                    }\r\n\r\n                    if(oldDataPredecessor){\r\n                        sessionStorage.setItem('oldDataPredecessor', JSON.stringify(oldDataPredecessor))\r\n                    }\r\n                    confirmAlert();\r\n                }\r\n                else{\r\n                    resetAlert();\r\n                }\r\n        }\r\n\r\n        else if(dataPantientsReadyExamining.status){\r\n            setIsFormDirty(true)\r\n\r\n            const handleBeforeUnload = (e) => {\r\n                const confirmationMessage = 'Bn c chc chn mun ri khi trang ny?';\r\n                e.returnValue = confirmationMessage; // Hin th thng bo cnh bo\r\n                return confirmationMessage;\r\n            };\r\n\r\n            const unblock = history.block((location, action) => {\r\n                if (isFormDirty) {\r\n                    const confirmLeave = window.confirm(\r\n                        'Bn c chc chn mun ri khi trang ny? Nhng thay i s khng c lu....'\r\n                    );\r\n                    if (confirmLeave) {\r\n                        const _dataPatientsRegisterSort = listDataPatientsRegisterSort.filter(item => item.state === 1)\r\n\r\n                        sessionStorage.setItem('dataPatientsRegisterSort', JSON.stringify(_dataPatientsRegisterSort));\r\n                        sessionStorage.setItem('dataPantientsReadyExamining', JSON.stringify(dataPantientsReadyExamining));\r\n                        sessionStorage.setItem('dataExaminingForConclusion', JSON.stringify(dataExaminingForConclusion));\r\n                        sessionStorage.setItem('mainDataExamining', JSON.stringify(mainDataExamining))\r\n    \r\n                        if(currentHealthRecordExamining){\r\n                            sessionStorage.setItem('currentHealthRecordExamining', JSON.stringify(currentHealthRecordExamining))\r\n                        }\r\n    \r\n                        if(prevDataPredecessor){\r\n                            sessionStorage.setItem('prevDataPredecessor', JSON.stringify(prevDataPredecessor))\r\n                        }\r\n    \r\n                        if(oldDataPredecessor){\r\n                            sessionStorage.setItem('oldDataPredecessor', JSON.stringify(oldDataPredecessor))\r\n                        }\r\n\r\n                        unblock(); // Hy chn  iu hng\r\n                        history.push(location.pathname); // iu hng n trang mi\r\n                        \r\n                    } else {\r\n                        return false; // Ngn iu hng\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n    \r\n            const handleUnload = () => {                \r\n                const _dataPatientsRegisterSort = listDataPatientsRegisterSort.filter(item => item.state === 1)\r\n\r\n                sessionStorage.setItem('dataPatientsRegisterSort', JSON.stringify(_dataPatientsRegisterSort));\r\n                \r\n                sessionStorage.setItem('dataPantientsReadyExamining', JSON.stringify(dataPantientsReadyExamining));\r\n                sessionStorage.setItem('dataExaminingForConclusion', JSON.stringify(dataExaminingForConclusion));\r\n                sessionStorage.setItem('mainDataExamining', JSON.stringify(mainDataExamining))\r\n    \r\n                if(currentHealthRecordExamining){\r\n                    sessionStorage.setItem('currentHealthRecordExamining', JSON.stringify(currentHealthRecordExamining))\r\n                }\r\n    \r\n                if(prevDataPredecessor){\r\n                    sessionStorage.setItem('prevDataPredecessor', JSON.stringify(prevDataPredecessor))\r\n                }\r\n    \r\n                if(oldDataPredecessor){\r\n                    sessionStorage.setItem('oldDataPredecessor', JSON.stringify(oldDataPredecessor))\r\n                }\r\n            };\r\n            \r\n            window.addEventListener('beforeunload', handleBeforeUnload);\r\n            window.addEventListener('unload', handleUnload);\r\n            \r\n            return () => {\r\n                window.removeEventListener('beforeunload', handleBeforeUnload);\r\n                unblock();\r\n                window.removeEventListener('unload', handleUnload);                \r\n            };\r\n        }\r\n\r\n        else if(alertVisible){\r\n            confirmAlert();\r\n        }\r\n    }, [dataPantientsReadyExamining, mainDataExamining, currentHealthRecordExamining, dataExaminingForConclusion, alertVisible, confirmAlert, resetAlert, isLogOutClick, history, isFormDirty])\r\n\r\n    useEffect(() => {\r\n        if(loading === false && user.isLogin){\r\n            if(user.positionName !== 'Doctor'){\r\n                history.push('/404');\r\n            }\r\n            else{\r\n                if(sessionStorage.dataPantientsReadyExamining){\r\n                    handleReloadUIWhenExamining();\r\n                }\r\n                else{\r\n                    handleGetRegistersByDateNow();\r\n                }\r\n            }\r\n        }\r\n    }, [loading, user])\r\n\r\n    useEffect(() => {\r\n        if(isDialogChangePasswordOpen === false){\r\n            const handleKeyDown = (event) => {\r\n                if(event.keyCode === 112){\r\n                    event.preventDefault();\r\n                }\r\n\r\n                if(dataPantientsReadyExamining.patientsId !== '' && openAlertProcessingBackdrop === false && openModalCompleteExamining === false && event.keyCode !== 116){\r\n                    if(event.keyCode === 112 && dataPantientsReadyExamining.status === 1){\r\n                        event.preventDefault();\r\n                        handleCancelExamining();\r\n                    }\r\n\r\n                    else if(event.keyCode === 113 && prevDataExamining){\r\n                        if(dataPantientsReadyExamining.status === 0 && dataPantientsReadyExamining.editExamining === false){\r\n                            handleBeginExaminingForPantient();\r\n                        }\r\n                        else if(dataPantientsReadyExamining.status === 1){\r\n                            alert(`Bn ang trong qu trnh khm cho bnh nhn ${dataPantientsReadyExamining.patientsName}, vui lng kt thc t khm hin ti  bt u t khm mi!`);\r\n                        }\r\n                        else if(dataPantientsReadyExamining.status === 0  && dataPantientsReadyExamining.editExamining === true){\r\n                            handleBeginEditExaminingForPantient();\r\n                        }\r\n                    }\r\n\r\n                    else if(event.keyCode === 115){\r\n                    setOpenAlertProcessingBackdrop(true)\r\n                        if(dataPantientsReadyExamining.status === 1){\r\n                            setTimeout(() => {\r\n                                setOpenAlertProcessingBackdrop(false)\r\n                                setOpenModalCompleteExamining(true);\r\n                            }, 1000)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            document.addEventListener('keydown', handleKeyDown);\r\n\r\n            return () => {\r\n                document.removeEventListener('keydown', handleKeyDown);\r\n            };\r\n        }\r\n        \r\n    }, [dataPantientsReadyExamining, openModalCompleteExamining, openAlertProcessingBackdrop, openModalCompleteExamining, isDialogChangePasswordOpen])\r\n\r\n    return (\r\n        <>\r\n            <Container maxWidth=\"xl\" sx={{mt: 2.5}}>\r\n                <Box sx={{ bgcolor: '#fff', height: 'auto'}} >\r\n                    <Grid container spacing={2} sx={{pl: 0.6, pr: 0.6}}>\r\n\r\n                        <Grid item xs={5}>\r\n                            {/* <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{`${moment().format('dddd')}, ${moment().format('LL')}`}</Typography> */}\r\n                            <TableContainer component={Paper} sx={{ height: '330px', boxShadow: 5, borderRadius: '10px' }}>\r\n                                {loadingPatient ?\r\n                                    <>\r\n                                        <Box sx={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', backgroundColor: '#e0e0e0', height: '100%'}}>\r\n                                            <CircularProgress />\r\n                                            <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu, hy ch mt cht...</Typography>\r\n                                        </Box>        \r\n                                    </>\r\n                                    :\r\n                                    <>\r\n                                        <Box>\r\n                                            <Stack direction='row' spacing={1} sx={{justifyContent: 'center', mt: 1.4}}>\r\n                                                {listPantientChipState.map((pantientChipStateItem, pantientChipStateIndex) => (\r\n                                                    <Badge badgeContent={pantientChipStateItem.chipContent} color=\"error\" key={`chipPantientState ${pantientChipStateIndex}`}> \r\n                                                        <Chip label={pantientChipStateItem.chipLabel} color={pantientChipStateIndex === activeChip.chipOrder ? 'primary' : 'default'}\r\n                                                        onClick={() => handleSelectedChip(pantientChipStateIndex, pantientChipStateItem.chipLabel)} />  \r\n                                                    </Badge>\r\n                                                ))}\r\n                                            </Stack>\r\n\r\n                                            <Box sx={{mt: 0.2, position: 'relative', display: 'flex', justifyContent: 'center', flexDirection: 'column'}}>\r\n                                                {dataPantientsReadyExamining.status !== 1 ?\r\n                                                    <>\r\n                                                        <Typography variant=\"subtitle2\" sx={{textAlign: 'center', mt: 0.2, fontSize: '1rem'}}>Nu khng tm thy bnh nhn, hy nhn nt ti li pha di</Typography>\r\n                                                        <CachedIcon sx={{color: 'brown', fontWeight: 'bolder', position: 'absolute', right: 55, top: 30, fontSize: '2.5rem', cursor: 'pointer'}} titleAccess='Ti li' onClick={() => handleReloadGetRegistersByDateNow()}/>\r\n                                                    </>\r\n                                                :\r\n                                                    null\r\n                                                }\r\n                                                <Typography variant=\"h6\" sx={{textAlign: 'center', fontSize: '1.12rem'}}>Danh sch {activeChip.chipLabel} ngy {moment().format(\"DD/MM/YYYY\")}</Typography>\r\n                                            </Box>\r\n                                            \r\n                                            <Box sx={{display: 'flex', justifyContent: 'center', position: 'relative'}}>\r\n                                                <TextField sx={{mb: 0.6, width: 360, '& .MuiInputBase-inputSizeSmall': {textAlign: 'center'}}} size=\"small\" \r\n                                                    variant=\"outlined\" placeholder='Tm vi M BN hoc Tn BN' value={searchPatientsQuery} onChange={(e) => handleSearchPantient(e.target.value)}\r\n                                                    InputProps={{ // <-- This is where the toggle button is added.\r\n                                                        startAdornment: (\r\n                                                            <InputAdornment position='start'><SearchIcon/></InputAdornment>  \r\n                                                        ),\r\n                                                        endAdornment: (\r\n                                                            <InputAdornment position='end'>\r\n                                                                {searchPatientsQuery !== '' ? \r\n                                                                    <CloseIcon sx={{cursor: 'pointer'}} titleAccess='Xa'\r\n                                                                        onClick={() => [setSearchPatientsQuery(''), setListDataPatientsRegisterSort(listDataPatientsRegisterState)]}\r\n                                                                    /> \r\n                                                                : \r\n                                                                    null\r\n                                                                }\r\n                                                            </InputAdornment>  \r\n                                                        )\r\n                                                    }}>\r\n                                                </TextField>\r\n                                            </Box>\r\n                                        </Box>\r\n                                \r\n                                        <Table stickyHeader >\r\n                                            <TableHead>\r\n                                                <TableRow sx={{\"& th\": {color: \"rgba(96, 96, 96)\", backgroundColor: \"pink\"}}}>\r\n                                                    <TableCell align='left' sx={{fontSize: '0.95rem'}}>STT</TableCell>\r\n                                                    <TableCell align='left' sx={{fontSize: '0.95rem'}}>M bnh nhn</TableCell>\r\n                                                    <TableCell align=\"left\" sx={{fontSize: '0.95rem'}}>H tn</TableCell>\r\n                                                </TableRow>\r\n                                            </TableHead>\r\n                                            <TableBody>\r\n                                                {listDataPatientsRegisterSort.map((dataPantientItem, dataPantientIndex) => (\r\n                                                    <TableRow hover role=\"checkbox\" key={dataPantientItem.order}\r\n                                                        sx={{ cursor: 'pointer', backgroundColor: dataPantientItem.state === 1 ? '#26c6da' : '#fff', \r\n                                                        ':hover': {backgroundColor: dataPantientItem.state === 1 ? '#00bcd4 !important' : 'rgba(0, 0, 0, 0.1) !important'} }} \r\n                                                        onClick={() => handleSelectPantientExamining(dataPantientItem)}\r\n                                                    >\r\n                                                        <TableCell align='left' sx={{width: '20px'}}>{dataPantientItem.order}</TableCell>\r\n                                                        <TableCell align='left' sx={{width: '150px'}}>{dataPantientItem.patient.patientCode}</TableCell>\r\n                                                        <TableCell align='left' sx={{width: '240px'}}>{dataPantientItem.patient.fullName}</TableCell>\r\n                                                    </TableRow>\r\n                                                ))}\r\n                                            </TableBody>\r\n                                        </Table>\r\n                                    </>\r\n                                }\r\n                            </TableContainer>\r\n\r\n                            {/* cy th mc khm */}\r\n                            <Box style={{width: '100%', marginTop: '10px', borderRadius: '10px', border: '2px solid red', height: '300px', overflow: 'auto'}} >\r\n                                {\r\n                                    mainDataExamining.length === 0 && loadingCategoryExamining === false || prevDataExamining === false ?\r\n                                        null\r\n                                    :\r\n                                    <>\r\n                                        {loadingCategoryExamining ?\r\n                                            <Box sx={{backgroundColor: '#e0e0e0', borderRadius: '10px', height: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\r\n                                                <CircularProgress />\r\n                                                <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu cy th mc khm, hy ch mt cht...</Typography>\r\n                                            </Box>\r\n                                        :\r\n                                            <>\r\n                                                <div className='category-scrollbar'>\r\n                                                    <List sx={{p: 0, display: 'inline-grid'}}>\r\n                                                        {mainDataExamining.categoryPres.map((predecessorItem, predecessorIndex) => (\r\n                                                            <Box sx={{display: 'inline-flex'}} key={`category ${predecessorIndex}`}>\r\n                                                                <ListItemButton\r\n                                                                    sx={{\r\n                                                                    width: 'fitContent', pt: '4px', pb: '4px', borderRadius: '8px', ':hover': {backgroundColor: categorySelectedExamining.categoryName === predecessorItem.categoryName ? '#ffc107' : 'rgba(0, 0, 0, 0.1)'},\r\n                                                                    backgroundColor: categorySelectedExamining.categoryName === predecessorItem.categoryName ? '#ffd54f' : ''}} \r\n                                                                    onClick={() => handleSelectCategoryClick(predecessorItem)}\r\n                                                                >\r\n                                                                    <Box sx={{display: 'flex', alignItems: 'center'}}>\r\n                                                                        <ListItemIcon sx={{minWidth: '30px', '& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem', color: '#2962ff'}}}><SendIcon /></ListItemIcon>\r\n                                                                        <ListItemText primary={predecessorItem.categoryName} sx={{'& .MuiListItemText-primary': {fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}}/>\r\n                                                                    </Box>\r\n                                                                </ListItemButton>\r\n\r\n                                                                {predecessorItem.newCategoryPre === true && predecessorItem.newPredecessor === true ? \r\n                                                                    null\r\n                                                                :\r\n                                                                    <>\r\n                                                                        {predecessorItem.newCategoryPre === false  ?\r\n                                                                            <>  \r\n                                                                                <CheckCircleIcon sx={{color: 'green', fontSize: '1.4rem', margin: 'auto'}} titleAccess=' theo di'/>\r\n                                                                            </>\r\n                                                                        :\r\n                                                                            null\r\n                                                                        }\r\n\r\n                                                                        {mainDataExamining.newPredecessor ? \r\n                                                                            null\r\n                                                                        :\r\n                                                                            predecessorItem.isLock === true ?\r\n                                                                                <>  \r\n                                                                                    <IconButton edge=\"end\" sx={{ml: 0.5, zIndex: 100}} onClick={() => handleEditDataPredecessor(predecessorItem.categoryName, predecessorItem.categoryOrder)}>\r\n                                                                                        <EditIcon sx={{color: 'blue', fontSize: '1.6rem'}} titleAccess='Sa'/>\r\n                                                                                    </IconButton>\r\n                                                                                </>\r\n                                                                            \r\n                                                                            :\r\n                                                                                <>\r\n                                                                                    <IconButton edge=\"end\" sx={{ml: 0.5, zIndex: 100}} onClick={() => handleEditDataPredecessorForSaving(predecessorItem.categoryOrder)}>\r\n                                                                                        <BeenhereIcon sx={{color: 'red', fontSize: '1.6rem'}} titleAccess='Lu'/>\r\n                                                                                    </IconButton>\r\n\r\n                                                                                    <IconButton edge=\"end\" sx={{ml: 0.5, zIndex: 100}} onClick={() => handleCancelEditDataPredecessor(predecessorItem.categoryName, predecessorItem.categoryOrder)}>\r\n                                                                                        <CancelIcon sx={{color: 'red', fontSize: '1.6rem'}} titleAccess='Hy'/>\r\n                                                                                    </IconButton>\r\n                                                                                </>   \r\n                                                                        }                                  \r\n                                                                    </>\r\n                                                                }\r\n                                                            </Box>\r\n                                                        ))}\r\n\r\n                                                        <ListItemButton \r\n                                                            sx={{pt: '4px', pb: '4px', borderRadius: '8px', backgroundColor: categorySelectedExamining.categoryName === 'S sc khe' ? '#ffd54f' : '',\r\n                                                                ':hover': {backgroundColor: categorySelectedExamining.categoryName === 'S sc khe' ? '#ffc107' : 'rgba(0, 0, 0, 0.1)'}}} \r\n                                                            onClick={() => handleSelectHealthRecords(mainDataExamining.healthRecords)}\r\n                                                        >\r\n                                                            <ListItemIcon sx={{minWidth: '30px', '& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem', color: '#2962ff'}}}>\r\n                                                                <SendIcon sx={{transform: categorySelectedExamining.categoryName === 'S sc khe' ? 'rotate(90deg)' : 'rotate(0deg)'}} />\r\n                                                            </ListItemIcon>\r\n\r\n                                                            <ListItemText primary={'S sc khe'} sx={{'& .MuiListItemText-primary': {fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}}/>                                                    \r\n                                                        </ListItemButton>\r\n\r\n                                                        <Collapse in={openCollapseHealthRecords} timeout=\"auto\" unmountOnExit>\r\n                                                            <div style={{ paddingLeft: '24px' }}>\r\n                                                                {mainDataExamining.healthRecords.map((healthRecordsItem, healthRecordsIndex) => (\r\n                                                                    <ListItemButton key={`healthRecords ${healthRecordsIndex}`} sx={{pt: '0px', pb: '0px', width: 'auto', borderRadius: '8px', ':hover': {backgroundColor: 'rgba(0, 0, 0, 0.1)'}}} \r\n                                                                        onClick={() => handleSelectHealthRecordsItem(healthRecordsItem.medicalRegisterId, healthRecordsItem.examinationName, healthRecordsItem.state)}>\r\n                                                                        <ListItemIcon sx={{minWidth: '30px', '& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem', color: healthRecordsItem.state === 1 ? 'red' : '#009688'}}}>\r\n                                                                            <FiberManualRecordIcon sx={{transform: categorySelectedExamining.categoryName === 'S sc khe' ? 'rotate(90deg)' : 'rotate(0deg)'}} />\r\n                                                                        </ListItemIcon>\r\n                                                                        <ListItemText primary={healthRecordsItem.examinationName} sx={{'& .MuiListItemText-primary': {fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}}/>\r\n                                                                    </ListItemButton>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </Collapse>\r\n                                                    </List>\r\n                                                </div>\r\n                                            </>\r\n                                        }\r\n                                    </>\r\n                                }\r\n                            </Box>\r\n                            {activeChip.chipOrder === 0 && dataPantientsReadyExamining.editExamining === false ?\r\n                                <div className='instruction' style={{display: 'flex', justifyContent: 'space-between', marginTop: '4.5px'}}>\r\n                                    <Button variant=\"contained\" color=\"error\" onClick={() => handleCancelExamining()}>Hy khm (f1)</Button>\r\n                                    <Button variant=\"contained\" color=\"secondary\" onClick={() => handleStartExaminingButtonClick()}>Bt u khm (f2)</Button>\r\n                                    <Button variant=\"contained\" color=\"primary\" onClick={() => handleCompleteExaminingButtonClick()}>Kt thc khm (f4)</Button>\r\n                                </div>\r\n                            :\r\n                                dataPantientsReadyExamining.id === '' ?\r\n                                    null\r\n                                :\r\n                                    dataPantientsReadyExamining.id !== '' && dataPantientsReadyExamining.status === 0 ? \r\n                                        <div className='instruction' style={{display: 'flex', marginTop: '4.5px'}}>\r\n                                            <Button variant=\"contained\" color=\"error\" sx={{mr: 2}} onClick={() => handleDeleteExamining()}>Xa khm (f1)</Button>\r\n                                            <Button variant=\"contained\" color=\"secondary\" onClick={() => handleStartExaminingButtonClick()}>Sa i (f2)</Button>\r\n                                        </div>\r\n                                    :\r\n                                        <div className='instruction' style={{display: 'flex', marginTop: '4.5px'}}>\r\n                                            <Button variant=\"contained\" color=\"error\" sx={{mr: 2}} onClick={() => handleCancelExamining()}>Hy thay i (f1)</Button>\r\n                                            <Button variant=\"contained\" color=\"primary\" onClick={() => handleCompleteExaminingButtonClick()}>Kt thc khm (f4)</Button>\r\n                                        </div>\r\n                            }\r\n                        </Grid>\r\n\r\n                        <Grid item xs={7}>\r\n                            {/* thng tin bnh nhn */}\r\n                            <Box sx={{boxShadow: 4, borderRadius: '20px', border: '2px solid blue', height: '230px', mb: '8px', overflow: 'auto'}}>\r\n                                <Typography variant='h6' sx={{color: 'blue', mt: 0.6, mb: 0.6, fontWeight: 'bolder', fontSize: '1.2rem', textAlign: 'center'}}>Thng tin bnh nhn</Typography>\r\n                                <Box sx={{pl: 2.8, pr: 2.8, mt: 1}}>\r\n                                    {loadingInfoPatient ?\r\n                                        <Box sx={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', mt: 4}}>\r\n                                            <CircularProgress color=\"inherit\"/>\r\n                                            <Typography variant='subtitle1' sx={{mt: 1}}>ang ti thng tin bnh nhn, hy ch mt cht...</Typography>\r\n                                        </Box>\r\n                                    :\r\n                                        <>\r\n                                            <Grid container rowSpacing={2} columnSpacing={{ xs: 1, sm: 2, md: 4}}>\r\n\r\n                                                <Grid item xs={4} sx={{display: 'inline-flex'}}>\r\n                                                    <PinIcon sx={{color: 'tomato'}}/><Typography variant='subtitle1' sx={{ml: 1}}>{`M BN: ${dataPantientsReadyExamining.patientCode || ''}`}</Typography>\r\n                                                </Grid>\r\n                                                <Grid item xs={5} sx={{display: 'inline-flex'}}>\r\n                                                    <PersonIcon sx={{color: 'tomato'}}/><Typography variant='subtitle1' sx={{ml: 1}}>{`H tn: ${dataPantientsReadyExamining.patientsName || ''}`}</Typography>\r\n                                                </Grid>\r\n                                                <Grid item xs={3} sx={{display: 'inline-flex'}}>\r\n                                                    {dataPantientsReadyExamining.patientsGender === true ? <MaleIcon sx={{color: 'coral', fontSize: '27px'}}/> : <FemaleIcon sx={{color: 'coral', fontSize: '27px'}}/>}\r\n                                                    <Typography variant='subtitle1' sx={{ml: 1}}>\r\n                                                        {`Gii tnh: ${dataPantientsReadyExamining.patientsGender !== '' ? dataPantientsReadyExamining.patientsGender === true ? 'Nam' : 'N' : ''}`}\r\n                                                    </Typography>\r\n                                                </Grid>\r\n\r\n                                                <Grid item xs={4} sx={{display: 'inline-flex'}}>\r\n                                                    <CalendarMonthIcon sx={{color: 'tomato'}}/><Typography variant='subtitle1' sx={{ml: 1}}>Ngy sinh: {dataPantientsReadyExamining.patientsDOB ? moment(dataPantientsReadyExamining.patientsDOB).format(\"DD/MM/YYYY\") : ''}</Typography>\r\n                                                </Grid>\r\n                                                <Grid item xs={5} sx={{display: 'inline-flex'}}>\r\n                                                    <InfoIcon sx={{color: 'tomato'}}/><Typography variant='subtitle1' sx={{ml: 1}}>{`Thng tui: ${dataPantientsReadyExamining.patientsMonthsOld || ''}`}</Typography>\r\n                                                </Grid>\r\n                                                <Grid item xs={3} sx={{display: 'inline-flex'}}>\r\n                                                    <PhoneIcon sx={{color: 'tomato'}}/><Typography variant='subtitle1' sx={{ml: 1}}>{`Sdt: ${dataPantientsReadyExamining.patientsPhone || ''}`}</Typography>\r\n                                                </Grid>\r\n                                                \r\n                                                <Grid item xs={4} sx={{display: 'inline-flex'}}>\r\n                                                    <GiBodyHeight style={{color: 'tomato', fontSize: '1.42rem', marginLeft: '2px'}}/>\r\n                                                    <Typography variant='subtitle1' sx={{ml: 0.8}}>\r\n                                                        {`Chiu cao: ${dataPantientsReadyExamining.patientsHeight ? dataPantientsReadyExamining.patientsHeight + ' cm' : ''}`}\r\n                                                    </Typography>\r\n                                                </Grid>\r\n                                                <Grid item xs={4} sx={{display: 'inline-flex'}}>\r\n                                                    <GiWeightScale style={{color: 'tomato', fontSize: '1.42rem'}}/>\r\n                                                    <Typography variant='subtitle1' sx={{ml: 1}}>\r\n                                                        {`Cn nng: ${dataPantientsReadyExamining.patientsWeight ? dataPantientsReadyExamining.patientsWeight + ' kg' : ''}`}\r\n                                                    </Typography>\r\n                                                </Grid>\r\n\r\n                                                <Grid item xs={4} sx={{display: 'inline-flex'}}>\r\n                                                    <TbRulerMeasure style={{color: 'tomato', fontSize: '1.42rem'}}/>\r\n                                                    <Typography variant='subtitle1' sx={{ml: 1}}>\r\n                                                        {`Vng u: ${dataPantientsReadyExamining.patientsHeadCircumference ? dataPantientsReadyExamining.patientsHeadCircumference + ' cm' : ''}`}\r\n                                                    </Typography>\r\n                                                </Grid>\r\n                                                \r\n                                                <Grid item xs={12} sx={{display: 'inline-flex'}}>\r\n                                                    <Home sx={{color: 'tomato'}}/><Typography variant='subtitle1' sx={{ml: 1}}>{`a ch: ${dataPantientsReadyExamining.patientsAddress || ''}`}</Typography>\r\n                                                </Grid> \r\n\r\n                                                {previewPredecessor ? \r\n                                                    <>\r\n                                                        <Grid item xs={12} >\r\n                                                            <Box sx={{display: 'flex', flexWrap: 'wrap'}}>\r\n                                                                {previewPredecessor.map((item, index) => (\r\n                                                                    <Typography variant='subtitle1' sx={{ml: 0.5, fontSize: '1.1rem', color: 'mediumblue', fontWeight: 'bolder'}} key={index} >{`${item.categoryContentQuestionName}: ${item.categoryContentAnswer ? 'c' : ''} ${item.categoryContentNote !== null ? `${item.categoryContentNote}` : ''}, `}</Typography>\r\n                                                                ))}\r\n                                                            </Box>\r\n                                                            \r\n                                                        </Grid> \r\n                                                    </>\r\n                                                    :\r\n                                                    null\r\n                                                }\r\n                                            </Grid>\r\n                                        </>\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/* ni dung khm */}\r\n                            <div className='container-content-examining'>\r\n                                {\r\n                                    loadingPrevDataExamining ? \r\n                                        <>\r\n                                            <Box sx={{height: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\r\n                                                <CircularProgress />\r\n                                                <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu k khm gn nht, hy ch mt cht...</Typography>\r\n                                            </Box>\r\n                                        </>\r\n                                    :\r\n                                    prevDataExamining ? \r\n                                        prevDataExamining.healthRecords.length === 1 && prevDataExamining.healthRecords[0].medicalBookId === null ? \r\n                                            <Box sx={{height: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\r\n                                                <Typography variant='h6'>Bnh nhn khng c k khm trc</Typography>\r\n                                            </Box>\r\n                                        :\r\n                                            <div className='content-examining'><PreviewLastExamining prevDataExamining={prevDataExamining} /></div>\r\n                                    :\r\n                                        null\r\n                                }\r\n                                \r\n                                {categorySelectedExamining.categoryContents ? \r\n                                    <>\r\n                                        <div className='content-examining'>\r\n                                            {loadingContentsExamining ? \r\n                                                <>\r\n                                                    <Box sx={{height: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\r\n                                                        <CircularProgress />\r\n                                                        <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu s khm bnh, hy ch mt cht...</Typography>\r\n                                                    </Box>\r\n                                                </>\r\n                                                :\r\n                                                <>\r\n                                                    {categorySelectedExamining.newCategoryPre === true && categorySelectedExamining.isLock === true ? \r\n                                                        <Box sx={{height: '100%', display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\r\n                                                            <Typography variant='h6'>Bnh nhn khng c tin cn ang c theo di  mc ny</Typography>\r\n                                                        </Box>\r\n                                                    :\r\n                                                        contentCategorySelectedExamining.healthRecordsContentsType !== 'tree' && healthRecordsContents.length === 0 && dataPantientsReadyExamining.isContinueExam === false ? \r\n                                                            categorySelectedExamining.categoryContents.map((categoryContentsItem, categoryContentsIndex) => (\r\n                                                                <Box key={categoryContentsIndex} sx={categoryContentsItem.categoryContentTitle === null ? {marginTop: '30px'} : {}}>\r\n\r\n                                                                    <Typography variant='h6' sx={{fontWeight: 'bolder', textAlign: 'center', fontSize: '1.2rem', mb: 0.2}}>{categoryContentsItem.categoryContentTitle || ''}</Typography>\r\n                                                                    {categoryContentsItem.categoryContentQuestions.map((questionItem, questionIndex) => (\r\n                                                                        <Box key={`categoryContentQuestionName ${questionIndex}`}>\r\n                                                                            <Grid container rowSpacing={0}>\r\n                                                                                {questionIndex === 0 ? \r\n                                                                                    <>\r\n                                                                                        <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7}}>\r\n                                                                                            <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{categoryContentsItem.categoryContentName}</Typography>\r\n                                                                                        </Grid>\r\n\r\n                                                                                        {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                            <>\r\n                                                                                                <Grid item xs={1} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7, display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n                                                                                                    <CheckBoxIcon sx={{fontSize: '1.22rem', color: 'gray'}}/><Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', margin: 'auto', lineHeight: '1.6'}}>{categoryContentsItem.categoryContentCheck}</Typography>\r\n                                                                                                </Grid>\r\n\r\n                                                                                                <Grid item xs={7} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                                    <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', ml: 0.5}}>{categoryContentsItem.categoryContentText}</Typography>\r\n                                                                                                </Grid>\r\n                                                                                            </>\r\n                                                                                            : \r\n                                                                                                <Grid item xs={8} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                                    <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{categoryContentsItem.categoryContentText}</Typography>\r\n                                                                                                </Grid>\r\n                                                                                        }                                                                             \r\n                                                                                    </> \r\n                                                                                    : \r\n                                                                                    null\r\n                                                                                }\r\n                                                                                \r\n                                                                                <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', alignItems: 'center'}}>\r\n                                                                                    <Typography variant='subtitle1' sx={{fontSize: '1.2rem'}}>{questionItem.categoryContentQuestionName}</Typography>\r\n                                                                                </Grid>\r\n\r\n                                                                                {questionItem.categoryContentQuestionType === 'check' ? \r\n                                                                                    <>\r\n                                                                                        <Grid item xs={1} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center'}}>\r\n                                                                                            <Checkbox disabled={categorySelectedExamining.isLock === true ? true : false} \r\n                                                                                            checked={questionItem.categoryContentAnswer === true ? true : false } \r\n                                                                                            classes={{ root: classes.root }} color='error' \r\n                                                                                            sx={{'& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem'}}} \r\n                                                                                            onClick={() => \r\n                                                                                                dataPantientsReadyExamining.editExamining === true && categorySelectedExamining.newCategoryPre === false || dataPantientsReadyExamining.backRegister === true && categorySelectedExamining.newCategoryPre === false ? handleAnswerCheckQuestionPredecessorForReExamOrBackExam(categoryContentsIndex, questionIndex, questionItem.categoryContentAnswer) : handleAnswerCheckQuestion(categoryContentsIndex, questionIndex, questionItem.categoryContentAnswer)} />\r\n                                                                                        </Grid>\r\n\r\n                                                                                        <Grid item xs={7} >\r\n                                                                                            <div className='textfield-for-answer'>\r\n                                                                                                <div className='suggest-note' key={`question ${questionIndex} - category ${categorySelectedExamining.categoryOrder} - categoryPresOrder ${contentCategorySelectedExamining.categoryPresOrder} - categoryContentOrder ${categoryContentsIndex} - isLock ${contentCategorySelectedExamining.isLock} - questionOrder ${questionItem.categoryContentQuestionOrder}`} >                                                                          \r\n                                                                                                    <TextareaAutosize className='textarea-autosize' rows={1} disabled={categorySelectedExamining.isLock === true ? true : false} style={{ fontSize: '1.2rem'}}\r\n                                                                                                        onChange={(e) => dataPantientsReadyExamining.editExamining === true && categorySelectedExamining.newCategoryPre === false || dataPantientsReadyExamining.backRegister === true && categorySelectedExamining.newCategoryPre === false ? handleNoteCheckQuestionPredecessorForReExamOrBackExam(categoryContentsIndex, questionIndex, e.target.value) : handleNoteCheckQuestion(categoryContentsIndex, questionIndex, e.target.value)}\r\n                                                                                                        defaultValue={questionItem.categoryContentNote}\r\n                                                                                                    />\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                        </Grid>\r\n                                                                                    </>   \r\n                                                                                    :\r\n                                                                                    <>\r\n                                                                                        {categorySelectedExamining.categoryOrder === 4 ? \r\n                                                                                            <>\r\n                                                                                                <Grid item xs={8} >\r\n                                                                                                    <div className='textfield-for-answer'>\r\n                                                                                                        <div className='suggest-note' key={`question ${questionIndex} - category ${categorySelectedExamining.categoryOrder} - categoryPresOrder ${contentCategorySelectedExamining.categoryPresOrder} - categoryContentOrder ${categoryContentsIndex} - isLock ${contentCategorySelectedExamining.isLock} - questionOrder ${questionItem.categoryContentQuestionOrder}`} >                                                                          \r\n                                                                                                            <TextareaAutosize className='textarea-autosize' rows={1} disabled={categorySelectedExamining.isLock === true ? true : false} style={{ fontSize: '1.2rem'}}\r\n                                                                                                                onChange={(e) => dataPantientsReadyExamining.editExamining === true && categorySelectedExamining.newCategoryPre === false || dataPantientsReadyExamining.backRegister === true && categorySelectedExamining.newCategoryPre === false ? handleNoteValueQuestionPredecessorForReExamOrBackExam(categoryContentsIndex, questionIndex, e.target.value) : handleAnswerValueQuestion(categoryContentsIndex, questionIndex, e.target.value)} \r\n                                                                                                                defaultValue={questionItem.categoryContentNote}\r\n                                                                                                            />\r\n                                                                                                        </div>\r\n                                                                                                    </div>\r\n                                                                                                </Grid>\r\n                                                                                            </>\r\n                                                                                            :\r\n                                                                                            <>\r\n                                                                                                <Grid item xs={8}>\r\n                                                                                                    <div className='textfield-for-answer' key={`question ${questionIndex} - category ${categorySelectedExamining.categoryOrder} - categoryPresOrder ${contentCategorySelectedExamining.categoryPresOrder} - isLock ${contentCategorySelectedExamining.isLock} - questionOrder ${questionItem.categoryContentQuestionOrder}`} >\r\n                                                                                                        <input type='text' disabled={categorySelectedExamining.isLock === true ? true : false}\r\n                                                                                                            className='value-for-answer' \r\n                                                                                                            onChange={(e) => dataPantientsReadyExamining.editExamining === true && categorySelectedExamining.newCategoryPre === false || dataPantientsReadyExamining.backRegister === true && categorySelectedExamining.newCategoryPre === false ? handleNoteValueQuestionPredecessorForReExamOrBackExam(categoryContentsIndex, questionIndex, e.target.value) : handleAnswerValueQuestion(categoryContentsIndex, questionIndex, e.target.value)} \r\n                                                                                                            defaultValue={questionItem.categoryContentNote} \r\n                                                                                                        />\r\n                                                                                                    </div>\r\n                                                                                                </Grid>\r\n                                                                                            </>\r\n                                                                                        }\r\n                                                                                    </>\r\n                                                                                }\r\n                                                                                \r\n                                                                            </Grid>\r\n                                                                        </Box>\r\n                                                                    ))}\r\n                                                                </Box>\r\n                                                            ))\r\n                                                        :\r\n                                                            contentCategorySelectedExamining.healthRecordsContentsType === 'tree' && healthRecordsContents.length === 0 && dataPantientsReadyExamining.isContinueExam === false ? \r\n                                                                <>\r\n                                                                    <Typography variant='h6' sx={{fontWeight: 'bolder', textAlign: 'center', fontSize: '1.2rem', mb: 0.2}}>Khm v theo di sc khe nh k</Typography>\r\n                                                                    <TableContainer component={Paper}>\r\n                                                                        <Table stickyHeader>\r\n                                                                            <TableHead>\r\n                                                                                <TableRow sx={{\"& th\": {color: \"rgba(96, 96, 96)\", backgroundColor: \"pink\"}}}>\r\n                                                                                    <TableCell align='left' sx={{fontSize: '0.9rem', color: 'black'}}>K khm</TableCell>\r\n                                                                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Trng thi</TableCell>\r\n                                                                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Ngy khm</TableCell>\r\n                                                                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Bc s khm</TableCell>\r\n                                                                                    <TableCell align=\"left\" sx={{fontSize: '0.9rem'}}>Kt lun</TableCell>\r\n                                                                                </TableRow>\r\n                                                                            </TableHead>\r\n                                                                            <TableBody sx={{borderRadius: '0px'}}>\r\n                                                                                {contentCategorySelectedExamining.categoryContents.map((healthRecordsItem, healthRecordsIndex) => (\r\n                                                                                    <TableRow hover role=\"checkbox\" key={healthRecordsIndex}>\r\n                                                                                        <TableCell align='left' sx={{width: '158px'}}><DescriptionIcon sx={{mr: 0.5, mb: 0.4, color: 'dodgerblue'}}/>{healthRecordsItem.examinationName}</TableCell>\r\n                                                                                        <TableCell align='left' sx={{width: '144px'}}>{handleRenderExamsStatus(healthRecordsItem.state)}</TableCell>\r\n                                                                                        <TableCell align='left' sx={{width: '108px'}}>{moment(healthRecordsItem.timeRegister).format(\"DD/MM/YYYY\")}</TableCell>\r\n                                                                                        <TableCell align='left' sx={{width: '115px'}}>{healthRecordsItem.doctorFullName}</TableCell>\r\n                                                                                        <TableCell align='left' sx={{width: 'auto'}}>{healthRecordsItem.conclusion}</TableCell>\r\n                                                                                    </TableRow>\r\n                                                                                ))}\r\n                                                                            </TableBody>\r\n                                                                        </Table>\r\n                                                                    </TableContainer>\r\n                                                                </>\r\n                                                            :\r\n                                                                \r\n                                                                <>\r\n                                                                    <Typography variant='h6' sx={{fontWeight: 'bolder', textAlign: 'center', fontSize: '1.2rem', lineHeight: 1, mt: 1}}>{currentHealthRecordExamining ? currentHealthRecordExamining.healthRecordsName : ''}</Typography>\r\n                                                                    <div className='health-record-content'>\r\n                                                                        {currentHealthRecordExamining ? \r\n                                                                            <List sx={{p: 0}}>\r\n                                                                                {currentHealthRecordExamining.categoryPatients.map((categoryPatientsItem, categoryPatientsIndex) => (\r\n                                                                                    <div key={`categoryPatients ${categoryPatientsIndex}`}>\r\n                                                                                        <ListItemButton     \r\n                                                                                            sx={{pt: '0px', pb: '0px', borderRadius: '8px', ':hover': {backgroundColor: 'rgba(0, 0, 0, 0.1)'}}}\r\n                                                                                            onClick={() => handleOpenHealthRecordsItem(categoryPatientsIndex)}\r\n                                                                                        >\r\n                                                                                            <Box sx={{display: 'flex', alignItems: 'center'}}>\r\n                                                                                                <ListItemIcon sx={{minWidth: '30px', '& .MuiSvgIcon-fontSizeMedium': {fontSize: '1rem', color: '#2962ff', transform: openCollapseHealthRecordsItem[categoryPatientsIndex] === true ? 'rotate(90deg)' : 'rotate(0deg)'}}}><SendIcon /></ListItemIcon>\r\n                                                                                                <ListItemText primary={categoryPatientsItem.categoryName} sx={{'& .MuiListItemText-primary': {fontSize: '1.25rem', fontWeight: 'bolder', color: 'deeppink'}}}/>\r\n                                                                                            </Box>\r\n                                                                                        </ListItemButton>\r\n\r\n                                                                                        <Collapse in={openCollapseHealthRecordsItem[categoryPatientsIndex]} timeout=\"auto\" unmountOnExit>\r\n                                                                                            {categoryPatientsItem.categoryContents.map((categoryPatientsContentsItem, categoryPatientsContentsIndex) => (\r\n                                                                                                <div className='header-health-record' key={categoryPatientsContentsIndex} style={{marginTop: '15px', marginBottom: '15px', border: '2px solid #00bcd4', borderRadius: '20px'}}>\r\n                                                                                                    <Typography variant='subtitle1' sx={{fontWeight: 'bolder', textAlign: 'center'}}>{categoryPatientsContentsItem.categoryContentTitle}</Typography>\r\n                                                                                                \r\n                                                                                                    <div className='content-health-record' style={{padding: '10px'}} >  \r\n                                                                                                        <Grid container rowSpacing={0}>\r\n                                                                                                            <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7}}>\r\n                                                                                                                <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder'}}>{categoryPatientsContentsItem.categoryContentName}</Typography>\r\n                                                                                                            </Grid>\r\n\r\n                                                                                                            <Grid item xs={3} sx={{border: '2px solid rgb(218,220,224)', borderRight: '0px', p: 0.7, display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n                                                                                                                <CheckBoxIcon sx={{fontSize: '1.2rem', color: 'gray', mr: 0.4}}/>\r\n                                                                                                                <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', lineHeight: '1.6'}}>{categoryPatientsContentsItem.categoryContentCheck}</Typography>\r\n                                                                                                            </Grid>\r\n                                                                                                        \r\n                                                                                                            <Grid item xs={5} sx={{border: '2px solid rgb(218,220,224)', p: 0.7}}>\r\n                                                                                                                <Typography variant='subtitle1' sx={{color: 'blue', fontWeight: 'bolder', ml: 0.5}}>{categoryPatientsContentsItem.categoryContentText}</Typography>\r\n                                                                                                            </Grid> \r\n\r\n                                                                                                            {categoryPatientsContentsItem.categoryContentQuestions.map((questionItem, questionIndex) => (\r\n                                                                                                                <Box key={`questionItem ${questionIndex} healthRecordsName ${contentCategorySelectedExamining.healthRecordsName}`} style={{display: 'flex', width: '100%'}}>\r\n                                                                                                                    <Grid item xs={4} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', alignItems: 'center'}}>\r\n                                                                                                                        <Typography variant='subtitle1' sx={{fontSize: '1rem'}}>{questionItem.categoryContentQuestionName}</Typography>\r\n                                                                                                                    </Grid>    \r\n\r\n                                                                                                                    {questionItem.categoryContentQuestionType === 'check' ?\r\n                                                                                                                        <>\r\n                                                                                                                            <Grid item xs={3} sx={{border: '2px solid rgb(218,220,224)', borderTop: '0px', borderRight: '0px', p: 0.5, display: 'flex', justifyContent: 'center'}}>\r\n                                                                                                                                <Checkbox classes={{ root: classes.root }} checked={questionItem.categoryContentAnswer === true ? true : false }\r\n                                                                                                                                    disabled={currentHealthRecordExamining.newMedicalBook === false ? true : false}\r\n                                                                                                                                    sx={{'& .MuiSvgIcon-fontSizeMedium': {fontSize: '1.2rem'}}} color='error'\r\n                                                                                                                                    onClick={(e) => handleAnswerCheckQuestionHealthRecords(categoryPatientsIndex, categoryPatientsContentsIndex, questionIndex, questionItem.categoryContentAnswer)} \r\n                                                                                                                                />\r\n                                                                                                                            </Grid>\r\n                                                                                                                    \r\n                                                                                                                            <Grid item xs={5} >\r\n                                                                                                                                <div className='note-for-answer'>\r\n                                                                                                                                    <div className='suggest-note' key={`current ${categoryPatientsItem.currentHealthRecordsContent}-${questionIndex} examinationName ${currentHealthRecordExamining.healthRecordsName}`}>                                                                          \r\n                                                                                                                                        <TextareaAutosize className='textarea-autosize' rows={1} defaultValue={questionItem.categoryContentNote}\r\n                                                                                                                                            disabled={currentHealthRecordExamining.newMedicalBook === false ? true : false}\r\n                                                                                                                                            onChange={(e) => handleNoteCheckQuestionHealthRecords(categoryPatientsIndex, categoryPatientsContentsIndex, questionIndex, e.target.value)}    \r\n                                                                                                                                        />\r\n                                                                                                                                    </div>\r\n                                                                                                                                </div>\r\n                                                                                                                            </Grid>\r\n                                                                                                                        </>\r\n                                                                                                                    :\r\n                                                                                                                        <>\r\n                                                                                                                            <Grid item xs={8} >\r\n                                                                                                                                <div className='note-for-answer'>\r\n                                                                                                                                    <div className='suggest-note' key={`current ${categoryPatientsItem.currentHealthRecordsContent}-${questionIndex} examinationName ${currentHealthRecordExamining.healthRecordsName}`}>                                                                          \r\n                                                                                                                                        <TextareaAutosize className='textarea-autosize' rows={1} defaultValue={questionItem.categoryContentNote}\r\n                                                                                                                                            disabled={currentHealthRecordExamining.newMedicalBook === false ? true : false}\r\n                                                                                                                                            onChange={(e) => handleNoteCheckQuestionHealthRecords(categoryPatientsIndex, categoryPatientsContentsIndex, questionIndex, e.target.value)}    \r\n                                                                                                                                        />\r\n                                                                                                                                    </div>\r\n                                                                                                                                </div>\r\n                                                                                                                            </Grid>\r\n                                                                                                                        </>\r\n                                                                                                                    }\r\n                                                                                                                </Box>\r\n                                                                                                            ))}\r\n                                                                                                        </Grid>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                        ))}\r\n                                                                                    </Collapse>\r\n                                                                                </div>\r\n                                                                            ))}\r\n                                                                            </List>\r\n                                                                        :\r\n                                                                            null\r\n                                                                        }\r\n                                                                        \r\n\r\n                                                                        {currentHealthRecordExamining ?\r\n                                                                            currentHealthRecordExamining.conclusion !== null ?\r\n                                                                            <>  \r\n                                                                                <div className='conclusion' style={{marginLeft: '16px', marginTop: '4px'}}>\r\n                                                                                    <Typography variant='h6' sx={{color: 'blue', fontWeight: 'bolder'}}>{`Kt lun ca bc s: ${currentHealthRecordExamining.conclusion}`}</Typography>\r\n                                                                                </div>\r\n                                                                            </>\r\n                                                                            :\r\n                                                                                null\r\n                                                                        :\r\n                                                                            null\r\n                                                                        }\r\n                                                                        \r\n                                                                    </div>\r\n\r\n                                                                </>\r\n                                                    }\r\n                                                </>\r\n                                            }\r\n                                        </div>\r\n                                    </>\r\n                                :\r\n                                    null\r\n                                }\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Box>\r\n            </Container>\r\n\r\n            <CompleteExamining openModalCompleteExamining={openModalCompleteExamining} setOpenModalCompleteExamining={setOpenModalCompleteExamining} \r\n                handleCompleteExaminingForPantient={handleCompleteExaminingForPantient} dataExaminingForConclusion={dataExaminingForConclusion}\r\n            />\r\n            <AlertProcessingBackdrop \r\n                openAlertProcessingBackdrop={openAlertProcessingBackdrop} changeBackground={true}\r\n            />\r\n            {/* <AlertConfirm openAlertConfirmModal={openAlertConfirmModal.open} onCloseAlertConfirmModal={setOpenAlertConfirmModal} \r\n                titleConfirm={openAlertConfirmModal.title} setOpenModalCompleteExamining={setOpenModalCompleteExamining} \r\n            /> */}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MainDoctorExamining","import axios from \"axios\";\r\n\r\nconst backendURL = 'https://beknkpt2.dvtien.id.vn';\r\n\r\nconst createConfig = () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    // Thit lp tiu  \"Authorization\" trong yu cu Axios\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n    return config;\r\n}\r\n\r\nconst getReportPatient = async (dateSelectedReport) => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/Admin/GetReportPatient?dateStart=${dateSelectedReport.dateStart}&dateEnd=${dateSelectedReport.dateEnd}`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nconst getListUser = async () => {\r\n    const config = createConfig();\r\n    return await axios.get(`${backendURL}/api/UserAccount/GetUserAccounts`, config)\r\n    .then(function (response) {\r\n        return response.data\r\n    })\r\n    .catch(function (error) {\r\n        return error.response.status\r\n    })\r\n}\r\n\r\nexport {\r\n    getReportPatient, getListUser\r\n}","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport { DataGrid, GridToolbarExport, GridToolbarColumnsButton, GridToolbarDensitySelector, GridToolbarFilterButton, GridToolbarContainer, viVN } from '@mui/x-data-grid';\r\nimport Typography from '@mui/material/Typography';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Button from '@mui/material/Button';\r\n//mui datepicker\r\nimport { DemoContainer } from '@mui/x-date-pickers/internals/demo';\r\nimport { AdapterMoment } from '@mui/x-date-pickers/AdapterMoment';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\n//icon\r\nimport { RiFileExcel2Fill } from \"react-icons/ri\";\r\n//moment\r\nimport moment from 'moment';\r\nimport * as XLSX from 'xlsx';\r\n//api\r\nimport { getReportPatient } from '../../Service/StatisticsService';\r\n\r\nfunction MainDashboard() {\r\n    const { user, loading } = useContext(UserContext);\r\n\r\n    const history = useHistory();\r\n\r\n    const [dateSelectedReport, setDateSelectedReport] = useState({dateStart: '', dateEnd: ''})\r\n    const [mainDataDashboard, setMainDataDashboard] = useState([]);\r\n    const [loadingDataDashboard, setLoadingDataDashboard] = useState(false);\r\n\r\n    const typingRef = useRef(null);\r\n\r\n    const columns = [\r\n        { field: 'id', headerName: 'STT', width: 120, align: 'left', headerAlign: 'left', },\r\n        { field: 'fullName', headerName: 'H tn', width: 240, align: 'left', headerAlign: 'left', },\r\n        { field: 'dayExam', headerName: 'Ngy khm', width: 180, align: 'left', headerAlign: 'left', type: 'date' },\r\n        { field: 'gender', headerName: 'Gii tnh', width: 140, align: 'left', headerAlign: 'left' },\r\n        { field: 'dayOfBirth', headerName: 'Ngy sinh', width: 165, align: 'left', headerAlign: 'left', type: 'date' },\r\n        { field: 'examName', headerName: 'K khm', width: 170, align: 'left', headerAlign: 'left' },\r\n        { field: 'phone', headerName: 'in thoi', width: 170, type: 'number', align: 'left', headerAlign: 'left'},\r\n        { field: 'district', headerName: 'Qun/Huyn', width: 185, align: 'left', headerAlign: 'left' },\r\n        { field: 'province', headerName: 'Tnh/Thnh ph', width: 185, align: 'left', headerAlign: 'left' },\r\n        { field: 'address', headerName: 'a ch', width: 700, align: 'left', headerAlign: 'left' },\r\n    ];\r\n\r\n    // Hm x l xut file Excel\r\n    const handleExportExcel = () => {\r\n        // To li d liu vi cc tiu  ct ty chnh\r\n        const formattedRows = mainDataDashboard.map((row, index) => ({\r\n            'STT': index + 1,\r\n            'H tn': row.fullName, \r\n            'Ngy khm': row.dayExam,\r\n            'Gii tnh': row.gender,\r\n            'Ngy sinh': row.dayOfBirth,\r\n            'K khm': row.examName,\r\n            'in thoi': row.phone,\r\n            'Qun/Huyn': row.district,\r\n            'Tnh/Thnh ph': row.province,\r\n            'a ch': row.address\r\n          }));\r\n\r\n        // To worksheet t d liu  nh dng\r\n        const ws = XLSX.utils.json_to_sheet(formattedRows);\r\n\r\n        // To workbook v thm worksheet vo \r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, 'Data');\r\n\r\n        // Xut file Excel\r\n        XLSX.writeFile(wb, `Danh sch bnh nhn khm bnh t ${moment(dateSelectedReport.dateStart).format('DD-MM-YYYY')} n ${moment(dateSelectedReport.dateEnd).format('DD-MM-YYYY')}.xlsx`);\r\n    };\r\n\r\n    // Custom toolbar bao gm nt xut Excel\r\n    const CustomToolbar = ({ handleExportExcel }) => {\r\n        return (\r\n            <GridToolbarContainer >\r\n                {/* Cc chc nng ca GridToolbar mc nh */}\r\n                <GridToolbarColumnsButton sx={{fontSize: '16px'}}/>\r\n                <GridToolbarFilterButton sx={{fontSize: '16px'}}/>\r\n                <GridToolbarDensitySelector sx={{fontSize: '16px'}}/>\r\n                <Button variant=\"text\" startIcon={< RiFileExcel2Fill/>} onClick={handleExportExcel} sx={{fontSize: '16px'}}>Xut Excel</Button>\r\n            </GridToolbarContainer>\r\n        );\r\n    };\r\n\r\n    const onChangeDateStart = (value) => {\r\n        if(value){\r\n            const takenValue = value._d;\r\n\r\n            if(typingRef.current){\r\n                clearInterval(typingRef.current);\r\n            }\r\n\r\n            typingRef.current = setTimeout(() => {\r\n                const _dateSelectedReport = {...dateSelectedReport};\r\n                _dateSelectedReport.dateStart = moment(takenValue).format('YYYY-MM-DD');\r\n                setDateSelectedReport(_dateSelectedReport);\r\n            }, 200) \r\n        }\r\n    }\r\n\r\n    const onChangeDateEnd = (value) => {\r\n        if(value){\r\n            const takenValue = value._d;\r\n\r\n            if(typingRef.current){\r\n                clearInterval(typingRef.current);\r\n            }\r\n\r\n            typingRef.current = setTimeout(() => {\r\n                const _dateSelectedReport = {...dateSelectedReport};\r\n                _dateSelectedReport.dateEnd = moment(takenValue).format('YYYY-MM-DD');\r\n                setDateSelectedReport(_dateSelectedReport);\r\n            }, 200) \r\n        }\r\n    }\r\n\r\n    const handleGetReportPatient = async () => {\r\n        setLoadingDataDashboard(true);\r\n        await new Promise(resolve => setTimeout(resolve, 5 * 100));\r\n        const responseGetReportPatient = await getReportPatient(dateSelectedReport);\r\n        const editMainDataDashboard = responseGetReportPatient.map((item) => {\r\n            const dataReportPatient = {\r\n                patientId: item.patientId,\r\n                fullName: item.fullName,\r\n                dayExam: moment(item.dayExam).format('DD/MM/YYYY'),\r\n                gender: item.gender ? 'Nam' : 'N',\r\n                dayOfBirth: moment(item.dayOfBirth).format('DD/MM/YYYY'),\r\n                examName: item.examName,\r\n                phone: item.phone,\r\n                district: item.district,\r\n                province: item.province,\r\n                address: item.address\r\n            }\r\n            return dataReportPatient\r\n        })\r\n        setMainDataDashboard(editMainDataDashboard);\r\n        setLoadingDataDashboard(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(loading === false && user.isLogin){\r\n            if(user.positionName !== 'Admin'){\r\n                history.push('/404');\r\n            }\r\n        }\r\n    }, [loading, user])\r\n\r\n    useEffect(() => {\r\n        if(dateSelectedReport.dateStart !== '' && dateSelectedReport.dateEnd !== ''){\r\n            handleGetReportPatient();\r\n        }\r\n    }, [dateSelectedReport])\r\n\r\n    return (\r\n        <Container maxWidth=\"xl\" sx={{mt: 1}}>\r\n            <Box sx={{display: 'flex', justifyContent: 'center'}}>\r\n                <LocalizationProvider dateAdapter={AdapterMoment} adapterLocale=\"vi\">\r\n                    <DemoContainer components={['DatePicker']}> \r\n                        <DatePicker label=\"T ngy\" format='DD/MM/YYYY' disableFuture onChange={(value) => onChangeDateStart(value)}/> \r\n                        <DatePicker label=\"n ngy\" format='DD/MM/YYYY' disableFuture onChange={(value) => onChangeDateEnd(value)}/>                                   \r\n                    </DemoContainer>\r\n                </LocalizationProvider>\r\n            </Box>\r\n\r\n            <Box sx={{ height: 600, width: '100%', mt: 1.2 }}>\r\n                {loadingDataDashboard ? \r\n                    <>\r\n                        <Box sx={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', height: '80%'}}>\r\n                            <CircularProgress />\r\n                            <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu, hy ch mt cht...</Typography>\r\n                        </Box>  \r\n                    </>\r\n                    :\r\n                        mainDataDashboard.length !== 0 ?\r\n                            <>       \r\n                                <DataGrid \r\n                                    style={{ fontSize: '18px' }}\r\n                                    localeText={viVN.components.MuiDataGrid.defaultProps.localeText}\r\n                                    rows={mainDataDashboard.map((row, index) => ({\r\n                                        ...row,\r\n                                        id: index + 1,\r\n                                    }))}\r\n                                    columns={columns}\r\n                                    pageSizeOptions={[1]}\r\n                                    components={{\r\n                                        Toolbar: CustomToolbar, // Chn toolbar vo y\r\n                                      }}\r\n                                      componentsProps={{\r\n                                        toolbar: { handleExportExcel }, // Truyn hm export vo props ca toolbar\r\n                                      }}\r\n                                    disableRowSelectionOnClick\r\n                                    sx={{\r\n                                        '.MuiTablePagination-selectLabel': {\r\n                                            marginBottom: '3px',\r\n                                        },\r\n                                        '.MuiTablePagination-displayedRows': {\r\n                                            marginBottom: '3px',\r\n                                        },\r\n                                    }}\r\n                                />\r\n                            </>\r\n                        :\r\n                           <h5 style={{textAlign: 'center', color: 'blue'}}>Hy chn khong ngy khm  ly d liu thng k</h5>\r\n                }\r\n            </Box>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default MainDashboard","import React, { useState, useContext, useEffect } from 'react';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport Autocomplete from '@mui/material/Autocomplete';\r\nimport TextField from '@mui/material/TextField';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\n\r\nfunction AddUser() {\r\n    return (\r\n        <div>AddUser</div>\r\n    )\r\n}\r\n\r\nexport default AddUser","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n//context\r\nimport { UserContext } from '../../context/UserContext';\r\n//modal add user\r\nimport AddUser from '../ManageAddUser/AddUser';\r\n//mui theme\r\nimport Container from '@mui/material/Container';\r\nimport Box from '@mui/material/Box';\r\nimport { DataGrid, GridToolbarExport, GridToolbarColumnsButton, GridToolbarDensitySelector, GridToolbarFilterButton, GridToolbarContainer, viVN } from '@mui/x-data-grid';\r\nimport Typography from '@mui/material/Typography';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Button from '@mui/material/Button';\r\n//icon\r\nimport { HiUserAdd } from \"react-icons/hi\";\r\n//api\r\nimport { getListUser } from '../../Service/StatisticsService';\r\n\r\n\r\nfunction MainListUser() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [listUser, setListUser] = useState([]);\r\n\r\n    const [openModalAddUser, setOpenModalAddlUser] = useState(false);\r\n\r\n    const columns = [\r\n        { field: 'userId', headerName: 'userId', width: 120, align: 'left', headerAlign: 'left', },\r\n        { field: 'userFullName', headerName: 'H tn', width: 240, align: 'left', headerAlign: 'left', },\r\n        { field: 'email', headerName: 'Email', width: 180, align: 'left', headerAlign: 'left', },\r\n        { field: 'positionName', headerName: 'V tr', width: 140, align: 'left', headerAlign: 'left' },\r\n        { field: 'userIsActive', headerName: 'Trng thi', width: 165, align: 'left', headerAlign: 'left', },\r\n    ];\r\n\r\n    // Custom toolbar bao gm nt thm user\r\n    const CustomToolbar = ({ handleExportExcel }) => {\r\n        return (\r\n            <GridToolbarContainer >\r\n                {/* Cc chc nng ca GridToolbar mc nh */}\r\n                <GridToolbarColumnsButton sx={{fontSize: '16px'}}/>\r\n                <GridToolbarFilterButton sx={{fontSize: '16px'}}/>\r\n                <GridToolbarDensitySelector sx={{fontSize: '16px'}}/>\r\n                <Button variant=\"text\" startIcon={<HiUserAdd/>} onClick={handleExportExcel} sx={{fontSize: '16px'}}>Thm ngi dng</Button>\r\n            </GridToolbarContainer>\r\n        );\r\n    };\r\n\r\n    const handleOpenModalAddUser = () => {\r\n        setOpenModalAddlUser(true);\r\n    }\r\n\r\n    const handleGetListUser = async () => {\r\n        setLoading(true);\r\n        const responseGetListUser = await getListUser();\r\n        setListUser(responseGetListUser);\r\n        setLoading(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleGetListUser();\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Box>\r\n                {loading ? \r\n                    <>\r\n                        <Box sx={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column', height: '80%'}}>\r\n                            <CircularProgress />\r\n                            <Typography variant='subtitle1' sx={{mt: 1}}>ang ti d liu, hy ch mt cht...</Typography>\r\n                        </Box>  \r\n                    </>\r\n                    :\r\n                    <>\r\n                        <>       \r\n                            <DataGrid \r\n                                style={{ fontSize: '18px' }}\r\n                                localeText={viVN.components.MuiDataGrid.defaultProps.localeText}\r\n                                rows={listUser.map((row, index) => ({\r\n                                    ...row,\r\n                                    id: index + 1,\r\n                                }))}\r\n                                columns={columns}\r\n                                pageSizeOptions={[1]}\r\n                                components={{\r\n                                    Toolbar: CustomToolbar, // Chn toolbar vo y\r\n                                }}\r\n                                componentsProps={{\r\n                                    toolbar: { handleOpenModalAddUser }, // Truyn hm export vo props ca toolbar\r\n                                }}\r\n                                disableRowSelectionOnClick\r\n                                sx={{\r\n                                    '.MuiTablePagination-selectLabel': {\r\n                                        marginBottom: '3px',\r\n                                    },\r\n                                    '.MuiTablePagination-displayedRows': {\r\n                                        marginBottom: '3px',\r\n                                    },\r\n                                }}\r\n                            />\r\n                        </>\r\n                    </>\r\n                }\r\n            </Box>\r\n            <AddUser openModalAddUser={openModalAddUser} setOpenModalUser={setOpenModalAddlUser}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MainListUser","import { BrowserRouter, Route, Link, Switch, NavLink, HashRouter } from \"react-router-dom\";\nimport PrivateRoutes from \"./PrivateRoutes\";\nimport Header from \"../components/Nav/Header.jsx\";\nimport Page404 from \"../components/ErrorPage/Page404\";\nimport Home from \"../components/Home/Home.jsx\";\nimport Login from \"../components/LoginAccount/Log-in\";\nimport MainMedicalRegister from \"../components/MedicalRegister/MainMedicalRegister.jsx\";\nimport MainAppointmentExamining from \"../components/MedicalAppointment/MainAppointmentExamining.jsx\";\nimport MainDoctorExamining from \"../components/DoctorExamining/MainDoctorExamining.jsx\";\nimport MainDashboard from \"../components/Dashboard/MainDashboard.jsx\";\nimport MainListUser from \"../components/Dashboard/MainListUser.jsx\";\n\nconst AppRoutes = (props) => {\n  return (\n    <>\n      <HashRouter>\n        {/* <Header />{\" \"} */}\n        <Switch>\n          <Route exact path=\"/\"><Home /></Route>\n          <Route path=\"/login\"><Login /></Route>\n          <PrivateRoutes path=\"/medicalregister\" component={MainMedicalRegister}></PrivateRoutes>\n          <PrivateRoutes path=\"/doctor-examining\" component={MainDoctorExamining}></PrivateRoutes>\n          <PrivateRoutes path=\"/remind-examining\" component={MainAppointmentExamining}></PrivateRoutes>\n          <PrivateRoutes path=\"/dashboard\" component={MainDashboard}></PrivateRoutes>\n          <PrivateRoutes path=\"/list-user\" component={MainListUser}></PrivateRoutes>\n          <Route path=\"*\"><Page404 />{\" \"}</Route>\n          {/* <PrivateRoutes path=\"/users\" component={Users} /> */}\n        </Switch>\n      </HashRouter>\n    </>\n  );\n};\nexport default AppRoutes;\n","import \"./App.scss\";\nimport { ToastContainer } from \"react-toastify\";\nimport React, { useEffect, useState, useHistory } from \"react\";\nimport { HashRouter, BrowserRouter } from \"react-router-dom\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Header from \"./components/Nav/Header\";\nimport AppRoutes from \"./routes/AppRoutes\";\n\nfunction App() {\n\n  return (\n    <>\n      <HashRouter>\n        <div className=\"header-container\">\n          <Header />\n        </div>\n\n        <div className=\"app-container\">\n          <AppRoutes />\n        </div>\n      </HashRouter>\n\n      <ToastContainer\n        position=\"bottom-center\"\n        autoClose={4000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        draggable\n        pauseOnHover\n        theme=\"light\"\n      />\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { UserProvider } from \"./context/UserContext\";\n\nReactDOM.render(\n\n  <React.StrictMode>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </React.StrictMode>,\n\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}