(this["webpackJsonpknkpt_bvnd2-app"]=this["webpackJsonpknkpt_bvnd2-app"]||[]).push([[0],{287:function(e,t,n){},356:function(e,t,n){},385:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){},389:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var o=n(2),a=n.n(o),r=n(74),i=n.n(r),s=(n(356),n(27)),c=n(60),l=(n(272),n(297)),d=n(56),h=n(482),p=n(488),u=n(529),g=n(528),x=n(51),m=n.n(x),j=n(519),b=n(531),f=n(147),O=n.n(f),y=n(148),C=n.n(y),v=n(324),N=n(513),w=n(523),k=n(40),I=n.n(k);const T="https://beknkpt2.dvtien.id.vn",S=()=>{const e=localStorage.getItem("jwt");return{headers:{Authorization:"Bearer ".concat(e)}}};var E=n(1);var P=function(e){const t={currentPassword:"",openCurrentPassword:!1,newPassword:"",openNewPassword:!1},[n,a]=Object(o.useState)(t),[r,i]=Object(o.useState)(!1),c=(n,o)=>{o&&"backdropClick"===o||(e.setIsDialogChangePasswordOpen(!1),e.setOpenModalChangePassword(!1),setTimeout((()=>{a(t)}),200))},l=async()=>{if(i(!0),await new Promise((e=>setTimeout(e,200))),(()=>{let e=!0;return""===n.currentPassword&&(s.b.warning("B\u1ea1n ch\u01b0a nh\u1eadp m\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i!",{toastId:"validateCurrentPassword"}),e=!1),""===n.newPassword&&(s.b.warning("B\u1ea1n ch\u01b0a nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi!",{toastId:"validateNewPassword"}),e=!1),e})()){const e={password:n.newPassword,passwordOld:n.currentPassword},t=await(async e=>{const t=localStorage.getItem("jwt");return await I.a.put("".concat(T,"/api/UserAccount/ChangePassword"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(e);400===t.status&&"T\xe0i kho\u1ea3n ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng ch\xednh x\xe1c !"===t.data?s.b.error("M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i kh\xf4ng ch\xednh x\xe1c.",{toastId:"handleChangePasswordError1"}):400===t.status?s.b.error(t.data,{toastId:"handleChangePasswordError2"}):200===t.status&&(s.b.success(t.data,{toastId:"handleChangePasswordSuccess"}),c())}i(!1)};return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(h.a,{maxWidth:"xs",fullWidth:!0,open:e.openModalChangePassword,onClose:(e,t)=>c(0,t),disableEscapeKeyDown:!0,children:[Object(E.jsx)(p.a,{sx:{m:0,p:1.4,fontWeight:"bolder",fontSize:"22px"},children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),Object(E.jsx)(g.a,{onClick:()=>c(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsx)(u.a,{dividers:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:r?Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(E.jsx)(w.a,{})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(j.a,{autoFocus:!0,label:"M\u1eadt kh\u1ea9u m\u1edbi",variant:"outlined",type:n.openNewPassword?"text":"password",sx:{width:"40ch",mb:2.5},onChange:e=>(e=>{const t={...n};t.newPassword=e,a(t)})(e.target.value),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:Object(E.jsxs)(g.a,{onClick:()=>{const e={...n};e.openNewPassword=!n.openNewPassword,a(e)},sx:{padding:"1px"},children:[" ",n.openNewPassword?Object(E.jsx)(O.a,{}):Object(E.jsx)(C.a,{})]})})}}),Object(E.jsx)(j.a,{label:"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",variant:"outlined",type:n.openCurrentPassword?"text":"password",sx:{width:"40ch",mb:2.5},onChange:e=>(e=>{const t={...n};t.currentPassword=e,a(t)})(e.target.value),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:Object(E.jsxs)(g.a,{onClick:()=>{const e={...n};e.openCurrentPassword=!n.openCurrentPassword,a(e)},sx:{padding:"1px"},children:[" ",n.openCurrentPassword?Object(E.jsx)(O.a,{}):Object(E.jsx)(C.a,{})]})})}}),Object(E.jsx)(v.a,{spacing:2,direction:"column",children:Object(E.jsx)(N.a,{sx:{height:"6vh",width:"20ch"},variant:"contained",color:"success",style:{margin:"auto"},onClick:()=>l(),children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"})})]})})]})})},M=n(408),B=n(517),D=n(170);var F=function(e){return Object(E.jsx)(M.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:e.changeBackground?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.6)"},open:e.openAlertProcessingBackdrop,children:Object(E.jsxs)(B.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(E.jsx)(w.a,{color:"inherit"}),Object(E.jsx)(D.a,{sx:{mt:1.4},variant:"subtitle1",children:e.alertTitle})]})})};const R=a.a.createContext(null),A=e=>{let{children:t}=e;Object(d.useHistory)();const n={isAuthenticated:!1,isLogin:!1,token:""},[a,r]=Object(o.useState)(n),[i,s]=Object(o.useState)(!0),[c,l]=Object(o.useState)(!1),[h,p]=Object(o.useState)(!1),[u,g]=Object(o.useState)(null),[x,m]=Object(o.useState)(!1),[j,b]=Object(o.useState)(!1),[f,O]=Object(o.useState)(!1),[y,C]=Object(o.useState)(!1),v=()=>{l(!1),p(!1),g(null)},N=()=>{let e=!1,t=localStorage.getItem("jwt");if(t){let n=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}})(t),o=new Date;return 1e3*n.exp<o.getTime()?(localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),sessionStorage.clear(),e):(e=!0,e)}return localStorage.removeItem("userLogin"),e};return Object(o.useEffect)((()=>{s(!0);const e=JSON.parse(localStorage.getItem("userLogin")),t=localStorage.getItem("jwt");if(e&&t){const t=N();t?r(e):!1===t&&r(n)}else localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),r(n);s(!1)}),[]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(R.Provider,{value:{user:a,loading:i,loadingContext:e=>{s(...e)},loginContext:e=>{r({...e}),s(!1)},logoutContext:()=>{r({...n})},alertVisible:c,triggerAlert:e=>{l(!0),p(!0),g((()=>e))},confirmAlert:()=>{u&&u(),p(!1),v()},resetAlert:v,isLogOutClick:h,isDialogChangePasswordOpen:j,setIsDialogChangePasswordOpen:b,isDialogChangeInfoUserOpen:f,setIsDialogChangeInfoUserOpen:O,isOldDiseaseWithNullCodeWard:y,setIsOldDiseaseWithNullCodeWard:C},children:t}),Object(E.jsx)(F,{openAlertProcessingBackdrop:x,alertTitle:"\u0110ang t\u1ea3i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"})]})};var Q=n(510);var z=function(e){const{loginContext:t}=Object(o.useContext)(R),n={userId:"",userName:"",userFullName:"",userEmail:"",userPosition:""},[a,r]=Object(o.useState)(!1),[i,c]=Object(o.useState)(n),[l,d]=Object(o.useState)({}),x=(t,o)=>{o&&"backdropClick"===o||(e.setOpenModalChangeUserInfo(!1),e.openModalChangeUserInfo&&!e.dataUserInfo?e.setIsDialogChangeInfoUserOpen(!1):e.setDataUserInfo(),d({}),c(n))},b=async()=>{r(!0),l.userId=i.userId;200===(await(async e=>{const t=localStorage.getItem("jwt");return await I.a.put("".concat(T,"/api/UserAccount/UpdateUserAccount?"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(l)).status&&(s.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",{toastId:"successUpdateUserAccount"}),e.setReloadComponent(!0),x()),r(!1)},f=async()=>{r(!0);const e=await(async e=>{const t=localStorage.getItem("jwt");return await I.a.put("".concat(T,"/api/UserAccount/EditUserLogin?"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(l);200===e.status?(e.data.token&&localStorage.setItem("jwt",e.data.token),setTimeout((()=>{const e={...i};for(const t in l)e.hasOwnProperty(t)&&(e[t]=l[t]);c(e),t(e),localStorage.setItem("userLogin",JSON.stringify({isAuthenticated:!0,isLogin:!0,...e})),s.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",{toastId:"successEditUserLogin"}),r(!1)}),500)):(s.b.error(e.data,{toastId:"errorEditUserLogin"}),r(!1))},O=async()=>{r(!0);const e=await(async()=>{const e=S();return await I.a.get("".concat(T,"/api/UserAccount/GetUserLogin"),e).then((function(e){return e.data})).catch((function(e){return e.response.status}))})();c(e),r(!1)};return Object(o.useEffect)((()=>{!0===e.openModalChangeUserInfo&&(e.dataUserInfo?(r(!0),setTimeout((()=>{c(e.dataUserInfo),r(!1)}),500)):O())}),[e.openModalChangeUserInfo,e.dataUserInfo]),Object(E.jsxs)(h.a,{maxWidth:"xs",fullWidth:!0,open:e.openModalChangeUserInfo,onClose:(e,t)=>x(0,t),disableEscapeKeyDown:!0,children:[Object(E.jsx)(p.a,{sx:{m:0,p:1.4,fontWeight:"bolder",fontSize:"22px",textAlign:"center"},children:"\u0110\u1ed5i th\xf4ng tin"}),Object(E.jsx)(g.a,{onClick:()=>x(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsx)(u.a,{dividers:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:a?Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(E.jsx)(w.a,{})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(j.a,{label:"H\u1ecd t\xean",variant:"outlined",sx:{width:"40ch",mb:2.5},defaultValue:i.userFullName,onChange:e=>{return t=e.target.value,void d((e=>(e.userFullName=t,{...e})));var t}}),Object(E.jsx)(j.a,{label:"T\xean \u0111\u0103ng nh\u1eadp",variant:"outlined",sx:{width:"40ch",mb:2.5},defaultValue:i.userName,onChange:e=>{return t=e.target.value,void d((e=>(e.userName=t,{...e})));var t}}),Object(E.jsx)(j.a,{label:"Email",variant:"outlined",sx:{width:"40ch",mb:2.5},defaultValue:i.userEmail,onChange:e=>{return t=e.target.value,void d((e=>(e.userEmail=t,{...e})));var t}}),"Admin"===i.userPosition?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Q.a,{options:[{id:"2",positionName:"B\xe1c s\u0129"},{id:"3",positionName:"Ti\u1ebfp nh\u1eadn"}],getOptionLabel:e=>e.positionName,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.positionName}),onChange:(e,t)=>((e,t)=>{d((e=>(e.userPosition=t.id,{...e})))})(0,t),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"V\u1ecb tr\xed"}),sx:{width:"45.95ch",mb:2.5}})}):null,Object(E.jsx)(v.a,{spacing:2,direction:"column",children:Object(E.jsx)(N.a,{sx:{height:"6vh",width:"20ch"},variant:"contained",color:"success",style:{margin:"auto"},onClick:()=>e.dataUserInfo?b():f(),children:"\u0110\u1ed5i th\xf4ng tin"})})]})})]})},W=n(524),L=n(525),Y=n(526),H=n(527),U=n(514),V=n.p+"static/media/logo.e5a4a234.png",K=n(322),G=n(406),J=n(298),q=n.n(J),_=n(300),X=n.n(_),Z=n(299),$=n.n(Z),ee=n(301),te=n.n(ee),ne=n(302),oe=n.n(ne),ae=n(505),re=n(42),ie=n(14);let se=null;const ce=async e=>{if(se)return se;se=(new ae.a).withUrl("".concat("https://beknkpt2.dvtien.id.vn","/notificationHub"),{accessTokenFactory:()=>e,transport:re.a.WebSockets|re.a.ServerSentEvents|re.a.LongPolling}).withAutomaticReconnect([0,2e3,1e4,3e4]).configureLogging(ie.a.Information).build();try{await se.start(),se.on("ReceiveMessage",(e=>{le&&le(e)}))}catch(t){setTimeout((()=>ce(e,le)),5e3)}},le=e=>{se&&se.on("ReceiveMessage",e)};var de=Object(d.withRouter)((function(e){const{user:t,logoutContext:n,triggerAlert:a,setIsDialogChangePasswordOpen:r,setIsDialogChangeInfoUserOpen:i,isOldDiseaseWithNullCodeWard:s}=Object(o.useContext)(R),h=Object(l.useLocation)(),p=Object(d.useHistory)(),[u,g]=Object(o.useState)(!1),[x,m]=Object(o.useState)(!1),[j,b]=Object(o.useState)(null),[f,O]=Object(o.useState)(null),y=localStorage.getItem("jwt"),C=Boolean(j),v=Boolean(f),w=()=>{O(null)},k=[{key:"medicalRegister",maxWidth:"114px",label:"\u0110\u0103ng k\xfd kh\xe1m",icon:Object(E.jsx)(q.a,{sx:{fontSize:30}}),LinkComponent:c.c,to:"/medicalregister"},{key:"remind-examining",maxWidth:"95px",label:"Nh\u1eafc kh\xe1m",icon:Object(E.jsx)($.a,{sx:{fontSize:30}}),LinkComponent:c.c,to:"/remind-examining"}],I=[{key:"examining",maxWidth:"100px",label:"Kh\xe1m b\u1ec7nh",icon:Object(E.jsx)(X.a,{sx:{fontSize:30}}),LinkComponent:c.c,to:"/doctor-examining"}],T=[{key:"statistical",maxWidth:"83px",label:"Th\u1ed1ng k\xea",icon:Object(E.jsx)(te.a,{sx:{fontSize:30}}),LinkComponent:c.c,to:"/dashboard"},{key:"manage",maxWidth:"83px",label:"Qu\u1ea3n l\xfd",icon:Object(E.jsx)(oe.a,{sx:{fontSize:30}})}],[S,M]=Object(o.useState)([]),D=(F=e.location.pathname,S.findIndex((e=>e.to===F)));var F;const A=()=>{const o=e.location.pathname;"Doctor"===t.positionName&&"doctor-examining"===o?a((async()=>{await(async()=>{if(se)try{await se.invoke("RemoveFromGroup")}catch(e){}})(),localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),n(),b(null),p.push("/login")})):(localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),n(),b(null),p.push("/login"))};return Object(o.useEffect)((()=>{}),[s]),Object(o.useEffect)((()=>{t&&("Nursing"===t.positionName?M(k):"Doctor"===t.positionName?M(I):"Admin"===t.positionName&&M(T))}),[t]),"/login"!==h.pathname?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(B.a,{sx:{width:"100%"},children:Object(E.jsx)(W.a,{sx:{position:"unset"},children:Object(E.jsxs)(L.a,{sx:{backgroundColor:"#cfe8fc",height:"78px"},children:[Object(E.jsx)(c.b,{to:"/",children:Object(E.jsx)(U.a,{src:V,sx:{width:62,height:62,mt:"auto",mb:"auto",mr:4}})}),t&&y?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Y.a,{showLabels:!0,value:D,sx:{display:"flex",justifyContent:"flex-start",backgroundColor:"#cfe8fc",flexGrow:1},children:S.map((e=>Object(E.jsx)(H.a,{label:e.label,icon:e.icon,LinkComponent:e.LinkComponent||"div",to:e.to||void 0,onClick:t=>((e,t)=>{"manage"===t&&O(e.currentTarget)})(t,e.key),sx:{color:"#000",maxWidth:e.maxWidth}},e.key)))}),Object(E.jsx)(K.a,{anchorEl:f,open:Boolean(v),onClose:()=>w(),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(E.jsx)(G.a,{onClick:()=>{return e="/manage-user",p.push(e),void w();var e},children:"Ng\u01b0\u1eddi d\xf9ng"})}),Object(E.jsx)(N.a,{onClick:e=>{return t=e,void(!0===s?t.preventDefault():b(t.currentTarget));var t},sx:{color:"#000",textTransform:"none"},children:t.userFullName}),Object(E.jsxs)(K.a,{anchorEl:j,open:C,onClose:()=>{b(null)},children:[Object(E.jsx)(G.a,{onClick:()=>[g(!0),r(!0),b(null)],children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),Object(E.jsx)(G.a,{onClick:()=>[m(!0),i(!0),b(null)],children:"\u0110\u1ed5i th\xf4ng tin"}),Object(E.jsx)(G.a,{onClick:A,children:"\u0110\u0103ng xu\u1ea5t"})]})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(B.a,{sx:{position:"absolute",right:22},children:Object(E.jsx)(c.c,{exact:!0,to:"/login",children:Object(E.jsx)(N.a,{sx:{textTransform:"none",color:"#000"},children:"\u0110\u0103ng nh\u1eadp"})})})})]})})}),Object(E.jsx)(P,{openModalChangePassword:u,setOpenModalChangePassword:g,setIsDialogChangePasswordOpen:r}),Object(E.jsx)(z,{openModalChangeUserInfo:x,setOpenModalChangeUserInfo:m,setIsDialogChangeInfoUserOpen:i})]}):Object(E.jsx)(E.Fragment,{})}));var he=e=>{const t=()=>{let e=!1;const t=localStorage.getItem("jwt");if(t){let n=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}})(t),o=new Date;return 1e3*n.exp<o.getTime()?(localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),sessionStorage.clear(),e):(e=!0,e)}return localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),e},n=localStorage.getItem("jwt");if(JSON.parse(localStorage.getItem("userLogin"))&&n){return!1===t()?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(d.Redirect,{to:"/login"})}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(d.Route,{path:e.path,component:e.component})})}return localStorage.removeItem("jwt"),localStorage.removeItem("userLogin"),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(d.Redirect,{to:"/login"})})};n(385);var pe=()=>{Object(d.useHistory)();return Object(E.jsx)("div",{children:Object(E.jsxs)("div",{className:"section",children:[Object(E.jsx)("h1",{className:"error",children:"404"}),Object(E.jsx)("div",{className:"page",children:"Trang m\xe0 b\u1ea1n \u0111ang truy c\u1eadp kh\xf4ng t\u1ed3n t\u1ea1i."})]})})},ue=n(532);var ge=function(){const{user:e,loading:t}=Object(o.useContext)(R);return Object(E.jsx)(ue.a,{children:Object(E.jsx)(B.a,{sx:{mt:1},children:!1===t&&e&&e.isLogin?"Nursing"===e.positionName?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(D.a,{variant:"subtitle1",sx:{ml:2,fontSize:"1.35rem"},children:["N\u1ebfu b\u1ea1n th\u1ea5y d\xf2ng ch\u1eef n\xe0y h\xe3y nh\u1ea5n v\xe0o ",Object(E.jsx)("span",{style:{fontWeight:"bolder",color:"blue"},children:'"\u0110\u0103ng k\xfd kh\xe1m"'})," \u1edf thanh menu c\xf3 logo c\u1ee7a b\u1ec7nh vi\u1ec7n \u0111\u1ec3 chuy\u1ec3n v\u1ec1 trang \u0111\u0103ng k\xfd kh\xe1m"]})}):"Doctor"===e.positionName?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:2,fontSize:"1.35rem"},children:"Ki\u1ec3m tra thanh menu (c\xf3 logo c\u1ee7a b\u1ec7nh vi\u1ec7n) b\xean g\xf3c ph\u1ea3i c\xf3 hi\u1ec7n t\xean ng\u01b0\u1eddi d\xf9ng"}),Object(E.jsxs)(D.a,{variant:"subtitle1",sx:{ml:2,fontSize:"1.35rem"},children:["N\u1ebfu \u0111\xfang t\xean b\xe1c s\u0129 \u0111ang kh\xe1m h\xe3y nh\u1ea5n v\xe0o ",Object(E.jsx)("span",{style:{fontWeight:"bolder",color:"blue"},children:'"Kh\xe1m b\u1ec7nh"'})," \u0111\u1ec3 chuy\u1ec3n v\u1ec1 trang kh\xe1m b\u1ec7nh"]}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:2,fontSize:"1.35rem"},children:"N\u1ebfu sai t\xean b\xe1c s\u0129 \u0111ang kh\xe1m h\xe3y nh\u1ea5n v\xe0o t\xean ng\u01b0\u1eddi d\xf9ng \u0111\xf3 s\u1ebd hi\u1ec7n ra menu nh\u1ecf, nh\u1ea5n \u0111\u0103ng xu\u1ea5t"})]}):null:Object(E.jsxs)(D.a,{variant:"subtitle1",sx:{ml:2,fontSize:"1.35rem"},children:["Nh\u1ea5n v\xe0o ",Object(E.jsx)("span",{style:{fontWeight:"bolder",color:"blue"},children:'"\u0110\u0103ng nh\u1eadp"'})," tr\xean thanh menu (c\xf3 logo c\u1ee7a b\u1ec7nh vi\u1ec7n) b\xean g\xf3c ph\u1ea3i"]})})})};var xe=e=>{const[t,n]=Object(o.useState)(!1),a=(t,n)=>{n&&"backdropClick"===n||e.setOpenModalRegister(!1)};return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(h.a,{maxWidth:"xs",fullWidth:!0,open:e.openModalRegister,onClose:(e,t)=>a(0,t),disableEscapeKeyDown:!0,children:[Object(E.jsx)(p.a,{sx:{m:0,p:1.4,fontWeight:"bolder",fontSize:"22px"},children:"T\u1ea1o t\xe0i kho\u1ea3n"}),Object(E.jsx)(g.a,{onClick:()=>a(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsxs)(u.a,{dividers:!0,children:[Object(E.jsx)(j.a,{label:"H\u1ecd t\xean",variant:"outlined",sx:{width:"46ch",mb:2.5}}),Object(E.jsx)(j.a,{label:"T\xe0i kho\u1ea3n",variant:"outlined",sx:{width:"46ch",mb:2.5}}),Object(E.jsx)(j.a,{label:"M\u1eadt kh\u1ea9u",variant:"outlined",type:t?"text":"password",sx:{width:"46ch",mb:2.5},InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:Object(E.jsxs)(g.a,{onClick:()=>n(!t),sx:{padding:"1px"},children:[" ",t?Object(E.jsx)(O.a,{}):Object(E.jsx)(C.a,{})]})})}}),Object(E.jsx)(Q.a,{options:[{id:"1",positionName:"\u0110i\u1ec1u d\u01b0\u1ee1ng"},{id:"2",positionName:"B\xe1c s\u0129"}].map((e=>e.positionName)),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"V\u1ecb tr\xed"}),sx:{width:"45.95ch",mb:2.5}}),Object(E.jsx)(v.a,{spacing:2,direction:"column",children:Object(E.jsx)(N.a,{sx:{height:"6vh",width:"20ch"},variant:"contained",color:"success",style:{margin:"auto"},onClick:()=>a(),children:"T\u1ea1o t\xe0i kho\u1ea3n"})})]})]})})};const me="https://beknkpt2.dvtien.id.vn",je=()=>{const e=localStorage.getItem("jwt");return{headers:{Authorization:"Bearer ".concat(e)}}},be=async e=>{const t=localStorage.getItem("jwt");return await I.a.post("".concat(me,"/api/Medical/BackRegister"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))},fe=async e=>{const t=localStorage.getItem("jwt");return await I.a.post("".concat(me,"/api/Medical/AddPredecessor"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))},Oe=async()=>{const e=localStorage.getItem("jwt");return await I.a.post("".concat(me,"/api/Notification/SendSignalRGroup?groupId=doctor"),!0,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data})).catch((function(e){return e.response}))},ye=async()=>{const e=je();return await I.a.get("".concat(me,"/api/Medical/GetRegistersByDateNow"),e).then((function(e){return e.data})).catch((function(e){return e.response.status}))},Ce=async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/GetExaminationsGiveRegister?dayOfBirth=").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))},ve=async(e,t,n,o)=>{const a=je();return await I.a.get("".concat(me,"/api/Medical/SearchPatients?patientCode=").concat(e,"&phone=").concat(t,"&fullName=").concat(n,"&dayOfBirth=").concat(o),a).then((function(e){return e.data})).catch((function(e){return e.response.status}))},Ne=async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/GetVaccinationByPatientId/").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))},we=async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/DetailPatient/").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))},ke=async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/GetMediacalBook?medicalRegisterId=").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response}))},Ie=async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/GetUpdatePredecessor/").concat(e),t).then((function(e){return e})).catch((function(e){return e.response}))},Te=async()=>{const e=je();return await I.a.get("".concat(me,"/api/Medical/GetAppointmentsNextWeek"),e).then((function(e){return e.data})).catch((function(e){return e.response.status}))},Se=async(e,t)=>{const n=localStorage.getItem("jwt");return await I.a.put("".concat(me,"/api/Medical/UpdateState?id=").concat(e,"&state=").concat(t),{},{headers:{"content-type":"text/plain; charset=utf-8",Authorization:"Bearer ".concat(n)}}).then((function(e){return e})).catch((function(e){return e.response}))},Ee=async(e,t)=>{const n=localStorage.getItem("jwt");return await I.a.put("".concat(me,"/api/Medical/UpdateStateAppointment/").concat(e.medicalBookId,"?appointmentDate=").concat(e.appointmentDate,"&stateAppointment=").concat(t),{},{headers:{"content-type":"text/plain; charset=utf-8",Authorization:"Bearer ".concat(n)}}).then((function(e){return e})).catch((function(e){return e.response}))};var Pe=()=>{const{user:e,loginContext:t}=Object(o.useContext)(R),n=Object(d.useHistory)(),[a,r]=Object(o.useState)(!1),[i,c]=Object(o.useState)({userName:"",password:""}),[l,h]=Object(o.useState)(!1),[p,u]=Object(o.useState)(!1),x=async()=>{if(""===i.userName)s.b.error("B\u1ea1n ch\u01b0a nh\u1eadp t\xe0i kho\u1ea3n!");else if(""===i.password)s.b.error("B\u1ea1n ch\u01b0a nh\u1eadp m\u1eadt kh\u1ea9u!");else{r(!0);const e=await(async(e,t)=>await I.a.post("".concat(T,"/api/UserAccount/Login"),{userName:e,password:t}).then((function(e){return e})).catch((function(e){return e.response})))(i.userName,i.password);if(200!==e.status)s.b.error(e.data),r(!1);else{"Doctor"===e.data.positionName&&await ce(e.data.tokenDTO.token),localStorage.setItem("jwt",e.data.tokenDTO.token);const o={isAuthenticated:!0,isLogin:!0,userId:e.data.userId,userName:e.data.userName,userFullName:e.data.userFullName,userEmail:e.data.userEmail,positionName:e.data.positionName};localStorage.setItem("userLogin",JSON.stringify(o)),t(o),"Nursing"===e.data.positionName?n.push("/medicalregister"):"Doctor"===e.data.positionName?n.push("/doctor-examining"):"Admin"===e.data.positionName&&n.push("/dashboard"),r(!1)}}};return Object(o.useEffect)((()=>{e&&!0===e.isAuthenticated&&n.push("/");const t=localStorage.getItem("jwt"),o=localStorage.getItem("userLogin");t&&o&&n.push("/")}),[]),Object(o.useEffect)((()=>{const e=e=>{a&&e.preventDefault()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[a]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(ue.a,{maxWidth:"sm",children:Object(E.jsx)(B.a,{sx:{mt:3,borderRadius:"25px"},children:Object(E.jsxs)(B.a,{sx:{p:7.6},children:[Object(E.jsx)(U.a,{src:V,sx:{width:120,height:120,ml:"auto",mr:"auto",mb:2}}),Object(E.jsx)(D.a,{sx:{textAlign:"center",textTransform:"uppercase",fontWeight:"bolder",fontSize:"1.15rem",mb:2,color:"#4caf50"},variant:"h5",children:"Ch\u01b0\u01a1ng tr\xecnh kh\xe1m nhi khoa ph\xe1t tri\u1ec3n"}),Object(E.jsxs)(B.a,{component:"form",autoComplete:"off",style:{textAlign:"center"},children:[Object(E.jsx)(j.a,{label:"T\xe0i kho\u1ea3n",variant:"outlined",sx:{width:"40ch",mb:2.5},onChange:e=>{return t=e.target.value,void c((e=>({...e,userName:t})));var t}}),Object(E.jsx)(j.a,{label:"M\u1eadt kh\u1ea9u",variant:"outlined",type:p?"text":"password",sx:{width:"40ch",mb:3},onChange:e=>{return t=e.target.value,void c((e=>({...e,password:t})));var t},onKeyDown:e=>(e=>{13===e.which&&"Enter"===e.code&&x()})(e),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:Object(E.jsxs)(g.a,{onClick:()=>u(!p),sx:{padding:"1px"},children:[" ",p?Object(E.jsx)(O.a,{}):Object(E.jsx)(C.a,{})]})})}}),Object(E.jsx)(v.a,{spacing:2,direction:"column",children:Object(E.jsx)(N.a,{sx:{height:"6.5vh",width:"28ch"},variant:"contained",style:{margin:"auto"},onClick:e=>x(),children:"\u0110\u0103ng nh\u1eadp"})})]})]})})}),Object(E.jsx)(xe,{openModalRegister:l,setOpenModalRegister:h}),Object(E.jsx)(F,{openAlertProcessingBackdrop:a,setOpenAlertProcessingBackdrop:r,alertTitle:"\u0110ang \u0111\u0103ng nh\u1eadp"})]})},Me=n(521),Be=n(518),De=n(38),Fe=n.n(De);n(403);var Re=function(e){return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(h.a,{fullWidth:!0,maxWidth:"sm",open:e.openAlertProcessing,disableEscapeKeyDown:!0,children:Object(E.jsx)(u.a,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang x\u1eed l\xfd..."})]})})})})},Ae=n(543),Qe=n(511),ze=n(544),We=n(533),Le=n(321),Ye=n(507),He=n(493),Ue=n(492),Ve=n(304),Ke=n(503),Ge=n(31),Je=n.n(Ge);const qe="https://beknkpt2.dvtien.id.vn",_e=()=>{const e=localStorage.getItem("jwt");return{headers:{Authorization:"Bearer ".concat(e)}}},Xe=async()=>{const e=_e();return await I.a.get("".concat(qe,"/api/Administrative/ListProvince"),e).then((function(e){return e.data})).catch((function(e){return e.response.status}))},Ze=async e=>{const t=_e();return await I.a.get("".concat(qe,"/api/Administrative/GetListDistrictByIdProvince/").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))},$e=async e=>{const t=_e();return await I.a.get("".concat(qe,"/api/Administrative/GetListWardByIdDistrict/").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))},et=async e=>{const t=_e();return await I.a.get("".concat(qe,"/api/Administrative/GetFullAddressByIdWard/").concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))};var tt=function(e){const t={examinationId:"",height:"",weight:"",headCircumference:"",reason:"",vaccination:!1,id:"",patient:{identifier:"",address:"",fullName:"",dayOfBirth:null,codeWard:"",gender:!0,fullNameMother:"",phoneMother:"",fullNameFather:"",phoneFather:"",patientId:""}},n={identifier:{title:"",isError:!1,openTooltip:!1,focus:!1},fullName:{title:"",isError:!1,openTooltip:!1,focus:!1},gender:{title:"",isError:!1,openTooltip:!1,focus:!1},dayOfBirth:{title:"",isError:!1,openTooltip:!1,focus:!1},examiningSession:{title:"",isError:!1,openTooltip:!1,focus:!1},province:{title:"",isError:!1,openTooltip:!1,focus:!1},district:{title:"",isError:!1,openTooltip:!1,focus:!1},ward:{title:"",isError:!1,openTooltip:!1,focus:!1},address:{title:"",isError:!1,openTooltip:!1,focus:!1},fullNameMother:{title:"",isError:!1,openTooltip:!1,focus:!1},phoneMother:{title:"",isError:!1,openTooltip:!1,focus:!1},phoneFather:{title:"",isError:!1,openTooltip:!1,focus:!1},height:{title:"",isError:!1,openTooltip:!1,focus:!1},weight:{title:"",isError:!1,openTooltip:!1,focus:!1},headCircumference:{title:"",isError:!1,openTooltip:!1,focus:!1}},a=[{genderOrder:1,genderName:"Nam",genderValue:!0},{genderOrder:2,genderName:"N\u1eef",genderValue:!1}],r={gender:{value:null,openOption:!1},examiningSession:{value:null,openOption:!1,loading:!1},province:{value:null,openOption:!1},district:{value:null,openOption:!1},ward:{value:null,openOption:!1}},i=Object(o.useRef)(null),c=Object(o.useRef)(null),[l,d]=Object(o.useState)(),[x,f]=Object(o.useState)(),[O,y]=Object(o.useState)(t),[C,v]=Object(o.useState)(n),[k,T]=Object(o.useState)(r),[S,P]=Object(o.useState)([]),[M,D]=Object(o.useState)([]),[F,R]=Object(o.useState)({list:[],loading:!1}),[A,z]=Object(o.useState)({list:[],loading:!1}),[W,L]=Object(o.useState)(null),[Y,H]=Object(o.useState)(!1),U=Object(Le.a)({components:{MuiTooltip:{defaultProps:{placement:"bottom",arrow:!0,componentsProps:{tooltip:{sx:{bgcolor:"#d32f2f"}},arrow:{sx:{color:"#d32f2f"}}},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-8]}}]}}}}}}),V=e=>{T("Gender"===e?e=>(e.gender.openOption=!0,{...e}):"ExaminingSession"===e?e=>(e.examiningSession.openOption=!0,{...e}):"Province"===e?e=>(e.province.openOption=!0,{...e}):"District"===e?e=>(e.district.openOption=!0,{...e}):e=>(e.ward.openOption=!0,{...e}))},K=(e,t)=>{""===e||"DD/MM/YYYY"===e||""!==e&&("Gender"===t?T((e=>(e.gender.openOption=!1,{...e}))):"ExaminingSession"===t?T((e=>(e.examiningSession.openOption=!1,{...e}))):"Province"===t?T((e=>(e.province.openOption=!1,{...e}))):"District"===t?T((e=>(e.district.openOption=!1,{...e}))):"Ward"===t&&T((e=>(e.ward.openOption=!1,{...e}))))},G=e=>{/[0-9]/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()},J=(e,t)=>{let{inputValue:n}=t;const o=n.toLowerCase();return e.filter((e=>{const t=e.fullName.toLowerCase(),n=e.fullName.split(" ").map((e=>e[0])).join("").toLowerCase();return t.includes(o)||n.includes(o)}))},q=async e=>{T((e=>(e.examiningSession.value=null,{...e}))),T((e=>(e.examiningSession.loading=!0,{...e})));const t=await Ce(e);P(t.exams),T((e=>(e.examiningSession.loading=!1,{...e})))},_=(o,a)=>{a&&"backdropClick"===a||(R((e=>(e.loading=!1,e.list=[],{...e}))),z((e=>(e.loading=!1,e.list=[],{...e}))),P([]),T(r),y(t),f(""),v(n),d(!0),e.setSelectedPantientInfo(),e.setOpenModalInfoPantients(!1))},X=async()=>{if((()=>{const e={...C};let t=!0;return""!==C.identifier.title&&(Object.values(e).every((e=>!1===e.focus))&&(e.identifier.focus=!0,L("identifier")),t=!1),""===O.patient.fullName&&(e.fullName.title="B\u1ea1n ch\u01b0a nh\u1eadp h\u1ecd t\xean",e.fullName.openTooltip=!0,e.fullName.isError=!0,Object.values(e).every((e=>!1===e.focus))&&(e.fullName.focus=!0,L("fullName")),t=!1),""===O.patient.gender&&(e.gender.title="B\u1ea1n ch\u01b0a ch\u1ecdn gi\u1edbi t\xednh",e.gender.isError=!0,e.gender.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.gender.focus=!0,L("gender")),t=!1),""===O.patient.dayOfBirth&&(e.dayOfBirth.title="B\u1ea1n ch\u01b0a nh\u1eadp ng\xe0y sinh",e.dayOfBirth.isError=!0,e.dayOfBirth.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.dayOfBirth.focus=!0,c.current&&c.current.focus()),t=!1),""!==C.dayOfBirth.title&&(e.dayOfBirth.isError=!0,Object.values(e).every((e=>!1===e.focus))&&(e.dayOfBirth.focus=!0,c.current&&c.current.focus()),t=!1),null===k.examiningSession.value&&(e.examiningSession.title="B\u1ea1n ch\u01b0a ch\u1ecdn l\u1ea1i k\u1ef3 kh\xe1m",e.examiningSession.isError=!0,e.examiningSession.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.examiningSession.focus=!0,L("examiningSession")),t=!1),null===k.province.value&&(e.province.title="B\u1ea1n ch\u01b0a ch\u1ecdn t\u1ec9nh th\xe0nh",e.province.isError=!0,e.province.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.province.focus=!0,L("province")),t=!1),null===k.district.value&&(e.district.title="B\u1ea1n ch\u01b0a ch\u1ecdn qu\u1eadn huy\u1ec7n",e.district.isError=!0,e.district.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.district.focus=!0,L("district")),t=!1),null===k.ward.value&&(e.ward.title="B\u1ea1n ch\u01b0a ch\u1ecdn ph\u01b0\u1eddng x\xe3",e.ward.isError=!0,e.ward.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.ward.focus=!0,L("ward")),t=!1),""===O.patient.address&&(e.address.title="B\u1ea1n ch\u01b0a nh\u1eadp \u0111\u1ecba ch\u1ec9",e.address.isError=!0,e.address.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.address.focus=!0,L("address")),t=!1),""===O.patient.fullNameMother&&""===O.patient.fullNameFather&&(e.fullNameMother.title="B\u1ea1n ch\u01b0a nh\u1eadp t\xean ph\u1ee5 huynh",e.fullNameMother.isError=!0,e.fullNameMother.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.fullNameMother.focus=!0,L("fullNameMother")),t=!1),""===O.patient.phoneMother&&""===O.patient.phoneFather&&(e.phoneMother.title="B\u1ea1n ch\u01b0a nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",e.phoneMother.isError=!0,e.phoneMother.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.phoneMother.focus=!0,L("phoneMother")),t=!1),""!==e.phoneMother.title&&(e.phoneMother.isError=!0,Object.values(e).every((e=>!1===e.focus))&&(e.phoneMother.focus=!0,L("phoneMother")),t=!1),""!==e.phoneFather.title&&(e.phoneFather.isError=!0,Object.values(e).every((e=>!1===e.focus))&&(e.phoneFather.focus=!0,L("phoneFather")),t=!1),""===O.height&&(e.height.title="B\u1ea1n ch\u01b0a nh\u1eadp chi\u1ec1u cao",e.height.isError=!0,e.height.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.height.focus=!0,L("height")),t=!1),""===O.weight&&(e.weight.title="B\u1ea1n ch\u01b0a nh\u1eadp c\xe2n n\u1eb7ng",e.weight.isError=!0,e.weight.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.weight.focus=!0,L("weight")),t=!1),""===O.headCircumference&&(e.headCircumference.title="B\u1ea1n ch\u01b0a nh\u1eadp s\u1ed1 v\xf2ng \u0111\u1ea7u",e.headCircumference.isError=!0,e.headCircumference.openTooltip=!0,Object.values(e).every((e=>!1===e.focus))&&(e.headCircumference.focus=!0,L("headCircumference")),t=!1),!0===Fe.a.isEqual(O,x)&&(s.b.warning("Hi\u1ec7n kh\xf4ng c\xf3 g\xec \u0111\u1ec3 c\u1eadp nh\u1eadt",{toastId:"warning1"}),t=!1),v(e),t})()){H(!0);const t=await(async e=>{const t=localStorage.getItem("jwt");return await I.a.put("".concat(me,"/api/Medical/EditRegister"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(O);200===t.status?(s.b.success(t.data,{toastId:"success1"}),e.setCompleteMedicalRegister(!0),e.setIsEditedInfo(!0),_()):(s.b.error(t.data,{toastId:"error1"}),e.setCompleteMedicalRegister(!0),_()),H(!1)}};return Object(o.useEffect)((()=>{0===M.length&&(async()=>{const e=await Xe();D(e)})()}),[]),Object(o.useEffect)((()=>{e.selectedPantientInfo&&(e.setIsContinueUpdateMedicalRegister(!1),(async()=>{H(!0);const t={...O};t.examinationId=e.selectedPantientInfo.examinationId,t.height=e.selectedPantientInfo.height,t.weight=e.selectedPantientInfo.weight,t.headCircumference=e.selectedPantientInfo.headCircumference,t.reason=e.selectedPantientInfo.reason,t.vaccination=e.selectedPantientInfo.vaccination,t.id=e.selectedPantientInfo.id,t.patient.identifier=e.selectedPantientInfo.patient.identifier,t.patient.address=e.selectedPantientInfo.patient.address,t.patient.fullName=e.selectedPantientInfo.patient.fullName,t.patient.dayOfBirth=e.selectedPantientInfo.patient.dayOfBirth,t.patient.codeWard=e.selectedPantientInfo.patient.codeWard,t.patient.gender=e.selectedPantientInfo.patient.gender,t.patient.fullNameMother=e.selectedPantientInfo.patient.fullNameMother,t.patient.phoneMother=e.selectedPantientInfo.patient.phoneMother,t.patient.fullNameFather=e.selectedPantientInfo.patient.fullNameFather,t.patient.phoneFather=e.selectedPantientInfo.patient.phoneFather,t.patient.patientId=e.selectedPantientInfo.patient.patientId,y(Fe.a.cloneDeep(t)),f(Fe.a.cloneDeep(t));const n=await et(e.selectedPantientInfo.patient.codeWard),o=await Ze(n.provinceCode);R((e=>(e.list=o,{...e})));const r=await $e(n.districtCode);z((e=>(e.list=r,{...e})));const i=await Ce(e.selectedPantientInfo.patient.dayOfBirth);P(i.exams);const s=a.find((t=>t.genderValue===e.selectedPantientInfo.patient.gender)),c=i.exams.findIndex((t=>t.id===e.selectedPantientInfo.examinationId)),l=M.findIndex((e=>e.code===n.provinceCode)),h=o.findIndex((e=>e.code===n.districtCode)),p=r.findIndex((e=>e.code===n.wardCode));T((e=>(e.gender.value=s,e.examiningSession.value=i.exams[c],e.province.value=M[l],e.district.value=o[h],e.ward.value=r[p],e))),d(!1),H(!1)})())}),[e.selectedPantientInfo]),Object(o.useEffect)((()=>{e.openModalInfoPantients&&e.isContinueUpdateMedicalRegister&&!1===l&&(X(),e.setIsContinueUpdateMedicalRegister(!1))}),[e.isContinueUpdateMedicalRegister,l]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(h.a,{fullWidth:!0,maxWidth:"md",open:e.openModalInfoPantients,onClose:(e,t)=>_(0,t),children:[Object(E.jsx)(p.a,{sx:{p:1,fontWeight:"bolder",fontSize:"22px",textAlign:"center",color:"blue"},children:"Th\xf4ng tin b\u1ec7nh nh\xe2n"}),Object(E.jsx)(g.a,{onClick:()=>_(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsx)(u.a,{dividers:!0,sx:{pt:1.5,pb:1.5},children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",pl:4.2,pr:4.2,mb:.8},children:[Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.identifier.title}),open:C.identifier.openTooltip,placement:"left",children:Object(E.jsx)(j.a,{error:!0===C.identifier.isError,label:"M\xe3 \u0111\u1ecbnh danh",variant:"outlined",sx:{width:"18%","&.MuiTextField-root":{marginTop:"7.5px"}},inputProps:{maxLength:12},inputRef:e=>e&&"identifier"===W&&e.focus(),defaultValue:O.patient.identifier,onChange:e=>(e=>{if(""!==e){"identifier"===W&&L(null);const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{const e={...C};t.length<12?(e.identifier.title="M\xe3 \u0111\u1ecbnh danh ch\u01b0a \u0111\u1ee7 12 s\u1ed1",e.identifier.openTooltip=!0,e.identifier.isError=!0,e.identifier.focus=!1,v(e)):(y((e=>(e.patient.identifier=t,{...e}))),e.identifier.title="",e.identifier.openTooltip=!1,e.identifier.isError=!1,e.identifier.focus=!1,v(e))}),100)}else{"identifier"===W&&L(null);const e={...C};e.identifier.title="",e.identifier.openTooltip=!1,e.identifier.isError=!1,e.identifier.focus=!1,v(e)}})(e.target.value)})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.fullName.title}),open:C.fullName.openTooltip,placement:"top",slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[-10,-6]}}]}},children:Object(E.jsx)(j.a,{error:!0===C.fullName.isError,label:"H\u1ecd t\xean",variant:"outlined",sx:{width:"32%","&.MuiTextField-root":{marginTop:"7.5px"}},inputRef:e=>e&&"fullName"===W&&e.focus(),defaultValue:O.patient.fullName,onChange:e=>(e=>{const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.patient.fullName=t,{...e}))),"fullName"===W&&L(null),C.fullName.isError){const e={...C};e.fullName.title="",e.fullName.openTooltip=!1,e.fullName.isError=!1,e.fullName.focus=!1,v(e)}}),100)})(e.target.value)})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.gender.title}),open:C.gender.openTooltip,placement:"top",children:Object(E.jsx)(Q.a,{sx:{width:"12%",marginTop:"7.5px"},options:a,getOptionLabel:e=>e.genderName,value:k.gender.value,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.genderName}),onChange:(e,t)=>((e,t)=>{if("gender"===W&&L(null),y((e=>(e.patient.gender=t.genderValue,{...e}))),T((e=>(e.gender.value=t,{...e}))),C.gender.isError){const e={...C};e.gender.isError=!1,e.gender.title="",e.gender.openTooltip=!1,e.gender.focus=!1,v(e)}})(0,t),open:k.gender.openOption,onFocus:()=>V("Gender"),onBlur:e=>K(e.target.value,"Gender"),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Gi\u1edbi t\xednh",inputRef:e=>e&&"gender"===W&&e.focus(),error:!0===C.gender.isError}),disableClearable:!0,popupIcon:null})})}),Object(E.jsx)(Ve.a,{dateAdapter:Ue.a,adapterLocale:"vi",children:Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(He.a,{components:["DatePicker"],children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.dayOfBirth.title}),open:C.dayOfBirth.openTooltip,children:Object(E.jsx)(B.a,{sx:{width:110},children:Object(E.jsx)(Ke.a,{label:"Ng\xe0y sinh",format:"DD/MM/YYYY",defaultValue:Je()(O.patient.dayOfBirth),disableFuture:!0,disableOpenPicker:!0,slotProps:{textField:{inputRef:c,error:!0===C.dayOfBirth.isError,onBlur:e=>K(e.target.value,"dayOfBirth")}},onChange:e=>(async e=>{if(e){const t=e._d;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{const e=new Date,n=e.getFullYear()-t.getFullYear(),o=e.getMonth()-t.getMonth(),a=e.getDate()-t.getDate(),r=e.getFullYear()-t.getFullYear();let i=12*n+o,s=a;a<0&&(i-=1,s+=30);const c={...C};if(e<t||isNaN(r)||i>24||24===i&&s>29)c.dayOfBirth.title="B\u1ec7nh nh\xe2n l\u1edbn h\u01a1n 24 th\xe1ng tu\u1ed5i kh\xf4ng th\u1ec3 kh\xe1m",c.dayOfBirth.openTooltip=!0,c.dayOfBirth.isError=!0,c.dayOfBirth.focus=!1,v(c);else{const e=Je()(t).format("YYYY-MM-DD");y((t=>(t.patient.dayOfBirth=e,{...t}))),c.dayOfBirth.title="",c.dayOfBirth.openTooltip=!1,c.dayOfBirth.isError=!1,c.dayOfBirth.focus=!1,v(c),q(e)}}),100)}})(e)})})})})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.examiningSession.title}),open:C.examiningSession.openTooltip,placement:"right",children:Object(E.jsx)(Q.a,{sx:{width:"18%",mt:"7.5px"},options:S,noOptionsText:k.examiningSession.loading?"\u0110ang t\u1ea3i...":"",getOptionLabel:e=>e.name,value:k.examiningSession.value,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.name}),onChange:(e,t)=>((e,t)=>{if("examiningSession"===W&&L(null),y((e=>(e.examinationId=t.id,{...e}))),T((e=>(e.examiningSession.value=t,{...e}))),C.examiningSession.isError){const e={...C};e.examiningSession.isError=!1,e.examiningSession.title="",e.examiningSession.openTooltip=!1,e.examiningSession.focus=!1,v(e)}})(0,t),open:k.examiningSession.openOption,onFocus:()=>V("ExaminingSession"),onBlur:e=>K(e.target.value,"ExaminingSession"),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"K\u1ef3 kh\xe1m",inputRef:e=>e&&"examiningSession"===W&&e.focus(),error:!0===C.examiningSession.isError,sx:{"& .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-colorPrimary.MuiInputBase-fullWidth.MuiInputBase-formControl.MuiInputBase-adornedEnd.MuiAutocomplete-inputRoot":{pl:"6px",pr:"6px"}},InputProps:{...e.InputProps,endAdornment:Object(E.jsxs)(E.Fragment,{children:[k.examiningSession.loading?Object(E.jsx)(w.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),disableClearable:!0,popupIcon:null})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.province.title}),open:C.province.openTooltip,placement:"left",children:Object(E.jsx)(Q.a,{sx:{width:"20%",mt:2},options:M,filterOptions:J,getOptionLabel:e=>e.name,value:k.province.value,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.name}),onChange:(e,t)=>(async(e,t)=>{if("province"===W&&L(null),T((e=>(e.province.value=t,{...e}))),null!==k.district.value&&T((e=>(e.district.value=null,{...e}))),null!==k.ward.value&&T((e=>(e.ward.value=null,{...e}))),C.province.isError){const e={...C};e.province.isError=!1,e.province.title="",e.province.openTooltip=!1,e.province.focus=!1,v(e)}z((e=>(e.list=[],{...e}))),R((e=>(e.loading=!0,{...e})));const n=await Ze(t.code);R((e=>(e.loading=!1,e.list=n,{...e})))})(0,t),open:k.province.openOption,onFocus:()=>V("Province"),onBlur:e=>K(e.target.value,"Province"),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Th\xe0nh ph\u1ed1",inputRef:e=>e&&"province"===W&&e.focus(),error:!0===C.province.isError}),disableClearable:!0,popupIcon:null})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.district.title}),open:C.district.openTooltip,placement:"top",children:Object(E.jsx)(Q.a,{sx:{width:"20%",mt:2},options:F.list,noOptionsText:F.loading?"\u0110ang t\u1ea3i...":"",filterOptions:J,getOptionLabel:e=>e.name,value:k.district.value,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.fullName}),onChange:(e,t)=>(async(e,t)=>{if("district"===W&&L(null),T((e=>(e.district.value=t,{...e}))),null!==k.ward.value&&T((e=>(e.ward.value=null,{...e}))),C.district.isError){const e={...C};e.district.isError=!1,e.district.title="",e.district.openTooltip=!1,e.district.focus=!1,v(e)}z((e=>(e.loading=!0,{...e})));const n=await $e(t.code);z((e=>(e.loading=!1,e.list=n,{...e})))})(0,t),open:k.district.openOption,onFocus:()=>V("District"),onBlur:e=>K(e.target.value,"District"),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Qu\u1eadn/huy\u1ec7n",inputRef:e=>e&&"district"===W&&e.focus(),error:!0===C.district.isError,InputProps:{...e.InputProps,endAdornment:Object(E.jsxs)(E.Fragment,{children:[F.loading?Object(E.jsx)(w.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),disableClearable:!0,popupIcon:null})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.ward.title}),open:C.ward.openTooltip,children:Object(E.jsx)(Q.a,{sx:{width:"20%",mt:2},options:A.list,noOptionsText:A.loading?"\u0110ang t\u1ea3i...":"",filterOptions:J,getOptionLabel:e=>e.name,value:k.ward.value,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.fullName}),onChange:(e,t)=>((e,t)=>{if("ward"===W&&L(null),y((e=>(e.patient.codeWard=t.code,{...e}))),T((e=>(e.ward.value=t,{...e}))),C.ward.isError){const e={...C};e.ward.isError=!1,e.ward.title="",e.ward.openTooltip=!1,e.ward.focus=!1,v(e)}})(0,t),open:k.ward.openOption,onFocus:()=>V("Ward"),onBlur:e=>K(e.target.value,"Ward"),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Ph\u01b0\u1eddng/X\xe3",inputRef:e=>e&&"ward"===W&&e.focus(),error:!0===C.ward.isError,InputProps:{...e.InputProps,endAdornment:Object(E.jsxs)(E.Fragment,{children:[A.loading?Object(E.jsx)(w.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),disableClearable:!0,popupIcon:null})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.address.title}),open:C.address.openTooltip,placement:"right",children:Object(E.jsx)(j.a,{error:!0===C.address.isError,label:"\u0110\u1ecba ch\u1ec9",variant:"outlined",sx:{width:"36%","&.MuiTextField-root":{mt:2}},inputRef:e=>e&&"address"===W&&e.focus(),defaultValue:O.patient.address,onChange:e=>(e=>{"address"===W&&L(null);const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.patient.address=t,{...e}))),C.address.isError){const e={...C};e.address.isError=!1,e.address.title="",e.address.openTooltip=!1,e.address.focus=!1,v(e)}}),100)})(e.target.value)})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.fullNameMother.title}),open:C.fullNameMother.openTooltip,placement:"left",children:Object(E.jsx)(j.a,{error:!0===C.fullNameMother.isError,label:"H\u1ecd t\xean m\u1eb9",variant:"outlined",sx:{width:"32%","&.MuiTextField-root":{mt:2}},inputRef:e=>e&&"fullNameMother"===W&&e.focus(),defaultValue:O.patient.fullNameMother,onChange:e=>(e=>{"fullNameMother"===W&&L(null);const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.patient.fullNameMother=t,{...e}))),C.fullNameMother.isError){const e={...C};e.fullNameMother.isError=!1,e.fullNameMother.title="",e.fullNameMother.openTooltip=!1,e.fullNameMother.focus=!1,v(e)}}),100)})(e.target.value)})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.phoneMother.title}),open:C.phoneMother.openTooltip,children:Object(E.jsx)(j.a,{error:!0===C.phoneMother.isError,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",variant:"outlined",sx:{width:"16%","&.MuiTextField-root":{mt:2}},inputProps:{maxLength:10},inputRef:e=>e&&"phoneMother"===W&&e.focus(),defaultValue:O.patient.phoneMother,onChange:e=>(e=>{if("phoneMother"===W&&L(null),""!==e){const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{const e={...C};t.length<10?(e.phoneMother.title="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a \u0111\u1ee7 10 s\u1ed1",e.phoneMother.openTooltip=!0,e.phoneMother.isError=!0,e.phoneMother.focus=!1,v(e)):(y((e=>(e.patient.phoneMother=t,{...e}))),e.phoneMother.title="",e.phoneMother.openTooltip=!1,e.phoneMother.isError=!1,e.phoneMother.focus=!1,e.phoneFather.title="",e.phoneFather.openTooltip=!1,e.phoneFather.isError=!1,e.phoneFather.focus=!1,v(e))}),10)}else{const e={...C};e.phoneMother.title="",e.phoneMother.openTooltip=!1,e.phoneMother.isError=!1,e.phoneMother.focus=!1,v(e)}})(e.target.value),onKeyDown:G})})}),Object(E.jsx)(j.a,{label:"H\u1ecd t\xean cha",variant:"outlined",sx:{width:"32%","&.MuiTextField-root":{mt:2}},defaultValue:O.patient.fullNameFather,onChange:e=>(e=>{const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.patient.fullNameFather=t,{...e}))),C.fullNameMother.isError){const e={...C};e.fullNameMother.isError=!1,e.fullNameMother.title="",e.fullNameMother.openTooltip=!1,e.fullNameMother.focus=!1,v(e)}}),100)})(e.target.value)}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.phoneFather.title}),open:C.phoneFather.openTooltip,placement:"right",children:Object(E.jsx)(j.a,{error:!0===C.phoneFather.isError,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",variant:"outlined",sx:{width:"16%","&.MuiTextField-root":{mt:2}},inputProps:{maxLength:10},inputRef:e=>e&&"phoneFather"===W&&e.focus(),defaultValue:O.patient.phoneFather,onChange:e=>(e=>{if("phoneFather"===W&&L(null),""!==e){const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{const e={...C};t.length<10?(e.phoneFather.title="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a \u0111\u1ee7 10 s\u1ed1",e.phoneFather.openTooltip=!0,e.phoneFather.isError=!0,e.phoneFather.focus=!1,v(e)):(y((e=>(e.patient.phoneFather=t,{...e}))),e.phoneFather.title="",e.phoneFather.openTooltip=!1,e.phoneFather.isError=!1,e.phoneFather.focus=!1,e.phoneMother.title="",e.phoneMother.openTooltip=!1,e.phoneMother.isError=!1,e.phoneMother.focus=!1,v(e))}),100)}else{const e={...C};e.phoneFather.title="",e.phoneFather.openTooltip=!1,e.phoneFather.isError=!1,e.phoneFather.focus=!1,v(e)}})(e.target.value),onKeyDown:G})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.height.title}),open:C.height.openTooltip,placement:"left",children:Object(E.jsx)(j.a,{error:!0===C.height.isError,label:"Chi\u1ec1u cao",sx:{width:"20%","&.MuiTextField-root":{mt:2}},inputRef:e=>e&&"height"===W&&e.focus(),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:"(cm)"})},defaultValue:O.height,onChange:e=>(e=>{"height"===W&&L(null);const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.height=t,{...e}))),C.height.isError){const e={...C};e.height.title="",e.height.openTooltip=!1,e.height.isError=!1,e.height.focus=!1,v(e)}}),100)})(e.target.value)})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.weight.title}),open:C.weight.openTooltip,children:Object(E.jsx)(j.a,{error:!0===C.weight.isError,label:"C\xe2n n\u1eb7ng",sx:{width:"20%","&.MuiTextField-root":{mt:2}},inputRef:e=>e&&"weight"===W&&e.focus(),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:"(kg)"})},defaultValue:O.weight,onChange:e=>(e=>{"weight"===W&&L(null);const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.weight=t,{...e}))),C.weight.isError){const e={...C};e.weight.title="",e.weight.openTooltip=!1,e.weight.isError=!1,e.weight.focus=!1,v(e)}}),100)})(e.target.value)})})}),Object(E.jsx)(Ye.a,{theme:U,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:C.headCircumference.title}),open:C.headCircumference.openTooltip,placement:"right",children:Object(E.jsx)(j.a,{error:!0===C.headCircumference.isError,label:"V\xf2ng \u0111\u1ea7u",sx:{width:"20%","&.MuiTextField-root":{mt:2}},inputRef:e=>e&&"headCircumference"===W&&e.focus(),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:"(cm)"})},defaultValue:O.headCircumference,onChange:e=>(e=>{"headCircumference"===W&&L(null);const t=e;i.current&&clearInterval(i.current),i.current=setTimeout((()=>{if(y((e=>(e.headCircumference=t,{...e}))),C.headCircumference.isError){const e={...C};e.headCircumference.title="",e.headCircumference.openTooltip=!1,e.headCircumference.isError=!1,e.headCircumference.focus=!1,v(e)}}),100)})(e.target.value)})})}),Object(E.jsx)(ze.a,{sx:{width:"30%",mt:2},control:Object(E.jsx)(Qe.a,{checked:O.vaccination}),label:"C\xf3 tham gia ti\xeam ng\u1eeba",onChange:e=>{return t=e.target.checked,void y((e=>(e.vaccination=t,{...e})));var t}})]})}),Object(E.jsxs)(Ae.a,{sx:{justifyContent:"center"},children:[Object(E.jsx)(N.a,{variant:"contained",onClick:()=>X(),children:"S\u1eeda (F1)"}),Object(E.jsx)(N.a,{variant:"contained",color:"secondary",onClick:(e,t)=>_(0,t),children:"\u0110\xf3ng (ESC)"})]})]}),Object(E.jsx)(Re,{openAlertProcessing:Y,setOpenAlertProcessing:H})]})},nt=n(535),ot=n(539),at=n(538),rt=n(534),it=n(536),st=n(537),ct=n(261),lt=n(520),dt=n(407),ht=n(166),pt=n.n(ht),ut=n(223),gt=n.n(ut);n(287);var xt=function(e){const[t,n]=Object(o.useState)(!1),[a,r]=Object(o.useState)({chipOrder:0,chipLabel:"BN ch\u1edd kh\xe1m"}),[i,s]=Object(o.useState)([{chipLabel:"BN ch\u1edd kh\xe1m",chipContent:0},{chipLabel:"BN \u0111\xe3 kh\xe1m",chipContent:0},{chipLabel:"BN h\u1eb9n kh\xe1m",chipContent:0}]),[c,l]=Object(o.useState)(!1),[d,h]=Object(o.useState)([]),[p,u]=Object(o.useState)([]),[g,x]=Object(o.useState)(""),[f,O]=Object(o.useState)([]),[y,C]=Object(o.useState)([]),[N,k]=Object(o.useState)(),[T,S]=Object(o.useState)(!1),[P,M]=Object(o.useState)(),[R,A]=Object(o.useState)(!1),Q=(e,t)=>{const n=t.toLowerCase();return e.filter((e=>{const{patientCode:t,fullName:o,phoneMother:a,phoneFather:r}=e.patient;return t.toLowerCase().includes(n)||o.toLowerCase().includes(n)||a.toLowerCase().includes(n)||r.toLowerCase().includes(n)}))},z=async()=>{n(!0);const t=await ye(),o=await(async()=>{const e=je();return await I.a.get("".concat(me,"/api/Medical/GetAppointmentsToday"),e).then((function(e){return e.data})).catch((function(e){return e.response.status}))})();let r,i=[{chipLabel:"BN ch\u1edd kh\xe1m",chipContent:0},{chipLabel:"BN \u0111\xe3 kh\xe1m",chipContent:0},{chipLabel:"BN h\u1eb9n kh\xe1m",chipContent:o.length}];if(o.length>0?(r=o.map((e=>({patient:{identifier:e.identifier,patientId:e.patientId,patientCode:e.patientCode,fullName:e.patientFullName,gender:e.gender,dayOfBirth:e.dateOfBirth,fullNameMother:e.fullNameMother,phoneMother:e.phoneMother,fullNameFather:e.fullNameFather,phoneFather:e.phoneFather,address:e.address,fullAddress:e.fullAddress,codeWard:e.codeWard,nextExamId:e.nextExamId}}))),u(r)):u(o),400!==t&&0!==t.list.length)if(h(t.list),0===a.chipOrder){const e=t.list.filter((e=>0===e.state||1===e.state||3===e.state));C(Fe.a.cloneDeep(e)),O(Fe.a.cloneDeep(e)),i[0].chipContent=t.listCountState[0],i[1].chipContent=t.listCountState[1]}else if(1===a.chipOrder){const e=d.filter((e=>2===e.state));C(Fe.a.cloneDeep(e)),O(Fe.a.cloneDeep(e)),i[0].chipContent=t.listCountState[0],i[1].chipContent=t.listCountState[1]}else 2===a.chipOrder&&(C(Fe.a.cloneDeep(r)),O(Fe.a.cloneDeep(r)),i[0].chipContent=t.listCountState[0],i[1].chipContent=t.listCountState[1]);s(i),R&&A(!1),e.setComponent1Loading(!1),n(!1)};return Object(o.useEffect)((()=>{z()}),[]),Object(o.useEffect)((()=>{if(T){const e=e=>{112===e.keyCode&&(e.preventDefault(),M(!0))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[T,P]),Object(o.useEffect)((()=>{R&&z()}),[R,d,y]),Object(o.useEffect)((()=>{!0===e.completeMedicalRegister&&!1===R&&(h([]),C([]),O([]),z(),e.setCompleteMedicalRegister(!1))}),[e.completeMedicalRegister,d,y]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(B.a,{sx:{p:0},children:Object(E.jsx)("div",{className:"container",style:{border:"1px solid #fff",borderRadius:"10px",height:"590px",padding:0,boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12)"},children:t?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(v.a,{direction:"row",spacing:1,sx:{justifyContent:"center",mt:1.4},children:i.map(((e,t)=>Object(E.jsx)(dt.a,{badgeContent:e.chipContent,color:"error",children:Object(E.jsx)(lt.a,{label:e.chipLabel,color:t===a.chipOrder?"primary":"default",onClick:()=>((e,t)=>{if(r({chipOrder:e,chipLabel:t}),0===e){const e=d.filter((e=>0===e.state||1===e.state||3===e.state));C(e),O(e)}else if(1===e){const e=d.filter((e=>2===e.state));C(e),O(e)}else 2===e&&(C(p),O(p))})(t,e.chipLabel)})},"chipPantientState ".concat(t))))}),Object(E.jsxs)(B.a,{sx:{mt:.2,position:"relative",display:"flex",justifyContent:"center",flexDirection:"column"},children:[Object(E.jsx)(D.a,{variant:"subtitle2",sx:{textAlign:"center",mt:.2,fontSize:"1rem"},children:"N\u1ebfu kh\xf4ng t\xecm th\u1ea5y b\u1ec7nh nh\xe2n, h\xe3y nh\u1ea5n n\xfat t\u1ea3i l\u1ea1i ph\xeda d\u01b0\u1edbi"}),Object(E.jsxs)(D.a,{variant:"h6",sx:{textAlign:"center",fontSize:"1.12rem"},children:["Danh s\xe1ch ",a.chipLabel," ng\xe0y ",Je()().format("DD/MM/YYYY")]}),Object(E.jsx)(gt.a,{sx:{color:"brown",fontWeight:"bolder",position:"absolute",right:75,top:30,fontSize:"2.5rem",cursor:"pointer"},titleAccess:"T\u1ea3i l\u1ea1i",onClick:()=>(async()=>{e.setComponent1Loading(!0),await z(),e.setComponent1Loading(!1)})()})]}),Object(E.jsx)(B.a,{sx:{display:"flex",justifyContent:"center",position:"relative"},children:Object(E.jsx)(j.a,{sx:{mt:.2,mb:1,width:360,"& .MuiInputBase-inputSizeSmall":{textAlign:"center"}},size:"small",variant:"outlined",placeholder:"T\xecm v\u1edbi M\xe3 BN ho\u1eb7c T\xean BN ho\u1eb7c S\u0110T",value:g,onChange:e=>(e=>{const t=e;x(t),C(""===e?f:Q(f,t))})(e.target.value),InputProps:{startAdornment:Object(E.jsx)(b.a,{position:"start",children:Object(E.jsx)(pt.a,{})}),endAdornment:Object(E.jsx)(b.a,{position:"end",children:""!==g?Object(E.jsx)(m.a,{sx:{cursor:"pointer"},titleAccess:"X\xf3a",onClick:()=>[x(""),C(f)]}):null})}})}),Object(E.jsx)(rt.a,{component:ct.a,sx:{height:"440px",overflowX:"scroll",borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px"},children:Object(E.jsxs)(nt.a,{stickyHeader:!0,sx:{minWidth:1200},children:[Object(E.jsx)(it.a,{children:Object(E.jsxs)(st.a,{sx:{"& th":{color:"rgba(96, 96, 96)",backgroundColor:"pink"}},children:[2===a.chipOrder?null:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem",p:"10px"},children:"Tr\u1ea1ng th\xe1i"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"STT"})]}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"H\u1ecd t\xean"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"Gi\u1edbi t\xednh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"Ng\xe0y sinh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"\u0110\u1ecba ch\u1ec9"})]})}),Object(E.jsx)(ot.a,{children:0!==y.length?Object(E.jsx)(E.Fragment,{children:y.map(((t,n)=>{return Object(E.jsxs)(st.a,{hover:!0,role:"checkbox",sx:{cursor:"pointer"},onDoubleClick:()=>2===a.chipOrder?(async t=>{l(!0);const n=await Ne(t.patient.patientId),o={examinationId:t.patient.nextExamId,oldDisease:!0,height:"",weight:"",headCircumference:"",reason:"",vaccination:n.vaccination,medicalTypeId:n.medicalTypeId,userIdDoctor:"",patient:t.patient};e.setDataPantientAppointmentsToday(o),l(!1)})(t):(e=>{k(e),M(!0),S(!0)})(t),children:[2===a.chipOrder?null:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(at.a,{align:"center",sx:{width:"90px"},children:Object(E.jsx)(We.a,{title:Object(E.jsx)(D.a,{variant:"subtitle2",children:0===t.state||3===t.state?"Ch\u1edd kh\xe1m":2===t.state?"\u0110\xe3 kh\xe1m":"\u0110ang kh\xe1m"}),children:Object(E.jsx)("span",{children:(o=t.state,0===o||3===o?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("span",{className:"dotPantientRegisterWaiting"})}):1===o?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("span",{className:"dotPantientRegisterExamining"})}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("span",{className:"dotPantientRegisterDone"})}))})})}),Object(E.jsx)(at.a,{align:"left",sx:{width:"20px"},children:t.order})]}),Object(E.jsx)(at.a,{align:"left",sx:{width:"150px"},children:t.patient.patientCode}),Object(E.jsx)(at.a,{align:"left",sx:{width:"200px"},children:t.patient.fullName}),Object(E.jsx)(at.a,{align:"left",sx:{width:"110px"},children:!0===t.patient.gender?"Nam":"N\u1eef"}),Object(E.jsx)(at.a,{align:"left",sx:{width:"110px"},children:Je()(t.patient.dayOfBirth).format("DD/MM/YYYY")}),Object(E.jsx)(at.a,{align:"left",sx:{width:"140px"},children:""!==t.patient.phoneMother?t.patient.phoneMother:t.patient.phoneFather}),Object(E.jsx)(at.a,{align:"left",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:Object(E.jsx)(We.a,{title:Object(E.jsx)(D.a,{variant:"subtitle2",children:t.patient.fullAddress}),children:Object(E.jsx)("span",{children:t.patient.fullAddress})})})]},n);var o}))}):null})]})})]})})}),Object(E.jsx)(F,{openAlertProcessingBackdrop:c,changeBackground:!0}),Object(E.jsx)(tt,{openModalInfoPantients:T,setOpenModalInfoPantients:S,selectedPantientInfo:N,setSelectedPantientInfo:k,isContinueUpdateMedicalRegister:P,setIsContinueUpdateMedicalRegister:M,setCompleteMedicalRegister:e.setCompleteMedicalRegister,setIsEditedInfo:A})]})},mt=n(516),jt=n(509);var bt=function(e){const[t,n]=Object(o.useState)(!1),[a,r]=Object(o.useState)(!1),[i,c]=Object(o.useState)(null),{isOldDiseaseWithNullCodeWard:l,setIsOldDiseaseWithNullCodeWard:d}=Object(o.useContext)(R),x=async()=>{if(e.dataPatientsRegister.oldDisease){r(!0);const t=await(async(e,t)=>{const n=je();return await I.a.get("".concat(me,"/api/Medical/GetExaminationsGiveRegister?dayOfBirth=").concat(e,"&patientId=").concat(t),n).then((function(e){return e.data})).catch((function(e){return e.response.status}))})(e.dataPatientsRegister.patient.dayOfBirth,e.dataPatientsRegister.patient.patientId);c(t),e.dataPatientsRegister.examinationId=t.exams[0].id,r(!1)}else{r(!0);const t=await Ce(e.dataPatientsRegister.patient.dayOfBirth);c(t),e.dataPatientsRegister.examinationId=t.exams[0].id,r(!1)}},j=async()=>{if(!0===e.dataPatientsRegister.oldDisease&&""!==e.dataPatientsRegister.examinationId)if(!1===i.isAppointment&&0===i.oldExams.length){r(!0);const t=await be(e.dataPatientsRegister);200===t.status?(await Oe(),l&&d(!1),s.b.success(t.data),c(null),e.setIsContinueSelectedExaminingSession(!1),e.setCompleteMedicalRegister(!0),e.setOpenModalExaminingSession(!1),e.handleResetField()):s.b.error(t.data,{toastId:"error1"}),r(!1)}else{r(!0);const t=await be(e.dataPatientsRegister);200===t.status?(await Oe(),s.b.success(t.data),c(null),e.setIsContinueSelectedExaminingSession(!1),e.setCompleteMedicalRegister(!0),e.setOpenModalExaminingSession(!1),e.handleResetField()):s.b.error(t.data,{toastId:"error1"}),r(!1)}else{r(!0);const t=await(async e=>{const t=localStorage.getItem("jwt");return await I.a.post("".concat(me,"/api/Medical/Register"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(e.dataPatientsRegister);200===t.status?(await Oe(),s.b.success(t.data),c(null),e.handleResetField(),e.setIsContinueSelectedExaminingSession(!1),e.setCompleteMedicalRegister(!0),e.setOpenModalExaminingSession(!1)):s.b.error(t.data,{toastId:"error1"}),r(!1)}},b=()=>{""===e.dataPatientsRegister.examinationId?s.b.error("B\u1ea1n ch\u01b0a ch\u1ecdn k\u1ef3 kh\xe1m",{toastId:"error1"}):j()};return Object(o.useEffect)((()=>{""!==e.dataPatientsRegister.patient.dayOfBirth&&!0===e.openModalExaminingSession&&x()}),[e.openModalExaminingSession]),Object(o.useEffect)((()=>{!0===e.isContinueSelectedExaminingSession&&(b(),e.setIsContinueSelectedExaminingSession(!1))}),[e.isContinueSelectedExaminingSession]),Object(E.jsxs)(E.Fragment,{children:[i?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(h.a,{fullWidth:!0,maxWidth:"sm",open:e.openModalExaminingSession,disableEscapeKeyDown:!0,children:[Object(E.jsx)(p.a,{sx:{fontWeight:"bolder",fontSize:"20px",textAlign:"center",color:"green",textTransform:"uppercase"},children:"".concat(e.dataPatientsRegister.patient.fullName,", \n                            ").concat(!0===e.dataPatientsRegister.patient.gender?"Nam":"N\u1eef",", \n                            ").concat(i.monthsOfAge)}),Object(E.jsx)(g.a,{onClick:()=>[e.setOpenModalExaminingSession(!1),e.dataPatientsRegister.examinationId="",c(null)],sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsx)(u.a,{dividers:!0,sx:{pl:"0px",pr:"0px"},children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:0,children:[Object(E.jsx)(Me.a,{item:!0,xs:.5}),Object(E.jsx)(Me.a,{item:!0,xs:5.5,children:Object(E.jsxs)(B.a,{sx:{border:"2px solid black",p:1,height:"50vh",overflow:"auto"},children:[Object(E.jsx)(D.a,{variant:"h6",sx:{fontWeight:"bolder"},children:"L\u1ecbch s\u1eed kh\xe1m"}),i.oldExams?i.oldExams.map(((e,t)=>Object(E.jsx)(D.a,{variant:"subtitle1",children:e.name},t))):null]})}),Object(E.jsx)(Me.a,{item:!0,xs:5.5,children:Object(E.jsx)(B.a,{sx:{border:"2px solid red",p:1,height:"50vh"},children:Object(E.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[Object(E.jsx)(D.a,{variant:"h6",sx:{fontWeight:"bolder",color:"red"},children:"Ch\u1ecdn k\u1ef3 kh\xe1m"}),Object(E.jsx)(mt.a,{defaultValue:i.exams[0].id,onChange:t=>{return n=t.target.value,void(e.dataPatientsRegister.examinationId=n);var n},children:i.exams.map(((e,t)=>Object(E.jsx)(ze.a,{value:e.id,control:Object(E.jsx)(jt.a,{}),label:e.name},"".concat(t))))},"".concat(e.dataPatientsRegister.patient.patientCode)),Object(E.jsx)(N.a,{variant:"contained",sx:{mt:.5},onClick:()=>b(),children:"Ti\u1ebfp t\u1ee5c (F2)"})]})})})]})})]})}):null,Object(E.jsx)(Re,{openAlertProcessing:a,setOpenAlertProcessing:r})]})};var ft=function(e){const t={patientCode:"",phone:"",fullName:"",dayOfBirth:""},n={patientCode:{title:"",isError:!1,openTooltip:!1,focus:!1},phone:{title:"",isError:!1,openTooltip:!1,focus:!1},fullName:{title:"",isError:!1,openTooltip:!1,focus:!1},dayOfBirth:{title:"",isError:!1,openTooltip:!1,focus:!1}},a=Object(o.useRef)(null),[r,i]=Object(o.useState)(null),[s,c]=Object(o.useState)(t),[l,d]=Object(o.useState)(n),[x,b]=Object(o.useState)(null),[f,O]=Object(o.useState)(!1),[y,C]=Object(o.useState)(0),v=Object(o.useRef)(null),w=Object(o.useRef)(null),k=Object(o.useRef)(null),I=Object(Le.a)({components:{MuiTooltip:{defaultProps:{placement:"bottom",arrow:!0,componentsProps:{tooltip:{sx:{bgcolor:"#d32f2f"}},arrow:{sx:{color:"#d32f2f"}}}}}}}),T=e=>{/[0-9]/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||"Enter"===e.key?"Enter"===e.key&&R(e):e.preventDefault()},S=(e,t)=>{if(""===e||"DD/MM/YYYY"===e){const e={...l};"patientCode"===t?(a.current&&clearInterval(a.current),a.current=setTimeout((()=>{e.patientCode.title="",e.patientCode.openTooltip=!1,d(e)}),10),"patientCode"===x&&b(null)):"dayOfBirth"===t?(e.dayOfBirth.title="",e.dayOfBirth.openTooltip=!1,d(e),"dayOfBirth"===x&&b(null)):"phone"===t&&(e.phone.title="",e.phone.openTooltip=!1,d(e),"phone"===x&&b(null))}},P=(o,a)=>{a&&"backdropClick"===a||(c(t),d(n),i(null),C(0),e.setOpenModalOldDisease(!1))},M=async()=>{await new Promise((e=>setTimeout(e,500))),O(!0);const e=await ve(s.patientCode,s.phone,s.fullName,s.dayOfBirth);O(!1),i(e),c(t),d(n),w.current.reset(),w.current.querySelectorAll("input, textarea").forEach((e=>e.dispatchEvent(new Event("input",{bubbles:!0})))),b(null),e.length>0&&k.current.focus()},F=()=>{(()=>{const e={...l};let t=!0;return""===s.patientCode&&""===s.fullName&&""===s.dayOfBirth&&""===s.phone&&(e.patientCode.isError=!0,e.fullName.isError=!0,e.dayOfBirth.isError=!0,e.phone.isError=!0,t=!1),""!==l.patientCode.title&&(Object.values(l).every((e=>!1===e.focus))&&(e.patientCode.isError=!0,e.patientCode.focus=!0,b("patientCode")),t=!1),""!==l.dayOfBirth.title&&(Object.values(l).every((e=>!1===e.focus))&&(e.dayOfBirth.isError=!0,v.current&&v.current.focus()),t=!1),""!==l.phone.title&&(Object.values(l).every((e=>!1===e.focus))&&(e.phone.isError=!0,e.phone.focus=!0,b("phone")),t=!1),d(e),t})()&&M()},R=e=>{13===e.which&&"Enter"===e.code&&F()},A=async t=>{O(!0);const n=await Ne(t.patientId),o={examinationId:"",oldDisease:!0,oldDiseaseWithNullCodeWard:!t.codeWard,height:"",weight:"",headCircumference:"",reason:"",vaccination:n.vaccination,medicalTypeId:n.medicalTypeId,userIdDoctor:"",patient:{patientId:t.patientId,patientCode:t.patientCode,identifier:t.identifier,address:t.address,fullName:t.fullName,dayOfBirth:t.dayOfBirth,codeWard:t.codeWard,gender:t.gender,fullNameMother:t.fullNameMother,phoneMother:t.phoneMother,fullNameFather:t.fullNameFather,phoneFather:t.phoneFather}};e.setDataPatientsRegister(o),O(!1),P()};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(h.a,{fullWidth:!0,maxWidth:"md",open:e.openModalOldDisease,onClose:(e,t)=>P(0,t),disableEscapeKeyDown:!0,sx:{".MuiDialog-paperWidthMd":{maxWidth:"970px"}},children:[Object(E.jsx)(p.a,{sx:{m:0,p:1.4,fontWeight:"bolder",fontSize:"22px",textAlign:"center"},children:"T\xecm b\u1ec7nh c\u0169"}),Object(E.jsx)(g.a,{onClick:()=>P(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsxs)(u.a,{dividers:!0,sx:{p:"10px 24px"},children:[Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"space-around"},component:"form",ref:w,children:[Object(E.jsx)(Ye.a,{theme:I,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:l.patientCode.title}),open:l.patientCode.openTooltip,children:Object(E.jsx)(j.a,{sx:{"&.MuiTextField-root":{marginTop:"7.5px"}},error:!0===l.patientCode.isError,label:"M\xe3 BN",variant:"outlined",size:"small",autoFocus:!0,inputRef:e=>e&&"patientCode"===x&&e.focus(),inputProps:{maxLength:14},onChange:e=>(e=>{if(""!==e){const t=e;a.current&&clearInterval(a.current),a.current=setTimeout((()=>{const n={...l};e.length<8?(n.patientCode.title="M\xe3 b\u1ec7nh nh\xe2n ph\u1ea3i t\u1eeb 8 \u0111\u1ebfn 14 s\u1ed1",n.patientCode.isError=!0,n.patientCode.openTooltip=!0,d(n)):("patientCode"===x&&b(null),c((e=>(e.patientCode=t,{...e}))),n.patientCode.title="",n.patientCode.isError=!1,n.patientCode.openTooltip=!1,n.patientCode.isError=!1,n.fullName.isError=!1,n.dayOfBirth.isError=!1,n.phone.isError=!1,d(n))}),100)}else{const e={...l};e.patientCode.title="",e.patientCode.openTooltip=!1,e.patientCode.isError=!1,d(e)}})(e.target.value),onBlur:e=>S(e.target.value,"patientCode"),onKeyDown:T})})}),Object(E.jsx)(Ye.a,{theme:I,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:l.fullName.title}),open:l.fullName.openTooltip,children:Object(E.jsx)(j.a,{sx:{"&.MuiTextField-root":{marginTop:"7.5px"}},inputRef:e=>e&&"fullName"===x&&e.focus(),error:!0===l.fullName.isError,label:"H\u1ecd t\xean",variant:"outlined",size:"small",onChange:e=>(e=>{"fullName"===x&&b(null),c((t=>(t.fullName=e,{...t})));const t={...l};t.patientCode.isError=!1,t.fullName.isError=!1,t.dayOfBirth.isError=!1,t.phone.isError=!1,d(t)})(e.target.value),onKeyDown:e=>R(e)})})}),Object(E.jsx)(Ve.a,{dateAdapter:Ue.a,adapterLocale:"vi",children:Object(E.jsx)(Ye.a,{theme:I,children:Object(E.jsx)(He.a,{components:["DatePicker"],children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:l.dayOfBirth.title}),open:l.dayOfBirth.openTooltip,children:Object(E.jsx)(B.a,{sx:{width:222},children:Object(E.jsx)(Ke.a,{label:"Ng\xe0y sinh",format:"DD/MM/YYYY",disableFuture:!0,disableOpenPicker:!0,renderInput:e=>Object(E.jsx)(j.a,{...e,size:"small"}),slotProps:{textField:{inputRef:v,error:!0===l.dayOfBirth.isError,size:"small",onBlur:e=>S(e.target.value,"dayOfBirth"),onKeyDown:e=>R(e)}},onChange:e=>(e=>{if(e){const t=e._d,n=new Date,o=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth(),r=n.getDate()-t.getDate(),i=n.getFullYear()-t.getFullYear();let s=12*o+a,h=r;r<0&&(s-=1,h+=30);const p={...l};if(n<t||isNaN(i)||s>24||24===s&&h>29)p.dayOfBirth.title="B\u1ec7nh nh\xe2n l\u1edbn h\u01a1n 24 th\xe1ng tu\u1ed5i kh\xf4ng th\u1ec3 kh\xe1m",p.dayOfBirth.openTooltip=!0,p.dayOfBirth.isError=!0,d(p);else{const e=Je()(t).format("YYYY-MM-DD");c((t=>(t.dayOfBirth=e,{...t}))),p.dayOfBirth.title="",p.dayOfBirth.openTooltip=!1,p.patientCode.isError=!1,p.fullName.isError=!1,p.dayOfBirth.isError=!1,p.phone.isError=!1,d(p)}}})(e)})})})})})}),Object(E.jsx)(Ye.a,{theme:I,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:l.phone.title}),open:l.phone.openTooltip,children:Object(E.jsx)(j.a,{sx:{"&.MuiTextField-root":{marginTop:"7.5px"}},inputRef:e=>e&&"phone"===x&&e.focus(),error:!0===l.phone.isError,label:"\u0110i\u1ec7n tho\u1ea1i cha/m\u1eb9",variant:"outlined",size:"small",inputProps:{maxLength:10},onChange:e=>(e=>{if(""!==e){const t=e;a.current&&clearInterval(a.current),a.current=setTimeout((()=>{const n={...l};e.length<10?(n.phone.title="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a \u0111\u1ee7 10 s\u1ed1",n.phone.isError=!0,n.phone.openTooltip=!0,d(n)):("phone"===x&&b(null),c((e=>(e.phone=t,{...e}))),n.phone.title="",n.phone.openTooltip=!1,n.phone.isError=!1,n.patientCode.isError=!1,n.fullName.isError=!1,n.dayOfBirth.isError=!1,d(n))}),100)}else{const e={...l};e.patientCode.title="",e.patientCode.openTooltip=!1,e.patientCode.isError=!1,d(e)}if(""!==e){const t={...l};e.length<10?(t.phone.title="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a \u0111\u1ee7 10 s\u1ed1",t.phone.openTooltip=!0,d(t),c((t=>(t.phone=e,{...t})))):("phone"===x&&b(null),t.phone.title="",t.phone.openTooltip=!1,t.phone.isError=!1,t.patientCode.isError=!1,t.fullName.isError=!1,t.dayOfBirth.isError=!1,d(t))}else{const e={...l};e.phone.title="",e.phone.openTooltip=!1,e.phone.isError=!1,d(e)}})(e.target.value),onKeyDown:T,onBlur:e=>S(e.target.value,"phone")})})})]}),Object(E.jsx)(B.a,{sx:{display:"flex",justifyContent:"center",mt:1.6},children:Object(E.jsx)(N.a,{variant:"contained",color:"primary",onClick:()=>F(),children:"T\xecm (Enter)"})}),Object(E.jsx)(B.a,{children:r?0!==r.length?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(rt.a,{component:ct.a,sx:{boxShadow:4,mt:1.4},tabIndex:0,onKeyDown:e=>(e=>{"ArrowDown"===e.key?C((e=>Math.min(e+1,r.length-1))):"ArrowUp"===e.key?C((e=>Math.max(e-1,0))):"Enter"===e.key&&null!==y&&A(r[y])})(e),ref:k,children:Object(E.jsxs)(nt.a,{stickyHeader:!0,children:[Object(E.jsx)(it.a,{children:Object(E.jsxs)(st.a,{sx:{"& th":{color:"rgba(96, 96, 96)",backgroundColor:"pink"}},children:[Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"M\xe3 BN"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"H\u1ecd t\xean"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"Ng\xe0y sinh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"Gi\u1edbi t\xednh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"\u0110\u1ecba ch\u1ec9"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"Cha/M\u1eb9"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"\u0110i\u1ec7n tho\u1ea1i"})]})}),Object(E.jsx)(ot.a,{children:r?r.map(((e,t)=>Object(E.jsxs)(st.a,{hover:!0,role:"checkbox",sx:{cursor:"pointer"},selected:y===t,onDoubleClick:()=>A(e),children:[Object(E.jsx)(at.a,{align:"left",children:e.patientCode}),Object(E.jsx)(at.a,{align:"left",children:e.fullName}),Object(E.jsx)(at.a,{align:"left",children:Je()(e.dayOfBirth).format("DD/MM/YYYY")}),Object(E.jsx)(at.a,{align:"left",children:!0===e.gender?"Nam":"N\u1eef"}),Object(E.jsx)(at.a,{align:"left",children:e.fullAddress}),Object(E.jsx)(at.a,{align:"left",children:e.fullNameMother||e.fullNameFather}),Object(E.jsx)(at.a,{align:"left",children:e.phoneMother||e.phoneFather})]},t))):null})]})}),Object(E.jsxs)(D.a,{variant:"subtitle1",sx:{textAlign:"center",mt:1.5,fontWeight:"bolder",color:"green"},children:["T\xecm th\u1ea5y ",r.length," b\u1ec7nh nh\xe2n"]})]}):Object(E.jsx)(D.a,{variant:"subtitle1",sx:{textAlign:"center",mt:1.5,fontWeight:"bolder",color:"red"},children:"Kh\xf4ng t\xecm th\u1ea5y b\u1ec7nh nh\xe2n"}):null})]})]}),Object(E.jsx)(Re,{openAlertProcessing:f,setOpenAlertProcessing:O})]})};var Ot=function(e){const[t,n]=Object(o.useState)(!1),a=(t,n)=>{n&&"backdropClick"===n||e.setOpenOldDiseaseRegister(!1)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(h.a,{fullWidth:!0,maxWidth:"md",open:e.openOldDiseaseRegister,onClose:(e,t)=>a(0,t),disableEscapeKeyDown:!0,sx:{".MuiDialog-paperWidthMd":{maxWidth:"970px"}},children:[Object(E.jsx)(p.a,{sx:{padding:"10px 0px 10px 0px",fontWeight:"bolder",fontSize:"22px",textAlign:"center"},children:"B\u1ec7nh nh\xe2n \u0111\xe3 tham gia kh\xe1m \u0111\u1ecbnh k\u1ef3 thu\u1ed9c danh s\xe1ch d\u01b0\u1edbi \u0111\xe2y?"}),Object(E.jsx)(g.a,{onClick:()=>a(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsx)(u.a,{sx:{padding:"0px 18px 0px 18px",mt:0,mb:3},children:0!==e.listOldDiseaseRegister.length?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(rt.a,{component:ct.a,sx:{boxShadow:4},children:Object(E.jsxs)(nt.a,{stickyHeader:!0,children:[Object(E.jsx)(it.a,{children:Object(E.jsxs)(st.a,{sx:{"& th":{color:"rgba(96, 96, 96)",backgroundColor:"pink"}},children:[Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"M\xe3 BN"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"H\u1ecd t\xean"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"Ng\xe0y sinh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"Gi\u1edbi t\xednh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"\u0110\u1ecba ch\u1ec9"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"Cha/M\u1eb9"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"1rem"},children:"\u0110i\u1ec7n tho\u1ea1i"})]})}),Object(E.jsx)(ot.a,{children:e.listOldDiseaseRegister.map(((t,o)=>Object(E.jsxs)(st.a,{hover:!0,role:"checkbox",sx:{cursor:"pointer"},onDoubleClick:()=>(async t=>{n(!0),n(!0);const o=await Ne(t.patientId),r={examinationId:"",oldDisease:!0,oldDiseaseWithNullCodeWard:!t.codeWard,height:"",weight:"",headCircumference:"",reason:"",vaccination:o.vaccination,medicalTypeId:o.medicalTypeId,userIdDoctor:"",patient:{patientId:t.patientId,patientCode:t.patientCode,identifier:t.identifier,address:t.address,fullName:t.fullName,dayOfBirth:t.dayOfBirth,codeWard:t.codeWard,gender:t.gender,fullNameMother:t.fullNameMother,phoneMother:t.phoneMother,fullNameFather:t.fullNameFather,phoneFather:t.phoneFather}};e.setDataPatientsRegister(r),n(!1),a()})(t),children:[Object(E.jsx)(at.a,{align:"left",children:t.patientCode}),Object(E.jsx)(at.a,{align:"left",children:t.fullName}),Object(E.jsx)(at.a,{align:"left",children:Je()(t.dayOfBirth).format("DD/MM/YYYY")}),Object(E.jsx)(at.a,{align:"left",children:!0===t.gender?"Nam":"N\u1eef"}),Object(E.jsx)(at.a,{align:"left",children:t.fullAddress}),Object(E.jsx)(at.a,{align:"left",children:t.fullNameMother||t.fullNameFather}),Object(E.jsx)(at.a,{align:"left",children:t.phoneMother||t.phoneFather})]},o)))})]})})}):null})]}),Object(E.jsx)(Re,{openAlertProcessing:t,setOpenAlertProcessing:n})]})},yt=n(508);var Ct=function(e){const t={examinationId:"",oldDisease:!1,height:"",weight:"",headCircumference:"",reason:"",vaccination:!1,medicalTypeId:"",userIdDoctor:"",patient:{patientCode:"",identifier:"",address:"",fullName:"",dayOfBirth:"",codeWard:"",gender:"",fullNameMother:"",phoneMother:"",fullNameFather:"",phoneFather:""}},n={dayOfBirth:null,gender:{value:null,openOption:!1},province:{value:null,openOption:!1},district:{value:null,openOption:!1},ward:{value:null,openOption:!1},medicalType:{value:null,openOption:!1},vaccination:!1},a={identifier:{title:"",isError:!1,openTooltip:!1,focus:!1},patientCode:{title:"",isError:!1,openTooltip:!1,focus:!1},fullName:{title:"",isError:!1,openTooltip:!1,focus:!1},dayOfBirth:{title:"",isError:!1,openTooltip:!1,focus:!1},gender:{title:"",isError:!1,openTooltip:!1,focus:!1},province:{title:"",isError:!1,openTooltip:!1,focus:!1},district:{title:"",isError:!1,openTooltip:!1,focus:!1},ward:{title:"",isError:!1,openTooltip:!1,focus:!1},address:{title:"",isError:!1,openTooltip:!1,focus:!1},fullNameMother:{title:"",isError:!1,openTooltip:!1,focus:!1},phoneMother:{title:"",isError:!1,openTooltip:!1,focus:!1},phoneFather:{title:"",isError:!1,openTooltip:!1,focus:!1},height:{title:"",isError:!1,openTooltip:!1,focus:!1},weight:{title:"",isError:!1,openTooltip:!1,focus:!1},headCircumference:{title:"",isError:!1,openTooltip:!1,focus:!1},medicalType:{title:"",isError:!1,openTooltip:!1,focus:!1},reason:{title:"",isError:!1,openTooltip:!1,focus:!1}},r=[{genderOrder:1,genderName:"Nam",genderValue:!0},{genderOrder:2,genderName:"N\u1eef",genderValue:!1}],i=[{medicalTypeOrder:1,medicalTypeName:"Kh\xe1m Nhi khoa ph\xe1t tri\u1ec3n",medicalTypeId:1},{medicalTypeOrder:2,medicalTypeName:"Kh\xe1m tr\u1ebb nguy c\u01a1 cao",medicalTypeId:2}],{isDialogChangePasswordOpen:c,isOldDiseaseWithNullCodeWard:l,isDialogChangeInfoUserOpen:d,setIsOldDiseaseWithNullCodeWard:h}=Object(o.useContext)(R),[p,u]=Object(o.useState)(!1),[g,x]=Object(o.useState)(!1),[m,f]=Object(o.useState)(!1),[O,y]=Object(o.useState)(!1),[C,v]=Object(o.useState)([]),[k,I]=Object(o.useState)(!1),[T,S]=Object(o.useState)(t),[P,M]=Object(o.useState)(a),[F,A]=Object(o.useState)(null),[z,W]=Object(o.useState)(n),[L,Y]=Object(o.useState)([]),[H,U]=Object(o.useState)({list:[],loading:!1}),[V,K]=Object(o.useState)({list:[],loading:!1}),G=Object(o.useRef)(null),J=Object(o.useRef)(null),q=Object(o.useRef)(null),_=Object(o.useRef)(null),X=Object(Le.a)({components:{MuiTooltip:{defaultProps:{placement:"bottom",arrow:!0,componentsProps:{tooltip:{sx:{bgcolor:"#d32f2f"}},arrow:{sx:{color:"#d32f2f"}}},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-7]}}]}}}}}}),Z=(e,t)=>{if(!/[0-9]/.test(e.key)&&"Backspace"!==e.key&&"Delete"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"Tab"!==e.key&&"Enter"===e.key)if("Enter"===e.key){e.preventDefault();let n=null;n=T.oldDiseaseWithNullCodeWard&&"patientFullName"===t?document.getElementById("patientProvince"):T.oldDiseaseWithNullCodeWard&&"patientAddress"===t?document.getElementById("patientWeight"):document.getElementById(t),n&&(n.focus(),n.select())}else e.preventDefault()},$=(e,t)=>{let{inputValue:n}=t;const o=n.toLowerCase(),a=e=>e.replace(/\u0111/g,"d");return e.filter((e=>{const t=a(e.fullName.toLowerCase()),n=a(e.fullName.split(" ").map((e=>e[0])).join("").toLowerCase()),r=a(o);return t.includes(r)||n.includes(r)}))},ee=e=>{"Gender"===e?W((e=>(e.gender.openOption=!0,{...e}))):"Province"===e?W((e=>(e.province.openOption=!0,{...e}))):"District"===e?W((e=>(e.district.openOption=!0,{...e}))):"Ward"===e?W((e=>(e.ward.openOption=!0,{...e}))):"MedicalType"===e&&W((e=>(e.medicalType.openOption=!0,{...e})))},te=(e,t)=>{if(""===e||"DD/MM/YYYY"===e){const e={...P};"Identifier"===t&&(_.current&&clearInterval(_.current),_.current=setTimeout((()=>{e.identifier.title="",e.identifier.openTooltip=!1,e.identifier.isError=!1,e.identifier.focus=!1,M(e)}),10)),"PhoneFather"===t?(_.current&&clearInterval(_.current),_.current=setTimeout((()=>{e.phoneFather.title="",e.phoneFather.openTooltip=!1,e.phoneFather.isError=!1,e.patientCode.focus=!1,M(e)}),10)):"Gender"===t?W((e=>(e.gender.openOption=!1,{...e}))):"Province"===t?W((e=>(e.province.openOption=!1,{...e}))):"District"===t?W((e=>(e.district.openOption=!1,{...e}))):"Ward"===t?W((e=>(e.ward.openOption=!1,{...e}))):"MedicalType"===t&&W((e=>(e.medicalType.openOption=!1,{...e})))}else""!==e&&("Gender"===t?W((e=>(e.gender.openOption=!1,{...e}))):"Province"===t?W((e=>(e.province.openOption=!1,{...e}))):"District"===t?W((e=>(e.district.openOption=!1,{...e}))):"Ward"===t?W((e=>(e.ward.openOption=!1,{...e}))):"MedicalType"===t&&W((e=>(e.medicalType.openOption=!1,{...e}))))},ne=()=>{setTimeout((()=>{(()=>{let e=!0;const t={...P};return""!==P.identifier.title&&(Object.values(t).every((e=>!1===e.focus))&&(t.identifier.focus=!0,A("identifier")),e=!1),""===T.patient.patientCode&&(t.patientCode.title="B\u1ea1n ch\u01b0a nh\u1eadp m\xe3 b\u1ec7nh nh\xe2n",t.patientCode.openTooltip=!0,t.patientCode.isError=!0,Object.values(P).every((e=>!1===e.focus))&&(t.patientCode.focus=!0,A("patientCode")),e=!1),""!==P.patientCode.title&&(Object.values(t).every((e=>!1===e.focus))&&(t.patientCode.focus=!0,A("patientCode")),e=!1),""===T.patient.fullName&&(t.fullName.title="B\u1ea1n ch\u01b0a nh\u1eadp h\u1ecd t\xean",t.fullName.openTooltip=!0,t.fullName.isError=!0,Object.values(P).every((e=>!1===e.focus))&&(t.fullName.focus=!0,A("fullName")),e=!1),""===T.patient.dayOfBirth&&(t.dayOfBirth.title="B\u1ea1n ch\u01b0a nh\u1eadp ng\xe0y sinh",t.dayOfBirth.openTooltip=!0,t.dayOfBirth.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.dayOfBirth.focus=!0,q.current&&q.current.focus()),e=!1),""!==P.dayOfBirth.title&&(Object.values(t).every((e=>!1===e.focus))&&(t.dayOfBirth.focus=!0,q.current&&q.current.focus()),e=!1),""===T.patient.gender&&(t.gender.title="B\u1ea1n ch\u01b0a ch\u1ecdn gi\u1edbi t\xednh",t.gender.openTooltip=!0,t.gender.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.gender.focus=!0,W((e=>(e.gender.openOption=!0,{...e}))),A("gender")),e=!1),null===z.province.value&&(t.province.title="B\u1ea1n ch\u01b0a ch\u1ecdn t\u1ec9nh th\xe0nh",t.province.openTooltip=!0,t.province.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.province.focus=!0,W((e=>(e.province.openOption=!0,{...e}))),A("province")),e=!1),null===z.district.value&&(t.district.title="B\u1ea1n ch\u01b0a ch\u1ecdn qu\u1eadn huy\u1ec7n",t.district.openTooltip=!0,t.district.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.district.focus=!0,W((e=>(e.district.openOption=!0,{...e}))),A("district")),e=!1),null===z.ward.value&&(t.ward.title="B\u1ea1n ch\u01b0a ch\u1ecdn ph\u01b0\u1eddng x\xe3",t.ward.openTooltip=!0,t.ward.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.ward.focus=!0,W((e=>(e.ward.openOption=!0,{...e}))),A("ward")),e=!1),""===T.patient.address&&(t.address.title="B\u1ea1n ch\u01b0a nh\u1eadp \u0111\u1ecba ch\u1ec9",t.address.openTooltip=!0,t.address.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.address.focus=!0,A("address")),e=!1),""===T.patient.fullNameMother&&""===T.patient.fullNameFather&&(t.fullNameMother.title="B\u1ea1n ch\u01b0a nh\u1eadp t\xean ph\u1ee5 huynh",t.fullNameMother.openTooltip=!0,t.fullNameMother.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.fullNameMother.focus=!0,A("fullNameMother")),e=!1),""===T.patient.phoneMother&&""===T.patient.phoneFather&&(t.phoneMother.title="B\u1ea1n ch\u01b0a nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",t.phoneMother.openTooltip=!0,t.phoneMother.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.phoneMother.focus=!0,A("phoneMother")),e=!1),""!==P.phoneMother.title&&(Object.values(t).every((e=>!1===e.focus))&&(t.phoneMother.focus=!0,A("phoneMother")),e=!1),""!==P.phoneFather.title&&(Object.values(t).every((e=>!1===e.focus))&&(t.phoneFather.focus=!0,A("phoneFather")),e=!1),""===T.weight&&(t.weight.title="B\u1ea1n ch\u01b0a nh\u1eadp c\xe2n n\u1eb7ng",t.weight.openTooltip=!0,t.weight.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.weight.focus=!0,A("weight")),e=!1),""===T.height&&(t.height.title="B\u1ea1n ch\u01b0a nh\u1eadp chi\u1ec1u cao",t.height.openTooltip=!0,t.height.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.height.focus=!0,A("height")),e=!1),""===T.headCircumference&&(t.headCircumference.title="B\u1ea1n ch\u01b0a nh\u1eadp s\u1ed1 v\xf2ng \u0111\u1ea7u",t.headCircumference.openTooltip=!0,t.headCircumference.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.headCircumference.focus=!0,A("headCircumference")),e=!1),""===T.medicalTypeId&&(t.medicalType.title="B\u1ea1n ch\u01b0a ch\u1ecdn lo\u1ea1i h\xecnh kh\xe1m",t.medicalType.openTooltip=!0,t.medicalType.isError=!0,Object.values(t).every((e=>!1===e.focus))&&(t.medicalType.focus=!0,W((e=>(e.medicalType.openOption=!0,{...e}))),A("medicalType")),e=!1),M(t),e})()&&(J.current.focus(),e.dataPantientAppointmentsToday?oe():u(!0))}),100)},oe=async()=>{I(!0);const t=await be(T);200===t.status?(s.b.success(t.data,{toastId:"success5"}),e.setCompleteMedicalRegister(!0),ae()):s.b.error(t.data,{toastId:"error5"}),I(!1)},ae=()=>{G.current.reset();G.current.querySelectorAll("input, textarea").forEach((e=>e.dispatchEvent(new Event("input",{bubbles:!0})))),W(n),U((e=>(e.loading=!1,e.list=[],{...e}))),K((e=>(e.loading=!1,e.list=[],{...e}))),e.dataPantientAppointmentsToday&&e.setDataPantientAppointmentsToday(),A(null);const o=!!T.oldDisease;S(t),M(a),l&&h(!1),o?setTimeout((()=>{J.current.focus()}),100):J.current.focus()},re=()=>{G.current.reset();G.current.querySelectorAll("input, textarea").forEach((e=>e.dispatchEvent(new Event("input",{bubbles:!0})))),W(n),U((e=>(e.loading=!1,e.list=[],{...e}))),K((e=>(e.loading=!1,e.list=[],{...e}))),e.dataPantientAppointmentsToday&&e.setDataPantientAppointmentsToday(),A(null),J.current.focus(),l&&h(!1),S(t),W(n),M(a),f(!0)},ie=async()=>{const e=await ve(T.patient.patientCode,T.patient.phoneMother?T.patient.phoneMother:T.patient.phoneFather,T.patient.fullName,T.patient.dayOfBirth);0!==e.length&&(v(e),y(!0))};return Object(o.useEffect)((()=>{(async()=>{const e=await Xe();400!==e&&Y(e)})(),J.current.focus()}),[]),Object(o.useEffect)((()=>{!0===T.oldDisease&&(async()=>{I(!0),document.getElementById("patientIdentifier").value=T.patient.identifier,document.getElementById("patientCode").value=T.patient.patientCode,document.getElementById("patientFullName").value=T.patient.fullName;let e={...z};if(e.dayOfBirth=Je()(T.patient.dayOfBirth),T.patient.codeWard){const t=await et(T.patient.codeWard),n=await Ze(t.provinceCode),o=await $e(t.districtCode),a=L.findIndex((e=>e.code===t.provinceCode)),r=n.findIndex((e=>e.code===t.districtCode)),i=o.findIndex((e=>e.code===t.wardCode));e.province.value=L[a],e.district.value=n[r],e.ward.value=o[i],e.vaccination=T.vaccination}const t=r.findIndex((e=>e.genderValue===T.patient.gender));e.gender.value=r[t];const n=i.findIndex((e=>e.medicalTypeId===T.medicalTypeId));e.medicalType.value=i[n],W(e),h(!0),document.getElementById("patientAddress").value=T.patient.address,document.getElementById("patientFullNameMother").value=T.patient.fullNameMother,document.getElementById("patientPhoneMother").value=T.patient.phoneMother,document.getElementById("patientFullNameFather").value=T.patient.fullNameFather,document.getElementById("patientPhoneFather").value=T.patient.phoneFather,T.oldDiseaseWithNullCodeWard?setTimeout((()=>{M(a),I(!1),A("patientCode")}),300):(M(a),I(!1),A("weight"))})()}),[T.oldDisease]),Object(o.useEffect)((()=>{e.dataPantientAppointmentsToday&&(S(e.dataPantientAppointmentsToday),(async()=>{I(!0),document.getElementById("patientIdentifier").value=e.dataPantientAppointmentsToday.patient.identifier,document.getElementById("patientCode").value=e.dataPantientAppointmentsToday.patient.patientCode,document.getElementById("patientFullName").value=e.dataPantientAppointmentsToday.patient.fullName;const t={...z};t.dayOfBirth=Je()(e.dataPantientAppointmentsToday.patient.dayOfBirth);const n=await et(e.dataPantientAppointmentsToday.patient.codeWard),o=await Ze(n.provinceCode),s=await $e(n.districtCode),c=r.findIndex((t=>t.genderValue===e.dataPantientAppointmentsToday.patient.gender)),l=L.findIndex((e=>e.code===n.provinceCode)),d=o.findIndex((e=>e.code===n.districtCode)),h=s.findIndex((e=>e.code===n.wardCode)),p=i.findIndex((t=>t.medicalTypeId===e.dataPantientAppointmentsToday.medicalTypeId));t.gender.value=r[c],t.province.value=L[l],t.district.value=o[d],t.ward.value=s[h],t.medicalType.value=i[p],t.vaccination=e.dataPantientAppointmentsToday.vaccination,W(t),document.getElementById("patientAddress").value=e.dataPantientAppointmentsToday.patient.address,document.getElementById("patientFullNameMother").value=e.dataPantientAppointmentsToday.patient.fullNameMother,document.getElementById("patientPhoneMother").value=e.dataPantientAppointmentsToday.patient.phoneMother,document.getElementById("patientFullNameFather").value=e.dataPantientAppointmentsToday.patient.fullNameFather,document.getElementById("patientPhoneFather").value=e.dataPantientAppointmentsToday.patient.phoneFather,M(a),I(!1),A("weight")})())}),[e.dataPantientAppointmentsToday]),Object(o.useEffect)((()=>{!1===c&&!1===d&&(e.onF2Press&&(!0===p&&!1===m?(x(!0),e.setOnF2Press(!1)):(ne(),e.setOnF2Press(!1))),e.onF4Press&&(!0===p||!0===m||ae(),e.setOnF4Press(!1)),e.onF8Press&&(!0===p||!0===m||re(),e.setOnF8Press(!1)))}),[e.onF2Press,e.onF4Press,e.onF8Press,c,d]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(ue.a,{sx:{"&.MuiContainer-maxWidthLg":{pr:0},height:"100%"},children:Object(E.jsxs)(B.a,{sx:{minHeight:"36.8rem",borderRadius:"20px",boxShadow:5,pt:1.2,pb:1.2,pl:1.8,pr:1.8},children:[Object(E.jsx)(D.a,{variant:"h6",sx:{textAlign:"center",fontWeight:"bolder",color:"blue"},children:"Th\xf4ng tin \u0111\u0103ng k\xfd kh\xe1m"}),Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},component:"form",ref:G,children:[Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.identifier.title}),open:P.identifier.openTooltip,placement:"left",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"18%",marginTop:"20px"},children:Object(E.jsx)(j.a,{error:!0===P.identifier.isError,disabled:!0===T.oldDisease,label:"M\xe3 \u0111\u1ecbnh danh",variant:"outlined",id:"patientIdentifier",autoComplete:"off",inputRef:"identifier"===F?e=>e&&"identifier"===F&&e.focus():J,onChange:e=>(e=>{if(""!==e){"identifier"===F&&A(null);const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{const e={...P};t.length<12?(e.identifier.title="M\xe3 \u0111\u1ecbnh danh ch\u01b0a \u0111\u1ee7 12 s\u1ed1",e.identifier.openTooltip=!0,e.identifier.isError=!0,e.identifier.focus=!1,M(e)):(S((e=>(e.patient.identifier=t,{...e}))),e.identifier.title="",e.identifier.openTooltip=!1,e.identifier.isError=!1,e.identifier.focus=!1,M(e))}),100)}else{"identifier"===F&&A(null);const e={...P};e.identifier.title="",e.identifier.openTooltip=!1,e.identifier.isError=!1,e.identifier.focus=!1,M(e)}})(e.target.value),onKeyDown:e=>Z(e,"patientCode"),onBlur:e=>te(e.target.value,"Identifier"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"},maxLength:12},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.patientCode.title}),open:P.patientCode.openTooltip,placement:"top",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"19%",marginTop:"20px"},children:Object(E.jsx)(j.a,{error:!0===P.patientCode.isError,disabled:!0===T.oldDisease&&!1===T.oldDiseaseWithNullCodeWard,label:"M\xe3 BN",variant:"outlined",id:"patientCode",autoComplete:"off",inputRef:e=>e&&"patientCode"===F&&e.focus(),onChange:e=>(e=>{if(""!==e){const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{const e={...P};t.length<8?(e.patientCode.title="M\xe3 BN ph\u1ea3i t\u1eeb 8 \u0111\u1ebfn 14 s\u1ed1",e.patientCode.openTooltip=!0,e.patientCode.isError=!0,e.patientCode.focus=!1,M(e)):("patientCode"===F&&A(null),S((e=>(e.patient.patientCode=t,{...e}))),e.patientCode.title="",e.patientCode.openTooltip=!1,e.patientCode.isError=!1,e.patientCode.focus=!1,M(e)),14===T.patient.patientCode.length&&ie()}),100)}})(e.target.value),onKeyDown:e=>Z(e,"patientFullName"),onBlur:e=>te(e.target.value,"PatientId"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"},maxLength:14},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.fullName.title}),open:P.fullName.openTooltip,placement:"top",PopperProps:{sx:{zIndex:2}},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[37,-7]}}]}},children:Object(E.jsx)("div",{style:{width:"30%",display:"inline-grid",marginTop:"20px"},children:Object(E.jsx)(j.a,{error:!0===P.fullName.isError,disabled:!0===T.oldDisease,label:"H\u1ecd t\xean",variant:"outlined",id:"patientFullName",autoComplete:"off",inputRef:e=>e&&"fullName"===F&&e.focus(),onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if(S((e=>(e.patient.fullName=t,{...e}))),"fullName"===F&&A(null),P.fullName.isError){const e={...P};e.fullName.title="",e.fullName.openTooltip=!1,e.fullName.isError=!1,e.fullName.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientDayOfBirth"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"}},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(Ve.a,{dateAdapter:Ue.a,adapterLocale:"vi",children:Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(He.a,{components:["DatePicker"],children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.dayOfBirth.title}),open:P.dayOfBirth.openTooltip,placement:"bottom",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)(B.a,{sx:{width:142,mt:"12px !important"},children:Object(E.jsx)("div",{style:{width:"100%"},children:Object(E.jsx)(yt.a,{label:"Ng\xe0y sinh",format:"DD/MM/YYYY",value:z.dayOfBirth,disabled:!0===T.oldDisease,slotProps:{textField:{inputRef:q,id:"patientDayOfBirth",error:!0===P.dayOfBirth.isError,onBlur:e=>te(e.target.value,"dayOfBirth"),sx:{"& .MuiInputBase-input":{WebkitTextFillColor:!0===T.oldDisease?"#ff1744":""}}}},onChange:e=>(e=>{if(e){const t=e._d;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{const n=new Date,o=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth(),r=n.getDate()-t.getDate(),i=n.getFullYear()-t.getFullYear();let s=12*o+a,c=r;r<0&&(s-=1,c+=30);const l={...P};if(n<t||i>2||isNaN(i)||s>24||24===s&&c>29)l.dayOfBirth.title="B\u1ec7nh nh\xe2n l\u1edbn h\u01a1n 24 th\xe1ng tu\u1ed5i kh\xf4ng th\u1ec3 kh\xe1m",l.dayOfBirth.openTooltip=!0,l.dayOfBirth.isError=!0,l.dayOfBirth.focus=!1,M(l),W((t=>(t.dayOfBirth=e,{...t})));else{"dayOfBirth"===F&&A(null);const n=Je()(t).format("YYYY-MM-DD");S((e=>(e.patient.dayOfBirth=n,{...e}))),W((t=>(t.dayOfBirth=e,{...t}))),l.dayOfBirth.title="",l.dayOfBirth.openTooltip=!1,l.dayOfBirth.isError=!1,l.dayOfBirth.focus=!1,M(l)}}),100)}})(e),onKeyDown:e=>Z(e,"patientGender")})})})})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.gender.title}),open:P.gender.openTooltip,placement:"top",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"12%",marginTop:"20px"},children:Object(E.jsx)(Q.a,{disablePortal:!0,id:"patientGender",disabled:!0===T.oldDisease,value:z.gender.value,options:r,getOptionLabel:e=>e.genderName,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.genderName}),onChange:(e,t)=>((e,t)=>{if("gender"===F&&A(null),S((e=>(e.patient.gender=t.genderValue,{...e}))),W((e=>(e.gender.value=t,{...e}))),P.gender.isError){const e={...P};e.gender.title="",e.gender.openTooltip=!1,e.gender.isError=!1,e.gender.focus=!1,M(e)}})(0,t),onKeyDown:e=>Z(e,"patientProvince"),open:z.gender.openOption,onFocus:()=>ee("Gender"),onBlur:e=>te(e.target.value,"Gender"),autoComplete:!1,renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Gi\u1edbi t\xednh",inputRef:e=>e&&"gender"===F&&e.focus(),error:!0===P.gender.isError,sx:{"& .MuiInputBase-input":{WebkitTextFillColor:!0===T.oldDisease?"#ff1744":""}}}),disableClearable:!0,popupIcon:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.province.title}),open:P.province.openTooltip,placement:"left",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"19.2%",marginTop:"20px"},children:Object(E.jsx)(Q.a,{disablePortal:!0,id:"patientProvince",disabled:!0===T.oldDisease&&!1===T.oldDiseaseWithNullCodeWard,value:z.province.value,options:L,noOptionsText:"\u0110ang t\u1ea3i...",filterOptions:$,getOptionLabel:e=>e.name,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.name}),onChange:(e,t)=>(async(e,t)=>{if("province"===F&&A(null),W((e=>(e.province.value=t,{...e}))),null!==z.district.value&&W((e=>(e.district.value=null,{...e}))),null!==z.ward.value&&W((e=>(e.ward.value=null,{...e}))),P.province.isError){const e={...P};e.province.title="",e.province.openTooltip=!1,e.province.isError=!1,e.province.focus=!1,M(e)}K((e=>(e.list=[],{...e}))),U((e=>(e.loading=!0,{...e})));const n=await Ze(t.code);U((e=>(e.loading=!1,e.list=n,{...e})))})(0,t),onKeyDown:e=>Z(e,"patientDistrict"),open:z.province.openOption,onFocus:()=>ee("Province"),onBlur:e=>te(e.target.value,"Province"),autoComplete:!1,renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Th\xe0nh ph\u1ed1",inputRef:e=>e&&"province"===F&&e.focus(),error:!0===P.province.isError,sx:{"& .MuiInputBase-input":{WebkitTextFillColor:!0===T.oldDisease?"#ff1744":""}}}),disableClearable:!0,popupIcon:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.district.title}),open:P.district.openTooltip,placement:"top",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"24%",marginTop:"20px"},children:Object(E.jsx)(Q.a,{disablePortal:!0,id:"patientDistrict",disabled:!0===T.oldDisease&&!1===T.oldDiseaseWithNullCodeWard,value:z.district.value,options:H.list,noOptionsText:H.loading?"\u0110ang t\u1ea3i...":"",open:z.district.openOption,onFocus:()=>ee("District"),onBlur:e=>te(e.target.value,"District"),filterOptions:$,getOptionLabel:e=>e.name,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.fullName}),onChange:(e,t)=>(async(e,t)=>{if("district"===F&&A(null),W((e=>(e.district.value=t,{...e}))),null!==z.ward.value&&W((e=>(e.ward.value=null,{...e}))),P.district.isError){const e={...P};e.district.title="",e.district.openTooltip=!1,e.district.isError=!1,e.district.focus=!1,M(e)}K((e=>(e.loading=!0,{...e})));const n=await $e(t.code);K((e=>(e.loading=!1,e.list=n,{...e})))})(0,t),onKeyDown:e=>Z(e,"patientWard"),autoComplete:!1,renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Qu\u1eadn/Huy\u1ec7n",inputRef:e=>e&&"district"===F&&e.focus(),error:!0===P.district.isError,sx:{"& .MuiInputBase-input":{WebkitTextFillColor:!0===T.oldDisease?"#ff1744":""}},InputProps:{...e.InputProps,endAdornment:Object(E.jsxs)(E.Fragment,{children:[H.loading?Object(E.jsx)(w.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),disableClearable:!0,popupIcon:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.ward.title}),open:P.ward.openTooltip,placement:"bottom",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"23.5%",marginTop:"20px"},children:Object(E.jsx)(Q.a,{disablePortal:!0,id:"patientWard",disabled:!0===T.oldDisease&&!1===T.oldDiseaseWithNullCodeWard,value:z.ward.value,options:V.list,noOptionsText:V.loading?"\u0110ang t\u1ea3i...":"",filterOptions:$,getOptionLabel:e=>e.name,autoComplete:!1,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.fullName}),onChange:(e,t)=>((e,t)=>{if("ward"===F&&A(null),S((e=>(e.patient.codeWard=t.code,{...e}))),W((e=>(e.ward.value=t,{...e}))),P.ward.isError){const e={...P};e.ward.title="",e.ward.openTooltip=!1,e.ward.isError=!1,e.ward.focus=!1,M(e)}})(0,t),onKeyDown:e=>Z(e,"patientAddress"),open:z.ward.openOption,onFocus:()=>ee("Ward"),onBlur:e=>te(e.target.value,"Ward"),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Ph\u01b0\u1eddng/X\xe3",inputRef:e=>e&&"ward"===F&&e.focus(),error:!0===P.ward.isError,sx:{"& .MuiInputBase-input":{WebkitTextFillColor:!0===T.oldDisease?"#ff1744":""}},InputProps:{...e.InputProps,endAdornment:Object(E.jsxs)(E.Fragment,{children:[V.loading?Object(E.jsx)(w.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),disableClearable:!0,popupIcon:null})})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.address.title}),open:P.address.openTooltip,placement:"bottom",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"30%",display:"inline-grid",marginTop:"20px"},children:Object(E.jsx)(j.a,{error:!0===P.address.isError,disabled:!0===T.oldDisease,label:"\u0110\u1ecba ch\u1ec9",variant:"outlined",id:"patientAddress",autoComplete:"off",inputRef:e=>e&&"address"===F&&e.focus(),onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if("address"===F&&A(null),S((e=>(e.patient.address=t,{...e}))),P.address.isError){const e={...P};e.address.title="",e.address.openTooltip=!1,e.address.isError=!1,e.address.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientFullNameMother"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"}},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.fullNameMother.title}),open:P.fullNameMother.openTooltip,placement:"left",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"30%",display:"inline-grid",marginTop:"20px"},children:Object(E.jsx)(j.a,{error:!0===P.fullNameMother.isError,disabled:!0===T.oldDisease,label:"H\u1ecd t\xean m\u1eb9",variant:"outlined",id:"patientFullNameMother",autoComplete:"off",inputRef:e=>e&&"fullNameMother"===F&&e.focus(),autoFocus:P.fullNameMother.focus,onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if("fullNameMother"===F&&A(null),S((e=>(e.patient.fullNameMother=t,{...e}))),P.fullNameMother.isError){const e={...P};e.fullNameMother.title="",e.fullNameMother.openTooltip=!1,e.fullNameMother.isError=!1,e.fullNameMother.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientPhoneMother"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"}},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.phoneMother.title}),open:P.phoneMother.openTooltip,placement:"bottom",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"18%",marginTop:"20px"},children:Object(E.jsx)(j.a,{error:!0===P.phoneMother.isError,disabled:!0===T.oldDisease,label:"\u0110i\u1ec7n tho\u1ea1i",variant:"outlined",id:"patientPhoneMother",autoComplete:"off",inputRef:e=>e&&"phoneMother"===F&&e.focus(),onChange:e=>(e=>{if(""!==e){const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{"phoneMother"===F&&A(null);const e={...P};t.length<10?(e.phoneMother.title="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a \u0111\u1ee7 10 s\u1ed1",e.phoneMother.openTooltip=!0,e.phoneMother.isError=!0,e.phoneMother.focus=!1,M(e)):(S((e=>(e.patient.phoneMother=t,{...e}))),e.phoneMother.title="",e.phoneMother.openTooltip=!1,e.phoneMother.isError=!1,e.phoneMother.focus=!1,e.phoneFather.title="",e.phoneFather.openTooltip=!1,e.phoneFather.isError=!1,e.phoneFather.focus=!1,M(e))}),100)}else{const e={...P};e.phoneMother.title="",e.phoneMother.openTooltip=!1,e.phoneMother.isError=!1,e.phoneMother.focus=!1,M(e)}})(e.target.value),onKeyDown:e=>Z(e,"patientFullNameFather"),onBlur:e=>te(e.target.value,"PhoneMother"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"},maxLength:10},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(j.a,{label:"H\u1ecd t\xean cha",disabled:!0===T.oldDisease,variant:"outlined",id:"patientFullNameFather",autoComplete:"off",sx:{width:"30.4%","&.MuiTextField-root":{marginTop:"20px"}},onChange:e=>(e=>{"fullNameFather"===F&&A(null);const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if(S((e=>(e.patient.fullNameFather=t,{...e}))),P.fullNameMother.isError){const e={...P};e.fullNameMother.title="",e.fullNameMother.openTooltip=!1,e.fullNameMother.isError=!1,e.fullNameMother.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientPhoneFather"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"}},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.phoneFather.title}),open:P.phoneFather.openTooltip,children:Object(E.jsx)("div",{style:{width:"18%",marginTop:"20px"},children:Object(E.jsx)(j.a,{label:"\u0110i\u1ec7n tho\u1ea1i",disabled:!0===T.oldDisease,inputRef:e=>e&&"phoneFather"===F&&e.focus(),variant:"outlined",id:"patientPhoneFather",autoComplete:"off",onChange:e=>((e,t)=>{if("phoneFather"===F&&A(null),""!==t){const e=t;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{const t={...P};e.length<10?(t.phoneFather.title="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a \u0111\u1ee7 10 s\u1ed1",t.phoneFather.openTooltip=!0,t.phoneFather.isError=!0,t.phoneFather.focus=!1,M(t)):(S((t=>(t.patient.phoneFather=e,{...t}))),t.phoneFather.title="",t.phoneFather.openTooltip=!1,t.phoneFather.isError=!1,t.phoneFather.focus=!1,t.phoneMother.title="",t.phoneMother.openTooltip=!1,t.phoneMother.isError=!1,t.phoneMother.focus=!1,M(t))}),100)}else{"phoneFather"===F&&A(null);const e={...P};e.phoneFather.title="",e.phoneFather.openTooltip=!1,e.phoneFather.isError=!1,e.phoneFather.focus=!1,M(e)}})(0,e.target.value),onKeyDown:e=>Z(e,"patientWeight"),onBlur:e=>te(e.target.value,"PhoneFather"),inputProps:{style:{WebkitTextFillColor:T.oldDisease?"#ff1744":"black"},maxLength:10},InputLabelProps:!0===T.oldDisease?{shrink:Boolean(!0)}:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.weight.title}),open:P.weight.openTooltip,PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"22%",marginTop:"20px"},children:Object(E.jsx)(j.a,{label:"C\xe2n n\u1eb7ng b\xe9",variant:"outlined",id:"patientWeight",autoComplete:"off",error:!0===P.weight.isError,inputRef:e=>e&&"weight"===F&&e.focus(),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:"(kg)"})},onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if("weight"===F&&A(null),S((e=>(e.weight=t,{...e}))),P.weight.isError){const e={...P};e.weight.title="",e.weight.openTooltip=!1,e.weight.isError=!1,e.weight.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientHeight")})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.height.title}),open:P.height.openTooltip,placement:"left",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"22%",marginTop:"20px"},children:Object(E.jsx)(j.a,{label:"Chi\u1ec1u cao b\xe9",variant:"outlined",id:"patientHeight",autoComplete:"off",error:!0===P.height.isError,inputRef:e=>e&&"height"===F&&e.focus(),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:"(cm)"})},onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if("height"===F&&A(null),S((e=>(e.height=t,{...e}))),P.height.isError){const e={...P};e.height.title="",e.height.openTooltip=!1,e.height.isError=!1,e.height.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientHeadCircumference")})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.headCircumference.title}),open:P.headCircumference.openTooltip,placement:"top-start",PopperProps:{sx:{zIndex:2}},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[70,-7]}}]}},children:Object(E.jsx)("div",{style:{width:"22%",marginTop:"20px"},children:Object(E.jsx)(j.a,{label:"V\xf2ng \u0111\u1ea7u b\xe9",variant:"outlined",id:"patientHeadCircumference",autoComplete:"off",error:!0===P.headCircumference.isError,inputRef:e=>e&&"headCircumference"===F&&e.focus(),InputProps:{endAdornment:Object(E.jsx)(b.a,{position:"end",children:"(cm)"})},onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{if("headCircumference"===F&&A(null),S((e=>(e.headCircumference=t,{...e}))),P.headCircumference.isError){const e={...P};e.headCircumference.title="",e.headCircumference.openTooltip=!1,e.headCircumference.isError=!1,e.headCircumference.focus=!1,M(e)}}),100)})(e.target.value),onKeyDown:e=>Z(e,"patientMedicalType")})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.medicalType.title}),open:P.medicalType.openTooltip,placement:"bottom",PopperProps:{sx:{zIndex:2}},children:Object(E.jsx)("div",{style:{width:"30.5%",marginTop:"20px"},children:Object(E.jsx)(Q.a,{disablePortal:!0,id:"patientMedicalType",disabled:!0===T.oldDisease,value:z.medicalType.value,options:i,getOptionLabel:e=>e.medicalTypeName,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.medicalTypeName}),onChange:(e,t)=>((e,t)=>{if("medicalType"===F&&A(null),S((e=>(e.medicalTypeId=t.medicalTypeId,{...e}))),W((e=>(e.medicalType.value=t,{...e}))),P.medicalType.isError){const e={...P};e.medicalType.title="",e.medicalType.openTooltip=!1,e.medicalType.isError=!1,e.medicalType.focus=!1,M(e)}})(0,t),open:z.medicalType.openOption,onFocus:()=>ee("MedicalType"),onBlur:e=>te(e.target.value,"MedicalType"),autoComplete:!1,renderInput:e=>Object(E.jsx)(j.a,{...e,label:"Lo\u1ea1i h\xecnh kh\xe1m",inputRef:e=>e&&"medicalType"===F&&e.focus(),error:!0===P.medicalType.isError,sx:{"& .MuiInputBase-input":{WebkitTextFillColor:!0===T.oldDisease?"#ff1744":""},"& .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-colorPrimary.Mui-disabled.MuiInputBase-fullWidth.MuiInputBase-formControl.MuiInputBase-adornedEnd.MuiAutocomplete-inputRoot.css-154xyx0-MuiInputBase-root-MuiOutlinedInput-root":{paddingLeft:"4px",paddingRight:"0px"},"& .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-colorPrimary.MuiInputBase-fullWidth.MuiInputBase-formControl.MuiInputBase-adornedEnd.MuiAutocomplete-inputRoot.css-154xyx0-MuiInputBase-root-MuiOutlinedInput-root":{paddingLeft:"4px",paddingRight:"0px"}}}),disableClearable:!0,popupIcon:null})})})}),Object(E.jsx)(Ye.a,{theme:X,children:Object(E.jsx)(We.a,{title:Object(E.jsx)("h6",{style:{margin:"0px"},children:P.reason.title}),open:P.reason.openTooltip,children:Object(E.jsx)("div",{style:{width:"100%"},children:Object(E.jsx)(j.a,{fullWidth:!0,label:"L\xfd do kh\xe1m",multiline:!0,rows:3,variant:"outlined",id:"patientReason",autoComplete:"off",error:!0===P.reason.isError,sx:{"&.MuiTextField-root":{marginTop:"20px"}},onChange:e=>(e=>{const t=e;_.current&&clearInterval(_.current),_.current=setTimeout((()=>{S((e=>(e.reason=t,{...e})))}),100)})(e.target.value)})})})}),Object(E.jsx)(ze.a,{control:Object(E.jsx)(Qe.a,{checked:z.vaccination}),sx:{width:"100%"},label:"B\u1ec7nh nh\xe2n c\xf3 tham gia ti\xeam ng\u1eeba",onChange:e=>{return t=e.target.checked,S((e=>(e.vaccination=t,{...e}))),void W((e=>(e.vaccination=t,{...e})));var t}}),Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",mt:1,width:"100%"},children:[Object(E.jsx)(N.a,{variant:"contained",color:"primary",sx:{mr:1},onClick:()=>ne(),children:"\u0110\u0103ng k\xfd (f2)"}),Object(E.jsx)(N.a,{variant:"contained",color:"warning",onClick:()=>ae(),children:"L\xe0m m\u1edbi (f4)"}),Object(E.jsx)(N.a,{variant:"contained",color:"error",sx:{ml:1},onClick:()=>re(),children:"B\u1ec7nh c\u0169 (f8)"})]})]})]})}),Object(E.jsx)(bt,{openModalExaminingSession:p,setOpenModalExaminingSession:u,handleResetField:ae,setCompleteMedicalRegister:e.setCompleteMedicalRegister,isContinueSelectedExaminingSession:g,setIsContinueSelectedExaminingSession:x,dataPatientsRegister:T}),Object(E.jsx)(ft,{openModalOldDisease:m,setOpenModalOldDisease:f,dataPatientsRegister:T,setDataPatientsRegister:S}),Object(E.jsx)(Ot,{openOldDiseaseRegister:O,setOpenOldDiseaseRegister:y,setDataPatientsRegister:S,listOldDiseaseRegister:C,setListOldDiseaseRegister:v}),Object(E.jsx)(Re,{openAlertProcessing:k,setOpenAlertProcessing:I})]})};var vt=function(){const{user:e,loading:t}=Object(o.useContext)(R),n=Object(d.useHistory)(),[a,r]=Object(o.useState)(!0),[i,s]=Object(o.useState)(!1),[c,l]=Object(o.useState)(),[h,p]=Object(o.useState)(!1),[u,g]=Object(o.useState)(!1),[x,m]=Object(o.useState)(!1);return Object(o.useEffect)((()=>{!1===t&&e.isLogin&&"Nursing"!==e.positionName&&n.push("/404")}),[t,e]),Object(o.useEffect)((()=>{const e=e=>{113===e.keyCode?(e.preventDefault(),g(!0)):115===e.keyCode?(e.preventDefault(),p(!0)):119===e.keyCode&&(e.preventDefault(),m(!0))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(ue.a,{maxWidth:"xl",sx:{mt:2.5},children:Object(E.jsx)(B.a,{sx:{bgcolor:"#fff",height:"auto"},children:Object(E.jsxs)(Me.a,{container:!0,spacing:0,sx:{marginLeft:0},children:[Object(E.jsx)(Me.a,{item:!0,xs:5,children:Object(E.jsx)(xt,{completeMedicalRegister:i,setCompleteMedicalRegister:s,component1Loading:a,setComponent1Loading:r,dataPantientAppointmentsToday:c,setDataPantientAppointmentsToday:l})}),Object(E.jsx)(Me.a,{item:!0,xs:7,children:a?Object(E.jsx)("div",{style:{marginLeft:"18px"},children:Object(E.jsx)(Be.a,{variant:"rectangular",width:"100%",height:590})}):Object(E.jsx)(Ct,{onF2Press:u,setOnF2Press:g,onF4Press:h,setOnF4Press:p,onF8Press:x,setOnF8Press:m,completeMedicalRegister:i,setCompleteMedicalRegister:s,dataPantientAppointmentsToday:c,setDataPantientAppointmentsToday:l})})]})})})})},Nt=n(506),wt=n(258),kt=n.n(wt),It=n(187),Tt=n.n(It);var St=function(){const{user:e,loading:t}=Object(o.useContext)(R),n=Object(d.useHistory)(),[a,r]=Object(o.useState)({chipOrder:0,chipLabel:"BN ch\u01b0a nh\u1eafc h\u1eb9n kh\xe1m"}),[i,c]=Object(o.useState)([{chipLabel:"BN ch\u01b0a nh\u1eafc h\u1eb9n kh\xe1m",chipContent:0},{chipLabel:"BN x\xe1c nh\u1eadn h\u1eb9n kh\xe1m",chipContent:0},{chipLabel:"BN t\u1eeb ch\u1ed1i h\u1eb9n kh\xe1m",chipContent:0}]),[l,h]=Object(o.useState)(),[p,u]=Object(o.useState)(""),[g,x]=Object(o.useState)([]),[f,O]=Object(o.useState)(),[y,C]=Object(o.useState)([]),[N,k]=Object(o.useState)(!1),[I,T]=Object(o.useState)(1),[S,P]=Object(o.useState)(),[M,F]=Object(o.useState)(),A=e=>{if(e){const t=Math.ceil(e.length/5),n=5*(I-1),o=e.slice(n,n+5);O(o),C(o),P(t)}else{const e=Math.ceil(g.length/5),t=5*(I-1),n=g.slice(t,t+5);O(n),C(n),P(e)}},Q=(e,t)=>{const n=t.toLowerCase();return e.filter((e=>{const{patientId:t,patientFullName:o,phoneMother:a,phoneFather:r}=e;return t.toLowerCase().includes(n)||o.toLowerCase().includes(n)||a.toLowerCase().includes(n)||r.toLowerCase().includes(n)}))},z=Object(o.useRef)(null),W=async e=>{k(!0);const t=M.find((t=>t.medicalBookId===e)),n=await Ee(t,1);if(200===n.status){const e=await Te();""!==p&&u(""),h(e);const t=e.filter((e=>0===e.stateAppointment)),o=e.filter((e=>1===e.stateAppointment)),r=e.filter((e=>2===e.stateAppointment)),i=[{chipLabel:"BN ch\u01b0a nh\u1eafc h\u1eb9n kh\xe1m",chipContent:t.length},{chipLabel:"BN x\xe1c nh\u1eadn h\u1eb9n kh\xe1m",chipContent:o.length},{chipLabel:"BN t\u1eeb ch\u1ed1i h\u1eb9n kh\xe1m",chipContent:r.length}];if(c(i),0===a.chipOrder){const e=t.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(t),A(t)}else if(1===a.chipOrder){const e=o.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(o),A(o)}else{const e=r.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(r),A(r)}s.b.success(n.data,{toastId:"handleAcceptReExaminingSuccess"})}else s.b.error(n.data,{toastId:"handleAcceptReExaminingError"});k(!1)},L=async e=>{k(!0);const t=M.find((t=>t.medicalBookId===e)),n=await Ee(t,2);if(200===n.status){const e=await Te();""!==p&&u(""),h(e);const t=e.filter((e=>0===e.stateAppointment)),o=e.filter((e=>1===e.stateAppointment)),r=e.filter((e=>2===e.stateAppointment)),i=[{chipLabel:"BN ch\u01b0a nh\u1eafc h\u1eb9n kh\xe1m",chipContent:t.length},{chipLabel:"BN x\xe1c nh\u1eadn h\u1eb9n kh\xe1m",chipContent:o.length},{chipLabel:"BN t\u1eeb ch\u1ed1i h\u1eb9n kh\xe1m",chipContent:r.length}];if(c(i),0===a.chipOrder){const e=t.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(t),A(t)}else if(1===a.chipOrder){const e=o.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(o),A(o)}else{const e=r.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(r),A(r)}s.b.success(n.data,{toastId:"handleAcceptReExaminingSuccess"})}else s.b.error(n.data,{toastId:"handleAcceptReExaminingError"});k(!1)};return Object(o.useEffect)((()=>{(async()=>{k(!0);const e=await Te();h(e);const t=e.filter((e=>0===e.stateAppointment)),n=e.filter((e=>1===e.stateAppointment)),o=e.filter((e=>2===e.stateAppointment)),r=[{chipLabel:"BN ch\u01b0a nh\u1eafc h\u1eb9n kh\xe1m",chipContent:t.length},{chipLabel:"BN x\xe1c nh\u1eadn h\u1eb9n kh\xe1m",chipContent:n.length},{chipLabel:"BN t\u1eeb ch\u1ed1i h\u1eb9n kh\xe1m",chipContent:o.length}];if(c(r),0===a.chipOrder){const e=t.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(t),A(t)}else if(1===a.chipOrder){const e=n.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(n),A(n)}else{const e=o.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(e),x(o),A(o)}k(!1)})()}),[]),Object(o.useEffect)((()=>{!1===t&&e.isLogin&&"Nursing"!==e.positionName&&n.push("/404")}),[t,e]),Object(o.useEffect)((()=>{A()}),[I]),Object(E.jsxs)(ue.a,{maxWidth:"xl",sx:{mt:1,p:0},children:[Object(E.jsx)(rt.a,{component:ct.a,sx:{height:N?"40rem":"auto",position:"relative"},children:N?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(B.a,{children:[Object(E.jsx)(v.a,{direction:"row",spacing:1,sx:{justifyContent:"center",mt:1.4},children:i.map(((e,t)=>Object(E.jsx)(dt.a,{badgeContent:e.chipContent,color:"error",children:Object(E.jsx)(lt.a,{label:e.chipLabel,color:t===a.chipOrder?"primary":"default",onClick:()=>((e,t)=>{if(r({chipOrder:e,chipLabel:t}),0===e){const e=l.filter((e=>0===e.stateAppointment)),t=e.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(t),x(e),A(e)}else if(1===e){const e=l.filter((e=>1===e.stateAppointment)),t=e.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(t),x(e),A(e)}else{const e=l.filter((e=>2===e.stateAppointment)),t=e.map((e=>({medicalBookId:e.medicalBookId,appointmentDate:e.appointmentDate})));F(t),x(e),A(e)}})(t,e.chipLabel)})},"chipPantientState ".concat(t))))}),Object(E.jsxs)(D.a,{variant:"h6",sx:{textAlign:"center",fontSize:"1.15rem",fontWeight:"bolder"},children:["Danh s\xe1ch ",a.chipLabel," trong 6 ng\xe0y t\u1edbi"]}),Object(E.jsx)(B.a,{sx:{display:"flex",justifyContent:"center",mb:1},children:Object(E.jsx)(j.a,{sx:{width:500,"& .MuiInputBase-inputSizeSmall":{textAlign:"center"}},size:"small",variant:"outlined",placeholder:"T\xecm v\u1edbi M\xe3 BN ho\u1eb7c T\xean BN ho\u1eb7c S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",value:p,onChange:e=>(e=>{const t=e;u(t),C(""===e?f:Q(f,t))})(e.target.value),InputProps:{startAdornment:Object(E.jsx)(b.a,{position:"start",children:Object(E.jsx)(pt.a,{})}),endAdornment:Object(E.jsx)(b.a,{position:"end",children:""!==p?Object(E.jsx)(m.a,{sx:{cursor:"pointer"},titleAccess:"X\xf3a",onClick:()=>[u(""),C(f)]}):null})}})})]}),Object(E.jsxs)(nt.a,{stickyHeader:!0,children:[Object(E.jsx)(it.a,{children:Object(E.jsxs)(st.a,{sx:{"& th":{color:"rgba(96, 96, 96)",backgroundColor:"pink"}},children:[Object(E.jsx)(at.a,{align:"left",children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"H\u1ecd t\xean"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"Ng\xe0y sinh"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"\u0110\u1ecba ch\u1ec9"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"H\u1ecd t\xean Cha/M\u1eb9"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"K\u1ef3 kh\xe1m c\u0169"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"K\u1ef3 kh\xe1m ti\u1ebfp theo"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"Ng\xe0y h\u1eb9n kh\xe1m"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"Nh\u1ea5n"})]})}),Object(E.jsx)(ot.a,{children:y.map(((e,t)=>Object(E.jsxs)(st.a,{hover:!0,role:"checkbox",sx:{":hover":{backgroundColor:"rgba(0, 0, 0, 0.1) !important"}},children:[Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:e.patientId}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:e.patientFullName}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:Je()(e.dateOfBirth).format("DD/MM/YYYY")}),Object(E.jsx)(at.a,{align:"left",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:240,fontSize:"0.9rem"},children:Object(E.jsx)(We.a,{title:Object(E.jsx)(D.a,{variant:"subtitle2",children:e.fullAddress}),children:Object(E.jsx)("span",{children:e.fullAddress})})}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:""!==e.fullNameFather?e.fullNameFather:e.fullNameMother}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:""!==e.phoneFather?e.phoneFather:e.phoneMother}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:e.examNameOld}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto",fontSize:"0.9rem"},children:e.nextExamName}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto"},children:Object(E.jsx)(Ve.a,{dateAdapter:Ue.a,adapterLocale:"vi",children:Object(E.jsx)(He.a,{components:["DatePicker"],children:Object(E.jsx)(B.a,{sx:{width:145},children:Object(E.jsx)("div",{style:{width:"100%"},children:Object(E.jsx)(Ke.a,{label:"Ng\xe0y kh\xe1m d\u1ef1 ki\u1ebfn",disablePast:!0,minDate:Je()(),format:"DD/MM/YYYY",value:Je()(e.appointmentDate),onChange:t=>((e,t)=>{if(t){const n=t._d;z.current&&clearInterval(z.current),z.current=setTimeout((()=>{const t=new Date,o=M.find((t=>t.medicalBookId===e)),a=new Date(o.appointmentDate);(t<=n||n>=a)&&(o.appointmentDate=Je()(n).format("YYYY-MM-DD"))}),100)}})(e.medicalBookId,t)})})})})})}),Object(E.jsx)(at.a,{align:0===e.stateAppointment?"left":"center",sx:{width:"auto",fontSize:"0.9rem"},children:0===e.stateAppointment?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(kt.a,{titleAccess:"\u0110\u1ed3ng \xfd h\u1eb9n kh\xe1m",sx:{color:"green",cursor:"pointer",mr:.5},onClick:()=>W(e.medicalBookId)}),Object(E.jsx)(Tt.a,{titleAccess:"T\u1eeb ch\u1ed1i h\u1eb9n kh\xe1m",sx:{color:"red",cursor:"pointer"},onClick:()=>L(e.medicalBookId)})]}):Object(E.jsx)(E.Fragment,{children:1===e.stateAppointment?Object(E.jsx)(Tt.a,{titleAccess:"T\u1eeb ch\u1ed1i h\u1eb9n kh\xe1m",sx:{color:"red",cursor:"pointer"},onClick:()=>L(e.medicalBookId)}):Object(E.jsx)(kt.a,{titleAccess:"\u0110\u1ed3ng \xfd h\u1eb9n kh\xe1m",sx:{color:"green",cursor:"pointer",mr:.5},onClick:()=>W(e.medicalBookId)})})})]},t)))})]})]})}),0!==y.length&&!1===N?Object(E.jsx)(B.a,{sx:{display:"flex",justifyContent:"center",mt:1,width:"100%"},children:Object(E.jsx)(Nt.a,{count:S,page:I,onChange:(e,t)=>{T(t)},color:"secondary"})}):null]})},Et=n(504),Pt=n(305);let Mt;var Bt=function(e){const{user:t}=Object(o.useContext)(R),n=Object(o.useRef)(null),[a,r]=Object(o.useState)(),[i,s]=Object(o.useState)(),c=(Object(Et.a)({root:{"&.Mui-disabled":{color:"#d32f2f"},"&.Mui-checked.Mui-disabled":{color:"#d32f2f"}}})(),Object(Pt.useReactToPrint)({contentRef:n,onAfterPrint:()=>{Mt&&Mt(!0)}}));return Object(o.useEffect)((()=>{if(e.openConclusionPaper&&e.dataConclusionPaper&&e.dataPantientInfo){if(e.predecessorToPrint){const t=(e=>{const t=e.categoryPres.map((e=>{const t=e.categoryContents.map((e=>{const t=e.categoryContentQuestions.filter((e=>!0===e.hasEdit));return t.length>0?{...e,categoryContentQuestions:t}:null})).filter((e=>null!==e));return t.length>0?{...e,categoryContents:t}:null})).filter((e=>null!==e));return{...e,categoryPres:t}})(Fe.a.cloneDeep(e.predecessorToPrint)),n=Fe.a.cloneDeep(e.dataConclusionPaper),o=t.categoryPres.concat(e.dataConclusionPaper.categories);n.categories=o,s(n)}else s(e.dataConclusionPaper);r(e.dataPantientInfo),setTimeout((()=>{e.setOpenConclusionPaper(!1),c(),s()}),300)}}),[e.openConclusionPaper,e.dataConclusionPaper,e.dataPantientInfo,e.onComplete]),Object(E.jsx)(h.a,{style:{display:"none"},fullWidth:!0,maxWidth:"md",open:e.openConclusionPaper,sx:{".MuiDialog-paperWidthMd":{maxWidth:"970px"}},children:Object(E.jsx)(u.a,{sx:{padding:"0px 18px 0px 18px",mt:4,mb:2},ref:n,children:Object(E.jsx)(B.a,{children:i&&a?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{variant:"h6",sx:{fontWeight:"bolder",textAlign:"center",textTransform:"uppercase"},children:"Gi\u1ea5y k\u1ebft lu\u1eadn"}),Object(E.jsx)("div",{className:"pantient-info",style:{marginTop:"20px",marginBottom:"100px"},children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:2,columnSpacing:{xs:1,sm:2,md:4},sx:{display:"flex"},children:[Object(E.jsx)(Me.a,{item:!0,xs:12,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["M\xe3 BN: ",Object(E.jsx)("span",{style:{margin:0,padding:0,fontWeight:"bolder"},children:a.patientCode})]})}),Object(E.jsx)(Me.a,{item:!0,xs:7,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["H\u1ecd t\xean: ",Object(E.jsx)("span",{style:{margin:0,padding:0,fontWeight:"bolder"},children:a.patientsName})]})}),Object(E.jsx)(Me.a,{item:!0,xs:5,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["Gi\u1edbi t\xednh: ",Object(E.jsx)("span",{style:{margin:0,padding:0},children:!0===a.patientsGender?"Nam":"N\u1eef"})]})}),Object(E.jsx)(Me.a,{item:!0,xs:7,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["Ng\xe0y sinh: ",Object(E.jsx)("span",{style:{margin:0,padding:0,fontWeight:"bolder"},children:Je()(a.patientsDOB).format("DD/MM/YYYY")})]})}),Object(E.jsx)(Me.a,{item:!0,xs:5,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["Tu\u1ed5i: ",Object(E.jsx)("span",{style:{margin:0,padding:0,fontWeight:"bolder"},children:a.patientsMonthsOld})]})}),Object(E.jsx)(Me.a,{item:!0,xs:12,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["\u0110\u1ecba ch\u1ec9: ",Object(E.jsx)("span",{style:{margin:0,padding:0},children:a.patientsAddress})]})}),Object(E.jsx)(Me.a,{item:!0,xs:7,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["Cha m\u1eb9/ng\u01b0\u1eddi gi\xe1m h\u1ed9: ",Object(E.jsx)("span",{style:{margin:0,padding:0,fontWeight:"bolder"},children:a.parentName})]})}),Object(E.jsx)(Me.a,{item:!0,xs:5,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["S\u0110T: ",Object(E.jsx)("span",{style:{margin:0,padding:0},children:a.patientsPhone})]})}),Object(E.jsx)(Me.a,{item:!0,xs:4,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["Chi\u1ec1u cao: ",Object(E.jsx)("span",{style:{margin:0,padding:0},children:a.patientsHeight+" cm"})]})}),Object(E.jsx)(Me.a,{item:!0,xs:4,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["C\xe2n n\u1eb7ng: ",Object(E.jsx)("span",{style:{margin:0,padding:0},children:a.patientsWeight+" kg"})]})}),Object(E.jsx)(Me.a,{item:!0,xs:4,children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["V\xf2ng \u0111\u1ea7u ",Object(E.jsx)("span",{style:{margin:0,padding:0},children:a.patientsHeadCircumference+" cm"})]})}),Object(E.jsx)(Me.a,{item:!0,xs:12,style:{height:"70px"},children:Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{ml:1},children:["K\u1ebft lu\u1eadn: ",Object(E.jsx)("span",{style:{margin:0,padding:0,fontWeight:"bolder"},children:i.conclusion})]})})]})}),Object(E.jsx)(D.a,{variant:"subtitle2",sx:{fontWeight:"bolder",ml:1,mt:2},children:"Ghi ch\xfa:"}),Object(E.jsxs)("div",{className:"note",style:{display:"flex",justifyContent:"space-between",marginLeft:"8px"},children:[Object(E.jsxs)("div",{className:"appointment-date",style:{width:"270px"},children:[Object(E.jsxs)(D.a,{variant:"subtitle2",sx:{textTransform:"uppercase",fontWeight:"bolder"},children:["T\xe1i kh\xe1m: ",Je()(i.appointmentDate).format("DD/MM/YYYY")]}),i.isVaccination&&Object(E.jsxs)("div",{className:"vaccination",style:{display:"block"},children:[Object(E.jsx)(D.a,{variant:"subtitle2",sx:{textTransform:"uppercase",fontWeight:"bolder"},children:"Ti\xeam ng\u1eeba: "}),Object(E.jsx)(D.a,{variant:"subtitle2",children:i.vaccination}),Object(E.jsx)(D.a,{variant:"subtitle2",children:i.nextVaccination})]})]}),Object(E.jsxs)("div",{className:"exam-info",children:[Object(E.jsx)(D.a,{variant:"subtitle2",children:"".concat(Je()().format("LT"),", Ng\xe0y ").concat(Je()().format("LL"))}),Object(E.jsx)(D.a,{variant:"subtitle2",sx:{textTransform:"uppercase",textAlign:"center"},children:"B\xe1c s\u0129 kh\xe1m b\u1ec7nh"}),Object(E.jsx)("div",{className:"doctor-signature",style:{padding:"50px"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontWeight:"bolder",textAlign:"center"},children:t.userFullName})]})]})]}):null})})})},Dt=n(530),Ft=n(122),Rt=n.n(Ft),At=n(75);n(386);var Qt=function(e){const[t,n]=Object(o.useState)(),[a,r]=Object(o.useState)(!1),[i,c]=Object(o.useState)(!1),l=Object(o.useRef)(null),d=Object(o.useRef)(null),x=Object(o.useRef)(null),j=Object(Et.a)({root:{"&.Mui-disabled":{color:"#d32f2f"},"&.Mui-checked.Mui-disabled":{color:"#d32f2f"}}})(),b=(t,o)=>{o&&"backdropClick"===o||(n(),e.setOpenModalCompleteExamining(!1))},f=async()=>{r(!0);const t=Fe.a.clone(e.dataExaminingForConclusion);t.categories=t.categories.map((e=>({...e,categoryContents:e.categoryContents.filter((e=>e.categoryContentQuestions.length>0))}))).filter((e=>e.categoryContents.length>0));const o=await(async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/GetAppointmentDate/").concat(e),t).then((function(e){return e})).catch((function(e){return e.response}))})(e.dataExaminingForConclusion.medicalRegisterId);if(200===o.status?(t.appointmentDate=o.data.appointmentDate,t.nextExamId=o.data.nextExamId,t.nextExamName=o.data.nextExamName,t.isVaccination&&(t.nextVaccination=o.data.nextVaccination,t.reminder=o.data.reminder,t.vaccination=o.data.vaccination)):s.b.error(o.data,{toastId:"error1"}),n(t),r(!1),""!==e.dataExaminingForConclusion.conclusion){const e=d.current.value.length;d.current.setSelectionRange(e,e),d.current.focus()}else d.current.focus()},O=async()=>{c(!0),await new Promise((e=>{Mt=e}))},y=async()=>{if(r(!0),C()){if(t.categories.some((e=>!0===e.isPredecessor))){const e=t.categories.filter((e=>!0===e.isPredecessor)),n={patientId:t.patientId,categoryPres:e};await fe(n)}const o=t.categories.filter((e=>!0===e.isHealthRecord));t.categories=o;const a=await(async e=>{const t=localStorage.getItem("jwt");return await I.a.post("".concat(me,"/api/Medical/AddMedicalBook"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(t);200===a.status?(await O(),s.b.success(a.data,{toastId:"success3"}),e.handleCompleteExaminingForPantient(),n(),e.setOpenModalCompleteExamining(!1)):s.b.error(a.data,{toastId:"error1"}),e.handleCompleteExaminingForPantient(),n(),e.setOpenModalCompleteExamining(!1)}r(!1)},C=()=>{let e=!0;return null===t.conclusion&&(d.current.focus(),s.b.error("B\u1ea1n ch\u01b0a nh\u1eadp k\u1ebft lu\u1eadn kh\xe1m",{toastId:"error1"}),e=!1),"Invalid date"===t.appointmentDate&&(x.current.focus(),s.b.error("Ng\xe0y t\xe1i kh\xe1m kh\xf4ng h\u1ee3p l\u1ec7",{toastId:"error1"}),e=!1),""===t.appointmentDate&&(x.current.focus(),s.b.error("B\u1ea1n ch\u01b0a ch\u1ecdn ng\xe0y t\xe1i kh\xe1m",{toastId:"error1"}),e=!1),e};return Object(o.useEffect)((()=>{e.openModalCompleteExamining&&f()}),[e.openModalCompleteExamining]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(h.a,{fullWidth:!0,maxWidth:"md",open:e.openModalCompleteExamining,onClose:(e,t)=>b(0,t),disableEscapeKeyDown:!0,children:[Object(E.jsx)(p.a,{sx:{fontWeight:"bolder",fontSize:"20px",textAlign:"center",color:"red",textTransform:"uppercase"},children:"T\xf3m t\u1eaft qu\xe1 tr\xecnh kh\xe1m"}),Object(E.jsx)(g.a,{onClick:()=>b(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"large"})}),Object(E.jsx)(u.a,{dividers:!0,sx:{pl:"15px",pr:"15px"},children:Object(E.jsx)(B.a,{sx:{pl:6,pr:6},children:Object(E.jsx)(Dt.a,{sx:{p:0},children:Object(E.jsx)(B.a,{children:t&&0!==t.categories.length?Object(E.jsx)("div",{className:"category-complete-examining",children:t.categories.map(((e,t)=>Object(E.jsxs)("div",{children:[Object(E.jsx)(D.a,{sx:{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"},children:e.categoryName}),e.categoryContents.map(((e,t)=>Object(E.jsxs)("div",{className:"table-category-complete-examining",style:{marginBottom:"10px"},children:[Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontWeight:"bolder",fontSize:"20px",textAlign:"center"},children:e.categoryContentTitle}),e.categoryContentQuestions.map(((t,n)=>Object(E.jsx)("div",{children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:0,children:[0===n?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentName})}),"check"===t.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(Me.a,{item:!0,xs:2.5,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.5,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(E.jsx)(Rt.a,{sx:{fontSize:"1.2rem",color:"gray",mr:.4}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",lineHeight:"1.6"},children:e.categoryContentCheck})]}),Object(E.jsx)(Me.a,{item:!0,xs:5.5,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",ml:.5},children:e.categoryContentText})})]}):Object(E.jsx)(Me.a,{item:!0,xs:8,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentText})})]}):null,Object(E.jsxs)(B.a,{style:{display:"flex",width:"100%"},children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",alignItems:"center"},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontSize:"1rem"},children:t.categoryContentQuestionName})}),"check"===t.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:2.5,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",justifyContent:"center"},children:Object(E.jsx)(Qe.a,{disabled:!0,checked:t.categoryContentAnswer,classes:{root:j.root},sx:{"& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem"}},color:"error"})}),Object(E.jsx)(Me.a,{item:!0,xs:5.5,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0,defaultValue:t.categoryContentNote})})})})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:8,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0,defaultValue:t.categoryContentNote})})})})})]},"questionItem ".concat(n))]})},"questionItem ".concat(n))))]},"categoryContents ".concat(t))))]},"categoriesItem ".concat(t))))}):Object(E.jsx)(D.a,{variant:"h6",sx:{color:"blue",fontWeight:"bolder",textAlign:"center"},children:"Kh\xf4ng ph\xe1t hi\u1ec7n g\xec b\u1ea5t th\u01b0\u1eddng khi kh\xe1m."})})})})}),Object(E.jsx)(Ae.a,{sx:{borderTop:"1px solid black"},children:t?Object(E.jsxs)("div",{style:{width:"100%",padding:"8px 50px 8px 50px"},children:[Object(E.jsx)(At.a,{placeholder:"K\u1ebft lu\u1eadn c\u1ee7a b\xe1c s\u0129",style:{width:"100%",padding:"15px",fontSize:"17px"},onChange:e=>{return t=e.target.value,void(l.current=setTimeout((()=>{n((e=>(e.conclusion=t,{...e})))}),300));var t},ref:d,defaultValue:t.conclusion},"pantientId ".concat(t.patientId)),t.isVaccination?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{mb:.4},children:[""===t.vaccination||null===t.vaccination?null:Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(D.a,{variant:"h6",sx:{color:"deeppink",fontWeight:"bolder",fontSize:"1.2rem"},children:" ".concat(t.vaccination)})}),""===t.nextVaccination||null===t.nextVaccination?null:Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(D.a,{variant:"h6",sx:{color:"deeppink",fontWeight:"bolder",fontSize:"1.2rem"},children:" ".concat(t.nextVaccination)})}),""===t.reminder||null===t.reminder?null:Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(D.a,{variant:"h6",sx:{color:"deeppink",fontWeight:"bolder",fontSize:"1.2rem"},children:" ".concat(t.reminder)})})]})}):null,t.appointmentDate?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",mb:2},children:[Object(E.jsxs)(D.a,{variant:"h6",sx:{mt:"auto",mb:"auto",mr:2},children:["K\u1ef3 kh\xe1m ti\u1ebfp theo: ",Object(E.jsx)("span",{style:{fontWeight:"bolder",color:"#ff1744"},children:t.nextExamName})]}),Object(E.jsx)(Ve.a,{dateAdapter:Ue.a,adapterLocale:"vi",children:Object(E.jsx)(He.a,{components:["DatePicker"],children:Object(E.jsx)(Ke.a,{label:"Ng\xe0y kh\xe1m d\u1ef1 ki\u1ebfn",disablePast:!0,format:"DD/MM/YYYY",defaultValue:Je()(t.appointmentDate),onChange:e=>(e=>{e&&(l.current&&clearInterval(l.current),l.current=setTimeout((()=>{const t=e._d,o=Je()(t).format("YYYY-MM-DD");"Invalid date"!==o&&n((e=>(e.appointmentDate=o,{...e})))}),200))})(e),slotProps:{textField:{inputRef:x}}})})})]})}):null,Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(E.jsxs)(v.a,{spacing:1,direction:"row",children:[Object(E.jsx)(N.a,{sx:{fontSize:"15px",textTransform:"none"},variant:"contained",onClick:()=>y(),children:"L\u01b0u"}),Object(E.jsx)(N.a,{sx:{fontSize:"15px",textTransform:"none"},variant:"contained",color:"error",onClick:()=>b(),children:"\u0110\xf3ng"})]})})]}):null})]}),Object(E.jsx)(Re,{openAlertProcessing:a,setOpenAlertProcessing:r}),Object(E.jsx)(Bt,{openConclusionPaper:i,setOpenConclusionPaper:c,dataPantientInfo:e.dataPantientInfo,dataConclusionPaper:t,predecessorToPrint:e.predecessorToPrint})]})},zt=n(495),Wt=n(401),Lt=n(496),Yt=n(540),Ht=n(150),Ut=n.n(Ht);n(387),n(388);Je.a.locale("vi");var Vt=function(e){const[t,n]=Object(o.useState)({categoryPres:[],healthRecords:{examinationName:"",timeUpdateState:"",conclusion:"",medicakBook:[]},nutritionals:[],vaccinationBook:[]}),[a,r]=Object(o.useState)(!1),[i,s]=Object(o.useState)([]),[c,l]=Object(o.useState)([]),d=Object(Et.a)({root:{"&.Mui-disabled":{color:"#d32f2f"},"&.Mui-checked.Mui-disabled":{color:"#d32f2f"}}})();return Object(o.useEffect)((()=>{e.prevDataExamining&&(async()=>{r(!0);const t=await ke(e.prevDataExamining.healthRecords[e.prevDataExamining.healthRecords.some((e=>null===e.medicalBookId))?1:0].medicalRegisterId);if(e.prevDataExamining.newPredecessor){const o={...e.prevDataExamining.healthRecords[e.prevDataExamining.healthRecords.some((e=>null===e.medicalBookId))?1:0],newMedicalBook:t.medicakBook.newMedicalBook,appointmentDate:t.medicakBook.appointmentDate,nextExamName:t.medicakBook.nextExamName,medicakBook:t.medicakBook.categories};n({categoryPres:[],healthRecords:o,medicalBookIdRecently:e.prevDataExamining.medicalBookIdRecently,nutritionals:e.prevDataExamining.nutritionals,vaccinationBook:e.prevDataExamining.vaccinationBook})}else{e.prevDataExamining.categoryPres.length>1&&(e.prevDataExamining.categoryPres=e.prevDataExamining.categoryPres.sort(((e,t)=>e.categoryOrder-t.categoryOrder)));const o={...e.prevDataExamining.healthRecords[e.prevDataExamining.healthRecords.some((e=>null===e.medicalBookId))?1:0],newMedicalBook:t.medicakBook.newMedicalBook,appointmentDate:t.medicakBook.appointmentDate,nextExamName:t.medicakBook.nextExamName,medicakBook:t.medicakBook.categories};n({categoryPres:e.prevDataExamining.categoryPres,healthRecords:o,medicalBookIdRecently:e.prevDataExamining.medicalBookIdRecently,nutritionals:e.prevDataExamining.nutritionals,vaccinationBook:e.prevDataExamining.vaccinationBook})}r(!1)})()}),[e.prevDataExamining]),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(B.a,{sx:{height:"100%",position:"relative"},children:a?Object(E.jsxs)(B.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u s\u1ed5 kh\xe1m b\u1ec7nh g\u1ea7n nh\u1ea5t, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"preview-last-examining-contents",children:[Object(E.jsxs)(D.a,{variant:"h6",sx:{fontWeight:"bolder",textAlign:"center",fontSize:"1.2rem"},children:["Th\xf4ng tin t\xf3m t\u1eaft ",Object(E.jsx)("span",{style:{color:"red"},children:t.healthRecords.examinationName})]}),Object(E.jsxs)(Dt.a,{sx:{p:0},children:[t.categoryPres.map(((e,t)=>Object(E.jsxs)("div",{children:[Object(E.jsx)(zt.a,{sx:{pt:"0px",pb:"0px",borderRadius:"8px",":hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}},onClick:()=>(e=>{s((t=>{const n=[...t];return n[e]=!n[e],n}))})(t),children:Object(E.jsxs)(B.a,{sx:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(Wt.a,{sx:{minWidth:"30px","& .MuiSvgIcon-fontSizeMedium":{fontSize:"1rem",color:"#2962ff",transform:!0===i[t]?"rotate(90deg)":"rotate(0deg)"}},children:Object(E.jsx)(Ut.a,{})}),Object(E.jsx)(Lt.a,{primary:e.categoryName,sx:{"& .MuiListItemText-primary":{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"}}})]})}),Object(E.jsx)(Yt.a,{in:i[t],timeout:"auto",unmountOnExit:!0,children:Object(E.jsx)("div",{children:e.categoryContents.map(((e,t)=>Object(E.jsxs)("div",{className:"container-item-table-preview-examining",style:{paddingLeft:"18px",paddingRight:"18px",marginBottom:"6px"},children:[Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontWeight:"bolder",fontSize:"18px",textAlign:"center",mb:e.categoryContentTitle?0:2},children:e.categoryContentTitle}),Object(E.jsx)(B.a,{sx:{mb:2},children:e.categoryContentQuestions.map(((t,n)=>Object(E.jsx)(B.a,{children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:0,children:[0===n?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentName})}),"check"===t.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(Me.a,{item:!0,xs:1.5,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.5,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(E.jsx)(Rt.a,{sx:{fontSize:"1.2rem",color:"gray",mr:.4}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",lineHeight:"1.6"},children:e.categoryContentCheck})]}),Object(E.jsx)(Me.a,{item:!0,xs:6.5,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",ml:.5},children:e.categoryContentText})})]}):Object(E.jsx)(Me.a,{item:!0,xs:8,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentText})})]}):null,Object(E.jsxs)(B.a,{style:{display:"flex",width:"100%"},children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",alignItems:"center"},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontSize:"1rem"},children:t.categoryContentQuestionName})}),"check"===t.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:1.5,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",justifyContent:"center"},children:Object(E.jsx)(Qe.a,{disabled:!0,checked:t.categoryContentAnswer,classes:{root:d.root},sx:{"& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem"}}})}),Object(E.jsx)(Me.a,{item:!0,xs:6.5,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0,value:t.categoryContentNote})})})})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:8,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0,value:t.categoryContentNote})})})})})]},"questionItem ".concat(n))]})},"questionItem ".concat(n))))})]},"predecessorItemCategoryContentsIndex ".concat(t))))})})]},"predecessorItem ".concat(t)))),t.healthRecords.medicakBook.map(((e,t)=>Object(E.jsxs)("div",{children:[Object(E.jsx)(zt.a,{sx:{pt:"0px",pb:"0px",borderRadius:"8px",":hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}},onClick:()=>(e=>{l((t=>{const n=[...t];return n[e]=!n[e],n}))})(t),children:Object(E.jsxs)(B.a,{sx:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(Wt.a,{sx:{minWidth:"30px","& .MuiSvgIcon-fontSizeMedium":{fontSize:"1rem",color:"#2962ff",transform:!0===c[t]?"rotate(90deg)":"rotate(0deg)"}},children:Object(E.jsx)(Ut.a,{})}),Object(E.jsx)(Lt.a,{primary:e.categoryName,sx:{"& .MuiListItemText-primary":{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"}}})]})}),Object(E.jsx)(Yt.a,{in:c[t],timeout:"auto",unmountOnExit:!0,children:Object(E.jsx)("div",{children:e.categoryContents.map(((e,t)=>Object(E.jsxs)("div",{className:"container-item-table-preview-examining",style:{paddingLeft:"18px",paddingRight:"18px",marginBottom:"6px"},children:[Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontWeight:"bolder",fontSize:"18px",textAlign:"center",mb:e.categoryContentTitle?0:2},children:e.categoryContentTitle}),Object(E.jsx)(B.a,{sx:{mb:2},children:e.categoryContentQuestions.map(((t,n)=>Object(E.jsx)(B.a,{children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:0,children:[0===n?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentName})}),"check"===t.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(Me.a,{item:!0,xs:2.5,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.5,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(E.jsx)(Rt.a,{sx:{fontSize:"1.2rem",color:"gray",mr:.4}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",lineHeight:"1.6"},children:e.categoryContentCheck})]}),Object(E.jsx)(Me.a,{item:!0,xs:5.5,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",ml:.5},children:e.categoryContentText})})]}):Object(E.jsx)(Me.a,{item:!0,xs:8,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentText})})]}):null,Object(E.jsxs)(B.a,{style:{display:"flex",width:"100%"},children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",alignItems:"center"},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontSize:"1rem"},children:t.categoryContentQuestionName})}),"check"===t.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:2.5,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",justifyContent:"center"},children:Object(E.jsx)(Qe.a,{disabled:!0,checked:t.categoryContentAnswer,classes:{root:d.root},sx:{"& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem"}}})}),Object(E.jsx)(Me.a,{item:!0,xs:5.5,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0,value:t.categoryContentNote})})})})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:8,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0,value:t.categoryContentNote})})})})})]},"questionItem ".concat(n))]})},"questionItem ".concat(n))))})]},"medicakBookCategoryContentsIndex ".concat(t))))})})]},"medicakBookItems ".concat(t))))]}),Object(E.jsx)("div",{className:"conclusion",style:{marginLeft:"16px",marginTop:"4px"},children:Object(E.jsx)(D.a,{variant:"h6",sx:{color:"blue",fontWeight:"bolder"},children:"K\u1ebft lu\u1eadn: ".concat(t.healthRecords.conclusion)})})]}),Object(E.jsx)("div",{className:"time-examining",style:{marginLeft:"16px",marginTop:"4px",width:"99%"},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"#009688",fontWeight:"bolder",fontSize:"1.08rem"},children:"".concat(t.healthRecords.doctorFullName,", ").concat(Je()(t.healthRecords.timeUpdateState).format("LLLL"))})})]})})})},Kt=n(309),Gt=n.n(Kt),Jt=n(310),qt=n.n(Jt),_t=n(313),Xt=n.n(_t),Zt=n(311),$t=n.n(Zt),en=n(312),tn=n.n(en),nn=n(315),on=n.n(nn),an=n(314),rn=n.n(an),sn=n(306),cn=n.n(sn),ln=n(318),dn=n.n(ln),hn=n(317),pn=n.n(hn),un=n(226),gn=n(308),xn=n.n(gn),mn=n(316),jn=n(254),bn=n.n(jn),fn=n(307),On=n.n(fn);n(389);var yn=function(){const e={stt:"",id:"",patientsId:"",patientCode:"",patientsName:"",patientsDOB:"",patientsMonthsOld:"",patientsGender:"",patientsHeight:"",patientsWeight:"",patientsHeadCircumference:"",patientsPhone:"",patientsAddress:"",parentName:""},{user:t,loading:n,alertVisible:a,confirmAlert:r,resetAlert:i,isLogOutClick:c,isDialogChangePasswordOpen:l}=Object(o.useContext)(R),h=Object(d.useHistory)(),[p,u]=Object(o.useState)(!1),[x,f]=Object(o.useState)(e),[O,y]=Object(o.useState)([]),[C,k]=Object(o.useState)(),[T,S]=Object(o.useState)(!1),[P,M]=Object(o.useState)([]),[A,Q]=Object(o.useState)({}),[z,W]=Object(o.useState)([]),[L,Y]=Object(o.useState)([]),[H,U]=Object(o.useState)(),[V,K]=Object(o.useState)(),[G,J]=Object(o.useState)(),[q,_]=Object(o.useState)(),[X,Z]=Object(o.useState)({}),[$,ee]=Object(o.useState)(),[te,ne]=Object(o.useState)(),[oe,ae]=Object(o.useState)(),[re,ie]=Object(o.useState)(!1),[se,de]=Object(o.useState)(!1),[he,pe]=Object(o.useState)(!0),[ge,xe]=Object(o.useState)(!0),[be,Oe]=Object(o.useState)(!1),[Ce,ve]=Object(o.useState)(!1),[Ne,Te]=Object(o.useState)([]),[Ee,Pe]=Object(o.useState)(""),[Be,De]=Object(o.useState)([]),[Re,Ae]=Object(o.useState)([]),[ze,We]=Object(o.useState)({chipOrder:0,chipLabel:"BN ch\u1edd kh\xe1m"}),[Le,Ye]=Object(o.useState)([{chipLabel:"BN ch\u1edd kh\xe1m",chipContent:0},{chipLabel:"BN \u0111\xe3 kh\xe1m",chipContent:0}]),[He,Ue]=Object(o.useState)(!1),Ve=(e,t)=>{const n=t.toLowerCase();return e.filter((e=>{const{patientCode:t,fullName:o,phoneMother:a,phoneFather:r}=e.patient;return t.toLowerCase().includes(n)||o.toLowerCase().includes(n)||a.toLowerCase().includes(n)||r.toLowerCase().includes(n)}))},Ke=async()=>{pe(!0),xe(!0),Oe(!0),ve(!0);200===(await Se(x.id,[!0===x.editExamining?2:!0===x.backRegister?3:0])).status&&(s.b.success("\u0110\xe3 h\u1ee7y kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName),{toastId:"success2"}),f(e),y([]),S(!1),M([]),Q({}),W([]),Y([]),U(),Z({}),ae(),U(),ee(),K(),_(),_e()),Oe(!1),ve(!1)},Ge=()=>{0===x.status&&!1===x.editExamining?Ze():1===x.status?alert("B\u1ea1n \u0111ang trong qu\xe1 tr\xecnh kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName,", vui l\xf2ng k\u1ebft th\xfac \u0111\u1ee3t kh\xe1m hi\u1ec7n t\u1ea1i \u0111\u1ec3 b\u1eaft \u0111\u1ea7u \u0111\u1ee3t kh\xe1m m\u1edbi!")):0===x.status&&!0===x.editExamining&&et()},qe=()=>{Ue(!0),1===x.status&&setTimeout((()=>{Ue(!1),ie(!0)}),1e3)},_e=async()=>{await new Promise((e=>setTimeout(e,1e3)));const e=await ye();if(400!==e){let n=e.list;const o=n.find((e=>1===e.state&&e.userIdDoctor===t.userId));if(o){const e=await we(o.id);if(e.healthRecords.some((e=>null===e.medicalBookId))){await Se(o.id,1===e.healthRecords.length?0:3);const t=n.findIndex((e=>e.id===o.id));n[t].state=1===e.healthRecords.length?0:3}else{await Se(o.id,2);const e=n.findIndex((e=>e.id===o.id));n[e].state=2}}const a=n.filter((e=>1!==e.state));Te(a);const r=a.filter((e=>2!==e.state)),i=a.filter((e=>2===e.state&&e.userIdDoctor===t.userId));Ae(r),De(r);const s=[{chipLabel:"BN ch\u1edd kh\xe1m",chipContent:r.length},{chipLabel:"BN \u0111\xe3 kh\xe1m",chipContent:i.length}];Ye(s)}pe(!1),xe(!1)},Xe=async e=>{Ue(!0),xe(!0),de(!0),V&&0!==V.length&&K(),await bt(e.id);const t={...x};t.stt=e.order,t.id=e.id,t.status=0,t.patientsId=e.patient.patientId,t.patientCode=e.patient.patientCode,t.patientsName=e.patient.fullName,t.patientsDOB=e.patient.dayOfBirth,t.patientsMonthsOld=e.patient.monthsOfAge,t.patientsGender=e.patient.gender,t.patientsHeight=e.height,t.patientsWeight=e.weight,t.patientsHeadCircumference=e.headCircumference,t.patientsHeadCircumference=e.headCircumference,t.parentName=e.patient.fullNameMother?e.patient.fullNameMother:e.patient.fullNameFather,t.patientsPhone=e.patient.phoneMother?e.patient.phoneMother:e.patient.phoneFather,t.patientsAddress=e.patient.fullAddress,t.vaccination=!0===e.vaccination,t.editExamining=2===e.state,t.backRegister=3===e.state,t.isContinueExam=!1,f(t),xe(!1),de(!1),Ue(!1)},Ze=async()=>{pe(!0);const e=await Se(x.id,1);if(200===e.status){const e={...x};if(e.status=1,f(e),C.healthRecords.some((e=>null===e.medicalBookId))){x.backRegister&&(ae(Fe.a.cloneDeep(C.categoryPres)),ee(Fe.a.cloneDeep(C.categoryPres)),J(Fe.a.cloneDeep(V)));const e=[...Ne],t=e.findIndex((e=>e.id===x.id));e[t].state=1,Te(e);const n=e.filter((e=>0===e.state||1===e.state||3===e.state));Ae(n),De(n),await $e(),s.b.success("\u0110ang kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName),{toastId:"success1"})}else{const e=[...Ne],t=e.findIndex((e=>e.id===x.id));e[t].state=1,Te(e);const n=e.filter((e=>0===e.state||1===e.state||3===e.state));Ae(n),De(n),await tt()}}else 400===e.status&&s.b.error(e.data,{toastId:"error1"});pe(!1)},$e=async()=>{if(Oe(!0),C.healthRecords.forEach((e=>{null===e.medicalBookId&&(e.state=1)})),!0===x.backRegister&&!1===C.newPredecessor){const e=(await Ie(x.patientsId)).data.map((e=>{const t=C.categoryPres.find((t=>t.categoryOrder===e.categoryOrder));return{...e,isLock:!0,categoryContents:e.categoryContents.filter((e=>t&&t.categoryContents.some((t=>t.categoryContentOrder===e.categoryContentOrder)))).map((e=>{const n=t.categoryContents.find((t=>t.categoryContentOrder===e.categoryContentOrder));return{...e,isNullCategoryPres:!n,isLock:!0,categoryContentQuestions:n?n.categoryContentQuestions:[]}}))}}));C.categoryPres=e,ne({patientId:x.patientsId,categoryPres:[]});const t=await ke(C.healthRecords[0].medicalRegisterId);C.healthRecords[0].categories=t.medicakBook.categories;const n=C.healthRecords[0].categories.map((e=>({categoryName:e.categoryName,isHealthRecord:!0,categoryContents:e.categoryContents.map((e=>({...e,categoryContentQuestions:[]})))}))),o={patientId:x.patientsId,isVaccination:C.vaccination,medicalRegisterId:C.healthRecords[0].medicalRegisterId,conclusion:C.healthRecords[0].conclusion,categories:n};Y({healthRecordsName:C.healthRecords[0].examinationName,categoryPatients:C.healthRecords[0].categories}),U({healthRecordsName:C.healthRecords[0].examinationName,categoryPatients:C.healthRecords[0].categories}),y(C),Z(Fe.a.cloneDeep(o)),k()}else if(!0===x.backRegister&&!0===C.newPredecessor){const e=await ke(C.healthRecords[0].medicalRegisterId);C.healthRecords[0].categories=e.medicakBook.categories;const t=C.healthRecords[0].categories.map((e=>({categoryName:e.categoryName,isHealthRecord:!0,categoryContents:e.categoryContents.map((e=>({...e,categoryContentQuestions:[]})))}))),n={patientId:x.patientsId,isVaccination:C.vaccination,medicalRegisterId:C.healthRecords[0].medicalRegisterId,conclusion:C.healthRecords[0].conclusion,categories:t};Y({healthRecordsName:C.healthRecords[0].examinationName,categoryPatients:C.healthRecords[0].categories}),U({healthRecordsName:C.healthRecords[0].examinationName,categoryPatients:C.healthRecords[0].categories});let o=Fe.a.cloneDeep(C.categoryPres);o=o.map((e=>{const t=e.categoryContents.map((e=>({categoryContentCheck:e.categoryContentCheck,categoryContentName:e.categoryContentName,categoryContentOrder:e.categoryContentOrder,categoryContentText:e.categoryContentText,categoryContentTitle:e.categoryContentTitle,categoryContentQuestions:[]})));return{categoryName:e.categoryName,categoryOrder:e.categoryOrder,categoryContents:t,isPredecessor:!0}}));const a=o.concat(n.categories);n.categories=a,y(C),Z(Fe.a.cloneDeep(n)),k()}else{const e=C.categoryPres.map((e=>{const t=e.categoryContents.map((e=>({categoryContentTitle:e.categoryContentTitle,categoryContentName:e.categoryContentName,categoryContentCheck:e.categoryContentCheck,categoryContentText:e.categoryContentText,categoryContentOrder:e.categoryContentOrder,categoryContentQuestions:[]})));return{categoryName:e.categoryName,isPredecessor:!0,categoryOrder:e.categoryOrder,categoryContents:t}})),t=C.healthRecords.find((e=>e.patientId===x.patientsId));Z({patientId:x.patientsId,isVaccination:C.vaccination,medicalRegisterId:t.medicalRegisterId,conclusion:t.conclusion,categories:e}),C.categoryPres.forEach(((e,t)=>(e.categoryContents=e.categoryContents.map((e=>({...e,categoryPresOrder:t}))),{...e}))),y(C),k()}Oe(!1)},et=async()=>{pe(!0);if(200===(await Se(x.id,1)).status){const e=[...Ne],t=e.findIndex((e=>e.id===x.id));e[t].state=1,Te(e);const n=e.filter((e=>0===e.state||1===e.state||3===e.state));Ae(n),De(n);const o={...x};o.status=1,f(o),await tt(),We({chipOrder:0,chipLabel:"BN ch\u1edd kh\xe1m"}),pe(!1)}},tt=async()=>{Oe(!0);const e=await(async e=>{const t=je();return await I.a.get("".concat(me,"/api/Medical/GetUpdateMedicalBook/").concat(e),t).then((function(e){return e})).catch((function(e){return e.response}))})(C.healthRecords[0].medicalBookId);if(200===e.status){const t={...x};t.status=1,f(t),!1===C.newPredecessor&&(ae(Fe.a.cloneDeep(C.categoryPres)),ee(Fe.a.cloneDeep(C.categoryPres)),J(Fe.a.cloneDeep(V))),await ht(e.data),s.b.success("\u0110ang m\u1edf kh\xe1m l\u1ea1i cho b\u1ec7nh nh\xe2n ".concat(x.patientsName),{toastId:"success1"})}else 400===e.status&&s.b.error(e.data,{toastId:"error1"});Oe(!1)},ht=async e=>{C.healthRecords[0].state=1,C.healthRecords[0].categories=e.categories;const t=C.healthRecords[0].categories.map((e=>({categoryName:e.categoryName,isHealthRecord:!0,categoryContents:e.categoryContents.map((e=>({...e,categoryContentQuestions:[]})))}))),n={patientId:x.patientsId,isVaccination:C.vaccination,medicalRegisterId:x.id!==C.healthRecords[0].medicalRegisterId?x.id:C.healthRecords[0].medicalRegisterId,conclusion:C.healthRecords[0].conclusion,categories:t};Y({healthRecordsName:C.healthRecords[0].examinationName,categoryPatients:C.healthRecords[0].categories}),U({healthRecordsName:C.healthRecords[0].examinationName,categoryPatients:C.healthRecords[0].categories});let o=Fe.a.cloneDeep(C.healthRecords[0].categories);o=o.map((e=>(e.categoryContents=e.categoryContents.map((e=>{const t=e.categoryContentQuestions,n=t.every((e=>null===e.categoryContentAnswer&&null===e.categoryContentNote));return e.categoryContentQuestions=n?[]:t.filter((e=>null!==e.categoryContentAnswer||null!==e.categoryContentNote)),e})),e.isHealthRecord=!0,e))),n.categories=o;const a=await Ie(x.patientsId);if(200===a.status){const e=a.data.map((e=>{const t=C.categoryPres.find((t=>t.categoryOrder===e.categoryOrder));return{...e,isLock:!0,categoryContents:e.categoryContents.filter((e=>t&&t.categoryContents.some((t=>t.categoryContentOrder===e.categoryContentOrder)))).map((e=>{const n=t.categoryContents.find((t=>t.categoryContentOrder===e.categoryContentOrder));return{...e,isNullCategoryPres:!n,isLock:!0,categoryContentQuestions:n?n.categoryContentQuestions:[]}}))}}));C.categoryPres=e,ne({patientId:x.patientsId,categoryPres:[]}),y(C),k()}else{let e=Fe.a.cloneDeep(C.categoryPres);e=e.map((e=>{const t=e.categoryContents.map((e=>({categoryContentCheck:e.categoryContentCheck,categoryContentName:e.categoryContentName,categoryContentOrder:e.categoryContentOrder,categoryContentText:e.categoryContentText,categoryContentTitle:e.categoryContentTitle,categoryContentQuestions:[]})));return{categoryName:e.categoryName,categoryOrder:e.categoryOrder,categoryContents:t,isPredecessor:!0}}));const t=e.concat(n.categories);n.categories=t,y(C),k()}Z(Fe.a.cloneDeep(n))},ut=(e,t,n)=>{const o=n;yt.current&&clearInterval(yt.current),yt.current=setTimeout((()=>{const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentNote=o,Q(n),n.categoryContents[e].categoryContentQuestions[t].hasEdit=!0,xt(e,n.categoryContents[e].categoryContentOrder,n.categoryContents[e].categoryContentQuestions[t],o)}),0)},xt=(e,t,n,o)=>{const a=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(a){const r=a.categoryContents.find((e=>e.categoryContentOrder===t));if(r){const e=r.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder&&""!==o)),t=r.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder&&""===o));-1!==e?(r.categoryContentQuestions[e].categoryContentNote=o,r.categoryContentQuestions[e].hasEdit||(r.categoryContentQuestions[e].hasEdit=!0)):-1!==t?r.categoryContentQuestions.splice(t,1):r.categoryContentQuestions.push(n)}else{const t={categoryContentCheck:A.categoryContents[e].categoryContentCheck,categoryContentName:A.categoryContents[e].categoryContentName,categoryContentOrder:A.categoryContents[e].categoryContentOrder,categoryContentQuestions:[n],categoryContentText:A.categoryContents[e].categoryContentText,categoryContentTitle:A.categoryContents[e].categoryContentTitle};a.categoryContents.push(t)}}else{const t={categoryContentCheck:A.categoryContents[e].categoryContentCheck,categoryContentName:A.categoryContents[e].categoryContentName,categoryContentOrder:A.categoryContents[e].categoryContentOrder,categoryContentQuestions:[n],categoryContentText:A.categoryContents[e].categoryContentText,categoryContentTitle:A.categoryContents[e].categoryContentTitle},o={categoryOrder:A.categoryOrder,categoryName:A.categoryName,newCategoryPre:A.newCategoryPre,categoryContents:[t]};te.categoryPres.push(o)}wt(n)},mt=(e,t,n,o,a)=>{if(a){if(!0===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType&&0!==o.length){const e=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(e){const a=e.categoryContents.find((e=>e.categoryContentOrder===t));if(a){const e=a.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder));-1!==e&&(a.categoryContentQuestions[e].categoryContentNote=o,a.categoryContentQuestions[e].hasEdit||(a.categoryContentQuestions[e].hasEdit=!0))}}}if(!0===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType&&0===o.length){const e=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(e){const o=e.categoryContents.find((e=>e.categoryContentOrder===t));if(o){const e=o.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder));-1!==e&&(o.categoryContentQuestions[e].categoryContentNote=null,o.categoryContentQuestions[e].hasEdit||(o.categoryContentQuestions[e].hasEdit=!0))}}}if(null===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType&&0!==o.length){const a=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(a){const r=a.categoryContents.find((e=>e.categoryContentOrder===t));if(r){const e=r.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder));-1!==e?(r.categoryContentQuestions[e].categoryContentNote=o,r.categoryContentQuestions[e].hasEdit||(r.categoryContentQuestions[e].hasEdit=!0)):r.categoryContentQuestions.push(n)}else{const t={categoryContentCheck:A.categoryContents[e].categoryContentCheck,categoryContentName:A.categoryContents[e].categoryContentName,categoryContentOrder:A.categoryContents[e].categoryContentOrder,categoryContentQuestions:[n],categoryContentText:A.categoryContents[e].categoryContentText,categoryContentTitle:A.categoryContents[e].categoryContentTitle};a.categoryContents.push(t)}}else{const t={categoryContentCheck:A.categoryContents[e].categoryContentCheck,categoryContentName:A.categoryContents[e].categoryContentName,categoryContentOrder:A.categoryContents[e].categoryContentOrder,categoryContentQuestions:[n],categoryContentText:A.categoryContents[e].categoryContentText,categoryContentTitle:A.categoryContents[e].categoryContentTitle},o={categoryOrder:A.categoryOrder,categoryName:A.categoryName,newCategoryPre:A.newCategoryPre,categoryContents:[t]};te.categoryPres.push(o)}}if(null===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType&&0===o.length){const e=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(e){const o=e.categoryContents.find((e=>e.categoryContentOrder===t));if(o){const e=o.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder));-1!==e&&o.categoryContentQuestions.splice(e,1)}}}}else{if(!0===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType){const o=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(o){const a=o.categoryContents.find((e=>e.categoryContentOrder===t));if(a){const e=a.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder&&""!==e.categoryContentNote));-1!==e?(a.categoryContentQuestions[e].categoryContentAnswer=!0,a.categoryContentQuestions[e].hasEdit||(a.categoryContentQuestions[e].hasEdit=!0)):a.categoryContentQuestions.push(n)}else{const t={categoryContentCheck:A.categoryContents[e].categoryContentCheck,categoryContentName:A.categoryContents[e].categoryContentName,categoryContentOrder:A.categoryContents[e].categoryContentOrder,categoryContentQuestions:[n],categoryContentText:A.categoryContents[e].categoryContentText,categoryContentTitle:A.categoryContents[e].categoryContentTitle};o.categoryContents.push(t)}}else{const t={categoryContentCheck:A.categoryContents[e].categoryContentCheck,categoryContentName:A.categoryContents[e].categoryContentName,categoryContentOrder:A.categoryContents[e].categoryContentOrder,categoryContentQuestions:[n],categoryContentText:A.categoryContents[e].categoryContentText,categoryContentTitle:A.categoryContents[e].categoryContentTitle},o={categoryOrder:A.categoryOrder,categoryName:A.categoryName,newCategoryPre:A.newCategoryPre,categoryContents:[t]};te.categoryPres.push(o)}}if(null===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType){const e=te.categoryPres.find((e=>e.categoryOrder===A.categoryOrder));if(e){const o=e.categoryContents.find((e=>e.categoryContentOrder===t));if(o){const e=o.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder&&null===e.categoryContentNote));if(-1!==e)o.categoryContentQuestions.splice(e,1);else{const e=o.categoryContentQuestions.findIndex((e=>e.categoryContentQuestionOrder===n.categoryContentQuestionOrder));o.categoryContentQuestions[e].categoryContentAnswer=null,o.categoryContentQuestions[e].hasEdit||(o.categoryContentQuestions[e].hasEdit=!0)}}}}}wt(n,a)},jt=async(e,t)=>{const n=await fe(e);if(200===n.status){const e={...O};e.categoryPres.forEach((e=>{e.categoryOrder===t.categoryOrder&&(e.categoryContents=t.categoryContents,e.categoryContents.forEach((e=>{e.isLock=!0})),0===t.categoryContents.length?e.newCategoryPre=!0:e.newCategoryPre=!1,e.isLock=!0),e.categoryContents=e.categoryContents.filter((e=>0!==e.categoryContentQuestions.length))})),y(e);const n=e.categoryPres.find((e=>e.categoryOrder===t.categoryOrder));K(V),J(V),s.b.success("\u0110\xe3 c\u1eadp nh\u1eadt l\u1ea1i ti\u1ec1n c\u0103n",{toastId:"handleSaveNewDataPredecessorSuccess"}),ft(n)}else s.b.error(n.data,{toastId:"handleSaveNewDataPredecessorError"});Ue(!1)},bt=async e=>{const t=await we(e);k(t);const n=t.categoryPres.filter((e=>!1===e.newCategoryPre)).flatMap((e=>e.categoryContents.flatMap((t=>t.categoryContentQuestions.map((t=>({categoryContentQuestionOrder:t.categoryContentQuestionOrder,categoryContentQuestionName:t.categoryContentQuestionName,categoryContentQuestionType:t.categoryContentQuestionType,categoryContentAnswer:t.categoryContentAnswer,categoryContentNote:t.categoryContentNote,categoryContentDefauls:t.categoryContentDefauls,categoryOrder:e.categoryOrder})))))));K(n)},ft=async e=>{!0===T&&S(!T),"tree"===z.healthRecordsContentsType&&0!==L.length&&W([]),0!==L.length&&Y([]),Q({...e}),W([])},Ot=async(e,t,n)=>{const o=await ke(e);if(Y({healthRecordsName:t,newMedicalBook:o.medicakBook.newMedicalBook,conclusion:o.medicakBook.conclusion,categoryPatients:o.medicakBook.categories}),U({healthRecordsName:t,newMedicalBook:o.medicakBook.newMedicalBook,conclusion:o.medicakBook.conclusion,categoryPatients:o.medicakBook.categories}),1===n&&1===O.healthRecords.length&&null===O.healthRecords[0].medicalBookId){const e=o.medicakBook.categories.map(((e,t)=>{const n=e.categoryContents.map((e=>({categoryContentTitle:e.categoryContentTitle,categoryContentName:e.categoryContentName,categoryContentCheck:e.categoryContentCheck,categoryContentText:e.categoryContentText,categoryContentQuestions:[]})));return{categoryName:e.categoryName,isHealthRecord:!0,categoryContents:n}})),t={...X};e.map((e=>t.categories.push(e))),Z(t)}},yt=Object(o.useRef)(null),Ct=(e,t,n)=>{const o=n;yt.current&&clearInterval(yt.current),yt.current=setTimeout((()=>{const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentNote=o,Q(n);Nt(n.categoryName,!0,n.categoryContents[e].categoryContentQuestions[t],n.categoryContents[e].categoryContentQuestions[t].categoryContentQuestionOrder,n.categoryContents[e].categoryContentTitle)}),0)},vt=(e,t,n,o)=>{const a=o;yt.current&&clearInterval(yt.current),yt.current=setTimeout((()=>{const o={...L};o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentNote=a,Y(o);Nt(o.categoryPatients[e].categoryName,!1,o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n],o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentQuestionOrder,o.categoryPatients[e].categoryContents[t].categoryContentTitle,!0)}),0)},Nt=(e,t,n,o,a,r)=>{if("check"===n.categoryContentQuestionType){if(r){if(""!==n.categoryContentNote){const t={...X};t.categories.forEach((t=>{t.categoryName===e&&t.categoryContents.forEach((e=>{if(e.categoryContentTitle===a)if(e.categoryContentQuestions.length>0){const t=e.categoryContentQuestions.find((e=>e.categoryContentQuestionName===n.categoryContentQuestionName));t?t.categoryContentNote=n.categoryContentNote:e.categoryContentQuestions.push(n)}else e.categoryContentQuestions.push(n)}))})),Z(t)}else if(""===n.categoryContentNote){const t={...X};t.categories.forEach((t=>{t.categoryName===e&&t.categoryContents.forEach((e=>{e.categoryContentTitle===a&&e.categoryContentQuestions.forEach((t=>{null!==t.categoryContentAnswer&&!1!==t.categoryContentAnswer||(e.categoryContentQuestions=e.categoryContentQuestions.filter((e=>e.categoryContentQuestionOrder!==n.categoryContentQuestionOrder)))}))}))})),Z(t)}}else if(!0===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType){const t={...X};t.categories.forEach((t=>{t.categoryName===e&&t.categoryContents.forEach((e=>{if(e.categoryContentTitle===a)if(e.categoryContentQuestions.length>0){const t=e.categoryContentQuestions.find((e=>e.categoryContentQuestionName===n.categoryContentQuestionName));t?t.categoryContentAnswer=n.categoryContentAnswer:e.categoryContentQuestions.push(n)}else e.categoryContentQuestions.push(n)}))})),Z(t)}else if(!1===n.categoryContentAnswer&&"check"===n.categoryContentQuestionType){const t={...X};t.categories.forEach(((t,o)=>{t.categoryName===e&&t.categoryContents.forEach((e=>{e.categoryContentTitle===a&&e.categoryContentQuestions.forEach((t=>{null!==t.categoryContentNote&&""!==t.categoryContentNote||(e.categoryContentQuestions=e.categoryContentQuestions.filter((e=>e.categoryContentQuestionOrder!==n.categoryContentQuestionOrder)))}))}))})),Z(t)}}else if(""!==n.categoryContentNote&&"string"===n.categoryContentQuestionType){const t={...X};t.categories.forEach((t=>{t.categoryName===e&&t.categoryContents.forEach((e=>{if(e.categoryContentTitle===a)if(e.categoryContentQuestions.length>0){const t=e.categoryContentQuestions.find((e=>e.categoryContentQuestionName===n.categoryContentQuestionName));t?t.categoryContentNote=n.categoryContentNote:e.categoryContentQuestions.push(n)}else e.categoryContentQuestions.push(n)}))})),Z(t)}else if(""===n.categoryContentNote&&"string"===n.categoryContentQuestionType){const t={...X};t.categories.forEach((t=>{t.categoryName===e&&t.categoryContents.forEach((e=>{e.categoryContentTitle===a&&(e.categoryContentQuestions=e.categoryContentQuestions.filter((e=>e.categoryContentQuestionName!==n.categoryContentQuestionName)))}))})),Z(t)}!0===t&&wt(n,r)},wt=(e,t)=>{if(V&&0!==V.length){let n=[...V];const o=n.find((t=>t.categoryContentQuestionName===e.categoryContentQuestionName));if(o){if("string"===o.categoryContentQuestionType){if(""===e.categoryContentNote)n=V.filter((t=>t.categoryContentQuestionName!==e.categoryContentQuestionName));else if(""!==e.categoryContentNote){const t=V.find((t=>t.categoryContentQuestionName===e.categoryContentQuestionName));t?t.categoryContentNote=e.categoryContentNote:(e.categoryOrder=A.categoryOrder,n.push(e))}}else if("check"===o.categoryContentQuestionType)if(t){if(""===e.categoryContentNote){const t=V.find((t=>t.categoryContentQuestionName===e.categoryContentQuestionName&&!0===t.categoryContentAnswer));t?t.categoryContentNote=e.categoryContentNote:null!==e.categoryContentAnswer&&!1!==e.categoryContentAnswer||(n=n.filter((t=>t.categoryContentQuestionName!==e.categoryContentQuestionName)))}else if(""!==e.categoryContentNote){const t=V.find((t=>t.categoryContentQuestionName===e.categoryContentQuestionName));t?t.categoryContentNote=e.categoryContentNote:(e.categoryOrder=A.categoryOrder,n.push(e))}}else if(!1===e.categoryContentAnswer||null===e.categoryContentAnswer){const t=V.find((t=>t.categoryContentQuestionName===e.categoryContentQuestionName));t&&(""===t.categoryContentNote||null===t.categoryContentNote?n=n.filter((t=>t.categoryContentQuestionName!==e.categoryContentQuestionName)):""===t.categoryContentNote&&null===t.categoryContentNote||(t.categoryContentAnswer=e.categoryContentAnswer))}else if(!0===e.categoryContentAnswer){const t=V.find((t=>t.categoryContentQuestionName===e.categoryContentQuestionName));t||""!==t.categoryContentNote||null!==t.categoryContentNote?t.categoryContentAnswer=e.categoryContentAnswer:(e.categoryOrder=A.categoryOrder,n.push(e))}}else e.categoryOrder=A.categoryOrder,n.push(e);K(n)}else K([e])},kt=Object(Et.a)({root:{"&.Mui-disabled":{color:"#d32f2f"},"&.Mui-checked.Mui-disabled":{color:"#d32f2f"}}})();return Object(o.useEffect)((()=>{const e=e=>{!0===e&&""===x.id&&(pe(!0),_e())};return ce(localStorage.getItem("jwt",e)),le(e),()=>{}}),[]),Object(o.useEffect)((()=>{if(1===x.status&&a){window.confirm("B\u1ea1n \u0111ang kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName,", c\xf3 ch\u1eafc l\xe0 mu\u1ed1n \u0111\u0103ng xu\u1ea5t kh\xf4ng?"))?(sessionStorage.setItem("dataPantientsReadyExamining",JSON.stringify(x)),sessionStorage.setItem("dataExaminingForConclusion",JSON.stringify(X)),sessionStorage.setItem("mainDataExamining",JSON.stringify(O)),H&&sessionStorage.setItem("currentHealthRecordExamining",JSON.stringify(H)),oe&&sessionStorage.setItem("prevDataPredecessor",JSON.stringify(oe)),$&&sessionStorage.setItem("oldDataPredecessor",JSON.stringify($)),r()):i()}else{if(x.status){u(!0);const e=e=>{const t="B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n r\u1eddi kh\u1ecfi trang n\xe0y?";return e.returnValue=t,t},t=h.block(((e,n)=>{if(p){if(!window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n r\u1eddi kh\u1ecfi trang n\xe0y? Nh\u1eefng thay \u0111\u1ed5i s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c l\u01b0u...."))return!1;{const n=Re.filter((e=>1===e.state));sessionStorage.setItem("dataPatientsRegisterSort",JSON.stringify(n)),sessionStorage.setItem("dataPantientsReadyExamining",JSON.stringify(x)),sessionStorage.setItem("dataExaminingForConclusion",JSON.stringify(X)),sessionStorage.setItem("mainDataExamining",JSON.stringify(O)),H&&sessionStorage.setItem("currentHealthRecordExamining",JSON.stringify(H)),oe&&sessionStorage.setItem("prevDataPredecessor",JSON.stringify(oe)),$&&sessionStorage.setItem("oldDataPredecessor",JSON.stringify($)),t(),h.push(e.pathname)}}return!0})),n=()=>{const e=Re.filter((e=>1===e.state));sessionStorage.setItem("dataPatientsRegisterSort",JSON.stringify(e)),sessionStorage.setItem("dataPantientsReadyExamining",JSON.stringify(x)),sessionStorage.setItem("dataExaminingForConclusion",JSON.stringify(X)),sessionStorage.setItem("mainDataExamining",JSON.stringify(O)),H&&sessionStorage.setItem("currentHealthRecordExamining",JSON.stringify(H)),oe&&sessionStorage.setItem("prevDataPredecessor",JSON.stringify(oe)),$&&sessionStorage.setItem("oldDataPredecessor",JSON.stringify($))};return window.addEventListener("beforeunload",e),window.addEventListener("unload",n),()=>{window.removeEventListener("beforeunload",e),t(),window.removeEventListener("unload",n)}}a&&r()}}),[x,O,H,X,a,r,i,c,h,p]),Object(o.useEffect)((()=>{!1===n&&t.isLogin&&("Doctor"!==t.positionName?h.push("/404"):sessionStorage.dataPantientsReadyExamining?(async()=>{Ue(!0);const e=JSON.parse(sessionStorage.dataPatientsRegisterSort),t=JSON.parse(sessionStorage.dataPantientsReadyExamining),n=JSON.parse(sessionStorage.mainDataExamining),o=JSON.parse(sessionStorage.dataExaminingForConclusion);if(Ae(e),t.isContinueExam=!0,f(Fe.a.cloneDeep(t)),y(Fe.a.cloneDeep(n)),Z(Fe.a.cloneDeep(o)),sessionStorage.currentHealthRecordExamining){const e=JSON.parse(sessionStorage.currentHealthRecordExamining);Y(Fe.a.cloneDeep(e)),U(Fe.a.cloneDeep(e))}if(sessionStorage.prevDataPredecessor){const e=JSON.parse(sessionStorage.prevDataPredecessor);ae(Fe.a.cloneDeep(e))}if(sessionStorage.oldDataPredecessor){const e=JSON.parse(sessionStorage.oldDataPredecessor);ee(Fe.a.cloneDeep(e))}ne({patientId:x.patientsId,categoryPres:[]}),sessionStorage.clear(),pe(!1),xe(!1),Ue(!1)})():_e())}),[n,t]),Object(o.useEffect)((()=>{if(!1===l){const e=e=>{112===e.keyCode&&e.preventDefault(),""!==x.patientsId&&!1===He&&!1===re&&116!==e.keyCode&&(112===e.keyCode&&1===x.status?(e.preventDefault(),Ke()):113===e.keyCode&&C?0===x.status&&!1===x.editExamining?Ze():1===x.status?alert("B\u1ea1n \u0111ang trong qu\xe1 tr\xecnh kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName,", vui l\xf2ng k\u1ebft th\xfac \u0111\u1ee3t kh\xe1m hi\u1ec7n t\u1ea1i \u0111\u1ec3 b\u1eaft \u0111\u1ea7u \u0111\u1ee3t kh\xe1m m\u1edbi!")):0===x.status&&!0===x.editExamining&&et():115===e.keyCode&&(Ue(!0),1===x.status&&setTimeout((()=>{Ue(!1),ie(!0)}),1e3)))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[x,re,He,re,l]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(ue.a,{maxWidth:"xl",sx:{mt:2.5},children:Object(E.jsx)(B.a,{sx:{bgcolor:"#fff",height:"auto"},children:Object(E.jsxs)(Me.a,{container:!0,spacing:2,sx:{pl:.6,pr:.6},children:[Object(E.jsxs)(Me.a,{item:!0,xs:5,children:[Object(E.jsx)(rt.a,{component:ct.a,sx:{height:"330px",boxShadow:5,borderRadius:"10px"},children:he?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#e0e0e0",height:"100%"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(B.a,{children:[Object(E.jsx)(v.a,{direction:"row",spacing:1,sx:{justifyContent:"center",mt:1.4},children:Le.map(((e,n)=>Object(E.jsx)(dt.a,{badgeContent:e.chipContent,color:"error",children:Object(E.jsx)(lt.a,{label:e.chipLabel,color:n===ze.chipOrder?"primary":"default",onClick:()=>((e,n)=>{if(We({chipOrder:e,chipLabel:n}),0===e){const e=Ne.filter((e=>0===e.state||1===e.state||3===e.state));Ae(e),De(e)}else if(1===e){const e=Ne.filter((e=>2===e.state&&e.userIdDoctor===t.userId));Ae(e),De(e)}})(n,e.chipLabel)})},"chipPantientState ".concat(n))))}),Object(E.jsxs)(B.a,{sx:{mt:.2,position:"relative",display:"flex",justifyContent:"center",flexDirection:"column"},children:[1!==x.status?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{variant:"subtitle2",sx:{textAlign:"center",mt:.2,fontSize:"1rem"},children:"N\u1ebfu kh\xf4ng t\xecm th\u1ea5y b\u1ec7nh nh\xe2n, h\xe3y nh\u1ea5n n\xfat t\u1ea3i l\u1ea1i ph\xeda d\u01b0\u1edbi"}),Object(E.jsx)(gt.a,{sx:{color:"brown",fontWeight:"bolder",position:"absolute",right:55,top:30,fontSize:"2.5rem",cursor:"pointer"},titleAccess:"T\u1ea3i l\u1ea1i",onClick:()=>(async()=>{pe(!0),xe(!0),f(e),y([]),S(!1),M([]),Q({}),W([]),Y([]),U(),Z({}),ae(),U(),ee(),K(),_e()})()})]}):null,Object(E.jsxs)(D.a,{variant:"h6",sx:{textAlign:"center",fontSize:"1.12rem"},children:["Danh s\xe1ch ",ze.chipLabel," ng\xe0y ",Je()().format("DD/MM/YYYY")]})]}),Object(E.jsx)(B.a,{sx:{display:"flex",justifyContent:"center",position:"relative"},children:Object(E.jsx)(j.a,{sx:{mb:.6,width:360,"& .MuiInputBase-inputSizeSmall":{textAlign:"center"}},size:"small",variant:"outlined",placeholder:"T\xecm v\u1edbi M\xe3 BN ho\u1eb7c T\xean BN",value:Ee,onChange:e=>(e=>{const t=e;Pe(t),Ae(""===e?Be:Ve(Be,t))})(e.target.value),InputProps:{startAdornment:Object(E.jsx)(b.a,{position:"start",children:Object(E.jsx)(pt.a,{})}),endAdornment:Object(E.jsx)(b.a,{position:"end",children:""!==Ee?Object(E.jsx)(m.a,{sx:{cursor:"pointer"},titleAccess:"X\xf3a",onClick:()=>[Pe(""),Ae(Be)]}):null})}})})]}),Object(E.jsxs)(nt.a,{stickyHeader:!0,children:[Object(E.jsx)(it.a,{children:Object(E.jsxs)(st.a,{sx:{"& th":{color:"rgba(96, 96, 96)",backgroundColor:"pink"}},children:[Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"STT"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.95rem"},children:"H\u1ecd t\xean"})]})}),Object(E.jsx)(ot.a,{children:Re.map(((e,t)=>Object(E.jsxs)(st.a,{hover:!0,role:"checkbox",sx:{cursor:"pointer",backgroundColor:1===e.state?"#26c6da":"#fff",":hover":{backgroundColor:1===e.state?"#00bcd4 !important":"rgba(0, 0, 0, 0.1) !important"}},onClick:()=>(async e=>{0===e.state&&x.patientsName!==e.patient.fullName||3===e.state&&x.patientsName!==e.patient.fullName?""===x.patientsId||""!==x.patientsId&&0===x.status?await Xe(e):alert("B\u1ea1n \u0111ang trong qu\xe1 tr\xecnh kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName,", vui l\xf2ng k\u1ebft th\xfac \u0111\u1ee3t kh\xe1m \u0111\u1ec3 b\u1eaft \u0111\u1ea7u \u0111\u1ee3t kh\xe1m m\u1edbi!")):2===e.state&&x.patientsName!==e.patient.fullName&&(""!==x.patientsId&&1===x.status?alert("B\u1ea1n \u0111ang trong qu\xe1 tr\xecnh kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName,", vui l\xf2ng k\u1ebft th\xfac \u0111\u1ee3t kh\xe1m \u0111\u1ec3 b\u1eaft \u0111\u1ea7u \u0111\u1ee3t kh\xe1m m\u1edbi!")):await Xe(e))})(e),children:[Object(E.jsx)(at.a,{align:"left",sx:{width:"20px"},children:e.order}),Object(E.jsx)(at.a,{align:"left",sx:{width:"150px"},children:e.patient.patientCode}),Object(E.jsx)(at.a,{align:"left",sx:{width:"240px"},children:e.patient.fullName})]},e.order)))})]})]})}),Object(E.jsx)(B.a,{style:{width:"100%",marginTop:"10px",borderRadius:"10px",border:"2px solid red",height:"300px",overflow:"auto"},children:0===O.length&&!1===be||!1===C?null:Object(E.jsx)(E.Fragment,{children:be?Object(E.jsxs)(B.a,{sx:{backgroundColor:"#e0e0e0",borderRadius:"10px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u c\xe2y th\u01b0 m\u1ee5c kh\xe1m, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{className:"category-scrollbar",children:Object(E.jsxs)(Dt.a,{sx:{p:0,display:"inline-grid"},children:[O.categoryPres.map(((e,t)=>Object(E.jsxs)(B.a,{sx:{display:"inline-flex"},children:[Object(E.jsx)(zt.a,{sx:{width:"fitContent",pt:"4px",pb:"4px",borderRadius:"8px",":hover":{backgroundColor:A.categoryName===e.categoryName?"#ffc107":"rgba(0, 0, 0, 0.1)"},backgroundColor:A.categoryName===e.categoryName?"#ffd54f":""},onClick:()=>ft(e),children:Object(E.jsxs)(B.a,{sx:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(Wt.a,{sx:{minWidth:"30px","& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem",color:"#2962ff"}},children:Object(E.jsx)(Ut.a,{})}),Object(E.jsx)(Lt.a,{primary:e.categoryName,sx:{"& .MuiListItemText-primary":{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"}}})]})}),!0===e.newCategoryPre&&!0===e.newPredecessor?null:Object(E.jsxs)(E.Fragment,{children:[!1===e.newCategoryPre?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(cn.a,{sx:{color:"green",fontSize:"1.4rem",margin:"auto"},titleAccess:"\u0111\xe3 theo d\xf5i"})}):null,O.newPredecessor?null:!0===e.isLock?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(g.a,{edge:"end",sx:{ml:.5,zIndex:100},onClick:()=>(async(e,t)=>{Ue(!0);const n=(await Ie(x.patientsId)).data.find((e=>e.categoryOrder===t));O.categoryPres.forEach((e=>{e.categoryOrder===n.categoryOrder&&(e.categoryContents=n.categoryContents,e.categoryContents.forEach((e=>{e.isLock=!1})),e.isLock=!1)}));const o=O.categoryPres.find((e=>e.categoryOrder===t));te.categoryPres.some((t=>t.categoryName===e))||(te.categoryPres=oe),ft(o),Ue(!1)})(e.categoryName,e.categoryOrder),children:Object(E.jsx)(bn.a,{sx:{color:"blue",fontSize:"1.6rem"},titleAccess:"S\u1eeda"})})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(g.a,{edge:"end",sx:{ml:.5,zIndex:100},onClick:()=>{return t=e.categoryOrder,_(Fe.a.cloneDeep(te)),Ue(!0),void setTimeout((()=>{const e=te.categoryPres.find((e=>e.categoryOrder===t)),n=$.find((t=>t.categoryOrder===e.categoryOrder));n?e.categoryContents.forEach((e=>{let t=n.categoryContents.find((t=>t.categoryContentOrder===e.categoryContentOrder));t?(t.categoryContentQuestions=t.categoryContentQuestions.filter((t=>e.categoryContentQuestions.some((e=>e.categoryContentQuestionOrder===t.categoryContentQuestionOrder)))),0!==e.categoryContentQuestions.length?e.categoryContentQuestions.forEach((e=>{if(null===e.categoryContentAnswer&&null===e.categoryContentNote&&"check"===e.categoryContentQuestionType)t.categoryContentQuestions=t.categoryContentQuestions.filter((t=>t.categoryContentQuestionOrder!==e.categoryContentQuestionOrder));else if(null===e.categoryContentNote&&"string"===e.categoryContentQuestionType)t.categoryContentQuestions=t.categoryContentQuestions.filter((t=>t.categoryContentQuestionOrder!==e.categoryContentQuestionOrder));else{const n=t.categoryContentQuestions.findIndex((t=>t.categoryContentQuestionOrder===e.categoryContentQuestionOrder));-1!==n?t.categoryContentQuestions[n]=e:t.categoryContentQuestions.push(e)}})):n.categoryContents=n.categoryContents.filter((t=>t.categoryContentOrder!==e.categoryContentOrder))):n.categoryContents.push(e)})):$.push(e),$.forEach((e=>{e.categoryContents=e.categoryContents.filter((e=>0!==e.categoryContentQuestions.length))}));const o=$.findIndex((e=>0===e.categoryContents.length));-1!==o&&$.splice(o,1);const a={patientId:te.patientId,categoryPres:$};jt(a,e)}),500);var t},children:Object(E.jsx)(On.a,{sx:{color:"red",fontSize:"1.6rem"},titleAccess:"L\u01b0u"})}),Object(E.jsx)(g.a,{edge:"end",sx:{ml:.5,zIndex:100},onClick:()=>{return e.categoryName,t=e.categoryOrder,Ue(!0),void setTimeout((()=>{const e=$.find((e=>e.categoryOrder===t));if(e)O.categoryPres.forEach((t=>{t.categoryOrder===e.categoryOrder&&(t.categoryContents=e.categoryContents,t.categoryContents.forEach((e=>{e.isLock=!0})),t.isLock=!0)})),te.categoryPres.forEach((t=>{t.categoryOrder===e.categoryOrder&&(t.categoryContents=e.categoryContents)}));else{O.categoryPres.forEach((e=>{e.categoryOrder===t&&(e.categoryContents=[],e.isLock=!0)}));const e={...te}.categoryPres.filter((e=>e.categoryOrder!==t));te.categoryPres=e}ae(Fe.a.cloneDeep($));const n=O.categoryPres.find((e=>e.categoryOrder===t));ft(n);const o=G.filter((e=>e.categoryOrder===t)),a=V.filter((e=>e.categoryOrder!==t)),r=o.concat(a);K(r),Ue(!1)}),300);var t},children:Object(E.jsx)(Tt.a,{sx:{color:"red",fontSize:"1.6rem"},titleAccess:"H\u1ee7y"})})]})]})]},"category ".concat(t)))),Object(E.jsxs)(zt.a,{sx:{pt:"4px",pb:"4px",borderRadius:"8px",backgroundColor:"S\u1ed5 s\u1ee9c kh\u1ecfe"===A.categoryName?"#ffd54f":"",":hover":{backgroundColor:"S\u1ed5 s\u1ee9c kh\u1ecfe"===A.categoryName?"#ffc107":"rgba(0, 0, 0, 0.1)"}},onClick:()=>{return e=O.healthRecords,!1===T&&S(!T),0!==L.length&&Y([]),Q({categoryName:"S\u1ed5 s\u1ee9c kh\u1ecfe",categoryContents:e}),void W({healthRecordsContentsType:"tree",categoryContents:e});var e},children:[Object(E.jsx)(Wt.a,{sx:{minWidth:"30px","& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem",color:"#2962ff"}},children:Object(E.jsx)(Ut.a,{sx:{transform:"S\u1ed5 s\u1ee9c kh\u1ecfe"===A.categoryName?"rotate(90deg)":"rotate(0deg)"}})}),Object(E.jsx)(Lt.a,{primary:"S\u1ed5 s\u1ee9c kh\u1ecfe",sx:{"& .MuiListItemText-primary":{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"}}})]}),Object(E.jsx)(Yt.a,{in:T,timeout:"auto",unmountOnExit:!0,children:Object(E.jsx)("div",{style:{paddingLeft:"24px"},children:O.healthRecords.map(((e,t)=>Object(E.jsxs)(zt.a,{sx:{pt:"0px",pb:"0px",width:"auto",borderRadius:"8px",":hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}},onClick:()=>(async(e,t,n)=>{Ue(!0),ve(!0),H?L.healthRecordsName!==t&&(2===n?await Ot(e,t,n):1===n&&x.editExamining||1===n&&x.backRegister?(Y({healthRecordsName:t,newMedicalBook:!0,conclusion:O.healthRecords[0].conclusion,categoryPatients:O.healthRecords[0].categories}),U({healthRecordsName:t,newMedicalBook:!0,conclusion:O.healthRecords[0].conclusion,categoryPatients:O.healthRecords[0].categories})):1===n&&1===O.healthRecords.length||1===n&&1===O.healthRecords.length&&x.isContinueExam?(Y(H),U(H)):await Ot(e,t,n)):await Ot(e,t,n),ve(!1),Ue(!1)})(e.medicalRegisterId,e.examinationName,e.state),children:[Object(E.jsx)(Wt.a,{sx:{minWidth:"30px","& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem",color:1===e.state?"red":"#009688"}},children:Object(E.jsx)(xn.a,{sx:{transform:"S\u1ed5 s\u1ee9c kh\u1ecfe"===A.categoryName?"rotate(90deg)":"rotate(0deg)"}})}),Object(E.jsx)(Lt.a,{primary:e.examinationName,sx:{"& .MuiListItemText-primary":{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"}}})]},"healthRecords ".concat(t))))})})]})})})})}),0===ze.chipOrder&&!1===x.editExamining?Object(E.jsxs)("div",{className:"instruction",style:{display:"flex",justifyContent:"space-between",marginTop:"4.5px"},children:[Object(E.jsx)(N.a,{variant:"contained",color:"error",onClick:()=>Ke(),children:"H\u1ee7y kh\xe1m (f1)"}),Object(E.jsx)(N.a,{variant:"contained",color:"secondary",onClick:()=>Ge(),children:"B\u1eaft \u0111\u1ea7u kh\xe1m (f2)"}),Object(E.jsx)(N.a,{variant:"contained",color:"primary",onClick:()=>qe(),children:"K\u1ebft th\xfac kh\xe1m (f4)"})]}):""===x.id?null:""!==x.id&&0===x.status?Object(E.jsx)("div",{className:"instruction",style:{display:"flex",marginTop:"4.5px"},children:Object(E.jsx)(N.a,{variant:"contained",color:"secondary",onClick:()=>Ge(),children:"S\u1eeda \u0111\u1ed5i (f2)"})}):Object(E.jsxs)("div",{className:"instruction",style:{display:"flex",marginTop:"4.5px"},children:[Object(E.jsx)(N.a,{variant:"contained",color:"error",sx:{mr:2},onClick:()=>Ke(),children:"H\u1ee7y thay \u0111\u1ed5i (f1)"}),Object(E.jsx)(N.a,{variant:"contained",color:"primary",onClick:()=>qe(),children:"K\u1ebft th\xfac kh\xe1m (f4)"})]})]}),Object(E.jsxs)(Me.a,{item:!0,xs:7,children:[Object(E.jsxs)(B.a,{sx:{boxShadow:4,borderRadius:"20px",border:"2px solid blue",height:"230px",mb:"8px",overflow:"auto"},children:[Object(E.jsx)(D.a,{variant:"h6",sx:{color:"blue",mt:.6,mb:.6,fontWeight:"bolder",fontSize:"1.2rem",textAlign:"center"},children:"Th\xf4ng tin b\u1ec7nh nh\xe2n"}),Object(E.jsx)(B.a,{sx:{pl:2.8,pr:2.8,mt:1},children:ge?Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",mt:4},children:[Object(E.jsx)(w.a,{color:"inherit"}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i th\xf4ng tin b\u1ec7nh nh\xe2n, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:2,columnSpacing:{xs:1,sm:2,md:4},children:[Object(E.jsxs)(Me.a,{item:!0,xs:4,sx:{display:"inline-flex"},children:[Object(E.jsx)(Gt.a,{sx:{color:"tomato"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"M\xe3 BN: ".concat(x.patientCode||"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:5,sx:{display:"inline-flex"},children:[Object(E.jsx)(qt.a,{sx:{color:"tomato"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"H\u1ecd t\xean: ".concat(x.patientsName||"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:3,sx:{display:"inline-flex"},children:[!0===x.patientsGender?Object(E.jsx)($t.a,{sx:{color:"coral",fontSize:"27px"}}):Object(E.jsx)(tn.a,{sx:{color:"coral",fontSize:"27px"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"Gi\u1edbi t\xednh: ".concat(""!==x.patientsGender?!0===x.patientsGender?"Nam":"N\u1eef":"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:4,sx:{display:"inline-flex"},children:[Object(E.jsx)(Xt.a,{sx:{color:"tomato"}}),Object(E.jsxs)(D.a,{variant:"subtitle1",sx:{ml:1},children:["Ng\xe0y sinh: ",x.patientsDOB?Je()(x.patientsDOB).format("DD/MM/YYYY"):""]})]}),Object(E.jsxs)(Me.a,{item:!0,xs:5,sx:{display:"inline-flex"},children:[Object(E.jsx)(rn.a,{sx:{color:"tomato"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"Th\xe1ng tu\u1ed5i: ".concat(x.patientsMonthsOld||"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:3,sx:{display:"inline-flex"},children:[Object(E.jsx)(on.a,{sx:{color:"tomato"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"Sdt: ".concat(x.patientsPhone||"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:4,sx:{display:"inline-flex"},children:[Object(E.jsx)(un.a,{style:{color:"tomato",fontSize:"1.42rem",marginLeft:"2px"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:.8},children:"Chi\u1ec1u cao: ".concat(x.patientsHeight?x.patientsHeight+" cm":"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:4,sx:{display:"inline-flex"},children:[Object(E.jsx)(un.b,{style:{color:"tomato",fontSize:"1.42rem"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"C\xe2n n\u1eb7ng: ".concat(x.patientsWeight?x.patientsWeight+" kg":"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:4,sx:{display:"inline-flex"},children:[Object(E.jsx)(mn.a,{style:{color:"tomato",fontSize:"1.42rem"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"V\xf2ng \u0111\u1ea7u: ".concat(x.patientsHeadCircumference?x.patientsHeadCircumference+" cm":"")})]}),Object(E.jsxs)(Me.a,{item:!0,xs:12,sx:{display:"inline-flex"},children:[Object(E.jsx)(pn.a,{sx:{color:"tomato"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:1},children:"\u0110\u1ecba ch\u1ec9: ".concat(x.patientsAddress||"")})]}),V?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:12,children:Object(E.jsx)(B.a,{sx:{display:"flex",flexWrap:"wrap"},children:V.map(((e,t)=>Object(E.jsx)(D.a,{variant:"subtitle1",sx:{ml:.5,fontSize:"1.1rem",color:"mediumblue",fontWeight:"bolder"},children:"".concat(e.categoryContentQuestionName,": ").concat(e.categoryContentAnswer?"c\xf3":""," ").concat(null!==e.categoryContentNote?"".concat(e.categoryContentNote):"",", ")},t)))})})}):null]})})})]}),Object(E.jsxs)("div",{className:"container-content-examining",children:[se?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u k\u1ef3 kh\xe1m g\u1ea7n nh\u1ea5t, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):C?1===C.healthRecords.length&&null===C.healthRecords[0].medicalBookId?Object(E.jsx)(B.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:Object(E.jsx)(D.a,{variant:"h6",children:"B\u1ec7nh nh\xe2n kh\xf4ng c\xf3 k\u1ef3 kh\xe1m tr\u01b0\u1edbc"})}):Object(E.jsx)("div",{className:"content-examining",children:Object(E.jsx)(Vt,{prevDataExamining:C})}):null,A.categoryContents?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{className:"content-examining",children:Ce?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u s\u1ed5 kh\xe1m b\u1ec7nh, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):Object(E.jsx)(E.Fragment,{children:!0===A.newCategoryPre&&!0===A.isLock?Object(E.jsx)(B.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:Object(E.jsx)(D.a,{variant:"h6",children:"B\u1ec7nh nh\xe2n kh\xf4ng c\xf3 ti\u1ec1n c\u0103n \u0111ang \u0111\u01b0\u1ee3c theo d\xf5i \u1edf m\u1ee5c n\xe0y"})}):"tree"!==z.healthRecordsContentsType&&0===L.length&&!1===x.isContinueExam?A.categoryContents.map(((e,t)=>Object(E.jsxs)(B.a,{sx:null===e.categoryContentTitle?{marginTop:"30px"}:{},children:[Object(E.jsx)(D.a,{variant:"h6",sx:{fontWeight:"bolder",textAlign:"center",fontSize:"1.2rem",mb:.2},children:e.categoryContentTitle||""}),e.categoryContentQuestions.map(((n,o)=>Object(E.jsx)(B.a,{children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:0,children:[0===o?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentName})}),"check"===n.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(Me.a,{item:!0,xs:1,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(E.jsx)(Rt.a,{sx:{fontSize:"1.22rem",color:"gray"}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",margin:"auto",lineHeight:"1.6"},children:e.categoryContentCheck})]}),Object(E.jsx)(Me.a,{item:!0,xs:7,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",ml:.5},children:e.categoryContentText})})]}):Object(E.jsx)(Me.a,{item:!0,xs:8,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:e.categoryContentText})})]}):null,Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",alignItems:"center"},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontSize:"1.2rem"},children:n.categoryContentQuestionName})}),"check"===n.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:1,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",justifyContent:"center"},children:Object(E.jsx)(Qe.a,{disabled:!0===A.isLock,checked:!0===n.categoryContentAnswer,classes:{root:kt.root},color:"error",sx:{"& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem"}},onClick:()=>!0===x.editExamining&&!1===A.newCategoryPre||!0===x.backRegister&&!1===A.newCategoryPre?((e,t,n)=>{if(null===n){const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentAnswer=!0,Q(n),n.categoryContents[e].categoryContentQuestions[t].hasEdit=!0,mt(e,n.categoryContents[e].categoryContentOrder,n.categoryContents[e].categoryContentQuestions[t])}else if(!0===n){const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentAnswer=null,Q(n),n.categoryContents[e].categoryContentQuestions[t].hasEdit=!0,mt(e,n.categoryContents[e].categoryContentOrder,n.categoryContents[e].categoryContentQuestions[t])}})(t,o,n.categoryContentAnswer):((e,t,n)=>{if(null===n){const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentAnswer=!0,Q(n);const o=!0;Nt(n.categoryName,o,n.categoryContents[e].categoryContentQuestions[t],n.categoryContents[e].categoryContentQuestions[t].categoryContentQuestionOrder,n.categoryContents[e].categoryContentTitle)}else if(!0===n){const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentAnswer=!1,Q(n);const o=!0;Nt(n.categoryName,o,n.categoryContents[e].categoryContentQuestions[t],n.categoryContents[e].categoryContentQuestions[t].categoryContentQuestionOrder,n.categoryContents[e].categoryContentTitle)}else{const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentAnswer=!0,Q(n);const o=!0;Nt(n.categoryName,o,n.categoryContents[e].categoryContentQuestions[t],n.categoryContents[e].categoryContentQuestions[t].categoryContentQuestionOrder,n.categoryContents[e].categoryContentTitle)}})(t,o,n.categoryContentAnswer)})}),Object(E.jsx)(Me.a,{item:!0,xs:7,children:Object(E.jsx)("div",{className:"textfield-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0===A.isLock,style:{fontSize:"1.2rem"},onChange:e=>!0===x.editExamining&&!1===A.newCategoryPre||!0===x.backRegister&&!1===A.newCategoryPre?((e,t,n)=>{const o=n;yt.current&&clearInterval(yt.current),yt.current=setTimeout((()=>{const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentNote=o,Q(n),n.categoryContents[e].categoryContentQuestions[t].hasEdit=!0,mt(e,n.categoryContents[e].categoryContentOrder,n.categoryContents[e].categoryContentQuestions[t],o,!0)}),0)})(t,o,e.target.value):((e,t,n)=>{const o=n;yt.current&&clearInterval(yt.current),yt.current=setTimeout((()=>{const n={...A};n.categoryContents[e].categoryContentQuestions[t].categoryContentNote=o,Q(n),Nt(n.categoryName,!0,n.categoryContents[e].categoryContentQuestions[t],n.categoryContents[e].categoryContentQuestions[t].categoryContentQuestionOrder,n.categoryContents[e].categoryContentTitle,!0)}),0)})(t,o,e.target.value),defaultValue:n.categoryContentNote})},"question ".concat(o," - category ").concat(A.categoryOrder," - categoryPresOrder ").concat(z.categoryPresOrder," - categoryContentOrder ").concat(t," - isLock ").concat(z.isLock," - questionOrder ").concat(n.categoryContentQuestionOrder))})})]}):Object(E.jsx)(E.Fragment,{children:4===A.categoryOrder?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:8,children:Object(E.jsx)("div",{className:"textfield-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,disabled:!0===A.isLock,style:{fontSize:"1.2rem"},onChange:e=>!0===x.editExamining&&!1===A.newCategoryPre||!0===x.backRegister&&!1===A.newCategoryPre?ut(t,o,e.target.value):Ct(t,o,e.target.value),defaultValue:n.categoryContentNote})},"question ".concat(o," - category ").concat(A.categoryOrder," - categoryPresOrder ").concat(z.categoryPresOrder," - categoryContentOrder ").concat(t," - isLock ").concat(z.isLock," - questionOrder ").concat(n.categoryContentQuestionOrder))})})}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:8,children:Object(E.jsx)("div",{className:"textfield-for-answer",children:Object(E.jsx)("input",{type:"text",disabled:!0===A.isLock,className:"value-for-answer",onChange:e=>!0===x.editExamining&&!1===A.newCategoryPre||!0===x.backRegister&&!1===A.newCategoryPre?ut(t,o,e.target.value):Ct(t,o,e.target.value),defaultValue:n.categoryContentNote})},"question ".concat(o," - category ").concat(A.categoryOrder," - categoryPresOrder ").concat(z.categoryPresOrder," - isLock ").concat(z.isLock," - questionOrder ").concat(n.categoryContentQuestionOrder))})})})]})},"categoryContentQuestionName ".concat(o))))]},t))):"tree"===z.healthRecordsContentsType&&0===L.length&&!1===x.isContinueExam?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{variant:"h6",sx:{fontWeight:"bolder",textAlign:"center",fontSize:"1.2rem",mb:.2},children:"Kh\xe1m v\xe0 theo d\xf5i s\u1ee9c kh\u1ecfe \u0111\u1ecbnh k\u1ef3"}),Object(E.jsx)(rt.a,{component:ct.a,children:Object(E.jsxs)(nt.a,{stickyHeader:!0,children:[Object(E.jsx)(it.a,{children:Object(E.jsxs)(st.a,{sx:{"& th":{color:"rgba(96, 96, 96)",backgroundColor:"pink"}},children:[Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem",color:"black"},children:"K\u1ef3 kh\xe1m"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"Tr\u1ea1ng th\xe1i"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"Ng\xe0y kh\xe1m"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"B\xe1c s\u0129 kh\xe1m"}),Object(E.jsx)(at.a,{align:"left",sx:{fontSize:"0.9rem"},children:"K\u1ebft lu\u1eadn"})]})}),Object(E.jsx)(ot.a,{sx:{borderRadius:"0px"},children:z.categoryContents.map(((e,t)=>{return Object(E.jsxs)(st.a,{hover:!0,role:"checkbox",children:[Object(E.jsxs)(at.a,{align:"left",sx:{width:"158px"},children:[Object(E.jsx)(dn.a,{sx:{mr:.5,mb:.4,color:"dodgerblue"}}),e.examinationName]}),Object(E.jsx)(at.a,{align:"left",sx:{width:"144px"},children:(n=e.state,0===n?Object(E.jsx)("div",{className:"chipUnDoneExamms",children:Object(E.jsx)("p",{className:"chipLabel",children:"Ch\u01b0a th\u1ef1c hi\u1ec7n"})}):1===n?Object(E.jsx)("div",{className:"chipDoingExamms",children:Object(E.jsx)("p",{className:"chipLabel",children:"\u0110ang th\u1ef1c hi\u1ec7n"})}):Object(E.jsx)("div",{className:"chipDoneExamms",children:Object(E.jsx)("p",{className:"chipLabel",children:"\u0110\xe3 th\u1ef1c hi\u1ec7n"})}))}),Object(E.jsx)(at.a,{align:"left",sx:{width:"108px"},children:Je()(e.timeRegister).format("DD/MM/YYYY")}),Object(E.jsx)(at.a,{align:"left",sx:{width:"115px"},children:e.doctorFullName}),Object(E.jsx)(at.a,{align:"left",sx:{width:"auto"},children:e.conclusion})]},t);var n}))})]})})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{variant:"h6",sx:{fontWeight:"bolder",textAlign:"center",fontSize:"1.2rem",lineHeight:1,mt:1},children:H?H.healthRecordsName:""}),Object(E.jsxs)("div",{className:"health-record-content",children:[H?Object(E.jsx)(Dt.a,{sx:{p:0},children:H.categoryPatients.map(((e,t)=>Object(E.jsxs)("div",{children:[Object(E.jsx)(zt.a,{sx:{pt:"0px",pb:"0px",borderRadius:"8px",":hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}},onClick:()=>(e=>{M((t=>{const n=[...t];return n[e]=!n[e],n}))})(t),children:Object(E.jsxs)(B.a,{sx:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(Wt.a,{sx:{minWidth:"30px","& .MuiSvgIcon-fontSizeMedium":{fontSize:"1rem",color:"#2962ff",transform:!0===P[t]?"rotate(90deg)":"rotate(0deg)"}},children:Object(E.jsx)(Ut.a,{})}),Object(E.jsx)(Lt.a,{primary:e.categoryName,sx:{"& .MuiListItemText-primary":{fontSize:"1.25rem",fontWeight:"bolder",color:"deeppink"}}})]})}),Object(E.jsx)(Yt.a,{in:P[t],timeout:"auto",unmountOnExit:!0,children:e.categoryContents.map(((n,o)=>Object(E.jsxs)("div",{className:"header-health-record",style:{marginTop:"15px",marginBottom:"15px",border:"2px solid #00bcd4",borderRadius:"20px"},children:[Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontWeight:"bolder",textAlign:"center"},children:n.categoryContentTitle}),Object(E.jsx)("div",{className:"content-health-record",style:{padding:"10px"},children:Object(E.jsxs)(Me.a,{container:!0,rowSpacing:0,children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder"},children:n.categoryContentName})}),Object(E.jsxs)(Me.a,{item:!0,xs:3,sx:{border:"2px solid rgb(218,220,224)",borderRight:"0px",p:.7,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(E.jsx)(Rt.a,{sx:{fontSize:"1.2rem",color:"gray",mr:.4}}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",lineHeight:"1.6"},children:n.categoryContentCheck})]}),Object(E.jsx)(Me.a,{item:!0,xs:5,sx:{border:"2px solid rgb(218,220,224)",p:.7},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{color:"blue",fontWeight:"bolder",ml:.5},children:n.categoryContentText})}),n.categoryContentQuestions.map(((n,a)=>Object(E.jsxs)(B.a,{style:{display:"flex",width:"100%"},children:[Object(E.jsx)(Me.a,{item:!0,xs:4,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",alignItems:"center"},children:Object(E.jsx)(D.a,{variant:"subtitle1",sx:{fontSize:"1rem"},children:n.categoryContentQuestionName})}),"check"===n.categoryContentQuestionType?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{item:!0,xs:3,sx:{border:"2px solid rgb(218,220,224)",borderTop:"0px",borderRight:"0px",p:.5,display:"flex",justifyContent:"center"},children:Object(E.jsx)(Qe.a,{classes:{root:kt.root},checked:!0===n.categoryContentAnswer,disabled:!1===H.newMedicalBook,sx:{"& .MuiSvgIcon-fontSizeMedium":{fontSize:"1.2rem"}},color:"error",onClick:e=>((e,t,n,o)=>{if(null===o){const o={...L};o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentAnswer=!0,Y(o);const a=!1;Nt(o.categoryPatients[e].categoryName,a,o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n],o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentQuestionOrder,o.categoryPatients[e].categoryContents[t].categoryContentTitle)}else if(!0===o){const o={...L};o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentAnswer=!1,Y(o);const a=!1;Nt(o.categoryPatients[e].categoryName,a,o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n],o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentQuestionOrder,o.categoryPatients[e].categoryContents[t].categoryContentTitle)}else{const o={...L};o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentAnswer=!0,Y(o);const a=!1;Nt(o.categoryPatients[e].categoryName,a,o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n],o.categoryPatients[e].categoryContents[t].categoryContentQuestions[n].categoryContentQuestionOrder,o.categoryPatients[e].categoryContents[t].categoryContentTitle)}})(t,o,a,n.categoryContentAnswer)})}),Object(E.jsx)(Me.a,{item:!0,xs:5,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,defaultValue:n.categoryContentNote,disabled:!1===H.newMedicalBook,onChange:e=>vt(t,o,a,e.target.value)})},"current ".concat(e.currentHealthRecordsContent,"-").concat(a," examinationName ").concat(H.healthRecordsName))})})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Me.a,{item:!0,xs:8,children:Object(E.jsx)("div",{className:"note-for-answer",children:Object(E.jsx)("div",{className:"suggest-note",children:Object(E.jsx)(At.a,{className:"textarea-autosize",rows:1,defaultValue:n.categoryContentNote,disabled:!1===H.newMedicalBook,onChange:e=>vt(t,o,a,e.target.value)})},"current ".concat(e.currentHealthRecordsContent,"-").concat(a," examinationName ").concat(H.healthRecordsName))})})})]},"questionItem ".concat(a," healthRecordsName ").concat(z.healthRecordsName))))]})})]},o)))})]},"categoryPatients ".concat(t))))}):null,H&&null!==H.conclusion?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{className:"conclusion",style:{marginLeft:"16px",marginTop:"4px"},children:Object(E.jsx)(D.a,{variant:"h6",sx:{color:"blue",fontWeight:"bolder"},children:"K\u1ebft lu\u1eadn c\u1ee7a b\xe1c s\u0129: ".concat(H.conclusion)})})}):null]})]})})})}):null]})]})]})})}),Object(E.jsx)(Qt,{openModalCompleteExamining:re,setOpenModalCompleteExamining:ie,handleCompleteExaminingForPantient:()=>{pe(!0),s.b.success("\u0110\xe3 k\u1ebft th\xfac kh\xe1m cho b\u1ec7nh nh\xe2n ".concat(x.patientsName),{toastId:"success1"}),f(e),y([]),S(!1),M([]),Q({}),W([]),Y([]),Z({}),ae(),U(),ee(),K(),_(),_e()},dataExaminingForConclusion:X,dataPantientInfo:x,predecessorToPrint:q}),Object(E.jsx)(F,{openAlertProcessingBackdrop:He,changeBackground:!0})]})},Cn=n(497),vn=n(498),Nn=n(499),wn=n(500),kn=n(502),In=n(522),Tn=n(319),Sn=n(191);const En="https://beknkpt2.dvtien.id.vn",Pn=()=>{const e=localStorage.getItem("jwt");return{headers:{Authorization:"Bearer ".concat(e)}}},Mn=async()=>{const e=Pn();return await I.a.get("".concat(En,"/api/UserAccount/GetUserAccounts"),e).then((function(e){return e.data})).catch((function(e){return e.response.status}))};var Bn=function(){const{user:e,loading:t}=Object(o.useContext)(R),n=Object(d.useHistory)(),[a,r]=Object(o.useState)({dateStart:"",dateEnd:""}),[i,s]=Object(o.useState)([]),[c,l]=Object(o.useState)(!1),h=Object(o.useRef)(null),p=async()=>{l(!0),await new Promise((e=>setTimeout(e,500)));const e=await(async e=>{const t=Pn();return await I.a.get("".concat(En,"/api/Admin/GetReportPatient?dateStart=").concat(e.dateStart,"&dateEnd=").concat(e.dateEnd),t).then((function(e){return e.data})).catch((function(e){return e.response.status}))})(a),t=e.map((e=>({patientId:e.patientId,fullName:e.fullName,dayExam:Je()(e.dayExam).format("DD/MM/YYYY"),gender:e.gender?"Nam":"N\u1eef",dayOfBirth:Je()(e.dayOfBirth).format("DD/MM/YYYY"),examName:e.examName,phone:e.phone,district:e.district,province:e.province,address:e.address})));s(t),l(!1)};return Object(o.useEffect)((()=>{!1===t&&e.isLogin&&"Admin"!==e.positionName&&n.push("/404")}),[t,e]),Object(o.useEffect)((()=>{""!==a.dateStart&&""!==a.dateEnd&&p()}),[a]),Object(E.jsxs)(ue.a,{maxWidth:"xl",sx:{mt:1},children:[Object(E.jsx)(B.a,{sx:{display:"flex",justifyContent:"center"},children:Object(E.jsx)(Ve.a,{dateAdapter:Ue.a,adapterLocale:"vi",children:Object(E.jsxs)(He.a,{components:["DatePicker"],children:[Object(E.jsx)(Ke.a,{label:"T\u1eeb ng\xe0y",format:"DD/MM/YYYY",disableFuture:!0,onChange:e=>(e=>{if(e){const t=e._d;h.current&&clearInterval(h.current),h.current=setTimeout((()=>{const e={...a};e.dateStart=Je()(t).format("YYYY-MM-DD"),r(e)}),200)}})(e)}),Object(E.jsx)(Ke.a,{label:"\u0110\u1ebfn ng\xe0y",format:"DD/MM/YYYY",disableFuture:!0,onChange:e=>(e=>{if(e){const t=e._d;h.current&&clearInterval(h.current),h.current=setTimeout((()=>{const e={...a};e.dateEnd=Je()(t).format("YYYY-MM-DD"),r(e)}),200)}})(e),minDate:Je()(a.dateStart)})]})})}),Object(E.jsx)(B.a,{sx:{height:600,width:"100%",mt:1.2},children:c?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"80%"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):0!==i.length?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(kn.a,{style:{fontSize:"18px"},localeText:In.a.components.MuiDataGrid.defaultProps.localeText,rows:i.map(((e,t)=>({...e,id:t+1}))),columns:[{field:"id",headerName:"STT",width:120,align:"left",headerAlign:"left"},{field:"fullName",headerName:"H\u1ecd t\xean",width:240,align:"left",headerAlign:"left"},{field:"dayExam",headerName:"Ng\xe0y kh\xe1m",width:180,align:"left",headerAlign:"left",type:"date"},{field:"gender",headerName:"Gi\u1edbi t\xednh",width:140,align:"left",headerAlign:"left"},{field:"dayOfBirth",headerName:"Ng\xe0y sinh",width:165,align:"left",headerAlign:"left",type:"date"},{field:"examName",headerName:"K\u1ef3 kh\xe1m",width:170,align:"left",headerAlign:"left"},{field:"phone",headerName:"\u0110i\u1ec7n tho\u1ea1i",width:170,type:"number",align:"left",headerAlign:"left"},{field:"district",headerName:"Qu\u1eadn/Huy\u1ec7n",width:185,align:"left",headerAlign:"left"},{field:"province",headerName:"T\u1ec9nh/Th\xe0nh ph\u1ed1",width:185,align:"left",headerAlign:"left"},{field:"address",headerName:"\u0110\u1ecba ch\u1ec9",width:700,align:"left",headerAlign:"left"}],pageSizeOptions:[1],components:{Toolbar:e=>{let{handleExportExcel:t}=e;return Object(E.jsxs)(Cn.a,{children:[Object(E.jsx)(vn.a,{sx:{fontSize:"16px"}}),Object(E.jsx)(Nn.a,{sx:{fontSize:"16px"}}),Object(E.jsx)(wn.a,{sx:{fontSize:"16px"}}),Object(E.jsx)(N.a,{variant:"text",startIcon:Object(E.jsx)(Tn.a,{}),onClick:t,sx:{fontSize:"16px"},children:"Xu\u1ea5t Excel"})]})}},componentsProps:{toolbar:{handleExportExcel:()=>{const e=i.map(((e,t)=>({STT:t+1,"H\u1ecd t\xean":e.fullName,"Ng\xe0y kh\xe1m":e.dayExam,"Gi\u1edbi t\xednh":e.gender,"Ng\xe0y sinh":e.dayOfBirth,"K\u1ef3 kh\xe1m":e.examName,"\u0110i\u1ec7n tho\u1ea1i":e.phone,"Qu\u1eadn/Huy\u1ec7n":e.district,"T\u1ec9nh/Th\xe0nh ph\u1ed1":e.province,"\u0110\u1ecba ch\u1ec9":e.address}))),t=Sn.a.json_to_sheet(e),n=Sn.a.book_new();Sn.a.book_append_sheet(n,t,"Data"),Sn.b(n,"Danh s\xe1ch b\u1ec7nh nh\xe2n kh\xe1m b\u1ec7nh t\u1eeb ".concat(Je()(a.dateStart).format("DD-MM-YYYY")," \u0111\u1ebfn ").concat(Je()(a.dateEnd).format("DD-MM-YYYY"),".xlsx"))}}},disableRowSelectionOnClick:!0,sx:{".MuiTablePagination-selectLabel":{marginBottom:"3px"},".MuiTablePagination-displayedRows":{marginBottom:"3px"}}})}):Object(E.jsx)("h5",{style:{textAlign:"center",color:"blue"},children:"H\xe3y ch\u1ecdn kho\u1ea3ng ng\xe0y kh\xe1m \u0111\u1ec3 l\u1ea5y d\u1eef li\u1ec7u th\u1ed1ng k\xea"})})]})};var Dn=function(e){const[t,n]=Object(o.useState)(!1),[a,r]=Object(o.useState)({userName:"",userFullName:"",userPassword:"123456",userEmail:"",userPosition:""}),i=(t,n)=>{n&&"backdropClick"===n||e.setOpenModalAddUser(!1)},c=async()=>{n(!0);const t=await(async e=>{const t=localStorage.getItem("jwt");return await I.a.post("".concat(T,"/api/UserAccount/AddUser"),e,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e})).catch((function(e){return e.response}))})(a);200===t.status?(s.b.success(t.data,{toastId:"AddUserSuccess"}),e.setReloadComponent(!0)):s.b.error(t.data,{toastId:"AddUserError"}),n(!1)};return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(h.a,{maxWidth:"xs",fullWidth:!0,open:e.openModalAddUser,onClose:(e,t)=>i(0,t),disableEscapeKeyDown:!0,children:t?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"100px",alignItems:"center"},children:Object(E.jsx)(w.a,{})})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(p.a,{sx:{m:0,p:1.4,fontWeight:"bolder",fontSize:"22px"},children:"T\u1ea1o t\xe0i kho\u1ea3n"}),Object(E.jsx)(g.a,{onClick:()=>i(),sx:{position:"absolute",right:5,top:7},children:Object(E.jsx)(m.a,{fontSize:"medium"})}),Object(E.jsxs)(u.a,{dividers:!0,children:[Object(E.jsx)(j.a,{label:"H\u1ecd t\xean",variant:"outlined",autoFocus:!0,sx:{width:"46ch",mb:2.5},onChange:e=>{return t=e.target.value,void r((e=>({...e,userFullName:t})));var t}}),Object(E.jsx)(Q.a,{options:[{id:"2",positionName:"B\xe1c s\u0129"},{id:"3",positionName:"Ti\u1ebfp nh\u1eadn"}],getOptionLabel:e=>e.positionName,renderOption:(e,t)=>Object(E.jsx)("li",{...e,children:t.positionName}),onChange:(e,t)=>((e,t)=>{r((e=>({...e,userPosition:t.id})))})(0,t),renderInput:e=>Object(E.jsx)(j.a,{...e,label:"V\u1ecb tr\xed"}),sx:{width:"45.95ch",mb:2.5}}),Object(E.jsx)(j.a,{label:"T\xean t\xe0i kho\u1ea3n",variant:"outlined",sx:{width:"46ch",mb:2.5},onChange:e=>{return t=e.target.value,void r((e=>({...e,userName:t})));var t}}),Object(E.jsx)(v.a,{spacing:2,direction:"column",children:Object(E.jsx)(N.a,{sx:{height:"6vh",width:"20ch"},variant:"contained",color:"success",style:{margin:"auto"},onClick:()=>c(),children:"T\u1ea1o t\xe0i kho\u1ea3n"})})]})]})})})},Fn=n(501),Rn=n(320);var An=function(){const{user:e,loading:t}=Object(o.useContext)(R),[n,a]=Object(o.useState)(!1),[r,i]=Object(o.useState)(!1),[c,l]=Object(o.useState)([]),[h,p]=Object(o.useState)(!1),[u,g]=Object(o.useState)(!1),[x,m]=Object(o.useState)(),j=Object(d.useHistory)(),b=async(e,t)=>{i(!0);if(200===(await(async(e,t)=>{const n=localStorage.getItem("jwt");return await I.a.put("".concat(T,"/api/UserAccount/EditIsActiveUser?userId=").concat(e,"&isActive=").concat(t),{},{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return e})).catch((function(e){return e.response}))})(t.userId,e.target.checked)).status){const n=(await Mn()).map((e=>{const t={userId:e.userId,userName:e.userName,userFullName:e.userFullName,userEmail:e.userEmail,positionName:e.positionName,userIsActive:e.userIsActive};return"Doctor"===e.positionName?t.positionName="B\xe1c s\u0129":"Nursing"===e.positionName&&(t.positionName="Ti\u1ebfp nh\u1eadn"),t}));l(n),s.b.success(!0===e.target.checked?"\u0110\xe3 v\xf4 hi\u1ec7u h\xf3a ng\u01b0\u1eddi d\xf9ng ".concat(t.userFullName):"\u0110\xe3 k\xedch ho\u1ea1t l\u1ea1i ng\u01b0\u1eddi d\xf9ng ".concat(t.userFullName))}i(!1)},f=[{field:"userName",headerName:"T\xean \u0111\u0103ng nh\u1eadp",width:240,align:"left",headerAlign:"left"},{field:"userFullName",headerName:"H\u1ecd t\xean",width:240,align:"left",headerAlign:"left"},{field:"userEmail",headerName:"Email",width:340,align:"left",headerAlign:"left"},{field:"positionName",headerName:"V\u1ecb tr\xed",width:200,align:"left",headerAlign:"left"},{field:"userIsActive",headerName:"Tr\u1ea1ng th\xe1i",width:165,align:"left",headerAlign:"left",renderCell:e=>e.row.userIsActive?Object(E.jsx)(Fn.a,{checked:!0,onChange:t=>b(t,e.row)}):Object(E.jsx)(Fn.a,{checked:!1,onChange:t=>b(t,e.row)})}],O=async()=>{i(!0);const e=(await Mn()).map((e=>{const t={userId:e.userId,userName:e.userName,userFullName:e.userFullName,userEmail:e.userEmail,positionName:e.positionName,userIsActive:e.userIsActive};return"Doctor"===e.positionName?t.positionName="B\xe1c s\u0129":"Nursing"===e.positionName&&(t.positionName="Ti\u1ebfp nh\u1eadn"),t}));l(e),i(!1),n&&a(!1)};return Object(o.useEffect)((()=>{O()}),[]),Object(o.useEffect)((()=>{n&&O()}),[n]),Object(o.useEffect)((()=>{!1===t&&e.isLogin&&"Admin"!==e.positionName&&j.push("/404")}),[t,e]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(ue.a,{maxWidth:"xl",sx:{mt:1},children:Object(E.jsx)(B.a,{sx:{height:600,width:"100%",mt:1.2},children:r?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(B.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%"},children:[Object(E.jsx)(w.a,{}),Object(E.jsx)(D.a,{variant:"subtitle1",sx:{mt:1},children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u, h\xe3y ch\u1edd m\u1ed9t ch\xfat..."})]})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{variant:"h5",sx:{textAlign:"center",mb:1,fontWeight:"bolder",color:"red"},children:"Danh s\xe1ch ng\u01b0\u1eddi d\xf9ng"}),Object(E.jsx)(kn.a,{style:{fontSize:"18px",marginLeft:"50px",marginRight:"50px"},localeText:In.a.components.MuiDataGrid.defaultProps.localeText,rows:c.map(((e,t)=>({...e,id:t+1}))),columns:f,pageSizeOptions:[1],components:{Toolbar:e=>{let{handleOpenModalAddUser:t}=e;return Object(E.jsxs)(Cn.a,{children:[Object(E.jsx)(vn.a,{sx:{fontSize:"16px"}}),Object(E.jsx)(Nn.a,{sx:{fontSize:"16px"}}),Object(E.jsx)(wn.a,{sx:{fontSize:"16px"}}),Object(E.jsx)(N.a,{variant:"text",startIcon:Object(E.jsx)(Rn.a,{}),onClick:t,sx:{fontSize:"16px"},children:"Th\xeam ng\u01b0\u1eddi d\xf9ng"})]})}},componentsProps:{toolbar:{handleOpenModalAddUser:()=>{p(!0)}}},onCellDoubleClick:e=>(e=>{m(e.row),g(!0)})(e),disableRowSelectionOnClick:!0,sx:{".MuiTablePagination-selectLabel":{marginBottom:"3px"},".MuiTablePagination-displayedRows":{marginBottom:"3px"}}})]})})}),Object(E.jsx)(Dn,{openModalAddUser:h,setOpenModalAddUser:p,setReloadComponent:a}),Object(E.jsx)(z,{dataUserInfo:x,setDataUserInfo:m,openModalChangeUserInfo:u,setOpenModalChangeUserInfo:g,setReloadComponent:a})]})};var Qn=e=>Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(c.a,{children:Object(E.jsxs)(d.Switch,{children:[Object(E.jsx)(d.Route,{exact:!0,path:"/",children:Object(E.jsx)(ge,{})}),Object(E.jsx)(d.Route,{path:"/login",children:Object(E.jsx)(Pe,{})}),Object(E.jsx)(he,{path:"/medicalregister",component:vt}),Object(E.jsx)(he,{path:"/doctor-examining",component:yn}),Object(E.jsx)(he,{path:"/remind-examining",component:St}),Object(E.jsx)(he,{path:"/dashboard",component:Bn}),Object(E.jsx)(he,{path:"/manage-user",component:An}),Object(E.jsxs)(d.Route,{path:"*",children:[Object(E.jsx)(pe,{})," "]})]})})});var zn=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(c.a,{children:[Object(E.jsx)("div",{className:"header-container",children:Object(E.jsx)(de,{})}),Object(E.jsx)("div",{className:"app-container",children:Object(E.jsx)(Qn,{})})]}),Object(E.jsx)(s.a,{position:"bottom-center",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})};var Wn=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,546)).then((t=>{let{getCLS:n,getFID:o,getFCP:a,getLCP:r,getTTFB:i}=t;n(e),o(e),a(e),r(e),i(e)}))};n(390);i.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(A,{children:Object(E.jsx)(zn,{})})}),document.getElementById("root")),Wn()}},[[391,1,2]]]);
//# sourceMappingURL=main.e411c900.chunk.js.map